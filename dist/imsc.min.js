var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(f,x){return Object.prototype.hasOwnProperty.call(f,x)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(f,x){for(var t=1;t<arguments.length;t++){var h=arguments[t];if(h)for(var p in h)$jscomp.owns(h,p)&&(f[p]=h[p])}return f};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,x,t){f!=Array.prototype&&f!=Object.prototype&&(f[x]=t.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(f,x,t,h){if(x){t=$jscomp.global;f=f.split(".");for(h=0;h<f.length-1;h++){var p=f[h];p in t||(t[p]={});t=t[p]}f=f[f.length-1];h=t[f];x=x(h);x!=h&&null!=x&&$jscomp.defineProperty(t,f,{configurable:!0,writable:!0,value:x})}};$jscomp.polyfill("Object.assign",function(f){return f||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(f){return f?f:function(f){var t=[],h;for(h in f)$jscomp.owns(f,h)&&t.push([h,f[h]]);return t}},"es8","es3");
$jscomp.polyfill("Math.sign",function(f){return f?f:function(f){f=Number(f);return 0===f||isNaN(f)?f:0<f?1:-1}},"es6","es3");
(function(f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=f()})(function(){return function(){function f(x,t,h){function p(v,J){if(!t[v]){if(!x[v]){var b="function"==typeof require&&require;if(!J&&b)return b(v,!0);if(l)return l(v,!0);J=Error("Cannot find module '"+v+"'");throw J.code="MODULE_NOT_FOUND",J;}J=
t[v]={exports:{}};x[v][0].call(J.exports,function(b){return p(x[v][1][b]||b)},J,J.exports,f,x,t,h)}return t[v].exports}for(var l="function"==typeof require&&require,v=0;v<h.length;v++)p(h[v]);return p}return f}()({1:[function(f,x,t){(function(h,f,l,v,t){function p(a,c){var d=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!d&&c&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=c);else if(d&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],
a.contents)for(var b=0;b<a.contents.length;b++)p(a.contents[b],d||c)}function b(a){if("contents"in a){var c="styleAttrs"in a?a.styleAttrs[v.byName.ruby.qname]:null;c="span"===a.kind&&("container"===c||"textContainer"===c||"baseContainer"===c);for(var d=a.contents.length-1;0<=d;d--)!c||"styleAttrs"in a.contents[d]&&v.byName.ruby.qname in a.contents[d].styleAttrs?b(a.contents[d]):delete a.contents[d]}}function e(a,c,d,b){var k=b&&"seq"===b.timeContainer,I=0;b&&(I=k&&d?d.end:b.begin);c.begin=c.explicit_begin?
c.explicit_begin+I:I;d=c.begin;b=null;for(var g in c.sets)c.sets.hasOwnProperty(g)&&(e(a,c.sets[g],b,c),d="seq"===c.timeContainer?c.sets[g].end:Math.max(d,c.sets[g].end),b=c.sets[g]);if("contents"in c)for(var G in c.contents)c.contents.hasOwnProperty(G)&&(e(a,c.contents[G],b,c),d="seq"===c.timeContainer?c.contents[G].end:Math.max(d,c.contents[G].end),b=c.contents[G]);else d=k?c.begin:Number.POSITIVE_INFINITY;c.end=null!==c.explicit_end&&null!==c.explicit_dur?Math.min(c.begin+c.explicit_dur,I+c.explicit_end):
null===c.explicit_end&&null!==c.explicit_dur?c.begin+c.explicit_dur:null!==c.explicit_end&&null===c.explicit_dur?I+c.explicit_end:d;delete c.explicit_begin;delete c.explicit_dur;delete c.explicit_end;a._registerEvent(c)}function w(a){this.node=a}function g(){this.events=[];this.head=new n;this.body=null}function n(){this.styling=new E;this.layout=new K}function E(){this.styles={};this.initials={}}function A(){this.styleRefs=this.styleAttrs=this.id=null}function x(){this.styleAttrs=null}function K(){this.regions=
{}}function y(a,c){this.kind="image";this.src=a;this.type=c}function M(a){this.id=a}function a(a){this.regionID=a}function k(a){this.styleAttrs=a}function d(a){this.sets=a}function c(a){this.contents=a}function C(a,c,d){this.explicit_begin=a;this.explicit_end=c;this.explicit_dur=d}function m(){this.kind="body"}function R(){this.kind="div"}function D(){this.kind="p"}function r(){this.kind="span"}function u(){this.kind="span"}function F(){this.kind="br"}function O(){}function U(){}function V(a){var c=
null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(c=a.value||null);return c}function B(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function Q(a,c){var d={};if(null!==a)for(var b in a.attributes)if(a.attributes.hasOwnProperty(b)){var k=a.attributes[b].uri+" "+a.attributes[b].local,e=v.byQName[k];if(void 0!==e){var g=e.parse(a.attributes[b].value);null!==g?(d[k]=g,e===v.byName.zIndex&&N(c,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):
L(c,"Cannot parse styling attribute "+k+" --\x3e "+a.attributes[b].value)}}return d}function P(a,c,d){for(var b in a.attributes)if(a.attributes.hasOwnProperty(b)&&a.attributes[b].uri===c&&a.attributes[b].local===d)return a.attributes[b].value;return null}function Z(a,c){a=P(a,l.ns_tts,"extent");if(null===a)return null;var d=a.split(" ");if(2!==d.length)return N(c,"Malformed extent (ignoring)"),null;a=t.parseLength(d[0]);d=t.parseLength(d[1]);return d&&a?{h:d,w:a}:(N(c,"Malformed extent values (ignoring)"),
null)}function S(a,c,d){var b=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,k=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,e=/^(\d+(?:\.\d+)?)t$/,g=/^(\d+(?:\.\d+)?)ms$/,I=/^(\d+(?:\.\d+)?)s$/,l=/^(\d+(?:\.\d+)?)h$/,G=/^(\d+(?:\.\d+)?)m$/,m,w=null;null!==(m=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==c&&(w=parseFloat(m[1])/c):null!==(m=e.exec(d))?null!==a&&(w=parseFloat(m[1])/a):null!==(m=g.exec(d))?w=parseFloat(m[1])/1E3:null!==(m=I.exec(d))?w=parseFloat(m[1]):null!==(m=l.exec(d))?w=3600*parseFloat(m[1]):null!==(m=G.exec(d))?
w=60*parseFloat(m[1]):null!==(m=b.exec(d))?w=3600*parseInt(m[1])+60*parseInt(m[2])+parseFloat(m[3]):null!==(m=k.exec(d))&&null!==c&&(w=3600*parseInt(m[1])+60*parseInt(m[2])+parseInt(m[3])+(null===m[4]?0:parseInt(m[4])/c));return w}function W(a,c,d){for(;0<c.styleRefs.length;){var b=c.styleRefs.pop();b in a.styles?(W(a,a.styles[b],d),T(a.styles[b].styleAttrs,c.styleAttrs)):L(d,"Non-existant style id referenced")}}function X(a,c,d,b){for(var k=c.length-1;0<=k;k--){var e=c[k];e in a.styles?T(a.styles[e].styleAttrs,
d):L(b,"Non-existant style id referenced")}}function T(a,c){for(var d in a)!a.hasOwnProperty(d)||d in c||(c[d]=a[d])}function N(a,c){if(a&&a.warn&&a.warn(c))throw c;}function L(a,c){if(a&&a.error&&a.error(c))throw c;}function H(a,c){a&&a.fatal&&a.fatal(c);throw c;}function Y(a,c){for(var d=0,b=a.length-1,k;d<=b;){k=Math.floor((d+b)/2);var e=a[k];if(e<c)d=k+1;else if(e>c)b=k-1;else return{found:!0,index:k}}return{found:!1,index:d}}h.fromXML=function(a,c,d){var k=f.parser(!0,{xmlns:!0}),q=[],C=[],I=
[],h=0,z=null;k.onclosetag=function(a){if(q[0]instanceof O)null!==z.head&&null!==z.head.styling&&X(z.head.styling,q[0].styleRefs,q[0].styleAttrs,c),delete q[0].styleRefs;else if(q[0]instanceof E)for(var b in q[0].styles)q[0].styles.hasOwnProperty(b)&&W(q[0],q[0].styles[b],c);else if(q[0]instanceof D||q[0]instanceof r){if(1<q[0].contents.length){a=[q[0].contents[0]];for(b=1;b<q[0].contents.length;b++)q[0].contents[b]instanceof u&&a[a.length-1]instanceof u?a[a.length-1].text+=q[0].contents[b].text:
a.push(q[0].contents[b]);q[0].contents=a}q[0]instanceof r&&1===q[0].contents.length&&q[0].contents[0]instanceof u&&(q[0].text=q[0].contents[0].text,delete q[0].contents)}else if(q[0]instanceof w)if(q[0].node.uri===l.ns_tt&&"metadata"===q[0].node.local)h--;else if(0<h&&d&&"onCloseTag"in d)d.onCloseTag();I.shift();C.shift();q.shift()};k.ontext=function(a){if(void 0!==q[0])if(q[0]instanceof r||q[0]instanceof D){if(q[0]instanceof r){var b=q[0].styleAttrs[v.byName.ruby.qname];if("container"===b||"textContainer"===
b||"baseContainer"===b)return}b=new u;b.initFromText(z,q[0],a,C[0],I[0],c);q[0].contents.push(b)}else if(q[0]instanceof w&&0<h&&d&&"onText"in d)d.onText(a)};k.onopentag=function(a){function b(a){l.ttaf_map[a.uri]&&(a.uri=l.ttaf_map[a.uri])}var k=a.attributes["xml:space"];k?I.unshift(k.value):0===I.length?I.unshift("default"):I.unshift(I[0]);(k=a.attributes["xml:lang"])?C.unshift(k.value):0===C.length?C.unshift(""):C.unshift(C[0]);b(a);if(a.attributes)for(var e in a.attributes)a.attributes.hasOwnProperty(e)&&
b(a.attributes[e]);if(a.uri===l.ns_tt)if("tt"===a.local)null!==z&&H(c,"Two <tt> elements at ("+this.line+","+this.column+")"),z=new g,z.initFromNode(a,C[0],c),q.unshift(z);else if("head"===a.local)q[0]instanceof g||H(c,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),q.unshift(z.head);else if("styling"===a.local)q[0]instanceof n||H(c,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),q.unshift(z.head.styling);else if("style"===a.local)if(q[0]instanceof
E){var f=new A;f.initFromNode(a,c);f.id?z.head.styling.styles[f.id]=f:L(c,"<style> element missing @id attribute");q.unshift(f)}else q[0]instanceof O?(f=new A,f.initFromNode(a,c),T(f.styleAttrs,q[0].styleAttrs),q.unshift(f)):H(c,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===a.local)if(q[0]instanceof E){e=new x;e.initFromNode(a,c);for(f in e.styleAttrs)e.styleAttrs.hasOwnProperty(f)&&(z.head.styling.initials[f]=e.styleAttrs[f]);q.unshift(e)}else H(c,
"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===a.local)q[0]instanceof n||H(c,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),q.unshift(z.head.layout);else if("region"===a.local)q[0]instanceof K||H(c,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),f=new O,f.initFromNode(z,a,C[0],c),!f.id||f.id in z.head.layout.regions?L(c,"Ignoring <region> with duplicate or missing @id at "+this.line+
","+this.column+")"):z.head.layout.regions[f.id]=f,q.unshift(f);else if("body"===a.local)q[0]instanceof g||H(c,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==z.body&&H(c,"Second <body> element at "+this.line+","+this.column+")"),f=new m,f.initFromNode(z,a,C[0],c),z.body=f,q.unshift(f);else if("div"===a.local){q[0]instanceof R||q[0]instanceof m||H(c,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");f=new R;f.initFromNode(z,q[0],a,
C[0],c);if(e=f.styleAttrs[v.byName.backgroundImage.qname])f.contents.push(new y(e)),delete f.styleAttrs[v.byName.backgroundImage.qname];q[0].contents.push(f);q.unshift(f)}else"image"===a.local?(q[0]instanceof R||H(c,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),f=new y,f.initFromNode(z,q[0],a,C[0],c),q[0].contents.push(f),q.unshift(f)):"p"===a.local?(q[0]instanceof R||H(c,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),f=new D,f.initFromNode(z,
q[0],a,C[0],c),q[0].contents.push(f),q.unshift(f)):"span"===a.local?(q[0]instanceof r||q[0]instanceof D||H(c,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),f=new r,f.initFromNode(z,q[0],a,C[0],I[0],c),q[0].contents.push(f),q.unshift(f)):"br"===a.local?(q[0]instanceof r||q[0]instanceof D||H(c,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),f=new F,f.initFromNode(z,q[0],a,C[0],c),q[0].contents.push(f),q.unshift(f)):"set"===a.local?
(q[0]instanceof r||q[0]instanceof D||q[0]instanceof R||q[0]instanceof m||q[0]instanceof O||q[0]instanceof F||H(c,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),f=new U,f.initFromNode(z,q[0],a,c),q[0].sets.push(f),q.unshift(f)):q.unshift(new w(a));else q.unshift(new w(a));if(q[0]instanceof w)if(a.uri===l.ns_tt&&"metadata"===a.local)h++;else if(0<h&&d&&"onOpenTag"in d){f=[];for(var G in a.attributes)a.attributes.hasOwnProperty(G)&&(f[a.attributes[G].uri+
" "+a.attributes[G].local]={uri:a.attributes[G].uri,local:a.attributes[G].local,value:a.attributes[G].value});d.onOpenTag(a.uri,a.local,f)}};k.write(a).close();delete z.head.styling.styles;a=!1;for(var G in z.head.layout.regions)if(z.head.layout.regions.hasOwnProperty(G)){a=!0;break}a||(G=O.prototype.createDefaultRegion(z,c),z.head.layout.regions[G.id]=G);for(var t in z.head.layout.regions)z.head.layout.regions.hasOwnProperty(t)&&e(z,z.head.layout.regions[t],null,null);z.body&&e(z,z.body,null,null);
z.body&&b(z.body);z.body&&p(z.body);return z};g.prototype.initFromNode=function(a,c,d){var b=P(a,l.ns_ttp,"cellResolution"),k=15;var e=32;null!==b&&(b=/(\d+) (\d+)/.exec(b),null!==b?(e=parseInt(b[1]),k=parseInt(b[2])):N(d,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new t.ComputedLength(0,1/k),w:new t.ComputedLength(1/e,0)};k=P(a,l.ns_ttp,"frameRate");b=30;null!==k&&(e=/(\d+)/.exec(k),null!==e?b=parseInt(e[1]):N(d,"Malformed frame rate attribute (using initial value instead)"));
e=P(a,l.ns_ttp,"frameRateMultiplier");var g=1;null!==e&&(e=/(\d+) (\d+)/.exec(e),null!==e?g=parseInt(e[1])/parseInt(e[2]):N(d,"Malformed frame rate multiplier attribute (using initial value instead)"));b*=g;g=1;e=P(a,l.ns_ttp,"tickRate");null===e?null!==k&&(g=b):(e=/(\d+)/.exec(e),null!==e?g=parseInt(e[1]):N(d,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=b;this.tickRate=g;e=P(a,l.ns_ittp,"aspectRatio");null===e&&(e=P(a,l.ns_ttp,"displayAspectRatio"));k=null;
null!==e&&(b=/(\d+)\s+(\d+)/.exec(e),null!==b?(e=parseInt(b[1]),b=parseInt(b[2]),0!==e&&0!==b?k=e/b:L(d,"Illegal aspectRatio values (ignoring)")):L(d,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=k;k=P(a,l.ns_ttp,"timeBase");null!==k&&"media"!==k&&H(d,"Unsupported time base");a=Z(a,d);null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||H(d,"Extent on TT must be in px or absent"),this.pxLength={h:new t.ComputedLength(0,1/a.h.value),w:new t.ComputedLength(1/a.w.value,
0)});this.dimensions={h:new t.ComputedLength(0,1),w:new t.ComputedLength(1,0)};this.lang=c};g.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var c=Y(this.events,a.begin);c.found||this.events.splice(c.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(c=Y(this.events,a.end),c.found||this.events.splice(c.index,0,a.end))}};g.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};g.prototype.getMediaTimeEvents=function(){return this.events};A.prototype.initFromNode=
function(a,c){this.id=V(a);this.styleAttrs=Q(a,c);this.styleRefs=B(a)};x.prototype.initFromNode=function(a,c){this.styleAttrs={};for(var d in a.attributes)!a.attributes.hasOwnProperty(d)||a.attributes[d].uri!==l.ns_itts&&a.attributes[d].uri!==l.ns_ebutts&&a.attributes[d].uri!==l.ns_tts||(this.styleAttrs[a.attributes[d].uri+" "+a.attributes[d].local]=a.attributes[d].value)};y.prototype.initFromNode=function(c,b,e,g,m){(this.src="src"in e.attributes?e.attributes.src.value:null)||L(m,"Invalid image@src attribute");
(this.type="type"in e.attributes?e.attributes.type.value:null)||L(m,"Invalid image@type attribute");k.prototype.initFromNode.call(this,c,b,e,m);C.prototype.initFromNode.call(this,c,b,e,m);d.prototype.initFromNode.call(this,c,b,e,m);a.prototype.initFromNode.call(this,c,b,e,m);this.lang=g};M.prototype.initFromNode=function(a,c,d,b){this.id=V(d)};a.prototype.initFromNode=function(a,c,d,b){this.regionID=d&&"region"in d.attributes?d.attributes.region.value:""};k.prototype.initFromNode=function(a,c,d,b){this.styleAttrs=
Q(d,b);null!==a.head&&null!==a.head.styling&&X(a.head.styling,B(d),this.styleAttrs,b)};d.prototype.initFromNode=function(a,c,d,b){this.sets=[]};c.prototype.initFromNode=function(a,c,d,b){this.contents=[]};C.prototype.initFromNode=function(a,c,d,b){c=null;d&&"begin"in d.attributes&&(c=S(a.tickRate,a.effectiveFrameRate,d.attributes.begin.value),null===c&&N(b,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var k=null;d&&"dur"in d.attributes&&(k=S(a.tickRate,a.effectiveFrameRate,d.attributes.dur.value),
null===k&&N(b,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var e=null;d&&"end"in d.attributes&&(e=S(a.tickRate,a.effectiveFrameRate,d.attributes.end.value),null===e&&N(b,"Malformed end value (ignoring)"));this.explicit_begin=c;this.explicit_end=e;this.explicit_dur=k;(a=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?b="seq":(L(b,"Illegal value of timeContainer (assuming 'par')"),b="par"):b="par";this.timeContainer=b};m.prototype.initFromNode=
function(b,e,g,m){k.prototype.initFromNode.call(this,b,null,e,m);C.prototype.initFromNode.call(this,b,null,e,m);d.prototype.initFromNode.call(this,b,null,e,m);a.prototype.initFromNode.call(this,b,null,e,m);c.prototype.initFromNode.call(this,b,null,e,m);this.lang=g};R.prototype.initFromNode=function(b,e,g,m,f){k.prototype.initFromNode.call(this,b,e,g,f);C.prototype.initFromNode.call(this,b,e,g,f);d.prototype.initFromNode.call(this,b,e,g,f);a.prototype.initFromNode.call(this,b,e,g,f);c.prototype.initFromNode.call(this,
b,e,g,f);this.lang=m};D.prototype.initFromNode=function(b,e,g,m,f){k.prototype.initFromNode.call(this,b,e,g,f);C.prototype.initFromNode.call(this,b,e,g,f);d.prototype.initFromNode.call(this,b,e,g,f);a.prototype.initFromNode.call(this,b,e,g,f);c.prototype.initFromNode.call(this,b,e,g,f);this.lang=m};r.prototype.initFromNode=function(b,e,g,m,f,l){k.prototype.initFromNode.call(this,b,e,g,l);C.prototype.initFromNode.call(this,b,e,g,l);d.prototype.initFromNode.call(this,b,e,g,l);a.prototype.initFromNode.call(this,
b,e,g,l);c.prototype.initFromNode.call(this,b,e,g,l);this.space=f;this.lang=m};u.prototype.initFromText=function(a,c,d,b,e,k){C.prototype.initFromNode.call(this,a,c,null,k);this.text=d;this.space=e;this.lang=b};F.prototype.initFromNode=function(c,d,b,e,k){a.prototype.initFromNode.call(this,c,d,b,k);C.prototype.initFromNode.call(this,c,d,b,k);this.lang=e};O.prototype.createDefaultRegion=function(a,c){var d=new O;d.id="";k.prototype.initFromNode.call(d,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",
value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",
ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},c);d.sets=[];C.call(d,0,Number.POSITIVE_INFINITY,null);this.lang=a.xmllang;return d};O.prototype.initFromNode=function(a,
c,b,e){M.prototype.initFromNode.call(this,a,null,c,e);C.prototype.initFromNode.call(this,a,null,c,e);d.prototype.initFromNode.call(this,a,null,c,e);this.styleAttrs=Q(c,e);this.styleRefs=B(c);this.lang=b};U.prototype.initFromNode=function(a,c,d,b){C.prototype.initFromNode.call(this,a,c,d,b);a=Q(d,b);this.value=this.qname=null;for(var e in a)if(a.hasOwnProperty(e)){if(this.qname){L(b,"More than one style specified on set");break}this.qname=e;this.value=a[e]}}})("undefined"===typeof t?this.imscDoc={}:
t,"undefined"===typeof sax?f("sax"):sax,"undefined"===typeof imscNames?f("./names"):imscNames,"undefined"===typeof imscStyles?f("./styles"):imscStyles,"undefined"===typeof imscUtils?f("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7,sax:void 0}],2:[function(f,x,t){(function(f,p,l,v){function h(a){var b={};a=Object.entries(a);for(var d in a)if(a.hasOwnProperty(d)){var c=v.parseColor(a[d][0]),e=v.parseColor(a[d][1]);c&&e&&(b[c.toString()]=e)}return b}function t(a,k,d,c){if("region"===d.kind){var f=
document.createElement("div");f.style.position="absolute"}else if("body"===d.kind)f=document.createElement("div");else if("div"===d.kind)f=document.createElement("div");else if("image"===d.kind){if(f=document.createElement("img"),null!==a.imgResolver&&null!==d.src){var m=a.imgResolver(d.src,f);m&&(f.src=m);f.height=a.regionH;f.width=a.regionW}}else if("p"===d.kind)f=document.createElement("p");else if("span"===d.kind)if("container"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("ruby"),
a.ruby=!0;else if("base"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rb");else if("text"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rt");else if("baseContainer"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rbc");else if("textContainer"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rtc");else{if("delimiter"===d.styleAttrs[l.byName.ruby.qname])return;f=document.createElement("span")}else"br"===d.kind&&(f=document.createElement("br"));
if(f){!d.lang||"region"!==d.kind&&d.lang===c.lang||(f.lang=d.lang);k.appendChild(f);f.style.margin="0";if("region"===d.kind)if(k=d.styleAttrs[l.byName.writingMode.qname],"lrtb"===k||"lr"===k)a.ipd="lr",a.bpd="tb";else if("rltb"===k||"rl"===k)a.ipd="rl",a.bpd="tb";else if("tblr"===k)a.ipd="tb",a.bpd="lr";else{if("tbrl"===k||"tb"===k)a.ipd="tb",a.bpd="rl"}else"p"===d.kind&&"tb"===a.bpd&&(a.ipd="ltr"===d.styleAttrs[l.byName.direction.qname]?"lr":"rl");for(var n in E)E.hasOwnProperty(n)&&(k=E[n],c=d.styleAttrs[k.qname],
void 0!==c&&null!==k.map&&k.map(a,f,d,c));n=f;(k=d.styleAttrs[l.byName.linePadding.qname])&&!k.isZero()&&(c=k.multiply(k.toUsedLength(a.w,a.h),a.options.sizeAdjust),0<c&&(c=Math.ceil(c)+"px","tb"===a.bpd?(n.style.paddingLeft=c,n.style.paddingRight=c):(n.style.paddingTop=c,n.style.paddingBottom=c),a.removePaddingElement=n,a.lp=k));(k=d.styleAttrs[l.byName.multiRowAlign.qname])&&"auto"!==k&&(n=document.createElement("span"),n.style.display="inline-block",n.style.textAlign=k,f.appendChild(n),a.mra=k);
(k=d.styleAttrs[l.byName.rubyReserve.qname])&&"none"!==k[0]&&(a.rubyReserve=k);d.styleAttrs[l.byName.fillLineGap.qname]&&(a.flg=!0);if("span"===d.kind&&d.text)if((k=d.styleAttrs[l.byName.textEmphasis.qname])&&"none"!==k.style&&(a.textEmphasis=!0),l.byName.textCombine.qname in d.styleAttrs&&"all"===d.styleAttrs[l.byName.textCombine.qname])f.textContent=d.text,k&&g(a,f,d,k);else for(c="",m=0;m<d.text.length;m++){c+=d.text.charAt(m);var h=d.text.charCodeAt(m);if(55296>h||56319<h||m===d.text.length-1)h=
document.createElement("span"),h.textContent=c,k&&g(a,h,d,k),f.appendChild(h),c="",h._isd_element=d}for(var r in d.contents)d.contents.hasOwnProperty(r)&&t(a,n,d.contents[r],d);r=[];if((a.lp||a.mra||a.flg||a.ruby||a.textEmphasis||a.rubyReserve)&&"p"===d.kind){w(a,n,r,null);if(a.rubyReserve){for(k=0;k<r.length;k++){c=document.createElement("ruby");m=document.createElement("rb");m.textContent="\u200b";c.appendChild(m);var u=a.rubyReserve[1].toUsedLength(a.w,a.h)+"px";"both"===a.rubyReserve[0]||"outside"===
a.rubyReserve[0]&&1==r.length?(m=document.createElement("rtc"),m.style[K]=x?"after":"under",m.textContent="\u200b",m.style.fontSize=u,h=document.createElement("rtc"),h.style[K]=x?"before":"over",h.textContent="\u200b",h.style.fontSize=u,c.appendChild(m),c.appendChild(h)):(m=document.createElement("rtc"),m.textContent="\u200b",m.style.fontSize=u,m.style[K]="after"===a.rubyReserve[0]||"outside"===a.rubyReserve[0]&&0<k?x?"after":"tb"===a.bpd||"rl"===a.bpd?"under":"over":x?"before":"tb"===a.bpd||"rl"===
a.bpd?"over":"under",c.appendChild(m));m=null;for(h=0;h<r[k].rbc.length;h++)if("ruby"===r[k].rbc[h].localName){m=r[k].rbc[h];for(h=0;h<m.style.length;h++)c.style.setProperty(m.style.item(h),m.style.getPropertyValue(m.style.item(h)));break}m=m||r[k].elements[0].node;m.parentElement.insertBefore(c,m)}a.rubyReserve=null}if(a.ruby||a.rubyReserve){for(k=0;k<r.length;k++)for(c=0;c<r[k].rbc.length;c++)r[k].rbc[c].style[K]||(r[k].rbc[c].style[K]=x?0===k?"before":"after":"tb"===a.bpd?0===k?"over":"under":
"rl"===a.bpd?0===k?"over":"under":0===k?"under":"over");a.ruby=null}if(a.textEmphasis){for(k=0;k<r.length;k++)for(c=0;c<r[k].te.length;c++)r[k].te[c].style[M]&&"none"!==r[k].te[c].style[M]||(r[k].te[c].style[M]="tb"===a.bpd?0===k?"left over":"left under":"rl"===a.bpd?0===k?"right under":"left under":0===k?"left under":"right under");a.textEmphasis=null}if(a.mra){for(k=0;k<r.length-1;k++)m=r[k].elements.length,0!==m&&!1===r[k].br&&(c=document.createElement("br"),m=r[k].elements[m-1].node,m.parentElement.insertBefore(c,
m.nextSibling));a.mra=null}if(a.lp){k=a.lp.multiply(a.lp.toUsedLength(a.w,a.h),a.options.sizeAdjust);for(c=0;c<r.length;c++){m=r[c].elements[r[c].start_elem];h=r[c].elements[r[c].end_elem];u=Math.ceil(k)+"px";var v="-"+Math.ceil(k)+"px";0!==r[c].elements.length&&("lr"===a.ipd?m.node.style.paddingLeft=u:"rl"===a.ipd?(m.node.style.borderRightColor=m.bgcolor||"#00000000",m.node.style.borderRightStyle="solid",m.node.style.borderRightWidth=u,m.node.style.marginRight=v):"tb"===a.ipd&&(m.node.style.borderTopColor=
m.bgcolor||"#00000000",m.node.style.borderTopStyle="solid",m.node.style.borderTopWidth=u,m.node.style.marginTop=v),"lr"===a.ipd?h.node.style.paddingRight=u:"rl"===a.ipd?(h.node.style.borderLeftColor=h.bgcolor||"#00000000",h.node.style.borderLeftStyle="solid",h.node.style.borderLeftWidth=u,h.node.style.marginLeft=v):"tb"===a.ipd&&(h.node.style.borderBottomColor=h.bgcolor||"#00000000",h.node.style.borderBottomStyle="solid",h.node.style.borderBottomWidth=u,h.node.style.marginBottom=v))}"tb"===a.bpd?
(a.removePaddingElement.style.paddingLeft=0,a.removePaddingElement.style.paddingRight=0):(a.removePaddingElement.style.paddingTop=0,a.removePaddingElement.style.paddingBottom=0);a.lp=null}if(a.flg){c=e(n.getBoundingClientRect(),a);k=c.before;c=c.after;m=n;h=Math.sign(c-k);for(u=0;u<=r.length;u++){v=0;var p=0===u?k:u===r.length?c:Math.abs(r[u].end-r[u].start)>Math.abs(r[u-1].end-r[u-1].start)?r[u].before:r[u-1].after+v;var A;if(0<u){for(A=0;A<r[u-1].elements.length;A++)if(null!==r[u-1].elements[A].bgcolor){var y=
r[u-1].elements[A];0>h*(y.after-p)&&(y=Math.abs(p-y.after),y>v&&(v=y))}var B=m.getElementsByTagName("span")[u];if(r[u]&&B.childElementCount!=r[u].elements.length)for(A=0;A<r[u-1].elements.length;A++)B=r[u-1].elements[A],y=v+"px solid "+B.bgcolor,"lr"===a.bpd?B.node.style.borderRight=y:"rl"===a.bpd?B.node.style.borderLeft=y:"tb"===a.bpd&&(B.node.style.borderBottom=y);else""==B.style.borderBottom&&("lr"===a.bpd?B.style.paddingRight=v+"px":"rl"===a.bpd?B.style.paddingLeft=v+"px":"tb"===a.bpd&&(B.style.paddingBottom=
v+"px"))}if(u<r.length){for(A=v=0;A<r[u].elements.length;A++)y=r[u].elements[A],null!==y.bgcolor&&0<h*(y.before-p)&&(y=Math.abs(y.before-p),y>v&&(v=y));B=m.getElementsByTagName("span")[u];if(B.childElementCount==r[u].elements.length)"lr"===a.bpd?B.style.paddingLeft=v+"px":"rl"===a.bpd?B.style.paddingRight=v+"px":"tb"===a.bpd&&(B.style.paddingTop=v+"px");else for(A=0;A<r[u].elements.length;A++)B=r[u].elements[A],y=v+"px solid "+B.bgcolor,"lr"===a.bpd?B.node.style.borderLeft=y:"rl"===a.bpd?B.node.style.borderRight=
y:"tb"===a.bpd&&(B.node.style.borderTop=y)}}a.flg=null}for(k=0;k<r.length;k++)for(c=r[k],m=1;m<c.elements.length;){h=c.elements[m-1].node;u=c.elements[m].node;if("SPAN"===h.tagName&&"SPAN"===u.tagName&&h._isd_element===u._isd_element){h.textContent+=u.textContent;for(v=0;v<u.style.length;v++)if(p=u.style[v],0<=p.indexOf("border")||0<=p.indexOf("padding"))h.style[p]=u.style[p];u.parentElement.removeChild(u);h=!0}else h=!1;h?c.elements.splice(m,1):m++}}"region"===d.kind&&"tb"===a.bpd&&a.enableRollUp&&
0<d.contents.length&&"after"===d.styleAttrs[l.byName.displayAlign.qname]&&(w(a,n,r,null),d=new b(""===d.id?"_":d.id,r),a.currentISDState[d.id]=d,a.previousISDState&&d.id in a.previousISDState&&0<a.previousISDState[d.id].plist.length&&1<d.plist.length&&d.plist[d.plist.length-2].text===a.previousISDState[d.id].plist[a.previousISDState[d.id].plist.length-1].text&&(a=f.firstElementChild,d=d.plist[d.plist.length-1].after-d.plist[d.plist.length-1].before,a.style.bottom="-"+d+"px",a.style.transition="transform 0.4s",
a.style.position="relative",a.style.transform="translateY(-"+d+"px)"))}else if(a=a.errorHandler,d="Error processing ISD element kind: "+d.kind,a&&a.error&&a.error(d))throw d;}function b(a,b){this.id=a;this.plist=b}function e(a,b){var d={before:null,after:null,start:null,end:null};"tb"===b.bpd?(d.before=a.top,d.after=a.bottom,"lr"===b.ipd?(d.start=a.left,d.end=a.right):(d.start=a.right,d.end=a.left)):"lr"===b.bpd?(d.before=a.left,d.after=a.right,d.start=a.top,d.end=a.bottom):"rl"===b.bpd&&(d.before=
a.right,d.after=a.left,d.start=a.top,d.end=a.bottom);return d}function w(a,b,d,c){if("rt"!==b.localName&&"rtc"!==b.localName)if(c=b.style.backgroundColor||c,0===b.childElementCount)if("span"===b.localName||"rb"===b.localName){var k=b.getBoundingClientRect();if(0!==k.height&&0!==k.width){a=e(k,a);if(!(k=0===d.length)){k=a.before;var g=a.after,f=d[d.length-1].before,h=d[d.length-1].after;k=!(g<h&&k>f||h<=g&&f>=k)}k?d.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,
elements:[],rbc:[],te:[],text:"",br:!1}):(k=Math.sign(a.after-a.before),g=Math.sign(a.end-a.start),0>k*(a.before-d[d.length-1].before)&&(d[d.length-1].before=a.before),0<k*(a.after-d[d.length-1].after)&&(d[d.length-1].after=a.after),0>g*(a.start-d[d.length-1].start)&&(d[d.length-1].start=a.start,d[d.length-1].start_elem=d[d.length-1].elements.length),0<g*(a.end-d[d.length-1].end)&&(d[d.length-1].end=a.end,d[d.length-1].end_elem=d[d.length-1].elements.length));d[d.length-1].text+=b.textContent;d[d.length-
1].elements.push({node:b,bgcolor:c,before:a.before,after:a.after})}}else"br"===b.localName&&0!==d.length&&(d[d.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(w(a,b,d,c),"ruby"===b.localName||"rtc"===b.localName?0<d.length&&d[d.length-1].rbc.push(b):"span"===b.localName&&b.style[y]&&"none"!==b.style[y]&&0<d.length&&d[d.length-1].te.push(b)),b=b.nextSibling}function g(a,b,d,c){"none"!==c.style&&(b.style[y]="auto"===c.style?"filled":c.style+" "+c.symbol,"before"===c.position||
"after"===c.position)&&(b.style[M]="tb"===a.bpd?"before"===c.position?"left over":"left under":"rl"===a.bpd?"before"===c.position?"right under":"left under":"before"===c.position?"left under":"right under")}function n(a,b){this.qname=a;this.map=b}f.render=function(a,b,d,c,e,g,f,l,w,n){c=c||b.clientHeight;var k=e||b.clientWidth;null!==a.aspectRatio&&(e=c*a.aspectRatio,e>k?c=Math.round(k/a.aspectRatio):k=e);e=document.createElement("div");e.style.position="relative";e.style.width=k+"px";e.style.height=
c+"px";e.style.margin="auto";e.style.top=0;e.style.bottom=0;e.style.left=0;e.style.right=0;e.style.zIndex=0;d={h:c,w:k,regionH:null,regionW:null,imgResolver:d,displayForcedOnlyMode:g||!1,isd:a,errorHandler:f,previousISDState:l,enableRollUp:w||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},n)||{}};d.options.colorAdjust&&(d.options.colorAdjust=h(d.options.colorAdjust));g=["region","body","div","p","span"];for(var m in g)g.hasOwnProperty(m)&&
(f=g[m]+"BackgroundColorAdjust",d.options[f]&&(d.options[f]=h(d.options[f])));b.appendChild(e);for(var E in a.contents)a.contents.hasOwnProperty(E)&&t(d,e,a.contents[E],a);return d.currentISDState};var E=[new n("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,d,c){(d=(d=a.options[d.kind+"BackgroundColorAdjust"])&&d[c.toString()])&&(c=d);d=c[3];0!==d&&(void 0!=a.options.backgroundOpacityScale&&(d*=a.options.backgroundOpacityScale),b.style.backgroundColor="rgba("+c[0].toString()+","+
c[1].toString()+","+c[2].toString()+","+(d/255).toString()+")")}),new n("http://www.w3.org/ns/ttml#styling color",function(a,b,d,c){d=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=a[c.toString()])&&(c=a);b.style.color="rgba("+c[0].toString()+","+c[1].toString()+","+c[2].toString()+","+(d*c[3]/255).toString()+")"}),new n("http://www.w3.org/ns/ttml#styling direction",function(a,b,d,c){b.style.direction=c}),new n("http://www.w3.org/ns/ttml#styling display",function(a,b,d,c){}),
new n("http://www.w3.org/ns/ttml#styling displayAlign",function(a,b,d,c){b.style.display="flex";b.style.flexDirection="column";"before"===c?b.style.justifyContent="flex-start":"center"===c?b.style.justifyContent="center":"after"===c&&(b.style.justifyContent="flex-end")}),new n("http://www.w3.org/ns/ttml#styling extent",function(a,b,d,c){a.regionH=c.h.toUsedLength(a.w,a.h);a.regionW=c.w.toUsedLength(a.w,a.h);var e=c=0;if(d=d.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])c=d[0].toUsedLength(a.w,
a.h)+d[2].toUsedLength(a.w,a.h),e=d[1].toUsedLength(a.w,a.h)+d[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-c+"px";b.style.width=a.regionW-e+"px"}),new n("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,d,c){d=[];a.options.fontFamily&&(c=a.options.fontFamily.split(","));for(var e in c)c[e].hasOwnProperty(e)&&(c[e]=c[e].trim(),"monospaceSerif"===c[e]?(d.push("Courier New"),d.push('"Liberation Mono"'),d.push("Courier"),d.push("monospace")):"proportionalSansSerif"===c[e]||"default"===
c[e]?(d.push("Arial"),d.push("Helvetica"),d.push('"Liberation Sans"'),d.push("sans-serif")):"monospace"===c[e]?d.push("monospace"):"sansSerif"===c[e]?d.push("sans-serif"):"serif"===c[e]?d.push("serif"):"monospaceSansSerif"===c[e]?(d.push("Consolas"),d.push("monospace")):"proportionalSerif"===c[e]?d.push("serif"):d.push(c[e]));if(0<d.length){a=[d[0]];for(c=1;c<d.length;c++)-1==a.indexOf(d[c])&&a.push(d[c]);d=a}b.style.fontFamily=d.join(",")}),new n("http://www.w3.org/ns/ttml#styling shear",function(a,
b,d,c){0!==c&&(d=-.9*c,b.style.transform="tb"===a.bpd?"skewX("+d+"deg)":"skewY("+d+"deg)")}),new n("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,d,c){b.style.fontSize=c.multiply(c.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new n("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,d,c){b.style.fontStyle=c}),new n("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,d,c){b.style.fontWeight=c}),new n("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,d,c){b.style.lineHeight=
"normal"===c?"normal":c.multiply(c.multiply(c.toUsedLength(a.w,a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new n("http://www.w3.org/ns/ttml#styling opacity",function(a,b,d,c){d=c;void 0!=a.options.regionOpacityScale&&(d*=a.options.regionOpacityScale);b.style.opacity=d}),new n("http://www.w3.org/ns/ttml#styling origin",function(a,b,d,c){b.style.top=c.h.toUsedLength(a.w,a.h)+"px";b.style.left=c.w.toUsedLength(a.w,a.h)+"px"}),new n("http://www.w3.org/ns/ttml#styling overflow",function(a,
b,d,c){b.style.overflow=c}),new n("http://www.w3.org/ns/ttml#styling padding",function(a,b,d,c){d=[];d[0]=c[0].toUsedLength(a.w,a.h)+"px";d[1]=c[3].toUsedLength(a.w,a.h)+"px";d[2]=c[2].toUsedLength(a.w,a.h)+"px";d[3]=c[1].toUsedLength(a.w,a.h)+"px";b.style.padding=d.join(" ")}),new n("http://www.w3.org/ns/ttml#styling position",function(a,b,d,c){b.style.top=c.h.toUsedLength(a.w,a.h)+"px";b.style.left=c.w.toUsedLength(a.w,a.h)+"px"}),new n("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,
d,c){b.style.rubyAlign="spaceAround"===c?"space-around":"center"}),new n("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,d,c){if("before"===c||"after"===c)b.parentElement.style[K]=x?c:"tb"===a.bpd?"before"===c?"over":"under":"rl"===a.bpd?"before"===c?"over":"under":"before"===c?"under":"over"}),new n("http://www.w3.org/ns/ttml#styling showBackground",null),new n("http://www.w3.org/ns/ttml#styling textAlign",function(a,b,d,c){b.style.textAlign="start"===c?"rl"===a.ipd?"right":"left":
"end"===c?"rl"===a.ipd?"left":"right":c}),new n("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,d,c){b.style.textDecoration=c.join(" ").replace("lineThrough","line-through")}),new n("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,d,c){}),new n("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,d,c){d=d.styleAttrs[l.byName.textOutline.qname];var e=a.options.textOutline;if(e)if("none"===e)d=e;else{var g={};e=e.split(" ");if(0!==e.length&&2>=e.length){var f=v.parseColor(e[0]);
g.color=f;null!==f&&e.shift();1===e.length&&(e=v.parseLength(e[0]))&&(g.thickness=e,d=g)}}if("none"===c&&"none"===d)b.style.textShadow="";else{g=[];"none"!==d&&(d="rgba("+d.color[0].toString()+","+d.color[1].toString()+","+d.color[2].toString()+","+(d.color[3]/255).toString()+")",g.push("1px 1px 1px "+d),g.push("-1px 1px 1px "+d),g.push("1px -1px 1px "+d),g.push("-1px -1px 1px "+d));if("none"!==c)for(var k in c)c.hasOwnProperty(k)&&g.push(c[k].x_off.toUsedLength(a.w,a.h)+"px "+c[k].y_off.toUsedLength(a.w,
a.h)+"px "+c[k].b_radius.toUsedLength(a.w,a.h)+"px rgba("+c[k].color[0].toString()+","+c[k].color[1].toString()+","+c[k].color[2].toString()+","+(c[k].color[3]/255).toString()+")");b.style.textShadow=g.join(",")}}),new n("http://www.w3.org/ns/ttml#styling textCombine",function(a,b,d,c){b.style.textCombineUpright=c}),new n("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,d,c){}),new n("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,d,c){b.style.unicodeBidi="bidiOverride"===
c?"bidi-override":c}),new n("http://www.w3.org/ns/ttml#styling visibility",function(a,b,d,c){b.style.visibility=c}),new n("http://www.w3.org/ns/ttml#styling wrapOption",function(a,b,d,c){b.style.whiteSpace="wrap"===c?"preserve"===d.space?"pre-wrap":"normal":"preserve"===d.space?"pre":"noWrap"}),new n("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,d,c){if("lrtb"===c||"lr"===c)b.style.writingMode="horizontal-tb";else if("rltb"===c||"rl"===c)b.style.writingMode="horizontal-tb";else if("tblr"===
c)b.style.writingMode="vertical-lr";else if("tbrl"===c||"tb"===c)b.style.writingMode="vertical-rl"}),new n("http://www.w3.org/ns/ttml#styling zIndex",function(a,b,d,c){b.style.zIndex=c}),new n("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,d,c){a.displayForcedOnlyMode&&!1===c&&(b.style.visibility="hidden")})],A;for(A in E)E.hasOwnProperty(A);var x="webkitRubyPosition"in window.getComputedStyle(document.documentElement),K=x?"webkitRubyPosition":"rubyPosition",y="webkitTextEmphasisStyle"in
window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",M="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof t?this.imscHTML={}:t,"undefined"===typeof imscNames?f("./names"):imscNames,"undefined"===typeof imscStyles?f("./styles"):imscStyles,"undefined"===typeof imscUtils?f("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],3:[function(f,x,t){(function(f,
p,l,v){function h(f,w,p,K,y,x,a,k,d){if(w<a.begin||w>=a.end)return null;x="regionID"in a&&""!==a.regionID?a.regionID:x;if(null!==y&&x!==p.id&&(!("contents"in a)||"contents"in a&&0===a.contents.length||""!==x))return null;var c=new g(a);for(E in a.sets)!a.sets.hasOwnProperty(E)||w<a.sets[E].begin||w>=a.sets[E].end||(c.styleAttrs[a.sets[E].qname]=a.sets[E].value);var E={};for(var m in c.styleAttrs)if(c.styleAttrs.hasOwnProperty(m)&&(E[m]=!0,"region"===c.kind&&m===l.byName.writingMode.qname&&!(l.byName.direction.qname in
c.styleAttrs))){var A=c.styleAttrs[m];if("lrtb"===A||"lr"===A)c.styleAttrs[l.byName.direction.qname]="ltr";else if("rltb"===A||"rl"===A)c.styleAttrs[l.byName.direction.qname]="rtl"}if(null!==y)for(var D in l.all)if(l.all.hasOwnProperty(D))if(m=l.all[D],m.qname===l.byName.textDecoration.qname){A=y.styleAttrs[m.qname];var r=c.styleAttrs[m.qname],u=[];void 0===r?u=A:-1===r.indexOf("none")?((-1===r.indexOf("noUnderline")&&-1!==A.indexOf("underline")||-1!==r.indexOf("underline"))&&u.push("underline"),
(-1===r.indexOf("noLineThrough")&&-1!==A.indexOf("lineThrough")||-1!==r.indexOf("lineThrough"))&&u.push("lineThrough"),(-1===r.indexOf("noOverline")&&-1!==A.indexOf("overline")||-1!==r.indexOf("overline"))&&u.push("overline")):u.push("none");c.styleAttrs[m.qname]=u}else m.qname!==l.byName.fontSize.qname||m.qname in c.styleAttrs||"span"!==c.kind||"textContainer"!==c.styleAttrs[l.byName.ruby.qname]?m.qname!==l.byName.fontSize.qname||m.qname in c.styleAttrs||"span"!==c.kind||"text"!==c.styleAttrs[l.byName.ruby.qname]?
m.inherit&&m.qname in y.styleAttrs&&!(m.qname in c.styleAttrs)&&(c.styleAttrs[m.qname]=y.styleAttrs[m.qname]):(A=y.styleAttrs[l.byName.fontSize.qname],c.styleAttrs[m.qname]="textContainer"===y.styleAttrs[l.byName.ruby.qname]?A:new v.ComputedLength(.5*A.rw,.5*A.rh)):(A=y.styleAttrs[l.byName.fontSize.qname],c.styleAttrs[m.qname]=new v.ComputedLength(.5*A.rw,.5*A.rh));for(var F in l.all)if(l.all.hasOwnProperty(F)&&(D=l.all[F],!(D.qname in c.styleAttrs||D.qname===l.byName.position.qname&&l.byName.origin.qname in
c.styleAttrs||D.qname===l.byName.origin.qname&&l.byName.position.qname in c.styleAttrs)&&(m=f.head.styling.initials[D.qname]||D.initial,null!==m&&("region"===c.kind||!1===D.inherit&&null!==m))))if(m=D.parse(m),null!==m)c.styleAttrs[D.qname]=m,E[D.qname]=!0;else if(D="Invalid initial value for '"+D.qname+"' on element '"+c.kind,k&&k.error&&k.error(D))throw D;for(var M in l.all)if(l.all.hasOwnProperty(M)&&(F=l.all[M],F.qname in E&&null!==F.compute))if(D=F.compute(f,y,c,c.styleAttrs[F.qname],d),null!==
D)c.styleAttrs[F.qname]=D;else if(c.styleAttrs[F.qname]=F.compute(f,y,c,F.parse(F.initial),d),F="Style '"+F.qname+"' on element '"+c.kind+"' cannot be computed",k&&k.error&&k.error(F))throw F;if("none"===c.styleAttrs[l.byName.display.qname])return null;if(null===y)var J=null===K?[]:[K];else"contents"in a&&(J=a.contents);for(var Q in J)J.hasOwnProperty(Q)&&(y=h(f,w,p,K,c,x,J[Q],k,d),null!==y&&c.contents.push(y.element));for(var B in c.styleAttrs)c.styleAttrs.hasOwnProperty(B)&&(f=!1,"span"===c.kind&&
(w=c.styleAttrs[l.byName.ruby.qname],(f=("container"===w||"textContainer"===w||"baseContainer"===w)&&-1!==n.indexOf(B))||(f="container"!==w&&B===l.byName.rubyAlign.qname),f||(f=!("textContainer"===w||"text"===w)&&B===l.byName.rubyPosition.qname)),f||(f=-1===l.byQName[B].applies.indexOf(c.kind)),f&&delete c.styleAttrs[B]);B=c.styleAttrs[l.byName.ruby.qname];if("p"===c.kind||"span"===c.kind&&("textContainer"===B||"text"===B))B=[],b(c,B),t(B),e(c);return"div"===c.kind&&l.byName.backgroundImage.qname in
c.styleAttrs||"br"===c.kind||"image"===c.kind||"contents"in c&&0<c.contents.length||"span"===c.kind&&null!==c.text||"region"===c.kind&&"always"===c.styleAttrs[l.byName.showBackground.qname]?{region_id:x,element:c}:null}function t(b){function e(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function g(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var f,h=0;h<b.length;)if(f=b[h],"br"===f.kind||"preserve"===f.space)h++;else{var w=f.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(w)&&
(0===h||e(b[h-1]))&&(w=w.substring(1));f.text=w;0===w.length?b.splice(h,1):h++}for(h=0;h<b.length;h++)f=b[h],"br"===f.kind||"preserve"===f.space?h++:/[ ]$/.test(f.text)&&(h===b.length-1||g(b[h+1]))&&(f.text=f.text.slice(0,-1))}function b(e,f){for(var g in e.contents)if(e.contents.hasOwnProperty(g)){var h=e.contents[g],w=h.styleAttrs[l.byName.ruby.qname];if("span"!==h.kind||"textContainer"!==w&&"text"!==w)"contents"in h?b(h,f):("span"===h.kind&&0!==h.text.length||"br"===h.kind)&&f.push(h)}}function e(b){if("br"===
b.kind)return!1;if("text"in b)return 0===b.text.length;if("contents"in b){for(var f=b.contents.length;f--;)e(b.contents[f])&&b.contents.splice(f,1);return 0===b.contents.length}}function w(b){this.contents=[];this.aspectRatio=b.aspectRatio;this.lang=b.lang}function g(b){this.kind=b.kind||"region";this.lang=b.lang;b.id&&(this.id=b.id);this.styleAttrs={};for(var e in b.styleAttrs)b.styleAttrs.hasOwnProperty(e)&&(this.styleAttrs[e]=b.styleAttrs[e]);"src"in b&&(this.src=b.src);"type"in b&&(this.type=
b.type);if("text"in b)this.text=b.text;else if("region"===this.kind||"contents"in b)this.contents=[];"space"in b&&(this.space=b.space)}f.generateISD=function(b,e,f){function g(b,a){function c(a){return!(b<a.begin||b>=a.end)}if(a.contents){var d={},e;for(e in a)a.hasOwnProperty(e)&&(d[e]=a[e]);d.contents=[];a.contents.filter(c).forEach(function(a){a=g(b,a);a.regionID&&(k[a.regionID]=!0);null!==a&&d.contents.push(a)});return d}return a}var n=new w(b),v={},a={},k={};initialShowBackground=b.head.styling.initials[l.byName.showBackground.qname];
initialbackgroundColor=b.head.styling.initials[l.byName.backgroundColor.qname];initialbackgroundImage=b.head.styling.initials[l.byName.backgroundImage.qname];for(var d in b.head.layout.regions)b.head.layout.regions.hasOwnProperty(d)&&(region=b.head.layout.regions[d],showBackground=region.styleAttrs[l.byName.showBackground.qname]||initialShowBackground,backgroundColor=region.styleAttrs[l.byName.backgroundColor.qname]||initialbackgroundColor,backgroundImage=region.styleAttrs[l.byName.backgroundImage.qname]||
initialbackgroundImage,k[region.id]=("always"===showBackground||void 0===showBackground)&&(void 0!==backgroundColor||void 0!==backgroundImage)&&!(e<region.begin||e>=region.end));b.body&&b.body.regionID&&(k[b.body.regionID]=!0);a=null!==b.body?g(e,b.body):null;1===Object.getOwnPropertyNames(k).length&&void 0!==k[""]&&(k[""]=!0);for(var c in k)k[c]&&(d=h(b,e,b.head.layout.regions[c],a,null,"",b.head.layout.regions[c],f,v),null!==d&&n.contents.push(d.element));return n};var n=[l.byName.color.qname,l.byName.textCombine.qname,
l.byName.textDecoration.qname,l.byName.textEmphasis.qname,l.byName.textOutline.qname,l.byName.textShadow.qname]})("undefined"===typeof t?this.imscISD={}:t,"undefined"===typeof imscNames?f("./names"):imscNames,"undefined"===typeof imscStyles?f("./styles"):imscStyles,"undefined"===typeof imscUtils?f("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],4:[function(f,x,t){t.generateISD=f("./isd").generateISD;t.fromXML=f("./doc").fromXML;t.renderHTML=f("./html").render},{"./doc":1,"./html":2,
"./isd":3}],5:[function(f,x,t){f="undefined"===typeof t?this.imscNames={}:t;f.ns_tt="http://www.w3.org/ns/ttml";f.ns_tts="http://www.w3.org/ns/ttml#styling";f.ns_ttp="http://www.w3.org/ns/ttml#parameter";f.ns_xml="http://www.w3.org/XML/1998/namespace";f.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";f.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";f.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";f.ns_ebutts="urn:ebu:tt:style";f.ttaf_map={"http://www.w3.org/2006/10/ttaf1":f.ns_tt,
"http://www.w3.org/2006/10/ttaf1#style":f.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":f.ns_ttp}},{}],6:[function(f,x,t){(function(f,p,l){function h(b,e,f,g,h,l,p,t){this.name=e;this.ns=b;this.qname=b+" "+e;this.inherit=h;this.animatable=l;this.initial=f;this.applies=g;this.parse=p;this.compute=t}f.all=[new h(p.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,l.parseColor,null),new h(p.ns_tts,"color","white",["span"],!0,!0,l.parseColor,null),new h(p.ns_tts,"direction",
"ltr",["p","span"],!0,!0,function(b){return b},null),new h(p.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(b){return b},null),new h(p.ns_tts,"displayAlign","before",["region"],!1,!0,function(b){return b},null),new h(p.ns_tts,"extent","auto",["tt","region"],!1,!0,function(b){if("auto"===b)return b;var e=b.split(" ");if(2!==e.length)return null;b=l.parseLength(e[0]);return(e=l.parseLength(e[1]))&&b?{h:e,w:b}:null},function(b,e,f,g,h){if("auto"===g)e=new l.ComputedLength(0,
1);else if(e=l.toComputedLength(g.h.value,g.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===e)return null;if("auto"===g)b=new l.ComputedLength(1,0);else if(b=l.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:e,w:b}}),new h(p.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(b){b=b.split(",");for(var e=[],f=0;f<b.length;f++)"'"!==b[f].charAt(0)&&'"'!==b[f].charAt(0)?"default"===b[f]?e.push("monospaceSerif"):e.push(b[f]):e.push(b[f]);
return e},null),new h(p.ns_tts,"shear","0%",["p"],!0,!0,l.parseLength,function(b,e,f,g){if("%"===g.unit)b=100<Math.abs(g.value)?100*Math.sign(g.value):g.value;else return null;return b}),new h(p.ns_tts,"fontSize","1c",["span","p"],!0,!0,l.parseLength,function(b,e,h,g,n){return l.toComputedLength(g.value,g.unit,null!==e?e.styleAttrs[f.byName.fontSize.qname]:b.cellLength.h,null!==e?e.styleAttrs[f.byName.fontSize.qname]:b.cellLength.h,b.cellLength.h,b.pxLength.h)}),new h(p.ns_tts,"fontStyle","normal",
["span","p"],!0,!0,function(b){return b},null),new h(p.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(b){return b},null),new h(p.ns_tts,"lineHeight","normal",["p"],!0,!0,function(b){return"normal"===b?b:l.parseLength(b)},function(b,e,h,g,n){if("normal"===g)b=g;else if(b=l.toComputedLength(g.value,g.unit,h.styleAttrs[f.byName.fontSize.qname],h.styleAttrs[f.byName.fontSize.qname],b.cellLength.h,b.pxLength.h),null===b)return null;return b}),new h(p.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,
null),new h(p.ns_tts,"origin","auto",["region"],!1,!0,function(b){if("auto"===b)return b;var e=b.split(" ");if(2!==e.length)return null;b=l.parseLength(e[0]);return(e=l.parseLength(e[1]))&&b?{h:e,w:b}:null},function(b,e,f,g,h){if("auto"===g)e=new l.ComputedLength(0,0);else if(e=l.toComputedLength(g.h.value,g.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===e)return null;if("auto"===g)b=new l.ComputedLength(0,0);else if(b=l.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w),
null===b)return null;return{h:e,w:b}}),new h(p.ns_tts,"overflow","hidden",["region"],!1,!0,function(b){return b},null),new h(p.ns_tts,"padding","0px",["region"],!1,!0,function(b){b=b.split(" ");if(4<b.length)return null;for(var e=[],f=0;f<b.length;f++){var g=l.parseLength(b[f]);if(!g)return null;e.push(g)}return e},function(b,e,h,g,n){if(1===g.length)e=[g[0],g[0],g[0],g[0]];else if(2===g.length)e=[g[0],g[1],g[0],g[1]];else if(3===g.length)e=[g[0],g[1],g[2],g[1]];else if(4===g.length)e=[g[0],g[1],
g[2],g[3]];else return null;g=h.styleAttrs[f.byName.writingMode.qname];if("lrtb"===g||"lr"===g)e=[e[0],e[3],e[2],e[1]];else if("rltb"===g||"rl"===g)e=[e[0],e[1],e[2],e[3]];else if("tblr"===g)e=[e[3],e[0],e[1],e[2]];else if("tbrl"===g||"tb"===g)e=[e[3],e[2],e[1],e[0]];else return null;g=[];for(n=0;n<e.length;n++)if(0===e[n].value)g[n]=new l.ComputedLength(0,0);else if(g[n]=l.toComputedLength(e[n].value,e[n].unit,h.styleAttrs[f.byName.fontSize.qname],"0"===n||"2"===n?h.styleAttrs[f.byName.extent.qname].h:
h.styleAttrs[f.byName.extent.qname].w,"0"===n||"2"===n?b.cellLength.h:b.cellLength.w,"0"===n||"2"===n?b.pxLength.h:b.pxLength.w),null===g[n])return null;return g}),new h(p.ns_tts,"position","top left",["region"],!1,!0,function(b){return l.parsePosition(b)},function(b,e,h,g){e=l.toComputedLength(g.v.offset.value,g.v.offset.unit,null,new l.ComputedLength(-h.styleAttrs[f.byName.extent.qname].h.rw,b.dimensions.h.rh-h.styleAttrs[f.byName.extent.qname].h.rh),null,b.pxLength.h);if(null===e)return null;"bottom"===
g.v.edge&&(e=new l.ComputedLength(-e.rw-h.styleAttrs[f.byName.extent.qname].h.rw,b.dimensions.h.rh-e.rh-h.styleAttrs[f.byName.extent.qname].h.rh));var n=l.toComputedLength(g.h.offset.value,g.h.offset.unit,null,new l.ComputedLength(b.dimensions.w.rw-h.styleAttrs[f.byName.extent.qname].w.rw,-h.styleAttrs[f.byName.extent.qname].w.rh),null,b.pxLength.w);if(null===e)return null;"right"===g.h.edge&&(n=new l.ComputedLength(b.dimensions.w.rw-n.rw-h.styleAttrs[f.byName.extent.qname].w.rw,-n.rh-h.styleAttrs[f.byName.extent.qname].w.rh));
return{h:e,w:n}}),new h(p.ns_tts,"ruby","none",["span"],!1,!0,function(b){return b},null),new h(p.ns_tts,"rubyAlign","center",["span"],!0,!0,function(b){return"center"!==b&&"spaceAround"!==b?null:b},null),new h(p.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(b){return b},null),new h(p.ns_tts,"rubyReserve","none",["p"],!0,!0,function(b){var e=b.split(" ");b=[null,null];if(0===e.length||2<e.length||"none"!==e[0]&&"both"!==e[0]&&"after"!==e[0]&&"before"!==e[0]&&"outside"!==e[0])return null;
b[0]=e[0];if(2===e.length&&"none"!==e[0])if(e=l.parseLength(e[1]))b[1]=e;else return null;return b},function(b,e,h,g,n){if("none"===g[0])return g;b=null===g[1]?new l.ComputedLength(.5*h.styleAttrs[f.byName.fontSize.qname].rw,.5*h.styleAttrs[f.byName.fontSize.qname].rh):l.toComputedLength(g[1].value,g[1].unit,h.styleAttrs[f.byName.fontSize.qname],h.styleAttrs[f.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===b?null:[g[0],b]}),new h(p.ns_tts,"showBackground","whenActive",["region"],
!1,!0,function(b){return b},null),new h(p.ns_tts,"textAlign","start",["p"],!0,!0,function(b){return b},function(b,e,f,g,h){return"left"===g?"start":"right"===g?"end":g}),new h(p.ns_tts,"textCombine","none",["span"],!0,!0,function(b){return"none"===b||"all"===b?b:null},null),new h(p.ns_tts,"textDecoration","none",["span"],!0,!0,function(b){return b.split(" ")},null),new h(p.ns_tts,"textEmphasis","none",["span"],!0,!0,function(b){b=b.split(" ");for(var e={style:null,symbol:null,color:null,position:null},
f=0;f<b.length;f++)if("none"===b[f]||"auto"===b[f])e.style=b[f];else if("filled"===b[f]||"open"===b[f])e.style=b[f];else if("circle"===b[f]||"dot"===b[f]||"sesame"===b[f])e.symbol=b[f];else if("current"===b[f])e.color=b[f];else if("outside"===b[f]||"before"===b[f]||"after"===b[f])e.position=b[f];else if(e.color=l.parseColor(b[f]),null===e.color)return null;null==e.style&&null==e.symbol?e.style="auto":(e.symbol=e.symbol||"circle",e.style=e.style||"filled");e.position=e.position||"outside";e.color=
e.color||"current";return e},null),new h(p.ns_tts,"textOutline","none",["span"],!0,!0,function(b){if("none"===b)return b;var e={};b=b.split(" ");if(0===b.length||2<b.length)return null;var f=l.parseColor(b[0]);e.color=f;null!==f&&b.shift();if(1!==b.length)return null;b=l.parseLength(b[0]);if(!b)return null;e.thickness=b;return e},function(b,e,h,g,n){if("none"===g)return g;e={};e.color=null===g.color?h.styleAttrs[f.byName.color.qname]:g.color;e.thickness=l.toComputedLength(g.thickness.value,g.thickness.unit,
h.styleAttrs[f.byName.fontSize.qname],h.styleAttrs[f.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===e.thickness?null:e}),new h(p.ns_tts,"textShadow","none",["span"],!0,!0,l.parseTextShadow,function(b,e,h,g){if("none"===g)return g;e=[];for(var n in g)if(n.hasOwnProperty(g)){var w={};w.x_off=l.toComputedLength(g[n][0].value,g[n][0].unit,null,h.styleAttrs[f.byName.fontSize.qname],null,b.pxLength.w);if(null===w.x_off)return null;w.y_off=l.toComputedLength(g[n][1].value,g[n][1].unit,
null,h.styleAttrs[f.byName.fontSize.qname],null,b.pxLength.h);if(null===w.y_off)return null;if(null===g[n][2])w.b_radius=0;else if(w.b_radius=l.toComputedLength(g[n][2].value,g[n][2].unit,null,h.styleAttrs[f.byName.fontSize.qname],null,b.pxLength.h),null===w.b_radius)return null;w.color=null===g[n][3]?h.styleAttrs[f.byName.color.qname]:g[n][3];e.push(w)}return e}),new h(p.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(b){return b},null),new h(p.ns_tts,"visibility","visible",["body","div",
"p","region","span"],!0,!0,function(b){return b},null),new h(p.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(b){return b},null),new h(p.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(b){return b},null),new h(p.ns_tts,"zIndex","auto",["region"],!1,!0,function(b){"auto"!==b&&(b=parseInt(b),isNaN(b)&&(b=null));return b},null),new h(p.ns_ebutts,"linePadding","0c",["p"],!0,!1,l.parseLength,function(b,e,f,g,h){return l.toComputedLength(g.value,g.unit,null,null,b.cellLength.w,null)}),new h(p.ns_ebutts,
"multiRowAlign","auto",["p"],!0,!1,function(b){return b},null),new h(p.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(b){return b},null),new h(p.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(b){return"true"===b?!0:!1},null),new h(p.ns_itts,"fillLineGap","true",["p"],!0,!0,function(b){return"true"===b?!0:!1},null)];f.byQName={};for(var t in f.all)f.all.hasOwnProperty(t)&&(f.byQName[f.all[t].qname]=f.all[t]);f.byName={};for(var x in f.all)f.all.hasOwnProperty(x)&&
(f.byName[f.all[x].name]=f.all[x])})("undefined"===typeof t?this.imscStyles={}:t,"undefined"===typeof imscNames?f("./names"):imscNames,"undefined"===typeof imscUtils?f("./utils"):imscUtils)},{"./names":5,"./utils":7}],7:[function(f,x,t){(function(f){var h=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,l=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,t=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,x={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,
128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};f.parseColor=function(b){var e,f=null,g=x[b.toLowerCase()];void 0!==g?f=g:null!==(e=h.exec(b))?f=[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),void 0!==e[4]?parseInt(e[4],
16):255]:null!==(e=l.exec(b))?f=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]:null!==(e=t.exec(b))&&(f=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]);return f};var J=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;f.parseLength=function(b){var e,f=null;null!==(e=J.exec(b))&&(f={value:parseFloat(e[1]),unit:e[2]});return f};f.parseTextShadow=function(b){b=b.split(",");for(var e=[],h=0;h<b.length;h++){var g=b[h].split(" ");if(1===g.length&&"none"===g[0])return"none";if(1<g.length&&
5>g.length){var l=[null,null,null,null],p=f.parseLength(g.shift());if(null===p)return null;l[0]=p;p=f.parseLength(g.shift());if(null===p)return null;l[1]=p;if(0!==g.length&&(p=f.parseLength(g[0]),null!==p&&(l[2]=p,g.shift()),0!==g.length)){g=f.parseColor(g[0]);if(null===g)return null;l[3]=g}e.push(l)}}return e};f.parsePosition=function(b){b=b.split(" ");var e=function(b){return"center"===b||"left"===b||"top"===b||"bottom"===b||"right"===b};if(4<b.length)return null;for(var h in b)if(b.hasOwnProperty(h)&&
!e(b[h])){var g=f.parseLength(b[h]);if(null===g)return null;b[h]=g}h={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(g=0;g<b.length;){var l=b[g++];if(e(l)){var p={value:0,unit:"%"};2!==b.length&&g<b.length&&!e(b[g])&&(p=b[g++]);"right"===l?(h.h.edge=l,h.h.offset=p):"bottom"===l?(h.v.edge=l,h.v.offset=p):"left"===l?h.h.offset=p:"top"===l&&(h.v.offset=p)}else if(1===b.length||2===b.length)1===g?h.h.offset=l:h.v.offset=l;else return null}return h};f.ComputedLength=
function(b,e){this.rw=b;this.rh=e};f.ComputedLength.prototype.toUsedLength=function(b,e){return b*this.rw+e*this.rh};f.ComputedLength.prototype.multiply=function(b,e){return e?b*e:b};f.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};f.toComputedLength=function(b,e,h,g,l,p){return"%"===e&&g?new f.ComputedLength(g.rw*b/100,g.rh*b/100):"em"===e&&h?new f.ComputedLength(h.rw*b,h.rh*b):"c"===e&&l?new f.ComputedLength(b*l.rw,b*l.rh):"px"===e&&p?new f.ComputedLength(b*p.rw,b*p.rh):
"rh"===e?new f.ComputedLength(0,b/100):"rw"===e?new f.ComputedLength(b/100,0):null}})("undefined"===typeof t?this.imscUtils={}:t)},{}]},{},[4])(4)});
