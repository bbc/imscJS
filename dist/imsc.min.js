var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(f,w){return Object.prototype.hasOwnProperty.call(f,w)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(f,w){for(var u=1;u<arguments.length;u++){var m=arguments[u];if(m)for(var r in m)$jscomp.owns(m,r)&&(f[r]=m[r])}return f};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,w,u){f!=Array.prototype&&f!=Object.prototype&&(f[w]=u.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(f,w,u,m){if(w){u=$jscomp.global;f=f.split(".");for(m=0;m<f.length-1;m++){var r=f[m];r in u||(u[r]={});u=u[r]}f=f[f.length-1];m=u[f];w=w(m);w!=m&&null!=w&&$jscomp.defineProperty(u,f,{configurable:!0,writable:!0,value:w})}};$jscomp.polyfill("Object.assign",function(f){return f||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(f){return f?f:function(f){var u=[],m;for(m in f)$jscomp.owns(f,m)&&u.push([m,f[m]]);return u}},"es8","es3");
$jscomp.polyfill("Math.sign",function(f){return f?f:function(f){f=Number(f);return 0===f||isNaN(f)?f:0<f?1:-1}},"es6","es3");
(function(f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=f()})(function(){return function(){function f(w,u,m){function r(h,P){if(!u[h]){if(!w[h]){var a="function"==typeof require&&require;if(!P&&a)return a(h,!0);if(l)return l(h,!0);P=Error("Cannot find module '"+h+"'");throw P.code="MODULE_NOT_FOUND",P;}P=
u[h]={exports:{}};w[h][0].call(P.exports,function(a){return r(w[h][1][a]||a)},P,P.exports,f,w,u,m)}return u[h].exports}for(var l="function"==typeof require&&require,h=0;h<m.length;h++)r(m[h]);return r}return f}()({1:[function(f,w,u){(function(m,f,l,h,u){function r(b,c){var d=b.styleAttrs&&b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===b.kind)!d&&c&&(b.styleAttrs||(b.styleAttrs={}),b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=c);else if(d&&delete b.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],
b.contents)for(var a=0;a<b.contents.length;a++)r(b.contents[a],d||c)}function a(b){if("contents"in b){var c="styleAttrs"in b?b.styleAttrs[h.byName.ruby.qname]:null;c="span"===b.kind&&("container"===c||"textContainer"===c||"baseContainer"===c);for(var d=b.contents.length-1;0<=d;d--)!c||"styleAttrs"in b.contents[d]&&h.byName.ruby.qname in b.contents[d].styleAttrs?a(b.contents[d]):delete b.contents[d]}}function e(b,c,d,a){var k=a&&"seq"===a.timeContainer,I=0;a&&(I=k&&d?d.end:a.begin);c.begin=c.explicit_begin?
c.explicit_begin+I:I;d=c.begin;a=null;for(var g in c.sets)c.sets.hasOwnProperty(g)&&(e(b,c.sets[g],a,c),d="seq"===c.timeContainer?c.sets[g].end:Math.max(d,c.sets[g].end),a=c.sets[g]);if("contents"in c)for(var G in c.contents)c.contents.hasOwnProperty(G)&&(e(b,c.contents[G],a,c),d="seq"===c.timeContainer?c.contents[G].end:Math.max(d,c.contents[G].end),a=c.contents[G]);else d=k?c.begin:Number.POSITIVE_INFINITY;c.end=null!==c.explicit_end&&null!==c.explicit_dur?Math.min(c.begin+c.explicit_dur,I+c.explicit_end):
null===c.explicit_end&&null!==c.explicit_dur?c.begin+c.explicit_dur:null!==c.explicit_end&&null===c.explicit_dur?I+c.explicit_end:d;delete c.explicit_begin;delete c.explicit_dur;delete c.explicit_end;b._registerEvent(c)}function n(b){this.node=b}function g(){this.events=[];this.head=new v;this.body=null}function v(){this.styling=new C;this.layout=new J}function C(){this.styles={};this.initials={}}function B(){this.styleRefs=this.styleAttrs=this.id=null}function w(){this.styleAttrs=null}function J(){this.regions=
{}}function y(b,c){this.kind="image";this.src=b;this.type=c}function K(b){this.id=b}function b(b){this.regionID=b}function k(b){this.styleAttrs=b}function d(b){this.sets=b}function c(b){this.contents=b}function z(b,c,d){this.explicit_begin=b;this.explicit_end=c;this.explicit_dur=d}function p(){this.kind="body"}function R(){this.kind="div"}function D(){this.kind="p"}function t(){this.kind="span"}function L(){this.kind="span"}function F(){this.kind="br"}function M(){}function V(){}function E(b){var c=
null;b&&(b=b.attributes["xml:id"]||b.attributes.id)&&(c=b.value||null);return c}function A(b){return b&&"style"in b.attributes?b.attributes.style.value.split(" "):[]}function S(b,c){var d={};if(null!==b)for(var a in b.attributes)if(b.attributes.hasOwnProperty(a)){var k=b.attributes[a].uri+" "+b.attributes[a].local,e=h.byQName[k];if(void 0!==e){var g=e.parse(b.attributes[a].value);null!==g?(d[k]=g,e===h.byName.zIndex&&O(c,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):
N(c,"Cannot parse styling attribute "+k+" --\x3e "+b.attributes[a].value)}}return d}function Q(b,c,d){for(var a in b.attributes)if(b.attributes.hasOwnProperty(a)&&b.attributes[a].uri===c&&b.attributes[a].local===d)return b.attributes[a].value;return null}function Z(b,c){b=Q(b,l.ns_tts,"extent");if(null===b)return null;var d=b.split(" ");if(2!==d.length)return O(c,"Malformed extent (ignoring)"),null;b=u.parseLength(d[0]);d=u.parseLength(d[1]);return d&&b?{h:d,w:b}:(O(c,"Malformed extent values (ignoring)"),
null)}function T(b,c,d){var a=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,k=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,e=/^(\d+(?:\.\d+)?)t$/,g=/^(\d+(?:\.\d+)?)ms$/,I=/^(\d+(?:\.\d+)?)s$/,l=/^(\d+(?:\.\d+)?)h$/,G=/^(\d+(?:\.\d+)?)m$/,n,z=null;null!==(n=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==c&&(z=parseFloat(n[1])/c):null!==(n=e.exec(d))?null!==b&&(z=parseFloat(n[1])/b):null!==(n=g.exec(d))?z=parseFloat(n[1])/1E3:null!==(n=I.exec(d))?z=parseFloat(n[1]):null!==(n=l.exec(d))?z=3600*parseFloat(n[1]):null!==(n=G.exec(d))?
z=60*parseFloat(n[1]):null!==(n=a.exec(d))?z=3600*parseInt(n[1])+60*parseInt(n[2])+parseFloat(n[3]):null!==(n=k.exec(d))&&null!==c&&(z=3600*parseInt(n[1])+60*parseInt(n[2])+parseInt(n[3])+(null===n[4]?0:parseInt(n[4])/c));return z}function W(b,c,d){for(;0<c.styleRefs.length;){var a=c.styleRefs.pop();a in b.styles?(W(b,b.styles[a],d),U(b.styles[a].styleAttrs,c.styleAttrs)):N(d,"Non-existant style id referenced")}}function X(b,c,d,a){for(var k=c.length-1;0<=k;k--){var e=c[k];e in b.styles?U(b.styles[e].styleAttrs,
d):N(a,"Non-existant style id referenced")}}function U(b,c){for(var d in b)!b.hasOwnProperty(d)||d in c||(c[d]=b[d])}function O(b,c){if(b&&b.warn&&b.warn(c))throw c;}function N(b,c){if(b&&b.error&&b.error(c))throw c;}function H(b,c){b&&b.fatal&&b.fatal(c);throw c;}function Y(b,c){for(var d=0,a=b.length-1,k;d<=a;){k=Math.floor((d+a)/2);var e=b[k];if(e<c)d=k+1;else if(e>c)a=k-1;else return{found:!0,index:k}}return{found:!1,index:d}}m.fromXML=function(b,c,d){var k=f.parser(!0,{xmlns:!0}),q=[],z=[],I=
[],m=0,x=null;k.onclosetag=function(b){if(q[0]instanceof M)null!==x.head&&null!==x.head.styling&&X(x.head.styling,q[0].styleRefs,q[0].styleAttrs,c),delete q[0].styleRefs;else if(q[0]instanceof C)for(var a in q[0].styles)q[0].styles.hasOwnProperty(a)&&W(q[0],q[0].styles[a],c);else if(q[0]instanceof D||q[0]instanceof t){if(1<q[0].contents.length){b=[q[0].contents[0]];for(a=1;a<q[0].contents.length;a++)q[0].contents[a]instanceof L&&b[b.length-1]instanceof L?b[b.length-1].text+=q[0].contents[a].text:
b.push(q[0].contents[a]);q[0].contents=b}q[0]instanceof t&&1===q[0].contents.length&&q[0].contents[0]instanceof L&&(q[0].text=q[0].contents[0].text,delete q[0].contents)}else if(q[0]instanceof n)if(q[0].node.uri===l.ns_tt&&"metadata"===q[0].node.local)m--;else if(0<m&&d&&"onCloseTag"in d)d.onCloseTag();I.shift();z.shift();q.shift()};k.ontext=function(b){if(void 0!==q[0])if(q[0]instanceof t||q[0]instanceof D){if(q[0]instanceof t){var a=q[0].styleAttrs[h.byName.ruby.qname];if("container"===a||"textContainer"===
a||"baseContainer"===a)return}a=new L;a.initFromText(x,q[0],b,z[0],I[0],c);q[0].contents.push(a)}else if(q[0]instanceof n&&0<m&&d&&"onText"in d)d.onText(b)};k.onopentag=function(b){function a(b){l.ttaf_map[b.uri]&&(b.uri=l.ttaf_map[b.uri])}var k=b.attributes["xml:space"];k?I.unshift(k.value):0===I.length?I.unshift("default"):I.unshift(I[0]);(k=b.attributes["xml:lang"])?z.unshift(k.value):0===z.length?z.unshift(""):z.unshift(z[0]);a(b);if(b.attributes)for(var e in b.attributes)b.attributes.hasOwnProperty(e)&&
a(b.attributes[e]);if(b.uri===l.ns_tt)if("tt"===b.local)null!==x&&H(c,"Two <tt> elements at ("+this.line+","+this.column+")"),x=new g,x.initFromNode(b,z[0],c),q.unshift(x);else if("head"===b.local)q[0]instanceof g||H(c,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),q.unshift(x.head);else if("styling"===b.local)q[0]instanceof v||H(c,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),q.unshift(x.head.styling);else if("style"===b.local)if(q[0]instanceof
C){var f=new B;f.initFromNode(b,c);f.id?x.head.styling.styles[f.id]=f:N(c,"<style> element missing @id attribute");q.unshift(f)}else q[0]instanceof M?(f=new B,f.initFromNode(b,c),U(f.styleAttrs,q[0].styleAttrs),q.unshift(f)):H(c,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===b.local)if(q[0]instanceof C){e=new w;e.initFromNode(b,c);for(f in e.styleAttrs)e.styleAttrs.hasOwnProperty(f)&&(x.head.styling.initials[f]=e.styleAttrs[f]);q.unshift(e)}else H(c,
"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===b.local)q[0]instanceof v||H(c,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),q.unshift(x.head.layout);else if("region"===b.local)q[0]instanceof J||H(c,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),f=new M,f.initFromNode(x,b,z[0],c),!f.id||f.id in x.head.layout.regions?N(c,"Ignoring <region> with duplicate or missing @id at "+this.line+
","+this.column+")"):x.head.layout.regions[f.id]=f,q.unshift(f);else if("body"===b.local)q[0]instanceof g||H(c,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==x.body&&H(c,"Second <body> element at "+this.line+","+this.column+")"),f=new p,f.initFromNode(x,b,z[0],c),x.body=f,q.unshift(f);else if("div"===b.local){q[0]instanceof R||q[0]instanceof p||H(c,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");f=new R;f.initFromNode(x,q[0],b,
z[0],c);if(e=f.styleAttrs[h.byName.backgroundImage.qname])f.contents.push(new y(e)),delete f.styleAttrs[h.byName.backgroundImage.qname];q[0].contents.push(f);q.unshift(f)}else"image"===b.local?(q[0]instanceof R||H(c,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),f=new y,f.initFromNode(x,q[0],b,z[0],c),q[0].contents.push(f),q.unshift(f)):"p"===b.local?(q[0]instanceof R||H(c,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),f=new D,f.initFromNode(x,
q[0],b,z[0],c),q[0].contents.push(f),q.unshift(f)):"span"===b.local?(q[0]instanceof t||q[0]instanceof D||H(c,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),f=new t,f.initFromNode(x,q[0],b,z[0],I[0],c),q[0].contents.push(f),q.unshift(f)):"br"===b.local?(q[0]instanceof t||q[0]instanceof D||H(c,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),f=new F,f.initFromNode(x,q[0],b,z[0],c),q[0].contents.push(f),q.unshift(f)):"set"===b.local?
(q[0]instanceof t||q[0]instanceof D||q[0]instanceof R||q[0]instanceof p||q[0]instanceof M||q[0]instanceof F||H(c,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),f=new V,f.initFromNode(x,q[0],b,c),q[0].sets.push(f),q.unshift(f)):q.unshift(new n(b));else q.unshift(new n(b));if(q[0]instanceof n)if(b.uri===l.ns_tt&&"metadata"===b.local)m++;else if(0<m&&d&&"onOpenTag"in d){f=[];for(var G in b.attributes)b.attributes.hasOwnProperty(G)&&(f[b.attributes[G].uri+
" "+b.attributes[G].local]={uri:b.attributes[G].uri,local:b.attributes[G].local,value:b.attributes[G].value});d.onOpenTag(b.uri,b.local,f)}};k.write(b).close();delete x.head.styling.styles;b=!1;for(var G in x.head.layout.regions)if(x.head.layout.regions.hasOwnProperty(G)){b=!0;break}b||(G=M.prototype.createDefaultRegion(x,c),x.head.layout.regions[G.id]=G);for(var u in x.head.layout.regions)x.head.layout.regions.hasOwnProperty(u)&&e(x,x.head.layout.regions[u],null,null);x.body&&e(x,x.body,null,null);
x.body&&a(x.body);x.body&&r(x.body);return x};g.prototype.initFromNode=function(b,c,d){var a=Q(b,l.ns_ttp,"cellResolution"),k=15;var e=32;null!==a&&(a=/(\d+) (\d+)/.exec(a),null!==a?(e=parseInt(a[1]),k=parseInt(a[2])):O(d,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new u.ComputedLength(0,1/k),w:new u.ComputedLength(1/e,0)};k=Q(b,l.ns_ttp,"frameRate");a=30;null!==k&&(e=/(\d+)/.exec(k),null!==e?a=parseInt(e[1]):O(d,"Malformed frame rate attribute (using initial value instead)"));
e=Q(b,l.ns_ttp,"frameRateMultiplier");var g=1;null!==e&&(e=/(\d+) (\d+)/.exec(e),null!==e?g=parseInt(e[1])/parseInt(e[2]):O(d,"Malformed frame rate multiplier attribute (using initial value instead)"));a*=g;g=1;e=Q(b,l.ns_ttp,"tickRate");null===e?null!==k&&(g=a):(e=/(\d+)/.exec(e),null!==e?g=parseInt(e[1]):O(d,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=a;this.tickRate=g;e=Q(b,l.ns_ittp,"aspectRatio");null===e&&(e=Q(b,l.ns_ttp,"displayAspectRatio"));k=null;
null!==e&&(a=/(\d+)\s+(\d+)/.exec(e),null!==a?(e=parseInt(a[1]),a=parseInt(a[2]),0!==e&&0!==a?k=e/a:N(d,"Illegal aspectRatio values (ignoring)")):N(d,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=k;k=Q(b,l.ns_ttp,"timeBase");null!==k&&"media"!==k&&H(d,"Unsupported time base");b=Z(b,d);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||H(d,"Extent on TT must be in px or absent"),this.pxLength={h:new u.ComputedLength(0,1/b.h.value),w:new u.ComputedLength(1/b.w.value,
0)});this.dimensions={h:new u.ComputedLength(0,1),w:new u.ComputedLength(1,0)};this.lang=c};g.prototype._registerEvent=function(b){if(!(b.end<=b.begin)){var c=Y(this.events,b.begin);c.found||this.events.splice(c.index,0,b.begin);b.end!==Number.POSITIVE_INFINITY&&(c=Y(this.events,b.end),c.found||this.events.splice(c.index,0,b.end))}};g.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};g.prototype.getMediaTimeEvents=function(){return this.events};B.prototype.initFromNode=
function(b,c){this.id=E(b);this.styleAttrs=S(b,c);this.styleRefs=A(b)};w.prototype.initFromNode=function(b,c){this.styleAttrs={};for(var d in b.attributes)!b.attributes.hasOwnProperty(d)||b.attributes[d].uri!==l.ns_itts&&b.attributes[d].uri!==l.ns_ebutts&&b.attributes[d].uri!==l.ns_tts||(this.styleAttrs[b.attributes[d].uri+" "+b.attributes[d].local]=b.attributes[d].value)};y.prototype.initFromNode=function(c,a,e,g,f){(this.src="src"in e.attributes?e.attributes.src.value:null)||N(f,"Invalid image@src attribute");
(this.type="type"in e.attributes?e.attributes.type.value:null)||N(f,"Invalid image@type attribute");k.prototype.initFromNode.call(this,c,a,e,f);z.prototype.initFromNode.call(this,c,a,e,f);d.prototype.initFromNode.call(this,c,a,e,f);b.prototype.initFromNode.call(this,c,a,e,f);this.lang=g};K.prototype.initFromNode=function(b,c,d,a){this.id=E(d)};b.prototype.initFromNode=function(b,c,d,a){this.regionID=d&&"region"in d.attributes?d.attributes.region.value:""};k.prototype.initFromNode=function(b,c,d,a){this.styleAttrs=
S(d,a);null!==b.head&&null!==b.head.styling&&X(b.head.styling,A(d),this.styleAttrs,a)};d.prototype.initFromNode=function(b,c,d,a){this.sets=[]};c.prototype.initFromNode=function(b,c,d,a){this.contents=[]};z.prototype.initFromNode=function(b,c,d,a){c=null;d&&"begin"in d.attributes&&(c=T(b.tickRate,b.effectiveFrameRate,d.attributes.begin.value),null===c&&O(a,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var k=null;d&&"dur"in d.attributes&&(k=T(b.tickRate,b.effectiveFrameRate,d.attributes.dur.value),
null===k&&O(a,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var e=null;d&&"end"in d.attributes&&(e=T(b.tickRate,b.effectiveFrameRate,d.attributes.end.value),null===e&&O(a,"Malformed end value (ignoring)"));this.explicit_begin=c;this.explicit_end=e;this.explicit_dur=k;(b=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==b?"seq"===b?a="seq":(N(a,"Illegal value of timeContainer (assuming 'par')"),a="par"):a="par";this.timeContainer=a};p.prototype.initFromNode=
function(a,e,g,f){k.prototype.initFromNode.call(this,a,null,e,f);z.prototype.initFromNode.call(this,a,null,e,f);d.prototype.initFromNode.call(this,a,null,e,f);b.prototype.initFromNode.call(this,a,null,e,f);c.prototype.initFromNode.call(this,a,null,e,f);this.lang=g};R.prototype.initFromNode=function(a,e,g,f,n){k.prototype.initFromNode.call(this,a,e,g,n);z.prototype.initFromNode.call(this,a,e,g,n);d.prototype.initFromNode.call(this,a,e,g,n);b.prototype.initFromNode.call(this,a,e,g,n);c.prototype.initFromNode.call(this,
a,e,g,n);this.lang=f};D.prototype.initFromNode=function(a,e,g,f,n){k.prototype.initFromNode.call(this,a,e,g,n);z.prototype.initFromNode.call(this,a,e,g,n);d.prototype.initFromNode.call(this,a,e,g,n);b.prototype.initFromNode.call(this,a,e,g,n);c.prototype.initFromNode.call(this,a,e,g,n);this.lang=f};t.prototype.initFromNode=function(a,e,g,f,n,l){k.prototype.initFromNode.call(this,a,e,g,l);z.prototype.initFromNode.call(this,a,e,g,l);d.prototype.initFromNode.call(this,a,e,g,l);b.prototype.initFromNode.call(this,
a,e,g,l);c.prototype.initFromNode.call(this,a,e,g,l);this.space=n;this.lang=f};L.prototype.initFromText=function(b,c,d,a,e,k){z.prototype.initFromNode.call(this,b,c,null,k);this.text=d;this.space=e;this.lang=a};F.prototype.initFromNode=function(c,d,a,e,k){b.prototype.initFromNode.call(this,c,d,a,k);z.prototype.initFromNode.call(this,c,d,a,k);this.lang=e};M.prototype.createDefaultRegion=function(b,c){var d=new M;d.id="";k.prototype.initFromNode.call(d,b,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",
value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",
ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},c);d.sets=[];z.call(d,0,Number.POSITIVE_INFINITY,null);this.lang=b.xmllang;return d};M.prototype.initFromNode=function(b,
c,a,e){K.prototype.initFromNode.call(this,b,null,c,e);z.prototype.initFromNode.call(this,b,null,c,e);d.prototype.initFromNode.call(this,b,null,c,e);this.styleAttrs=S(c,e);this.styleRefs=A(c);this.lang=a};V.prototype.initFromNode=function(b,c,d,a){z.prototype.initFromNode.call(this,b,c,d,a);b=S(d,a);this.value=this.qname=null;for(var e in b)if(b.hasOwnProperty(e)){if(this.qname){N(a,"More than one style specified on set");break}this.qname=e;this.value=b[e]}}})("undefined"===typeof u?this.imscDoc={}:
u,"undefined"===typeof sax?f("sax"):sax,"undefined"===typeof imscNames?f("./names"):imscNames,"undefined"===typeof imscStyles?f("./styles"):imscStyles,"undefined"===typeof imscUtils?f("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7,sax:void 0}],2:[function(f,w,u){(function(f,r,l,h){function m(b){var a={};b=Object.entries(b);for(var d in b)if(b.hasOwnProperty(d)){var c=h.parseColor(b[d][0]),e=h.parseColor(b[d][1]);c&&e&&(a[c.toString()]=e)}return a}function u(b,k,d,c){if("region"===d.kind){var f=
document.createElement("div");f.style.position="absolute"}else if("body"===d.kind)f=document.createElement("div");else if("div"===d.kind)f=document.createElement("div");else if("image"===d.kind){if(f=document.createElement("img"),null!==b.imgResolver&&null!==d.src){var p=b.imgResolver(d.src,f);p&&(f.src=p);f.height=b.regionH;f.width=b.regionW}}else if("p"===d.kind)f=document.createElement("p");else if("span"===d.kind)if("container"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("ruby"),
b.ruby=!0;else if("base"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rb");else if("text"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rt");else if("baseContainer"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rbc");else if("textContainer"===d.styleAttrs[l.byName.ruby.qname])f=document.createElement("rtc");else{if("delimiter"===d.styleAttrs[l.byName.ruby.qname])return;f=document.createElement("span")}else"br"===d.kind&&(f=document.createElement("br"));
if(f){!d.lang||"region"!==d.kind&&d.lang===c.lang||(f.lang=d.lang);k.appendChild(f);f.style.margin="0";if("region"===d.kind)if(k=d.styleAttrs[l.byName.writingMode.qname],"lrtb"===k||"lr"===k)b.ipd="lr",b.bpd="tb";else if("rltb"===k||"rl"===k)b.ipd="rl",b.bpd="tb";else if("tblr"===k)b.ipd="tb",b.bpd="lr";else{if("tbrl"===k||"tb"===k)b.ipd="tb",b.bpd="rl"}else"p"===d.kind&&"tb"===b.bpd&&(b.ipd="ltr"===d.styleAttrs[l.byName.direction.qname]?"lr":"rl");for(var v in C)C.hasOwnProperty(v)&&(k=C[v],c=d.styleAttrs[k.qname],
void 0!==c&&null!==k.map&&k.map(b,f,d,c));v=f;(k=d.styleAttrs[l.byName.linePadding.qname])&&!k.isZero()&&(c=k.multiply(k.toUsedLength(b.w,b.h),b.options.sizeAdjust),0<c&&(c=Math.ceil(c)+"px","tb"===b.bpd?(v.style.paddingLeft=c,v.style.paddingRight=c):(v.style.paddingTop=c,v.style.paddingBottom=c),b.removePaddingElement=v,b.lp=k));(k=d.styleAttrs[l.byName.multiRowAlign.qname])&&"auto"!==k&&(v=document.createElement("span"),v.style.display="inline-block",v.style.textAlign=k,f.appendChild(v),b.mra=k);
(k=d.styleAttrs[l.byName.rubyReserve.qname])&&"none"!==k[0]&&(b.rubyReserve=k);d.styleAttrs[l.byName.fillLineGap.qname]&&(b.flg=!0);if("span"===d.kind&&d.text)if((k=d.styleAttrs[l.byName.textEmphasis.qname])&&"none"!==k.style&&(b.textEmphasis=!0),l.byName.textCombine.qname in d.styleAttrs&&"all"===d.styleAttrs[l.byName.textCombine.qname])f.textContent=d.text,k&&g(b,f,d,k);else for(c="",p=0;p<d.text.length;p++){c+=d.text.charAt(p);var m=d.text.charCodeAt(p);if(55296>m||56319<m||p===d.text.length-1)m=
document.createElement("span"),m.textContent=c,k&&g(b,m,d,k),f.appendChild(m),c="",m._isd_element=d}for(var t in d.contents)d.contents.hasOwnProperty(t)&&u(b,v,d.contents[t],d);t=[];if((b.lp||b.mra||b.flg||b.ruby||b.textEmphasis||b.rubyReserve)&&"p"===d.kind){n(b,v,t,null);if(b.rubyReserve){for(k=0;k<t.length;k++){c=document.createElement("ruby");p=document.createElement("rb");p.textContent="\u200b";c.appendChild(p);var h=b.rubyReserve[1].toUsedLength(b.w,b.h)+"px";"both"===b.rubyReserve[0]||"outside"===
b.rubyReserve[0]&&1==t.length?(p=document.createElement("rtc"),p.style[J]=w?"after":"under",p.textContent="\u200b",p.style.fontSize=h,m=document.createElement("rtc"),m.style[J]=w?"before":"over",m.textContent="\u200b",m.style.fontSize=h,c.appendChild(p),c.appendChild(m)):(p=document.createElement("rtc"),p.textContent="\u200b",p.style.fontSize=h,p.style[J]="after"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&0<k?w?"after":"tb"===b.bpd||"rl"===b.bpd?"under":"over":w?"before":"tb"===b.bpd||"rl"===
b.bpd?"over":"under",c.appendChild(p));p=null;for(m=0;m<t[k].rbc.length;m++)if("ruby"===t[k].rbc[m].localName){p=t[k].rbc[m];for(m=0;m<p.style.length;m++)c.style.setProperty(p.style.item(m),p.style.getPropertyValue(p.style.item(m)));break}p=p||t[k].elements[0].node;p.parentElement.insertBefore(c,p)}b.rubyReserve=null}if(b.ruby||b.rubyReserve){for(k=0;k<t.length;k++)for(c=0;c<t[k].rbc.length;c++)t[k].rbc[c].style[J]||(t[k].rbc[c].style[J]=w?0===k?"before":"after":"tb"===b.bpd?0===k?"over":"under":
"rl"===b.bpd?0===k?"over":"under":0===k?"under":"over");b.ruby=null}if(b.textEmphasis){for(k=0;k<t.length;k++)for(c=0;c<t[k].te.length;c++)t[k].te[c].style[K]&&"none"!==t[k].te[c].style[K]||(t[k].te[c].style[K]="tb"===b.bpd?0===k?"left over":"left under":"rl"===b.bpd?0===k?"right under":"left under":0===k?"left under":"right under");b.textEmphasis=null}if(b.mra){for(k=0;k<t.length-1;k++)p=t[k].elements.length,0!==p&&!1===t[k].br&&(c=document.createElement("br"),p=t[k].elements[p-1].node,p.parentElement.insertBefore(c,
p.nextSibling));b.mra=null}if(b.lp){k=b.lp.multiply(b.lp.toUsedLength(b.w,b.h),b.options.sizeAdjust);for(c=0;c<t.length;c++){p=t[c].elements[t[c].start_elem];m=t[c].elements[t[c].end_elem];h=Math.ceil(k)+"px";var r="-"+Math.ceil(k)+"px";0!==t[c].elements.length&&("lr"===b.ipd?p.node.style.paddingLeft=h:"rl"===b.ipd?(p.node.style.borderRightColor=p.bgcolor||"#00000000",p.node.style.borderRightStyle="solid",p.node.style.borderRightWidth=h,p.node.style.marginRight=r):"tb"===b.ipd&&(p.node.style.borderTopColor=
p.bgcolor||"#00000000",p.node.style.borderTopStyle="solid",p.node.style.borderTopWidth=h,p.node.style.marginTop=r),"lr"===b.ipd?m.node.style.paddingRight=h:"rl"===b.ipd?(m.node.style.borderLeftColor=m.bgcolor||"#00000000",m.node.style.borderLeftStyle="solid",m.node.style.borderLeftWidth=h,m.node.style.marginLeft=r):"tb"===b.ipd&&(m.node.style.borderBottomColor=m.bgcolor||"#00000000",m.node.style.borderBottomStyle="solid",m.node.style.borderBottomWidth=h,m.node.style.marginBottom=r))}"tb"===b.bpd?
(b.removePaddingElement.style.paddingLeft=0,b.removePaddingElement.style.paddingRight=0):(b.removePaddingElement.style.paddingTop=0,b.removePaddingElement.style.paddingBottom=0);b.lp=null}if(b.flg){c=e(v.getBoundingClientRect(),b);k=c.before;c=c.after;p=v;m=Math.sign(c-k);for(h=0;h<=t.length;h++){r=0;var B=0===h?k:h===t.length?c:Math.abs(t[h].end-t[h].start)>Math.abs(t[h-1].end-t[h-1].start)?t[h].before:t[h-1].after+r;var y;if(0<h){for(y=0;y<t[h-1].elements.length;y++)if(null!==t[h-1].elements[y].bgcolor){var E=
t[h-1].elements[y];0>m*(E.after-B)&&(E=Math.abs(B-E.after),E>r&&(r=E))}var A=p.getElementsByTagName("span")[h];if(t[h]&&A.childElementCount!=t[h].elements.length)for(y=0;y<t[h-1].elements.length;y++)A=t[h-1].elements[y],E=r+"px solid "+A.bgcolor,"lr"===b.bpd?A.node.style.borderRight=E:"rl"===b.bpd?A.node.style.borderLeft=E:"tb"===b.bpd&&(A.node.style.borderBottom=E);else""==A.style.borderBottom&&("lr"===b.bpd?A.style.paddingRight=r+"px":"rl"===b.bpd?A.style.paddingLeft=r+"px":"tb"===b.bpd&&(A.style.paddingBottom=
r+"px"))}if(h<t.length){for(y=r=0;y<t[h].elements.length;y++)E=t[h].elements[y],null!==E.bgcolor&&0<m*(E.before-B)&&(E=Math.abs(E.before-B),E>r&&(r=E));A=p.getElementsByTagName("span")[h];if(A.childElementCount==t[h].elements.length)"lr"===b.bpd?A.style.paddingLeft=r+"px":"rl"===b.bpd?A.style.paddingRight=r+"px":"tb"===b.bpd&&(A.style.paddingTop=r+"px");else for(y=0;y<t[h].elements.length;y++)A=t[h].elements[y],E=r+"px solid "+A.bgcolor,"lr"===b.bpd?A.node.style.borderLeft=E:"rl"===b.bpd?A.node.style.borderRight=
E:"tb"===b.bpd&&(A.node.style.borderTop=E)}}b.flg=null}for(k=0;k<t.length;k++)for(c=t[k],p=1;p<c.elements.length;){m=c.elements[p-1].node;h=c.elements[p].node;if("SPAN"===m.tagName&&"SPAN"===h.tagName&&m._isd_element===h._isd_element){m.textContent+=h.textContent;for(r=0;r<h.style.length;r++)if(B=h.style[r],0<=B.indexOf("border")||0<=B.indexOf("padding"))m.style[B]=h.style[B];h.parentElement.removeChild(h);m=!0}else m=!1;m?c.elements.splice(p,1):p++}}"region"===d.kind&&"tb"===b.bpd&&b.enableRollUp&&
0<d.contents.length&&"after"===d.styleAttrs[l.byName.displayAlign.qname]&&(n(b,v,t,null),d=new a(""===d.id?"_":d.id,t),b.currentISDState[d.id]=d,b.previousISDState&&d.id in b.previousISDState&&0<b.previousISDState[d.id].plist.length&&1<d.plist.length&&d.plist[d.plist.length-2].text===b.previousISDState[d.id].plist[b.previousISDState[d.id].plist.length-1].text&&(b=f.firstElementChild,d=d.plist[d.plist.length-1].after-d.plist[d.plist.length-1].before,b.style.bottom="-"+d+"px",b.style.transition="transform 0.4s",
b.style.position="relative",b.style.transform="translateY(-"+d+"px)"))}else if(b=b.errorHandler,d="Error processing ISD element kind: "+d.kind,b&&b.error&&b.error(d))throw d;}function a(b,a){this.id=b;this.plist=a}function e(b,a){var d={before:null,after:null,start:null,end:null};"tb"===a.bpd?(d.before=b.top,d.after=b.bottom,"lr"===a.ipd?(d.start=b.left,d.end=b.right):(d.start=b.right,d.end=b.left)):"lr"===a.bpd?(d.before=b.left,d.after=b.right,d.start=b.top,d.end=b.bottom):"rl"===a.bpd&&(d.before=
b.right,d.after=b.left,d.start=b.top,d.end=b.bottom);return d}function n(b,a,d,c){if("rt"!==a.localName&&"rtc"!==a.localName)if(c=a.style.backgroundColor||c,0===a.childElementCount)if("span"===a.localName||"rb"===a.localName){var k=a.getBoundingClientRect();if(0!==k.height&&0!==k.width){b=e(k,b);if(!(k=0===d.length)){k=b.before;var g=b.after,f=d[d.length-1].before,m=d[d.length-1].after;k=!(g<m&&k>f||m<=g&&f>=k)}k?d.push({before:b.before,after:b.after,start:b.start,end:b.end,start_elem:0,end_elem:0,
elements:[],rbc:[],te:[],text:"",br:!1}):(k=Math.sign(b.after-b.before),g=Math.sign(b.end-b.start),0>k*(b.before-d[d.length-1].before)&&(d[d.length-1].before=b.before),0<k*(b.after-d[d.length-1].after)&&(d[d.length-1].after=b.after),0>g*(b.start-d[d.length-1].start)&&(d[d.length-1].start=b.start,d[d.length-1].start_elem=d[d.length-1].elements.length),0<g*(b.end-d[d.length-1].end)&&(d[d.length-1].end=b.end,d[d.length-1].end_elem=d[d.length-1].elements.length));d[d.length-1].text+=a.textContent;d[d.length-
1].elements.push({node:a,bgcolor:c,before:b.before,after:b.after})}}else"br"===a.localName&&0!==d.length&&(d[d.length-1].br=!0);else for(a=a.firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&(n(b,a,d,c),"ruby"===a.localName||"rtc"===a.localName?0<d.length&&d[d.length-1].rbc.push(a):"span"===a.localName&&a.style[y]&&"none"!==a.style[y]&&0<d.length&&d[d.length-1].te.push(a)),a=a.nextSibling}function g(b,a,d,c){"none"!==c.style&&(a.style[y]="auto"===c.style?"filled":c.style+" "+c.symbol,"before"===c.position||
"after"===c.position)&&(a.style[K]="tb"===b.bpd?"before"===c.position?"left over":"left under":"rl"===b.bpd?"before"===c.position?"right under":"left under":"before"===c.position?"left under":"right under")}function v(b,a){this.qname=b;this.map=a}f.render=function(b,a,d,c,e,g,f,n,l,v){c=c||a.clientHeight;var k=e||a.clientWidth;null!==b.aspectRatio&&(e=c*b.aspectRatio,e>k?c=Math.round(k/b.aspectRatio):k=e);e=document.createElement("div");e.style.position="relative";e.style.width=k+"px";e.style.height=
c+"px";e.style.margin="auto";e.style.top=0;e.style.bottom=0;e.style.left=0;e.style.right=0;e.style.zIndex=0;d={h:c,w:k,regionH:null,regionW:null,imgResolver:d,displayForcedOnlyMode:g||!1,isd:b,errorHandler:f,previousISDState:n,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},v)||{}};d.options.colorAdjust&&(d.options.colorAdjust=m(d.options.colorAdjust));g=["region","body","div","p","span"];for(var h in g)g.hasOwnProperty(h)&&
(f=g[h]+"BackgroundColorAdjust",d.options[f]&&(d.options[f]=m(d.options[f])));a.appendChild(e);for(var C in b.contents)b.contents.hasOwnProperty(C)&&u(d,e,b.contents[C],b);return d.currentISDState};var C=[new v("http://www.w3.org/ns/ttml#styling backgroundColor",function(b,a,d,c){(d=(d=b.options[d.kind+"BackgroundColorAdjust"])&&d[c.toString()])&&(c=d);d=c[3];0!==d&&(void 0!=b.options.backgroundOpacityScale&&(d*=b.options.backgroundOpacityScale),a.style.backgroundColor="rgba("+c[0].toString()+","+
c[1].toString()+","+c[2].toString()+","+(d/255).toString()+")")}),new v("http://www.w3.org/ns/ttml#styling color",function(b,a,d,c){d=b.options.colorOpacityScale||1;b=b.options.colorAdjust;void 0!=b&&(b=b[c.toString()])&&(c=b);a.style.color="rgba("+c[0].toString()+","+c[1].toString()+","+c[2].toString()+","+(d*c[3]/255).toString()+")"}),new v("http://www.w3.org/ns/ttml#styling direction",function(b,a,d,c){a.style.direction=c}),new v("http://www.w3.org/ns/ttml#styling display",function(b,a,d,c){}),
new v("http://www.w3.org/ns/ttml#styling displayAlign",function(b,a,d,c){a.style.display="flex";a.style.flexDirection="column";"before"===c?a.style.justifyContent="flex-start":"center"===c?a.style.justifyContent="center":"after"===c&&(a.style.justifyContent="flex-end")}),new v("http://www.w3.org/ns/ttml#styling extent",function(b,a,d,c){b.regionH=c.h.toUsedLength(b.w,b.h);b.regionW=c.w.toUsedLength(b.w,b.h);var e=c=0;if(d=d.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])c=d[0].toUsedLength(b.w,
b.h)+d[2].toUsedLength(b.w,b.h),e=d[1].toUsedLength(b.w,b.h)+d[3].toUsedLength(b.w,b.h);a.style.height=b.regionH-c+"px";a.style.width=b.regionW-e+"px"}),new v("http://www.w3.org/ns/ttml#styling fontFamily",function(b,a,d,c){d=[];b.options.fontFamily&&(c=b.options.fontFamily.split(","));for(var e in c)c[e].hasOwnProperty(e)&&(c[e]=c[e].trim(),"monospaceSerif"===c[e]?(d.push("Courier New"),d.push('"Liberation Mono"'),d.push("Courier"),d.push("monospace")):"proportionalSansSerif"===c[e]||"default"===
c[e]?(d.push("Arial"),d.push("Helvetica"),d.push('"Liberation Sans"'),d.push("sans-serif")):"monospace"===c[e]?d.push("monospace"):"sansSerif"===c[e]?d.push("sans-serif"):"serif"===c[e]?d.push("serif"):"monospaceSansSerif"===c[e]?(d.push("Consolas"),d.push("monospace")):"proportionalSerif"===c[e]?d.push("serif"):d.push(c[e]));if(0<d.length){b=[d[0]];for(c=1;c<d.length;c++)-1==b.indexOf(d[c])&&b.push(d[c]);d=b}a.style.fontFamily=d.join(",")}),new v("http://www.w3.org/ns/ttml#styling shear",function(b,
a,d,c){0!==c&&(d=-.9*c,a.style.transform="tb"===b.bpd?"skewX("+d+"deg)":"skewY("+d+"deg)")}),new v("http://www.w3.org/ns/ttml#styling fontSize",function(b,a,d,c){a.style.fontSize=c.multiply(c.toUsedLength(b.w,b.h),b.options.sizeAdjust)+"px"}),new v("http://www.w3.org/ns/ttml#styling fontStyle",function(b,a,d,c){a.style.fontStyle=c}),new v("http://www.w3.org/ns/ttml#styling fontWeight",function(b,a,d,c){a.style.fontWeight=c}),new v("http://www.w3.org/ns/ttml#styling lineHeight",function(b,a,d,c){a.style.lineHeight=
"normal"===c?"normal":c.multiply(c.multiply(c.toUsedLength(b.w,b.h),b.options.sizeAdjust),b.options.lineHeightAdjust)+"px"}),new v("http://www.w3.org/ns/ttml#styling opacity",function(b,a,d,c){d=c;void 0!=b.options.regionOpacityScale&&(d*=b.options.regionOpacityScale);a.style.opacity=d}),new v("http://www.w3.org/ns/ttml#styling origin",function(b,a,d,c){a.style.top=c.h.toUsedLength(b.w,b.h)+"px";a.style.left=c.w.toUsedLength(b.w,b.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling overflow",function(b,
a,d,c){a.style.overflow=c}),new v("http://www.w3.org/ns/ttml#styling padding",function(b,a,d,c){d=[];d[0]=c[0].toUsedLength(b.w,b.h)+"px";d[1]=c[3].toUsedLength(b.w,b.h)+"px";d[2]=c[2].toUsedLength(b.w,b.h)+"px";d[3]=c[1].toUsedLength(b.w,b.h)+"px";a.style.padding=d.join(" ")}),new v("http://www.w3.org/ns/ttml#styling position",function(b,a,d,c){a.style.top=c.h.toUsedLength(b.w,b.h)+"px";a.style.left=c.w.toUsedLength(b.w,b.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling rubyAlign",function(b,a,
d,c){a.style.rubyAlign="spaceAround"===c?"space-around":"center"}),new v("http://www.w3.org/ns/ttml#styling rubyPosition",function(b,a,d,c){if("before"===c||"after"===c)a.parentElement.style[J]=w?c:"tb"===b.bpd?"before"===c?"over":"under":"rl"===b.bpd?"before"===c?"over":"under":"before"===c?"under":"over"}),new v("http://www.w3.org/ns/ttml#styling showBackground",null),new v("http://www.w3.org/ns/ttml#styling textAlign",function(b,a,d,c){a.style.textAlign="start"===c?"rl"===b.ipd?"right":"left":
"end"===c?"rl"===b.ipd?"left":"right":c}),new v("http://www.w3.org/ns/ttml#styling textDecoration",function(b,a,d,c){a.style.textDecoration=c.join(" ").replace("lineThrough","line-through")}),new v("http://www.w3.org/ns/ttml#styling textOutline",function(b,a,d,c){}),new v("http://www.w3.org/ns/ttml#styling textShadow",function(b,a,d,c){d=d.styleAttrs[l.byName.textOutline.qname];var e=b.options.textOutline;if(e)if("none"===e)d=e;else{var g={};e=e.split(" ");if(0!==e.length&&2>=e.length){var f=h.parseColor(e[0]);
g.color=f;null!==f&&e.shift();1===e.length&&(e=h.parseLength(e[0]))&&(g.thickness=e,d=g)}}if("none"===c&&"none"===d)a.style.textShadow="";else{g=[];"none"!==d&&(d="rgba("+d.color[0].toString()+","+d.color[1].toString()+","+d.color[2].toString()+","+(d.color[3]/255).toString()+")",g.push("1px 1px 1px "+d),g.push("-1px 1px 1px "+d),g.push("1px -1px 1px "+d),g.push("-1px -1px 1px "+d));if("none"!==c)for(var k in c)c.hasOwnProperty(k)&&g.push(c[k].x_off.toUsedLength(b.w,b.h)+"px "+c[k].y_off.toUsedLength(b.w,
b.h)+"px "+c[k].b_radius.toUsedLength(b.w,b.h)+"px rgba("+c[k].color[0].toString()+","+c[k].color[1].toString()+","+c[k].color[2].toString()+","+(c[k].color[3]/255).toString()+")");a.style.textShadow=g.join(",")}}),new v("http://www.w3.org/ns/ttml#styling textCombine",function(b,a,d,c){a.style.textCombineUpright=c}),new v("http://www.w3.org/ns/ttml#styling textEmphasis",function(b,a,d,c){}),new v("http://www.w3.org/ns/ttml#styling unicodeBidi",function(b,a,d,c){a.style.unicodeBidi="bidiOverride"===
c?"bidi-override":c}),new v("http://www.w3.org/ns/ttml#styling visibility",function(b,a,d,c){a.style.visibility=c}),new v("http://www.w3.org/ns/ttml#styling wrapOption",function(b,a,d,c){a.style.whiteSpace="wrap"===c?"preserve"===d.space?"pre-wrap":"normal":"preserve"===d.space?"pre":"noWrap"}),new v("http://www.w3.org/ns/ttml#styling writingMode",function(b,a,d,c){if("lrtb"===c||"lr"===c)a.style.writingMode="horizontal-tb";else if("rltb"===c||"rl"===c)a.style.writingMode="horizontal-tb";else if("tblr"===
c)a.style.writingMode="vertical-lr";else if("tbrl"===c||"tb"===c)a.style.writingMode="vertical-rl"}),new v("http://www.w3.org/ns/ttml#styling zIndex",function(b,a,d,c){a.style.zIndex=c}),new v("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(b,a,d,c){b.displayForcedOnlyMode&&!1===c&&(a.style.visibility="hidden")})],B;for(B in C)C.hasOwnProperty(B);var w="webkitRubyPosition"in window.getComputedStyle(document.documentElement),J=w?"webkitRubyPosition":"rubyPosition",y="webkitTextEmphasisStyle"in
window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",K="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof u?this.imscHTML={}:u,"undefined"===typeof imscNames?f("./names"):imscNames,"undefined"===typeof imscStyles?f("./styles"):imscStyles,"undefined"===typeof imscUtils?f("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],3:[function(f,w,u){(function(f,
r,l,h){function m(f,n,r,J,y,w,b,k,d){if(n<b.begin||n>=b.end)return null;w="regionID"in b&&""!==b.regionID?b.regionID:w;if(null!==y&&w!==r.id&&(!("contents"in b)||"contents"in b&&0===b.contents.length||""!==w))return null;var c=new g(b);for(C in b.sets)!b.sets.hasOwnProperty(C)||n<b.sets[C].begin||n>=b.sets[C].end||(c.styleAttrs[b.sets[C].qname]=b.sets[C].value);var C={};for(var p in c.styleAttrs)if(c.styleAttrs.hasOwnProperty(p)&&(C[p]=!0,"region"===c.kind&&p===l.byName.writingMode.qname&&!(l.byName.direction.qname in
c.styleAttrs))){var B=c.styleAttrs[p];if("lrtb"===B||"lr"===B)c.styleAttrs[l.byName.direction.qname]="ltr";else if("rltb"===B||"rl"===B)c.styleAttrs[l.byName.direction.qname]="rtl"}if(null!==y)for(var D in l.all)if(l.all.hasOwnProperty(D))if(p=l.all[D],p.qname===l.byName.textDecoration.qname){B=y.styleAttrs[p.qname];var t=c.styleAttrs[p.qname],L=[];void 0===t?L=B:-1===t.indexOf("none")?((-1===t.indexOf("noUnderline")&&-1!==B.indexOf("underline")||-1!==t.indexOf("underline"))&&L.push("underline"),
(-1===t.indexOf("noLineThrough")&&-1!==B.indexOf("lineThrough")||-1!==t.indexOf("lineThrough"))&&L.push("lineThrough"),(-1===t.indexOf("noOverline")&&-1!==B.indexOf("overline")||-1!==t.indexOf("overline"))&&L.push("overline")):L.push("none");c.styleAttrs[p.qname]=L}else p.qname!==l.byName.fontSize.qname||p.qname in c.styleAttrs||"span"!==c.kind||"textContainer"!==c.styleAttrs[l.byName.ruby.qname]?p.qname!==l.byName.fontSize.qname||p.qname in c.styleAttrs||"span"!==c.kind||"text"!==c.styleAttrs[l.byName.ruby.qname]?
p.inherit&&p.qname in y.styleAttrs&&!(p.qname in c.styleAttrs)&&(c.styleAttrs[p.qname]=y.styleAttrs[p.qname]):(B=y.styleAttrs[l.byName.fontSize.qname],c.styleAttrs[p.qname]="textContainer"===y.styleAttrs[l.byName.ruby.qname]?B:new h.ComputedLength(.5*B.rw,.5*B.rh)):(B=y.styleAttrs[l.byName.fontSize.qname],c.styleAttrs[p.qname]=new h.ComputedLength(.5*B.rw,.5*B.rh));for(var F in l.all)if(l.all.hasOwnProperty(F)&&(D=l.all[F],!(D.qname in c.styleAttrs||D.qname===l.byName.position.qname&&l.byName.origin.qname in
c.styleAttrs||D.qname===l.byName.origin.qname&&l.byName.position.qname in c.styleAttrs)&&(p=f.head.styling.initials[D.qname]||D.initial,null!==p&&("region"===c.kind||!1===D.inherit&&null!==p))))if(p=D.parse(p),null!==p)c.styleAttrs[D.qname]=p,C[D.qname]=!0;else if(D="Invalid initial value for '"+D.qname+"' on element '"+c.kind,k&&k.error&&k.error(D))throw D;for(var M in l.all)if(l.all.hasOwnProperty(M)&&(F=l.all[M],F.qname in C&&null!==F.compute))if(D=F.compute(f,y,c,c.styleAttrs[F.qname],d),null!==
D)c.styleAttrs[F.qname]=D;else if(c.styleAttrs[F.qname]=F.compute(f,y,c,F.parse(F.initial),d),F="Style '"+F.qname+"' on element '"+c.kind+"' cannot be computed",k&&k.error&&k.error(F))throw F;if("none"===c.styleAttrs[l.byName.display.qname])return null;if(null===y)var K=null===J?[]:[J];else"contents"in b&&(K=b.contents);for(var E in K)K.hasOwnProperty(E)&&(y=m(f,n,r,J,c,w,K[E],k,d),null!==y&&c.contents.push(y.element));for(var A in c.styleAttrs)c.styleAttrs.hasOwnProperty(A)&&(f=!1,"span"===c.kind&&
(n=c.styleAttrs[l.byName.ruby.qname],(f=("container"===n||"textContainer"===n||"baseContainer"===n)&&-1!==v.indexOf(A))||(f="container"!==n&&A===l.byName.rubyAlign.qname),f||(f=!("textContainer"===n||"text"===n)&&A===l.byName.rubyPosition.qname)),f||(f=-1===l.byQName[A].applies.indexOf(c.kind)),f&&delete c.styleAttrs[A]);A=c.styleAttrs[l.byName.ruby.qname];if("p"===c.kind||"span"===c.kind&&("textContainer"===A||"text"===A))A=[],a(c,A),u(A),e(c);return"div"===c.kind&&l.byName.backgroundImage.qname in
c.styleAttrs||"br"===c.kind||"image"===c.kind||"contents"in c&&0<c.contents.length||"span"===c.kind&&null!==c.text||"region"===c.kind&&"always"===c.styleAttrs[l.byName.showBackground.qname]?{region_id:w,element:c}:null}function u(a){function e(b){return"br"===b.kind||/[\r\n\t ]$/.test(b.text)}function f(b){return"br"===b.kind||"preserve"===b.space&&/^[\r\n]/.test(b.text)}for(var g,n=0;n<a.length;)if(g=a[n],"br"===g.kind||"preserve"===g.space)n++;else{var m=g.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(m)&&
(0===n||e(a[n-1]))&&(m=m.substring(1));g.text=m;0===m.length?a.splice(n,1):n++}for(n=0;n<a.length;n++)g=a[n],"br"===g.kind||"preserve"===g.space?n++:/[ ]$/.test(g.text)&&(n===a.length-1||f(a[n+1]))&&(g.text=g.text.slice(0,-1))}function a(e,g){for(var f in e.contents)if(e.contents.hasOwnProperty(f)){var n=e.contents[f],m=n.styleAttrs[l.byName.ruby.qname];if("span"!==n.kind||"textContainer"!==m&&"text"!==m)"contents"in n?a(n,g):("span"===n.kind&&0!==n.text.length||"br"===n.kind)&&g.push(n)}}function e(a){if("br"===
a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var g=a.contents.length;g--;)e(a.contents[g])&&a.contents.splice(g,1);return 0===a.contents.length}}function n(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=a.lang}function g(a){this.kind=a.kind||"region";this.lang=a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var e in a.styleAttrs)a.styleAttrs.hasOwnProperty(e)&&(this.styleAttrs[e]=a.styleAttrs[e]);"src"in a&&(this.src=a.src);"type"in a&&(this.type=
a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}f.generateISD=function(a,e,g){function f(b,a){function c(a){return!(b<a.begin||b>=a.end)}if(a.contents){var d={},e;for(e in a)a.hasOwnProperty(e)&&(d[e]=a[e]);d.contents=[];a.contents.filter(c).forEach(function(a){a=f(b,a);a.regionID&&(k[a.regionID]=!0);null!==a&&d.contents.push(a)});return d}return a}var h=new n(a),v={},b={},k={};b=a.head.styling.initials[l.byName.showBackground.qname];
var d=a.head.styling.initials[l.byName.backgroundColor.qname];for(C in a.head.layout.regions)if(a.head.layout.regions.hasOwnProperty(C)){var c=a.head.layout.regions[C],r=c.styleAttrs[l.byName.showBackground.qname]||b,p=c.styleAttrs[l.byName.backgroundColor.qname]||d;k[c.id]=("always"===r||void 0===r)&&void 0!==p&&!(e<c.begin||e>=c.end)}a.body&&a.body.regionID&&(k[a.body.regionID]=!0);b=null!==a.body?f(e,a.body):null;void 0!==k[""]&&(k[""]=!0);for(var u in k)if(k[u]){var C=m(a,e,a.head.layout.regions[u],
b,null,"",a.head.layout.regions[u],g,v);null!==C&&h.contents.push(C.element)}return h};var v=[l.byName.color.qname,l.byName.textCombine.qname,l.byName.textDecoration.qname,l.byName.textEmphasis.qname,l.byName.textOutline.qname,l.byName.textShadow.qname]})("undefined"===typeof u?this.imscISD={}:u,"undefined"===typeof imscNames?f("./names"):imscNames,"undefined"===typeof imscStyles?f("./styles"):imscStyles,"undefined"===typeof imscUtils?f("./utils"):imscUtils)},{"./names":5,"./styles":6,"./utils":7}],
4:[function(f,w,u){u.generateISD=f("./isd").generateISD;u.fromXML=f("./doc").fromXML;u.renderHTML=f("./html").render},{"./doc":1,"./html":2,"./isd":3}],5:[function(f,w,u){f="undefined"===typeof u?this.imscNames={}:u;f.ns_tt="http://www.w3.org/ns/ttml";f.ns_tts="http://www.w3.org/ns/ttml#styling";f.ns_ttp="http://www.w3.org/ns/ttml#parameter";f.ns_xml="http://www.w3.org/XML/1998/namespace";f.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";f.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";
f.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";f.ns_ebutts="urn:ebu:tt:style";f.ttaf_map={"http://www.w3.org/2006/10/ttaf1":f.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":f.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":f.ns_ttp}},{}],6:[function(f,w,u){(function(f,r,l){function h(a,e,f,g,l,h,m,r){this.name=e;this.ns=a;this.qname=a+" "+e;this.inherit=l;this.animatable=h;this.initial=f;this.applies=g;this.parse=m;this.compute=r}f.all=[new h(r.ns_tts,"backgroundColor","transparent",
["body","div","p","region","span"],!1,!0,l.parseColor,null),new h(r.ns_tts,"color","white",["span"],!0,!0,l.parseColor,null),new h(r.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new h(r.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new h(r.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new h(r.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var e=a.split(" ");if(2!==
e.length)return null;a=l.parseLength(e[0]);return(e=l.parseLength(e[1]))&&a?{h:e,w:a}:null},function(a,e,f,g,h){if("auto"===g)e=new l.ComputedLength(0,1);else if(e=l.toComputedLength(g.h.value,g.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===e)return null;if("auto"===g)a=new l.ComputedLength(1,0);else if(a=l.toComputedLength(g.w.value,g.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:e,w:a}}),new h(r.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(a){a=
a.split(",");for(var e=[],f=0;f<a.length;f++)"'"!==a[f].charAt(0)&&'"'!==a[f].charAt(0)?"default"===a[f]?e.push("monospaceSerif"):e.push(a[f]):e.push(a[f]);return e},null),new h(r.ns_tts,"shear","0%",["p"],!0,!0,l.parseLength,function(a,e,f,g){if("%"===g.unit)a=100<Math.abs(g.value)?100*Math.sign(g.value):g.value;else return null;return a}),new h(r.ns_tts,"fontSize","1c",["span","p"],!0,!0,l.parseLength,function(a,e,n,g,h){return l.toComputedLength(g.value,g.unit,null!==e?e.styleAttrs[f.byName.fontSize.qname]:
a.cellLength.h,null!==e?e.styleAttrs[f.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new h(r.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new h(r.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(a){return a},null),new h(r.ns_tts,"lineHeight","normal",["p"],!0,!0,function(a){return"normal"===a?a:l.parseLength(a)},function(a,e,n,g,h){if("normal"===g)a=g;else if(a=l.toComputedLength(g.value,g.unit,n.styleAttrs[f.byName.fontSize.qname],n.styleAttrs[f.byName.fontSize.qname],
a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new h(r.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new h(r.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;var e=a.split(" ");if(2!==e.length)return null;a=l.parseLength(e[0]);return(e=l.parseLength(e[1]))&&a?{h:e,w:a}:null},function(a,e,f,g,h){if("auto"===g)e=new l.ComputedLength(0,0);else if(e=l.toComputedLength(g.h.value,g.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===e)return null;if("auto"===
g)a=new l.ComputedLength(0,0);else if(a=l.toComputedLength(g.w.value,g.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:e,w:a}}),new h(r.ns_tts,"overflow","hidden",["region"],!1,!0,function(a){return a},null),new h(r.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;for(var e=[],f=0;f<a.length;f++){var g=l.parseLength(a[f]);if(!g)return null;e.push(g)}return e},function(a,e,n,g,h){if(1===g.length)e=[g[0],g[0],g[0],g[0]];else if(2===
g.length)e=[g[0],g[1],g[0],g[1]];else if(3===g.length)e=[g[0],g[1],g[2],g[1]];else if(4===g.length)e=[g[0],g[1],g[2],g[3]];else return null;g=n.styleAttrs[f.byName.writingMode.qname];if("lrtb"===g||"lr"===g)e=[e[0],e[3],e[2],e[1]];else if("rltb"===g||"rl"===g)e=[e[0],e[1],e[2],e[3]];else if("tblr"===g)e=[e[3],e[0],e[1],e[2]];else if("tbrl"===g||"tb"===g)e=[e[3],e[2],e[1],e[0]];else return null;g=[];for(h=0;h<e.length;h++)if(0===e[h].value)g[h]=new l.ComputedLength(0,0);else if(g[h]=l.toComputedLength(e[h].value,
e[h].unit,n.styleAttrs[f.byName.fontSize.qname],"0"===h||"2"===h?n.styleAttrs[f.byName.extent.qname].h:n.styleAttrs[f.byName.extent.qname].w,"0"===h||"2"===h?a.cellLength.h:a.cellLength.w,"0"===h||"2"===h?a.pxLength.h:a.pxLength.w),null===g[h])return null;return g}),new h(r.ns_tts,"position","top left",["region"],!1,!0,function(a){return l.parsePosition(a)},function(a,e,n,g){e=l.toComputedLength(g.v.offset.value,g.v.offset.unit,null,new l.ComputedLength(-n.styleAttrs[f.byName.extent.qname].h.rw,a.dimensions.h.rh-
n.styleAttrs[f.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===e)return null;"bottom"===g.v.edge&&(e=new l.ComputedLength(-e.rw-n.styleAttrs[f.byName.extent.qname].h.rw,a.dimensions.h.rh-e.rh-n.styleAttrs[f.byName.extent.qname].h.rh));var h=l.toComputedLength(g.h.offset.value,g.h.offset.unit,null,new l.ComputedLength(a.dimensions.w.rw-n.styleAttrs[f.byName.extent.qname].w.rw,-n.styleAttrs[f.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===e)return null;"right"===g.h.edge&&(h=new l.ComputedLength(a.dimensions.w.rw-
h.rw-n.styleAttrs[f.byName.extent.qname].w.rw,-h.rh-n.styleAttrs[f.byName.extent.qname].w.rh));return{h:e,w:h}}),new h(r.ns_tts,"ruby","none",["span"],!1,!0,function(a){return a},null),new h(r.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new h(r.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new h(r.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var e=a.split(" ");a=[null,null];if(0===e.length||2<e.length||
"none"!==e[0]&&"both"!==e[0]&&"after"!==e[0]&&"before"!==e[0]&&"outside"!==e[0])return null;a[0]=e[0];if(2===e.length&&"none"!==e[0])if(e=l.parseLength(e[1]))a[1]=e;else return null;return a},function(a,e,n,g,h){if("none"===g[0])return g;a=null===g[1]?new l.ComputedLength(.5*n.styleAttrs[f.byName.fontSize.qname].rw,.5*n.styleAttrs[f.byName.fontSize.qname].rh):l.toComputedLength(g[1].value,g[1].unit,n.styleAttrs[f.byName.fontSize.qname],n.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);
return null===a?null:[g[0],a]}),new h(r.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new h(r.ns_tts,"textAlign","start",["p"],!0,!0,function(a){return a},function(a,e,f,g,h){return"left"===g?"start":"right"===g?"end":g}),new h(r.ns_tts,"textCombine","none",["span"],!0,!0,function(a){return"none"===a||"all"===a?a:null},null),new h(r.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new h(r.ns_tts,"textEmphasis","none",["span"],
!0,!0,function(a){a=a.split(" ");for(var e={style:null,symbol:null,color:null,position:null},f=0;f<a.length;f++)if("none"===a[f]||"auto"===a[f])e.style=a[f];else if("filled"===a[f]||"open"===a[f])e.style=a[f];else if("circle"===a[f]||"dot"===a[f]||"sesame"===a[f])e.symbol=a[f];else if("current"===a[f])e.color=a[f];else if("outside"===a[f]||"before"===a[f]||"after"===a[f])e.position=a[f];else if(e.color=l.parseColor(a[f]),null===e.color)return null;null==e.style&&null==e.symbol?e.style="auto":(e.symbol=
e.symbol||"circle",e.style=e.style||"filled");e.position=e.position||"outside";e.color=e.color||"current";return e},null),new h(r.ns_tts,"textOutline","none",["span"],!0,!0,function(a){if("none"===a)return a;var e={};a=a.split(" ");if(0===a.length||2<a.length)return null;var f=l.parseColor(a[0]);e.color=f;null!==f&&a.shift();if(1!==a.length)return null;a=l.parseLength(a[0]);if(!a)return null;e.thickness=a;return e},function(a,e,h,g,m){if("none"===g)return g;e={};e.color=null===g.color?h.styleAttrs[f.byName.color.qname]:
g.color;e.thickness=l.toComputedLength(g.thickness.value,g.thickness.unit,h.styleAttrs[f.byName.fontSize.qname],h.styleAttrs[f.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===e.thickness?null:e}),new h(r.ns_tts,"textShadow","none",["span"],!0,!0,l.parseTextShadow,function(a,e,h,g){if("none"===g)return g;e=[];for(var n in g)if(n.hasOwnProperty(g)){var m={};m.x_off=l.toComputedLength(g[n][0].value,g[n][0].unit,null,h.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.w);if(null===
m.x_off)return null;m.y_off=l.toComputedLength(g[n][1].value,g[n][1].unit,null,h.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.h);if(null===m.y_off)return null;if(null===g[n][2])m.b_radius=0;else if(m.b_radius=l.toComputedLength(g[n][2].value,g[n][2].unit,null,h.styleAttrs[f.byName.fontSize.qname],null,a.pxLength.h),null===m.b_radius)return null;m.color=null===g[n][3]?h.styleAttrs[f.byName.color.qname]:g[n][3];e.push(m)}return e}),new h(r.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},
null),new h(r.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new h(r.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(a){return a},null),new h(r.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new h(r.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new h(r.ns_ebutts,"linePadding","0c",["p"],!0,!1,l.parseLength,function(a,e,f,g,h){return l.toComputedLength(g.value,
g.unit,null,null,a.cellLength.w,null)}),new h(r.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new h(r.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new h(r.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new h(r.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];f.byQName={};for(var m in f.all)f.all.hasOwnProperty(m)&&(f.byQName[f.all[m].qname]=
f.all[m]);f.byName={};for(var u in f.all)f.all.hasOwnProperty(u)&&(f.byName[f.all[u].name]=f.all[u])})("undefined"===typeof u?this.imscStyles={}:u,"undefined"===typeof imscNames?f("./names"):imscNames,"undefined"===typeof imscUtils?f("./utils"):imscUtils)},{"./names":5,"./utils":7}],7:[function(f,w,u){(function(f){var m=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,l=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,h=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,u={transparent:[0,
0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};f.parseColor=function(a){var e,f=null,g=u[a.toLowerCase()];void 0!==g?f=g:null!==(e=m.exec(a))?f=[parseInt(e[1],
16),parseInt(e[2],16),parseInt(e[3],16),void 0!==e[4]?parseInt(e[4],16):255]:null!==(e=l.exec(a))?f=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]:null!==(e=h.exec(a))&&(f=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]);return f};var w=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;f.parseLength=function(a){var e,f=null;null!==(e=w.exec(a))&&(f={value:parseFloat(e[1]),unit:e[2]});return f};f.parseTextShadow=function(a){a=a.split(",");for(var e=[],h=0;h<a.length;h++){var g=a[h].split(" ");
if(1===g.length&&"none"===g[0])return"none";if(1<g.length&&5>g.length){var l=[null,null,null,null],m=f.parseLength(g.shift());if(null===m)return null;l[0]=m;m=f.parseLength(g.shift());if(null===m)return null;l[1]=m;if(0!==g.length&&(m=f.parseLength(g[0]),null!==m&&(l[2]=m,g.shift()),0!==g.length)){g=f.parseColor(g[0]);if(null===g)return null;l[3]=g}e.push(l)}}return e};f.parsePosition=function(a){a=a.split(" ");var e=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};
if(4<a.length)return null;for(var h in a)if(a.hasOwnProperty(h)&&!e(a[h])){var g=f.parseLength(a[h]);if(null===g)return null;a[h]=g}h={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(g=0;g<a.length;){var l=a[g++];if(e(l)){var m={value:0,unit:"%"};2!==a.length&&g<a.length&&!e(a[g])&&(m=a[g++]);"right"===l?(h.h.edge=l,h.h.offset=m):"bottom"===l?(h.v.edge=l,h.v.offset=m):"left"===l?h.h.offset=m:"top"===l&&(h.v.offset=m)}else if(1===a.length||2===a.length)1===
g?h.h.offset=l:h.v.offset=l;else return null}return h};f.ComputedLength=function(a,e){this.rw=a;this.rh=e};f.ComputedLength.prototype.toUsedLength=function(a,e){return a*this.rw+e*this.rh};f.ComputedLength.prototype.multiply=function(a,e){return e?a*e:a};f.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};f.toComputedLength=function(a,e,h,g,l,m){return"%"===e&&g?new f.ComputedLength(g.rw*a/100,g.rh*a/100):"em"===e&&h?new f.ComputedLength(h.rw*a,h.rh*a):"c"===e&&l?new f.ComputedLength(a*
l.rw,a*l.rh):"px"===e&&m?new f.ComputedLength(a*m.rw,a*m.rh):"rh"===e?new f.ComputedLength(0,a/100):"rw"===e?new f.ComputedLength(a/100,0):null}})("undefined"===typeof u?this.imscUtils={}:u)},{}]},{},[4])(4)});
