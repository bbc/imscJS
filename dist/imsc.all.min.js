/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,p,l){c!=Array.prototype&&c!=Object.prototype&&(c[p]=l.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,p,l,b){if(p){l=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var h=c[b];h in l||(l[h]={});l=l[h]}c=c[c.length-1];b=l[c];p=p(b);p!=b&&null!=p&&$jscomp.defineProperty(l,c,{configurable:!0,writable:!0,value:p})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,l,b){var h=this.length||0;0>l&&(l=Math.max(0,h+l));if(null==b||b>h)b=h;b=Number(b);0>b&&(b=Math.max(0,h+b));for(l=Number(l||0);l<b;l++)this[l]=c;return this}},"es6","es3");
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(p){return $jscomp.SYMBOL_PREFIX+(p||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var p=0;return $jscomp.iteratorPrototype(function(){return p<c.length?{done:!1,value:c[p++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,p){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var l=0,b={next:function(){if(l<c.length){var h=l++;return{value:p(h,c[h]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(c){return c?c:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(c){return c?c:function(c){var l=[],b=Object.getOwnPropertyNames(c);c=Object.getOwnPropertySymbols(c);for(var h=0;h<b.length;h++)("jscomp_symbol_"==b[h].substring(0,14)?c:l).push(b[h]);return l.concat(c)}},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(c){return c?c:function(c){for(var l="",b=0;b<arguments.length;b++){var h=Number(arguments[b]);if(0>h||1114111<h||h!==Math.floor(h))throw new RangeError("invalid_code_point "+h);65535>=h?l+=String.fromCharCode(h):(h-=65536,l+=String.fromCharCode(h>>>10&1023|55296),l+=String.fromCharCode(h&1023|56320))}return l}},"es6","es3");$jscomp.owns=function(c,p){return Object.prototype.hasOwnProperty.call(c,p)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,p){for(var l=1;l<arguments.length;l++){var b=arguments[l];if(b)for(var h in b)$jscomp.owns(b,h)&&(c[h]=b[h])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(c){return c?c:function(c){var l=[],b;for(b in c)$jscomp.owns(c,b)&&l.push([b,c[b]]);return l}},"es8","es3");
$jscomp.polyfill("Math.sign",function(c){return c?c:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=c()})(function(){return function(){function c(p,l,b){function h(r,H){if(!l[r]){if(!p[r]){var a="function"==typeof require&&require;if(!H&&a)return a(r,!0);if(m)return m(r,!0);H=Error("Cannot find module '"+r+"'");throw H.code="MODULE_NOT_FOUND",H;}H=
l[r]={exports:{}};p[r][0].call(H.exports,function(a){return h(p[r][1][a]||a)},H,H.exports,c,p,l,b)}return l[r].exports}for(var m="function"==typeof require&&require,r=0;r<b.length;r++)h(b[r]);return h}return c}()({1:[function(c,p,l){function b(b){var a=b.length;if(0<a%4)throw Error("Invalid string. Length must be a multiple of 4");b=b.indexOf("=");-1===b&&(b=a);return[b,b===a?0:4-b%4]}function h(b,a,h){for(var c=[],w=a;w<h;w+=3)a=(b[w]<<16&16711680)+(b[w+1]<<8&65280)+(b[w+2]&255),c.push(m[a>>18&63]+
m[a>>12&63]+m[a>>6&63]+m[a&63]);return c.join("")}l.byteLength=function(h){h=b(h);var a=h[1];return 3*(h[0]+a)/4-a};l.toByteArray=function(h){var a=b(h);var c=a[0];a=a[1];var m=new v(3*(c+a)/4-a),x=0,q=0<a?c-4:c,y;for(y=0;y<q;y+=4)c=r[h.charCodeAt(y)]<<18|r[h.charCodeAt(y+1)]<<12|r[h.charCodeAt(y+2)]<<6|r[h.charCodeAt(y+3)],m[x++]=c>>16&255,m[x++]=c>>8&255,m[x++]=c&255;2===a&&(c=r[h.charCodeAt(y)]<<2|r[h.charCodeAt(y+1)]>>4,m[x++]=c&255);1===a&&(c=r[h.charCodeAt(y)]<<10|r[h.charCodeAt(y+1)]<<4|r[h.charCodeAt(y+
2)]>>2,m[x++]=c>>8&255,m[x++]=c&255);return m};l.fromByteArray=function(b){for(var a=b.length,c=a%3,B=[],x=0,r=a-c;x<r;x+=16383)B.push(h(b,x,x+16383>r?r:x+16383));1===c?(b=b[a-1],B.push(m[b>>2]+m[b<<4&63]+"==")):2===c&&(b=(b[a-2]<<8)+b[a-1],B.push(m[b>>10]+m[b>>4&63]+m[b<<2&63]+"="));return B.join("")};var m=[],r=[],v="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)m[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],r["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=
c;r[45]=62;r[95]=63},{}],2:[function(c,p,l){},{}],3:[function(c,p,l){(function(b){function h(k){if(2147483647<k)throw new RangeError('The value "'+k+'" is invalid for option "size"');k=new Uint8Array(k);k.__proto__=b.prototype;return k}function b(k,t,e){if("number"===typeof k){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return v(k)}return m(k,t,e)}function m(k,t,e){if("string"===typeof k){var g=t;if("string"!==typeof g||""===g)g=
"utf8";if(!b.isEncoding(g))throw new TypeError("Unknown encoding: "+g);t=B(k,g)|0;e=h(t);k=e.write(k,g);k!==t&&(e=e.slice(0,k));return e}if(ArrayBuffer.isView(k))return H(k);if(null==k)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(K(k,ArrayBuffer)||k&&K(k.buffer,ArrayBuffer)){if(0>t||k.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');
k=void 0===t&&void 0===e?new Uint8Array(k):void 0===e?new Uint8Array(k,t):new Uint8Array(k,t,e);k.__proto__=b.prototype;return k}if("number"===typeof k)throw new TypeError('The "value" argument must not be of type number. Received type number');g=k.valueOf&&k.valueOf();if(null!=g&&g!==k)return b.from(g,t,e);if(g=a(k))return g;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof k[Symbol.toPrimitive])return b.from(k[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof k);}function r(k){if("number"!==typeof k)throw new TypeError('"size" argument must be of type number');if(0>k)throw new RangeError('The value "'+k+'" is invalid for option "size"');}function v(k){r(k);return h(0>k?0:w(k)|0)}function H(k){for(var t=0>k.length?0:w(k.length)|0,e=h(t),g=0;g<t;g+=1)e[g]=k[g]&255;return e}function a(k){if(b.isBuffer(k)){var t=w(k.length)|0,e=h(t);if(0===e.length)return e;k.copy(e,0,0,t);return e}if(void 0!==k.length)return(t="number"!==typeof k.length)||(t=k.length,
t=t!==t),t?h(0):H(k);if("Buffer"===k.type&&Array.isArray(k.data))return H(k.data)}function w(k){if(2147483647<=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return k|0}function B(k,t){if(b.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||K(k,ArrayBuffer))return k.byteLength;if("string"!==typeof k)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);var e=
k.length,g=2<arguments.length&&!0===arguments[2];if(!g&&0===e)return 0;for(var a=!1;;)switch(t){case "ascii":case "latin1":case "binary":return e;case "utf8":case "utf-8":return f(k).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*e;case "hex":return e>>>1;case "base64":return E.toByteArray(n(k)).length;default:if(a)return g?-1:f(k).length;t=(""+t).toLowerCase();a=!0}}function x(k,t,e){var g=!1;if(void 0===t||0>t)t=0;if(t>this.length)return"";if(void 0===e||e>this.length)e=
this.length;if(0>=e)return"";e>>>=0;t>>>=0;if(e<=t)return"";for(k||(k="utf8");;)switch(k){case "hex":k=t;t=e;e=this.length;if(!k||0>k)k=0;if(!t||0>t||t>e)t=e;g="";for(e=k;e<t;++e)k=g,g=this[e],g=16>g?"0"+g.toString(16):g.toString(16),g=k+g;return g;case "utf8":case "utf-8":return D(this,t,e);case "ascii":k="";for(e=Math.min(this.length,e);t<e;++t)k+=String.fromCharCode(this[t]&127);return k;case "latin1":case "binary":k="";for(e=Math.min(this.length,e);t<e;++t)k+=String.fromCharCode(this[t]);return k;
case "base64":return t=0===t&&e===this.length?E.fromByteArray(this):E.fromByteArray(this.slice(t,e)),t;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":t=this.slice(t,e);e="";for(k=0;k<t.length;k+=2)e+=String.fromCharCode(t[k]+256*t[k+1]);return e;default:if(g)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase();g=!0}}function q(k,t,e){var g=k[t];k[t]=k[e];k[e]=g}function y(k,t,e,g,a){if(0===k.length)return-1;"string"===typeof e?(g=e,e=0):2147483647<e?e=2147483647:-2147483648>
e&&(e=-2147483648);e=+e;e!==e&&(e=a?0:k.length-1);0>e&&(e=k.length+e);if(e>=k.length){if(a)return-1;e=k.length-1}else if(0>e)if(a)e=0;else return-1;"string"===typeof t&&(t=b.from(t,g));if(b.isBuffer(t))return 0===t.length?-1:p(k,t,e,g,a);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(k,t,e):Uint8Array.prototype.lastIndexOf.call(k,t,e):p(k,[t],e,g,a);throw new TypeError("val must be string, number or Buffer");}function p(k,
t,e,g,a){function d(g,k){return 1===b?g[k]:g.readUInt16BE(k*b)}var b=1,n=k.length,f=t.length;if(void 0!==g&&(g=String(g).toLowerCase(),"ucs2"===g||"ucs-2"===g||"utf16le"===g||"utf-16le"===g)){if(2>k.length||2>t.length)return-1;b=2;n/=2;f/=2;e/=2}if(a)for(g=-1;e<n;e++)if(d(k,e)===d(t,-1===g?0:e-g)){if(-1===g&&(g=e),e-g+1===f)return g*b}else-1!==g&&(e-=e-g),g=-1;else for(e+f>n&&(e=n-f);0<=e;e--){n=!0;for(g=0;g<f;g++)if(d(k,e+g)!==d(t,g)){n=!1;break}if(n)return e}return-1}function D(k,t,e){e=Math.min(k.length,
e);for(var g=[];t<e;){var a=k[t],d=null,b=239<a?4:223<a?3:191<a?2:1;if(t+b<=e)switch(b){case 1:128>a&&(d=a);break;case 2:var n=k[t+1];128===(n&192)&&(a=(a&31)<<6|n&63,127<a&&(d=a));break;case 3:n=k[t+1];var f=k[t+2];128===(n&192)&&128===(f&192)&&(a=(a&15)<<12|(n&63)<<6|f&63,2047<a&&(55296>a||57343<a)&&(d=a));break;case 4:n=k[t+1];f=k[t+2];var h=k[t+3];128===(n&192)&&128===(f&192)&&128===(h&192)&&(a=(a&15)<<18|(n&63)<<12|(f&63)<<6|h&63,65535<a&&1114112>a&&(d=a))}null===d?(d=65533,b=1):65535<d&&(d-=
65536,g.push(d>>>10&1023|55296),d=56320|d&1023);g.push(d);t+=b}k=g.length;if(k<=F)g=String.fromCharCode.apply(String,g);else{e="";for(t=0;t<k;)e+=String.fromCharCode.apply(String,g.slice(t,t+=F));g=e}return g}function A(k,t,e){if(0!==k%1||0>k)throw new RangeError("offset is not uint");if(k+t>e)throw new RangeError("Trying to access beyond buffer length");}function C(k,t,e,g,a,d){if(!b.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<d)throw new RangeError('"value" argument is out of bounds');
if(e+g>k.length)throw new RangeError("Index out of range");}function I(k,a,e,g,d,b){if(e+g>k.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range");}function d(k,a,e,g,d){a=+a;e>>>=0;d||I(k,a,e,4,3.4028234663852886E38,-3.4028234663852886E38);J.write(k,a,e,g,23,4);return e+4}function u(k,a,e,g,d){a=+a;e>>>=0;d||I(k,a,e,8,1.7976931348623157E308,-1.7976931348623157E308);J.write(k,a,e,g,52,8);return e+8}function n(k){k=k.split("=")[0];k=k.trim().replace(N,
"");if(2>k.length)return"";for(;0!==k.length%4;)k+="=";return k}function f(k,a){a=a||Infinity;for(var e,g=k.length,d=null,t=[],b=0;b<g;++b){e=k.charCodeAt(b);if(55295<e&&57344>e){if(!d){if(56319<e){-1<(a-=3)&&t.push(239,191,189);continue}else if(b+1===g){-1<(a-=3)&&t.push(239,191,189);continue}d=e;continue}if(56320>e){-1<(a-=3)&&t.push(239,191,189);d=e;continue}e=(d-55296<<10|e-56320)+65536}else d&&-1<(a-=3)&&t.push(239,191,189);d=null;if(128>e){if(0>--a)break;t.push(e)}else if(2048>e){if(0>(a-=2))break;
t.push(e>>6|192,e&63|128)}else if(65536>e){if(0>(a-=3))break;t.push(e>>12|224,e>>6&63|128,e&63|128)}else if(1114112>e){if(0>(a-=4))break;t.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw Error("Invalid code point");}return t}function z(k){for(var a=[],e=0;e<k.length;++e)a.push(k.charCodeAt(e)&255);return a}function L(k,a,e,g){for(var d=0;d<g&&!(d+e>=a.length||d>=k.length);++d)a[d+e]=k[d];return d}function K(k,a){return k instanceof a||null!=k&&null!=k.constructor&&null!=k.constructor.name&&
k.constructor.name===a.name}var E=c("base64-js"),J=c("ieee754");l.Buffer=b;l.SlowBuffer=function(k){+k!=k&&(k=0);return b.alloc(+k)};l.INSPECT_MAX_BYTES=50;l.kMaxLength=2147483647;b.TYPED_ARRAY_SUPPORT=function(){try{var k=new Uint8Array(1);k.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===k.foo()}catch(t){return!1}}();b.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});b.poolSize=8192;b.from=function(k,a,e){return m(k,a,e)};b.prototype.__proto__=Uint8Array.prototype;
b.__proto__=Uint8Array;b.alloc=function(k,a,e){r(k);k=0>=k?h(k):void 0!==a?"string"===typeof e?h(k).fill(a,e):h(k).fill(a):h(k);return k};b.allocUnsafe=function(k){return v(k)};b.allocUnsafeSlow=function(k){return v(k)};b.isBuffer=function(k){return null!=k&&!0===k._isBuffer&&k!==b.prototype};b.compare=function(k,a){K(k,Uint8Array)&&(k=b.from(k,k.offset,k.byteLength));K(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength));if(!b.isBuffer(k)||!b.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(k===a)return 0;for(var e=k.length,g=a.length,d=0,t=Math.min(e,g);d<t;++d)if(k[d]!==a[d]){e=k[d];g=a[d];break}return e<g?-1:g<e?1:0};b.isEncoding=function(k){switch(String(k).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(k,a){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(0===k.length)return b.alloc(0);
var e;if(void 0===a)for(e=a=0;e<k.length;++e)a+=k[e].length;a=b.allocUnsafe(a);var g=0;for(e=0;e<k.length;++e){var d=k[e];K(d,Uint8Array)&&(d=b.from(d));if(!b.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(a,g);g+=d.length}return a};b.byteLength=B;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var k=this.length;if(0!==k%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<k;a+=2)q(this,a,a+1);return this};b.prototype.swap32=
function(){var k=this.length;if(0!==k%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<k;a+=4)q(this,a,a+3),q(this,a+1,a+2);return this};b.prototype.swap64=function(){var k=this.length;if(0!==k%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<k;a+=8)q(this,a,a+7),q(this,a+1,a+6),q(this,a+2,a+5),q(this,a+3,a+4);return this};b.prototype.toString=function(){var k=this.length;return 0===k?"":0===arguments.length?D(this,0,k):x.apply(this,
arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(k){if(!b.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:0===b.compare(this,k)};b.prototype.inspect=function(){var k=l.INSPECT_MAX_BYTES;var a=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim();this.length>k&&(a+=" ... ");return"<Buffer "+a+">"};b.prototype.compare=function(k,a,e,g,d){K(k,Uint8Array)&&(k=b.from(k,k.offset,k.byteLength));if(!b.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof k);void 0===a&&(a=0);void 0===e&&(e=k?k.length:0);void 0===g&&(g=0);void 0===d&&(d=this.length);if(0>a||e>k.length||0>g||d>this.length)throw new RangeError("out of range index");if(g>=d&&a>=e)return 0;if(g>=d)return-1;if(a>=e)return 1;a>>>=0;e>>>=0;g>>>=0;d>>>=0;if(this===k)return 0;var t=d-g,n=e-a,f=Math.min(t,n);g=this.slice(g,d);k=k.slice(a,e);for(a=0;a<f;++a)if(g[a]!==k[a]){t=g[a];n=k[a];break}return t<n?-1:n<t?1:0};b.prototype.includes=function(k,a,e){return-1!==this.indexOf(k,a,e)};b.prototype.indexOf=
function(k,a,e){return y(this,k,a,e,!0)};b.prototype.lastIndexOf=function(k,a,e){return y(this,k,a,e,!1)};b.prototype.write=function(k,a,e,g){if(void 0===a)g="utf8",e=this.length,a=0;else if(void 0===e&&"string"===typeof a)g=a,e=this.length,a=0;else if(isFinite(a))a>>>=0,isFinite(e)?(e>>>=0,void 0===g&&(g="utf8")):(g=e,e=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-a;if(void 0===e||e>d)e=d;if(0<k.length&&(0>e||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");
g||(g="utf8");for(d=!1;;)switch(g){case "hex":a:{a=Number(a)||0;g=this.length-a;e?(e=Number(e),e>g&&(e=g)):e=g;g=k.length;e>g/2&&(e=g/2);for(g=0;g<e;++g){d=parseInt(k.substr(2*g,2),16);if(d!==d){k=g;break a}this[a+g]=d}k=g}return k;case "utf8":case "utf-8":return L(f(k,this.length-a),this,a,e);case "ascii":return L(z(k),this,a,e);case "latin1":case "binary":return L(z(k),this,a,e);case "base64":return L(E.toByteArray(n(k)),this,a,e);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":g=k;d=this.length-
a;for(var b=[],t=0;t<g.length&&!(0>(d-=2));++t){var h=g.charCodeAt(t);k=h>>8;h%=256;b.push(h);b.push(k)}return L(b,this,a,e);default:if(d)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase();d=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;b.prototype.slice=function(k,a){var e=this.length;k=~~k;a=void 0===a?e:~~a;0>k?(k+=e,0>k&&(k=0)):k>e&&(k=e);0>a?(a+=e,0>a&&(a=0)):a>e&&(a=e);a<k&&(a=k);k=this.subarray(k,a);k.__proto__=
b.prototype;return k};b.prototype.readUIntLE=function(a,d,e){a>>>=0;d>>>=0;e||A(a,d,this.length);e=this[a];for(var g=1,k=0;++k<d&&(g*=256);)e+=this[a+k]*g;return e};b.prototype.readUIntBE=function(a,d,e){a>>>=0;d>>>=0;e||A(a,d,this.length);e=this[a+--d];for(var g=1;0<d&&(g*=256);)e+=this[a+--d]*g;return e};b.prototype.readUInt8=function(a,d){a>>>=0;d||A(a,1,this.length);return this[a]};b.prototype.readUInt16LE=function(a,d){a>>>=0;d||A(a,2,this.length);return this[a]|this[a+1]<<8};b.prototype.readUInt16BE=
function(a,d){a>>>=0;d||A(a,2,this.length);return this[a]<<8|this[a+1]};b.prototype.readUInt32LE=function(a,d){a>>>=0;d||A(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};b.prototype.readUInt32BE=function(a,d){a>>>=0;d||A(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};b.prototype.readIntLE=function(a,d,e){a>>>=0;d>>>=0;e||A(a,d,this.length);e=this[a];for(var g=1,k=0;++k<d&&(g*=256);)e+=this[a+k]*g;e>=128*g&&(e-=Math.pow(2,8*d));return e};
b.prototype.readIntBE=function(a,d,e){a>>>=0;d>>>=0;e||A(a,d,this.length);e=d;for(var g=1,k=this[a+--e];0<e&&(g*=256);)k+=this[a+--e]*g;k>=128*g&&(k-=Math.pow(2,8*d));return k};b.prototype.readInt8=function(a,d){a>>>=0;d||A(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};b.prototype.readInt16LE=function(a,d){a>>>=0;d||A(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};b.prototype.readInt16BE=function(a,d){a>>>=0;d||A(a,2,this.length);a=this[a+1]|this[a]<<8;return a&
32768?a|4294901760:a};b.prototype.readInt32LE=function(a,d){a>>>=0;d||A(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};b.prototype.readInt32BE=function(a,d){a>>>=0;d||A(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};b.prototype.readFloatLE=function(a,d){a>>>=0;d||A(a,4,this.length);return J.read(this,a,!0,23,4)};b.prototype.readFloatBE=function(a,d){a>>>=0;d||A(a,4,this.length);return J.read(this,a,!1,23,4)};b.prototype.readDoubleLE=function(a,
d){a>>>=0;d||A(a,8,this.length);return J.read(this,a,!0,52,8)};b.prototype.readDoubleBE=function(a,d){a>>>=0;d||A(a,8,this.length);return J.read(this,a,!1,52,8)};b.prototype.writeUIntLE=function(a,d,e,g){a=+a;d>>>=0;e>>>=0;g||C(this,a,d,e,Math.pow(2,8*e)-1,0);g=1;var k=0;for(this[d]=a&255;++k<e&&(g*=256);)this[d+k]=a/g&255;return d+e};b.prototype.writeUIntBE=function(a,d,e,g){a=+a;d>>>=0;e>>>=0;g||C(this,a,d,e,Math.pow(2,8*e)-1,0);g=e-1;var k=1;for(this[d+g]=a&255;0<=--g&&(k*=256);)this[d+g]=a/k&
255;return d+e};b.prototype.writeUInt8=function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,1,255,0);this[d]=a&255;return d+1};b.prototype.writeUInt16LE=function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,2,65535,0);this[d]=a&255;this[d+1]=a>>>8;return d+2};b.prototype.writeUInt16BE=function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,2,65535,0);this[d]=a>>>8;this[d+1]=a&255;return d+2};b.prototype.writeUInt32LE=function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,4,4294967295,0);this[d+3]=a>>>24;this[d+2]=a>>>16;this[d+1]=a>>>8;this[d]=a&
255;return d+4};b.prototype.writeUInt32BE=function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,4,4294967295,0);this[d]=a>>>24;this[d+1]=a>>>16;this[d+2]=a>>>8;this[d+3]=a&255;return d+4};b.prototype.writeIntLE=function(a,d,e,g){a=+a;d>>>=0;g||(g=Math.pow(2,8*e-1),C(this,a,d,e,g-1,-g));g=0;var k=1,b=0;for(this[d]=a&255;++g<e&&(k*=256);)0>a&&0===b&&0!==this[d+g-1]&&(b=1),this[d+g]=(a/k>>0)-b&255;return d+e};b.prototype.writeIntBE=function(a,d,e,g){a=+a;d>>>=0;g||(g=Math.pow(2,8*e-1),C(this,a,d,e,g-1,-g));g=e-
1;var k=1,b=0;for(this[d+g]=a&255;0<=--g&&(k*=256);)0>a&&0===b&&0!==this[d+g+1]&&(b=1),this[d+g]=(a/k>>0)-b&255;return d+e};b.prototype.writeInt8=function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,1,127,-128);0>a&&(a=255+a+1);this[d]=a&255;return d+1};b.prototype.writeInt16LE=function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,2,32767,-32768);this[d]=a&255;this[d+1]=a>>>8;return d+2};b.prototype.writeInt16BE=function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,2,32767,-32768);this[d]=a>>>8;this[d+1]=a&255;return d+2};b.prototype.writeInt32LE=
function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,4,2147483647,-2147483648);this[d]=a&255;this[d+1]=a>>>8;this[d+2]=a>>>16;this[d+3]=a>>>24;return d+4};b.prototype.writeInt32BE=function(a,d,e){a=+a;d>>>=0;e||C(this,a,d,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[d]=a>>>24;this[d+1]=a>>>16;this[d+2]=a>>>8;this[d+3]=a&255;return d+4};b.prototype.writeFloatLE=function(a,b,e){return d(this,a,b,!0,e)};b.prototype.writeFloatBE=function(a,b,e){return d(this,a,b,!1,e)};b.prototype.writeDoubleLE=function(a,
d,e){return u(this,a,d,!0,e)};b.prototype.writeDoubleBE=function(a,d,e){return u(this,a,d,!1,e)};b.prototype.copy=function(a,d,e,g){if(!b.isBuffer(a))throw new TypeError("argument should be a Buffer");e||(e=0);g||0===g||(g=this.length);d>=a.length&&(d=a.length);d||(d=0);0<g&&g<e&&(g=e);if(g===e||0===a.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("Index out of range");if(0>g)throw new RangeError("sourceEnd out of bounds");
g>this.length&&(g=this.length);a.length-d<g-e&&(g=a.length-d+e);var k=g-e;if(this===a&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(d,e,g);else if(this===a&&e<d&&d<g)for(g=k-1;0<=g;--g)a[g+d]=this[g+e];else Uint8Array.prototype.set.call(a,this.subarray(e,g),d);return k};b.prototype.fill=function(a,d,e,g){if("string"===typeof a){"string"===typeof d?(g=d,d=0,e=this.length):"string"===typeof e&&(g=e,e=this.length);if(void 0!==g&&"string"!==typeof g)throw new TypeError("encoding must be a string");
if("string"===typeof g&&!b.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(1===a.length){var k=a.charCodeAt(0);if("utf8"===g&&128>k||"latin1"===g)a=k}}else"number"===typeof a&&(a&=255);if(0>d||this.length<d||this.length<e)throw new RangeError("Out of range index");if(e<=d)return this;d>>>=0;e=void 0===e?this.length:e>>>0;a||(a=0);if("number"===typeof a)for(g=d;g<e;++g)this[g]=a;else{k=b.isBuffer(a)?a:b.from(a,g);var n=k.length;if(0===n)throw new TypeError('The value "'+a+'" is invalid for argument "value"');
for(g=0;g<e-d;++g)this[g+d]=k[g%n]}return this};var N=/[^+/0-9A-Za-z-_]/g}).call(this,c("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:6}],4:[function(c,p,l){(function(b){l.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};l.isBoolean=function(b){return"boolean"===typeof b};l.isNull=function(b){return null===b};l.isNullOrUndefined=function(b){return null==b};l.isNumber=function(b){return"number"===typeof b};l.isString=function(b){return"string"===
typeof b};l.isSymbol=function(b){return"symbol"===typeof b};l.isUndefined=function(b){return void 0===b};l.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};l.isObject=function(b){return"object"===typeof b&&null!==b};l.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};l.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};l.isFunction=function(b){return"function"===typeof b};l.isPrimitive=function(b){return null===
b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};l.isBuffer=b.isBuffer}).call(this,{isBuffer:c("../../is-buffer/index.js")})},{"../../is-buffer/index.js":8}],5:[function(c,p,l){function b(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=q(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function h(a,c,d,u){var n;if("function"!==typeof d)throw new TypeError('"listener" argument must be a function');
if(n=a._events){n.newListener&&(a.emit("newListener",c,d.listener?d.listener:d),n=a._events);var f=n[c]}else n=a._events=q(null),a._eventsCount=0;f?("function"===typeof f?f=n[c]=u?[d,f]:[f,d]:u?f.unshift(d):f.push(d),f.warned||(d=void 0===a._maxListeners?b.defaultMaxListeners:a._maxListeners)&&0<d&&f.length>d&&(f.warned=!0,d=Error("Possible EventEmitter memory leak detected. "+f.length+' "'+String(c)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),d.name="MaxListenersExceededWarning",
d.emitter=a,d.type=c,d.count=f.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",d.name,d.message))):(n[c]=d,++a._eventsCount);return a}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],
arguments[1],arguments[2]);default:for(var a=Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];this.listener.apply(this.target,a)}}function r(a,b,d){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:d};b=G.call(m,a);b.listener=d;return a.wrapFn=b}function v(b,c,d){b=b._events;if(!b)return[];c=b[c];if(!c)return[];if("function"===typeof c)return d?[c.listener||c]:[c];if(d)for(d=Array(c.length),b=0;b<d.length;++b)d[b]=c[b].listener||c[b];else d=a(c,c.length);return d}function H(a){var b=
this._events;if(b){a=b[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function a(a,b){for(var d=Array(b),c=0;c<b;++c)d[c]=a[c];return d}function w(a){var b=function(){};b.prototype=a;return new b}function B(a){var b=[],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.push(d);return d}function x(a){var b=this;return function(){return b.apply(a,arguments)}}var q=Object.create||w,y=Object.keys||B,G=Function.prototype.bind||x;p.exports=b;b.EventEmitter=b;b.prototype._events=
void 0;b.prototype._maxListeners=void 0;var D=10;try{c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0});var A=0===c.x}catch(C){A=!1}A?Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return D},set:function(a){if("number"!==typeof a||0>a||a!==a)throw new TypeError('"defaultMaxListeners" must be a positive number');D=a}}):b.defaultMaxListeners=D;b.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');
this._maxListeners=a;return this};b.prototype.getMaxListeners=function(){return void 0===this._maxListeners?b.defaultMaxListeners:this._maxListeners};b.prototype.emit=function(b){var c,d,u;var n="error"===b;if(u=this._events)n=n&&null==u.error;else if(!n)return!1;if(n){1<arguments.length&&(c=arguments[1]);if(c instanceof Error)throw c;u=Error('Unhandled "error" event. ('+c+")");u.context=c;throw u;}c=u[b];if(!c)return!1;u="function"===typeof c;var f=arguments.length;switch(f){case 1:if(u)c.call(this);
else for(u=c.length,c=a(c,u),n=0;n<u;++n)c[n].call(this);break;case 2:n=arguments[1];if(u)c.call(this,n);else for(u=c.length,c=a(c,u),f=0;f<u;++f)c[f].call(this,n);break;case 3:n=arguments[1];f=arguments[2];if(u)c.call(this,n,f);else for(u=c.length,c=a(c,u),d=0;d<u;++d)c[d].call(this,n,f);break;case 4:n=arguments[1];f=arguments[2];d=arguments[3];if(u)c.call(this,n,f,d);else{u=c.length;c=a(c,u);for(var h=0;h<u;++h)c[h].call(this,n,f,d)}break;default:n=Array(f-1);for(d=1;d<f;d++)n[d-1]=arguments[d];
if(u)c.apply(this,n);else for(u=c.length,c=a(c,u),f=0;f<u;++f)c[f].apply(this,n)}return!0};b.prototype.addListener=function(a,b){return h(this,a,b,!1)};b.prototype.on=b.prototype.addListener;b.prototype.prependListener=function(a,b){return h(this,a,b,!0)};b.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,r(this,a,b));return this};b.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');
this.prependListener(a,r(this,a,b));return this};b.prototype.removeListener=function(a,b){var d;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');var c=this._events;if(!c)return this;var n=c[a];if(!n)return this;if(n===b||n.listener===b)0===--this._eventsCount?this._events=q(null):(delete c[a],c.removeListener&&this.emit("removeListener",a,n.listener||b));else if("function"!==typeof n){var f=-1;for(d=n.length-1;0<=d;d--)if(n[d]===b||n[d].listener===b){var h=n[d].listener;
f=d;break}if(0>f)return this;if(0===f)n.shift();else{d=f+1;for(var m=n.length;d<m;f+=1,d+=1)n[f]=n[d];n.pop()}1===n.length&&(c[a]=n[0]);c.removeListener&&this.emit("removeListener",a,h||b)}return this};b.prototype.removeAllListeners=function(a){var b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=q(null),this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=q(null):delete b[a]),this;if(0===arguments.length){var d=y(b);for(b=0;b<d.length;++b){var c=
d[b];"removeListener"!==c&&this.removeAllListeners(c)}this.removeAllListeners("removeListener");this._events=q(null);this._eventsCount=0;return this}d=b[a];if("function"===typeof d)this.removeListener(a,d);else if(d)for(b=d.length-1;0<=b;b--)this.removeListener(a,d[b]);return this};b.prototype.listeners=function(a){return v(this,a,!0)};b.prototype.rawListeners=function(a){return v(this,a,!1)};b.listenerCount=function(a,b){return"function"===typeof a.listenerCount?a.listenerCount(b):H.call(a,b)};b.prototype.listenerCount=
H;b.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],6:[function(c,p,l){l.read=function(b,c,m,r,v){var h=8*v-r-1;var a=(1<<h)-1,w=a>>1,B=-7;v=m?v-1:0;var x=m?-1:1,q=b[c+v];v+=x;m=q&(1<<-B)-1;q>>=-B;for(B+=h;0<B;m=256*m+b[c+v],v+=x,B-=8);h=m&(1<<-B)-1;m>>=-B;for(B+=r;0<B;h=256*h+b[c+v],v+=x,B-=8);if(0===m)m=1-w;else{if(m===a)return h?NaN:Infinity*(q?-1:1);h+=Math.pow(2,r);m-=w}return(q?-1:1)*h*Math.pow(2,m-r)};l.write=function(b,c,m,r,v,l){var a,w=8*
l-v-1,h=(1<<w)-1,x=h>>1,q=23===v?Math.pow(2,-24)-Math.pow(2,-77):0;l=r?0:l-1;var y=r?1:-1,H=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,r=h):(r=Math.floor(Math.log(c)/Math.LN2),1>c*(a=Math.pow(2,-r))&&(r--,a*=2),c=1<=r+x?c+q/a:c+q*Math.pow(2,1-x),2<=c*a&&(r++,a/=2),r+x>=h?(c=0,r=h):1<=r+x?(c=(c*a-1)*Math.pow(2,v),r+=x):(c=c*Math.pow(2,x-1)*Math.pow(2,v),r=0));for(;8<=v;b[m+l]=c&255,l+=y,c/=256,v-=8);r=r<<v|c;for(w+=v;0<w;b[m+l]=r&255,l+=y,r/=256,w-=8);b[m+l-y]|=128*
H}},{}],7:[function(c,p,l){p.exports="function"===typeof Object.create?function(b,c){c&&(b.super_=c,b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,c){if(c){b.super_=c;var m=function(){};m.prototype=c.prototype;b.prototype=new m;b.prototype.constructor=b}}},{}],8:[function(c,p,l){function b(b){return!!b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)}p.exports=function(c){return null!=c&&(b(c)||
"function"===typeof c.readFloatLE&&"function"===typeof c.slice&&b(c.slice(0,0))||!!c._isBuffer)}},{}],9:[function(c,p,l){var b={}.toString;p.exports=Array.isArray||function(c){return"[object Array]"==b.call(c)}},{}],10:[function(c,p,l){(function(b){function c(c,h,v,l){if("function"!==typeof c)throw new TypeError('"callback" argument must be a function');var a=arguments.length;switch(a){case 0:case 1:return b.nextTick(c);case 2:return b.nextTick(function(){c.call(null,h)});case 3:return b.nextTick(function(){c.call(null,
h,v)});case 4:return b.nextTick(function(){c.call(null,h,v,l)});default:var m=Array(a-1);for(a=0;a<m.length;)m[a++]=arguments[a];return b.nextTick(function(){c.apply(null,m)})}}"undefined"===typeof b||!b.version||0===b.version.indexOf("v0.")||0===b.version.indexOf("v1.")&&0!==b.version.indexOf("v1.8.")?p.exports={nextTick:c}:p.exports=b}).call(this,c("_process"))},{_process:11}],11:[function(c,p,l){function b(){throw Error("setTimeout has not been defined");}function h(){throw Error("clearTimeout has not been defined");
}function m(a){if(B===setTimeout)return setTimeout(a,0);if((B===b||!B)&&setTimeout)return B=setTimeout,setTimeout(a,0);try{return B(a,0)}catch(C){try{return B.call(null,a,0)}catch(I){return B.call(this,a,0)}}}function r(a){if(x===clearTimeout)return clearTimeout(a);if((x===h||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(a);try{return x(a)}catch(C){try{return x.call(null,a)}catch(I){return x.call(this,a)}}}function v(){y&&G&&(y=!1,G.length?q=G.concat(q):D=-1,q.length&&H())}function H(){if(!y){var a=
m(v);y=!0;for(var b=q.length;b;){G=q;for(q=[];++D<b;)G&&G[D].run();D=-1;b=q.length}G=null;y=!1;r(a)}}function a(a,b){this.fun=a;this.array=b}function w(){}c=p.exports={};try{var B="function"===typeof setTimeout?setTimeout:b}catch(A){B=b}try{var x="function"===typeof clearTimeout?clearTimeout:h}catch(A){x=h}var q=[],y=!1,G,D=-1;c.nextTick=function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var w=1;w<arguments.length;w++)c[w-1]=arguments[w];q.push(new a(b,c));1!==q.length||y||m(H)};
a.prototype.run=function(){this.fun.apply(null,this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=w;c.addListener=w;c.once=w;c.off=w;c.removeListener=w;c.removeAllListeners=w;c.emit=w;c.prependListener=w;c.prependOnceListener=w;c.listeners=function(a){return[]};c.binding=function(a){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(a){throw Error("process.chdir is not supported");};c.umask=function(){return 0}},
{}],12:[function(c,p,l){p.exports=c("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":13}],13:[function(c,p,l){function b(a){if(!(this instanceof b))return new b(a);v.call(this,a);H.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(m,this)}function m(a){a.end()}var r=c("process-nextick-args");
l=Object.keys||function(a){var b=[],c;for(c in a)b.push(c);return b};p.exports=b;p=Object.create(c("core-util-is"));p.inherits=c("inherits");var v=c("./_stream_readable"),H=c("./_stream_writable");p.inherits(b,v);c=l(H.prototype);for(p=0;p<c.length;p++)l=c[p],b.prototype[l]||(b.prototype[l]=H.prototype[l]);Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0===
this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});b.prototype._destroy=function(a,b){this.push(null);this.end();r.nextTick(b,a)}},{"./_stream_readable":15,"./_stream_writable":17,"core-util-is":4,inherits:7,"process-nextick-args":10}],14:[function(c,p,l){function b(c){if(!(this instanceof b))return new b(c);
h.call(this,c)}p.exports=b;var h=c("./_stream_transform");p=Object.create(c("core-util-is"));p.inherits=c("inherits");p.inherits(b,h);b.prototype._transform=function(b,c,h){h(null,b)}},{"./_stream_transform":16,"core-util-is":4,inherits:7}],15:[function(c,p,l){(function(b,h){function m(a,d,b){if("function"===typeof a.prependListener)return a.prependListener(d,b);if(a._events&&a._events[d])f(a._events[d])?a._events[d].unshift(b):a._events[d]=[b,a._events[d]];else a.on(d,b)}function r(a,d){z=z||c("./_stream_duplex");
a=a||{};d=d instanceof z;this.objectMode=!!a.objectMode;d&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var g=a.highWaterMark,e=a.readableHighWaterMark,b=this.objectMode?16:16384;this.highWaterMark=g||0===g?g:d&&(e||0===e)?e:b;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new N;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.destroyed=this.resumeScheduled=this.readableListening=this.emittedReadable=
this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(k||(k=c("string_decoder/").StringDecoder),this.decoder=new k(a.encoding),this.encoding=a.encoding)}function v(a){z=z||c("./_stream_duplex");if(!(this instanceof v))return new v(a);this._readableState=new r(a,this);this.readable=!0;a&&("function"===typeof a.read&&(this._read=a.read),"function"===typeof a.destroy&&(this._destroy=a.destroy));L.call(this)}
function l(d,g,b,c,k){var e=d._readableState;if(null===g)e.reading=!1,e.ended||(e.decoder&&(g=e.decoder.end())&&g.length&&(e.buffer.push(g),e.length+=e.objectMode?1:g.length),e.ended=!0,B(d));else{if(!k){k=g;var f;K.isBuffer(k)||k instanceof E||"string"===typeof k||void 0===k||e.objectMode||(f=new TypeError("Invalid non-string/buffer chunk"));var O=f}O?d.emit("error",O):e.objectMode||g&&0<g.length?("string"===typeof g||e.objectMode||Object.getPrototypeOf(g)===K.prototype||(g=K.from(g)),c?e.endEmitted?
d.emit("error",Error("stream.unshift() after end event")):a(d,e,g,!0):e.ended?d.emit("error",Error("stream.push() after EOF")):(e.reading=!1,e.decoder&&!b?(g=e.decoder.write(g),e.objectMode||0!==g.length?a(d,e,g,!1):e.readingMore||(e.readingMore=!0,n.nextTick(q,d,e))):a(d,e,g,!1))):c||(e.reading=!1)}return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(a,d,b,c){d.flowing&&0===d.length&&!d.sync?(a.emit("data",b),a.read(0)):(d.length+=d.objectMode?1:b.length,c?d.buffer.unshift(b):
d.buffer.push(b),d.needReadable&&B(a));d.readingMore||(d.readingMore=!0,n.nextTick(q,a,d))}function w(a,d){if(0>=a||0===d.length&&d.ended)return 0;if(d.objectMode)return 1;if(a!==a)return d.flowing&&d.length?d.buffer.head.data.length:d.length;if(a>d.highWaterMark){var g=a;8388608<=g?g=8388608:(g--,g|=g>>>1,g|=g>>>2,g|=g>>>4,g|=g>>>8,g|=g>>>16,g++);d.highWaterMark=g}return a<=d.length?a:d.ended?d.length:(d.needReadable=!0,0)}function B(a){var d=a._readableState;d.needReadable=!1;d.emittedReadable||
(F("emitReadable",d.flowing),d.emittedReadable=!0,d.sync?n.nextTick(x,a):x(a))}function x(a){F("emit readable");a.emit("readable");A(a)}function q(a,d){for(var g=d.length;!d.reading&&!d.flowing&&!d.ended&&d.length<d.highWaterMark&&(F("maybeReadMore read 0"),a.read(0),g!==d.length);)g=d.length;d.readingMore=!1}function y(a){return function(){var d=a._readableState;F("pipeOnDrain",d.awaitDrain);d.awaitDrain&&d.awaitDrain--;0===d.awaitDrain&&a.listeners("data").length&&(d.flowing=!0,A(a))}}function G(a){F("readable nexttick read 0");
a.read(0)}function D(a,d){d.reading||(F("resume read 0"),a.read(0));d.resumeScheduled=!1;d.awaitDrain=0;a.emit("resume");A(a);d.flowing&&!d.reading&&a.read(0)}function A(a){var d=a._readableState;for(F("flow",d.flowing);d.flowing&&null!==a.read(););}function C(a,d){if(0===d.length)return null;if(d.objectMode)var b=d.buffer.shift();else if(!a||a>=d.length)b=d.decoder?d.buffer.join(""):1===d.buffer.length?d.buffer.head.data:d.buffer.concat(d.length),d.buffer.clear();else{b=d.buffer;d=d.decoder;if(a<
b.head.data.length)d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a);else{if(a===b.head.data.length)b=b.shift();else if(d){d=b.head;var g=1,e=d.data;for(a-=e.length;d=d.next;){var c=d.data,k=a>c.length?c.length:a;e=k===c.length?e+c:e+c.slice(0,a);a-=k;if(0===a){k===c.length?(++g,b.head=d.next?d.next:b.tail=null):(b.head=d,d.data=c.slice(k));break}++g}b.length-=g;b=e}else{d=K.allocUnsafe(a);g=b.head;e=1;g.data.copy(d);for(a-=g.data.length;g=g.next;){c=g.data;k=a>c.length?c.length:a;c.copy(d,
d.length-a,0,k);a-=k;if(0===a){k===c.length?(++e,b.head=g.next?g.next:b.tail=null):(b.head=g,g.data=c.slice(k));break}++e}b.length-=e;b=d}d=b}b=d}return b}function I(a){var b=a._readableState;if(0<b.length)throw Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,n.nextTick(d,b,a))}function d(a,d){a.endEmitted||0!==a.length||(a.endEmitted=!0,d.readable=!1,d.emit("end"))}function u(a,d){for(var b=0,g=a.length;b<g;b++)if(a[b]===d)return b;return-1}var n=c("process-nextick-args");
p.exports=v;var f=c("isarray"),z;v.ReadableState=r;c("events");var L=c("./internal/streams/stream"),K=c("safe-buffer").Buffer,E=h.Uint8Array||function(){};h=Object.create(c("core-util-is"));h.inherits=c("inherits");var J=c("util"),F=void 0;F=J&&J.debuglog?J.debuglog("stream"):function(){};var N=c("./internal/streams/BufferList");J=c("./internal/streams/destroy");var k;h.inherits(v,L);var t=["error","close","destroy","pause","resume"];Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0===
this._readableState?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}});v.prototype.destroy=J.destroy;v.prototype._undestroy=J.undestroy;v.prototype._destroy=function(a,d){this.push(null);d(a)};v.prototype.push=function(a,d){var b=this._readableState;if(b.objectMode)var g=!0;else"string"===typeof a&&(d=d||b.defaultEncoding,d!==b.encoding&&(a=K.from(a,d),d=""),g=!0);return l(this,a,d,!1,g)};v.prototype.unshift=function(a){return l(this,a,null,
!0,!1)};v.prototype.isPaused=function(){return!1===this._readableState.flowing};v.prototype.setEncoding=function(a){k||(k=c("string_decoder/").StringDecoder);this._readableState.decoder=new k(a);this._readableState.encoding=a;return this};v.prototype.read=function(a){F("read",a);a=parseInt(a,10);var d=this._readableState,b=a;0!==a&&(d.emittedReadable=!1);if(0===a&&d.needReadable&&(d.length>=d.highWaterMark||d.ended))return F("read: emitReadable",d.length,d.ended),0===d.length&&d.ended?I(this):B(this),
null;a=w(a,d);if(0===a&&d.ended)return 0===d.length&&I(this),null;var e=d.needReadable;F("need readable",e);if(0===d.length||d.length-a<d.highWaterMark)e=!0,F("length less than watermark",e);d.ended||d.reading?F("reading or ended",!1):e&&(F("do read"),d.reading=!0,d.sync=!0,0===d.length&&(d.needReadable=!0),this._read(d.highWaterMark),d.sync=!1,d.reading||(a=w(b,d)));e=0<a?C(a,d):null;null===e?(d.needReadable=!0,a=0):d.length-=a;0===d.length&&(d.ended||(d.needReadable=!0),b!==a&&d.ended&&I(this));
null!==e&&this.emit("data",e);return e};v.prototype._read=function(a){this.emit("error",Error("_read() is not implemented"))};v.prototype.pipe=function(a,d){function g(d,b){F("onunpipe");d===z&&b&&!1===b.hasUnpiped&&(b.hasUnpiped=!0,F("cleanup"),a.removeListener("close",f),a.removeListener("finish",w),a.removeListener("drain",L),a.removeListener("error",k),a.removeListener("unpipe",g),z.removeListener("end",e),z.removeListener("end",h),z.removeListener("data",c),r=!0,!x.awaitDrain||a._writableState&&
!a._writableState.needDrain||L())}function e(){F("onend");a.end()}function c(d){F("ondata");R=!1;!1!==a.write(d)||R||((1===x.pipesCount&&x.pipes===a||1<x.pipesCount&&-1!==u(x.pipes,a))&&!r&&(F("false write response, pause",z._readableState.awaitDrain),z._readableState.awaitDrain++,R=!0),z.pause())}function k(d){F("onerror",d);h();a.removeListener("error",k);0===a.listeners("error").length&&a.emit("error",d)}function f(){a.removeListener("finish",w);h()}function w(){F("onfinish");a.removeListener("close",
f);h()}function h(){F("unpipe");z.unpipe(a)}var z=this,x=this._readableState;switch(x.pipesCount){case 0:x.pipes=a;break;case 1:x.pipes=[x.pipes,a];break;default:x.pipes.push(a)}x.pipesCount+=1;F("pipe count=%d opts=%j",x.pipesCount,d);d=d&&!1===d.end||a===b.stdout||a===b.stderr?h:e;if(x.endEmitted)n.nextTick(d);else z.once("end",d);a.on("unpipe",g);var L=y(z);a.on("drain",L);var r=!1,R=!1;z.on("data",c);m(a,"error",k);a.once("close",f);a.once("finish",w);a.emit("pipe",z);x.flowing||(F("pipe resume"),
z.resume());return a};v.prototype.unpipe=function(a){var d=this._readableState,b={hasUnpiped:!1};if(0===d.pipesCount)return this;if(1===d.pipesCount){if(a&&a!==d.pipes)return this;a||(a=d.pipes);d.pipes=null;d.pipesCount=0;d.flowing=!1;a&&a.emit("unpipe",this,b);return this}if(!a){a=d.pipes;var e=d.pipesCount;d.pipes=null;d.pipesCount=0;d.flowing=!1;for(d=0;d<e;d++)a[d].emit("unpipe",this,b);return this}e=u(d.pipes,a);if(-1===e)return this;d.pipes.splice(e,1);--d.pipesCount;1===d.pipesCount&&(d.pipes=
d.pipes[0]);a.emit("unpipe",this,b);return this};v.prototype.on=function(a,d){d=L.prototype.on.call(this,a,d);"data"===a?!1!==this._readableState.flowing&&this.resume():"readable"===a&&(a=this._readableState,a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&B(this):n.nextTick(G,this)));return d};v.prototype.addListener=v.prototype.on;v.prototype.resume=function(){var a=this._readableState;a.flowing||(F("resume"),a.flowing=!0,a.resumeScheduled||
(a.resumeScheduled=!0,n.nextTick(D,this,a)));return this};v.prototype.pause=function(){F("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};v.prototype.wrap=function(a){var d=this,b=this._readableState,c=!1;a.on("end",function(){F("wrapped end");if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)});a.on("data",function(g){F("wrapped data");b.decoder&&(g=b.decoder.write(g));
b.objectMode&&(null===g||void 0===g)||!(b.objectMode||g&&g.length)||d.push(g)||(c=!0,a.pause())});for(var e in a)void 0===this[e]&&"function"===typeof a[e]&&(this[e]=function(d){return function(){return a[d].apply(a,arguments)}}(e));for(e=0;e<t.length;e++)a.on(t[e],this.emit.bind(this,t[e]));this._read=function(d){F("wrapped _read",d);c&&(c=!1,a.resume())};return this};Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});
v._fromList=C}).call(this,c("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./_stream_duplex":13,"./internal/streams/BufferList":18,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,events:5,inherits:7,isarray:9,"process-nextick-args":10,"safe-buffer":21,"string_decoder/":22,util:2}],16:[function(c,p,l){function b(b,a){var c=this._transformState;c.transforming=!1;var m=c.writecb;if(!m)return this.emit("error",
Error("write callback called multiple times"));c.writechunk=null;c.writecb=null;null!=a&&this.push(a);m(b);b=this._readableState;b.reading=!1;(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function h(c){if(!(this instanceof h))return new h(c);v.call(this,c);this._transformState={afterTransform:b.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;c&&("function"===typeof c.transform&&
(this._transform=c.transform),"function"===typeof c.flush&&(this._flush=c.flush));this.on("prefinish",m)}function m(){var b=this;"function"===typeof this._flush?this._flush(function(a,c){r(b,a,c)}):r(this,null,null)}function r(b,a,c){if(a)return b.emit("error",a);null!=c&&b.push(c);if(b._writableState.length)throw Error("Calling transform done when ws.length != 0");if(b._transformState.transforming)throw Error("Calling transform done when still transforming");return b.push(null)}p.exports=h;var v=
c("./_stream_duplex");p=Object.create(c("core-util-is"));p.inherits=c("inherits");p.inherits(h,v);h.prototype.push=function(b,a){this._transformState.needTransform=!1;return v.prototype.push.call(this,b,a)};h.prototype._transform=function(b,a,c){throw Error("_transform() is not implemented");};h.prototype._write=function(b,a,c){var m=this._transformState;m.writecb=c;m.writechunk=b;m.writeencoding=a;m.transforming||(b=this._readableState,(m.needTransform||b.needReadable||b.length<b.highWaterMark)&&
this._read(b.highWaterMark))};h.prototype._read=function(b){b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0};h.prototype._destroy=function(b,a){var c=this;v.prototype._destroy.call(this,b,function(b){a(b);c.emit("close")})}},{"./_stream_duplex":13,"core-util-is":4,inherits:7}],17:[function(c,p,l){(function(b,h,m){function r(a){var d=this;this.entry=this.next=null;this.finish=
function(){var b=d.entry;for(d.entry=null;b;){var c=b.callback;a.pendingcb--;c(void 0);b=b.next}a.corkedRequestsFree?a.corkedRequestsFree.next=d:a.corkedRequestsFree=d}}function v(){}function l(a,d){C=C||c("./_stream_duplex");a=a||{};var b=d instanceof C;this.objectMode=!!a.objectMode;b&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var n=a.highWaterMark,f=a.writableHighWaterMark,m=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:b&&(f||0===f)?f:m;this.highWaterMark=Math.floor(this.highWaterMark);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var b=d._writableState,c=b.sync,e=b.writecb;b.writing=!1;b.writecb=null;b.length-=b.writelen;b.writelen=0;a?(--b.pendingcb,c?(D.nextTick(e,a),D.nextTick(G,d,b),d._writableState.errorEmitted=!0,d.emit("error",a)):(e(a),d._writableState.errorEmitted=
!0,d.emit("error",a),G(d,b))):((a=q(b))||b.corked||b.bufferProcessing||!b.bufferedRequest||x(d,b),c?A(B,d,b,a,e):B(d,b,a,e))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new r(this)}function a(b){C=C||c("./_stream_duplex");if(!(f.call(a,this)||this instanceof C))return new a(b);this._writableState=new l(b,this);this.writable=!0;b&&("function"===typeof b.write&&
(this._write=b.write),"function"===typeof b.writev&&(this._writev=b.writev),"function"===typeof b.destroy&&(this._destroy=b.destroy),"function"===typeof b.final&&(this._final=b.final));d.call(this)}function w(a,d,b,c,n,f,m){d.writelen=c;d.writecb=m;d.writing=!0;d.sync=!0;b?a._writev(n,d.onwrite):a._write(n,f,d.onwrite);d.sync=!1}function B(a,d,b,c){!b&&0===d.length&&d.needDrain&&(d.needDrain=!1,a.emit("drain"));d.pendingcb--;c();G(a,d)}function x(a,d){d.bufferProcessing=!0;var b=d.bufferedRequest;
if(a._writev&&b&&b.next){var c=Array(d.bufferedRequestCount),n=d.corkedRequestsFree;n.entry=b;for(var f=0,m=!0;b;)c[f]=b,b.isBuf||(m=!1),b=b.next,f+=1;c.allBuffers=m;w(a,d,!0,d.length,c,"",n.finish);d.pendingcb++;d.lastBufferedRequest=null;n.next?(d.corkedRequestsFree=n.next,n.next=null):d.corkedRequestsFree=new r(d);d.bufferedRequestCount=0}else{for(;b&&(c=b.chunk,w(a,d,!1,d.objectMode?1:c.length,c,b.encoding,b.callback),b=b.next,d.bufferedRequestCount--,!d.writing););null===b&&(d.lastBufferedRequest=
null)}d.bufferedRequest=b;d.bufferProcessing=!1}function q(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function y(a,d){a._final(function(b){d.pendingcb--;b&&a.emit("error",b);d.prefinished=!0;a.emit("prefinish");G(a,d)})}function G(a,d){var b=q(d);b&&(d.prefinished||d.finalCalled||("function"===typeof a._final?(d.pendingcb++,d.finalCalled=!0,D.nextTick(y,a,d)):(d.prefinished=!0,a.emit("prefinish"))),0===d.pendingcb&&(d.finished=!0,a.emit("finish")));return b}
var D=c("process-nextick-args");p.exports=a;var A=!b.browser&&-1<["v0.10","v0.9."].indexOf(b.version.slice(0,5))?m:D.nextTick,C;a.WritableState=l;b=Object.create(c("core-util-is"));b.inherits=c("inherits");var I={deprecate:c("util-deprecate")},d=c("./internal/streams/stream"),u=c("safe-buffer").Buffer,n=h.Uint8Array||function(){};h=c("./internal/streams/destroy");b.inherits(a,d);l.prototype.getBuffer=function(){for(var a=this.bufferedRequest,d=[];a;)d.push(a),a=a.next;return d};(function(){try{Object.defineProperty(l.prototype,
"buffer",{get:I.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(z){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var f=Function.prototype[Symbol.hasInstance];Object.defineProperty(a,Symbol.hasInstance,{value:function(d){return f.call(this,d)?!0:this!==a?!1:d&&d._writableState instanceof l}})}else f=function(a){return a instanceof this};
a.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};a.prototype.write=function(a,d,b){var c=this._writableState,f=!1,m;if(m=!c.objectMode)m=a,m=u.isBuffer(m)||m instanceof n;m&&!u.isBuffer(a)&&(a=u.from(a));"function"===typeof d&&(b=d,d=null);m?d="buffer":d||(d=c.defaultEncoding);"function"!==typeof b&&(b=v);if(c.ended)c=b,b=Error("write after end"),this.emit("error",b),D.nextTick(c,b);else{var h;if(!(h=m)){h=a;var k=b,x=!0,e=!1;null===h?e=new TypeError("May not write null values to stream"):
"string"===typeof h||void 0===h||c.objectMode||(e=new TypeError("Invalid non-string/buffer chunk"));e&&(this.emit("error",e),D.nextTick(k,e),x=!1);h=x}h&&(c.pendingcb++,f=m,f||(m=a,c.objectMode||!1===c.decodeStrings||"string"!==typeof m||(m=u.from(m,d)),a!==m&&(f=!0,d="buffer",a=m)),h=c.objectMode?1:a.length,c.length+=h,m=c.length<c.highWaterMark,m||(c.needDrain=!0),c.writing||c.corked?(h=c.lastBufferedRequest,c.lastBufferedRequest={chunk:a,encoding:d,isBuf:f,callback:b,next:null},h?h.next=c.lastBufferedRequest:
c.bufferedRequest=c.lastBufferedRequest,c.bufferedRequestCount+=1):w(this,c,!1,h,a,d,b),f=m)}return f};a.prototype.cork=function(){this._writableState.corked++};a.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||x(this,a))};a.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});a.prototype._write=function(a,d,b){b(Error("_write() is not implemented"))};a.prototype._writev=null;a.prototype.end=function(a,d,b){var c=this._writableState;"function"===typeof a?(b=a,d=a=null):"function"===typeof d&&(b=d,d=null);null!==a&&void 0!==a&&
this.write(a,d);c.corked&&(c.corked=1,this.uncork());if(!c.ending&&!c.finished){a=b;c.ending=!0;G(this,c);if(a)if(c.finished)D.nextTick(a);else this.once("finish",a);c.ended=!0;this.writable=!1}};Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});a.prototype.destroy=h.destroy;a.prototype._undestroy=h.undestroy;a.prototype._destroy=function(a,d){this.end();
d(a)}}).call(this,c("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},c("timers").setImmediate)},{"./_stream_duplex":13,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,inherits:7,"process-nextick-args":10,"safe-buffer":21,timers:31,"util-deprecate":32}],18:[function(c,p,l){var b=c("safe-buffer").Buffer,h=c("util");p.exports=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}c.prototype.push=function(b){b={data:b,next:null};0<this.length?this.tail.next=b:this.head=b;this.tail=b;++this.length};c.prototype.unshift=function(b){b={data:b,next:this.head};0===this.length&&(this.tail=b);this.head=b;++this.length};c.prototype.shift=function(){if(0!==this.length){var b=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return b}};c.prototype.clear=function(){this.head=this.tail=null;this.length=0};c.prototype.join=
function(b){if(0===this.length)return"";for(var c=this.head,m=""+c.data;c=c.next;)m+=b+c.data;return m};c.prototype.concat=function(c){if(0===this.length)return b.alloc(0);if(1===this.length)return this.head.data;c=b.allocUnsafe(c>>>0);for(var m=this.head,h=0;m;)m.data.copy(c,h),h+=m.data.length,m=m.next;return c};return c}();h&&h.inspect&&h.inspect.custom&&(p.exports.prototype[h.inspect.custom]=function(){var b=h.inspect({length:this.length});return this.constructor.name+" "+b})},{"safe-buffer":21,
util:2}],19:[function(c,p,l){function b(b,c){b.emit("error",c)}var h=c("process-nextick-args");p.exports={destroy:function(c,r){var m=this,l=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||l)return r?r(c):!c||this._writableState&&this._writableState.errorEmitted||h.nextTick(b,this,c),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(c||null,function(a){!r&&a?(h.nextTick(b,
m,a),m._writableState&&(m._writableState.errorEmitted=!0)):r&&r(a)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":10}],20:[function(c,p,l){p.exports=c("events").EventEmitter},
{events:5}],21:[function(c,p,l){function b(b,c){for(var a in b)c[a]=b[a]}function h(b,c,a){return r(b,c,a)}var m=c("buffer"),r=m.Buffer;r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?p.exports=m:(b(m,l),l.Buffer=h);b(r,h);h.from=function(b,c,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");return r(b,c,a)};h.alloc=function(b,c,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=r(b);void 0!==c?"string"===typeof a?b.fill(c,a):b.fill(c):b.fill(0);
return b};h.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return r(b)};h.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return m.SlowBuffer(b)}},{buffer:3}],22:[function(c,p,l){function b(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;
default:if(b)return;a=(""+a).toLowerCase();b=!0}}function h(c){var m=b(c);if("string"!==typeof m&&(y.isEncoding===G||!G(c)))throw Error("Unknown encoding: "+c);this.encoding=m||c;switch(this.encoding){case "utf16le":this.text=H;this.end=a;c=4;break;case "utf8":this.fillLast=v;c=4;break;case "base64":this.text=w;this.end=B;c=3;break;default:this.write=x;this.end=q;return}this.lastTotal=this.lastNeed=0;this.lastChar=y.allocUnsafe(c)}function m(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===
a>>6?-1:-2}function r(a,b,c){var h=b.length-1;if(h<c)return 0;var d=m(b[h]);if(0<=d)return 0<d&&(a.lastNeed=d-1),d;if(--h<c||-2===d)return 0;d=m(b[h]);if(0<=d)return 0<d&&(a.lastNeed=d-2),d;if(--h<c||-2===d)return 0;d=m(b[h]);return 0<=d?(0<d&&(2===d?d=0:a.lastNeed=d-3),d):0}function v(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&
128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function H(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,
-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function a(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):a}function w(a,b){var c=(a.length-b)%3;if(0===c)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-
c)}function B(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function x(a){return a.toString(this.encoding)}function q(a){return a&&a.length?this.write(a):""}var y=c("safe-buffer").Buffer,G=y.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};l.StringDecoder=
h;h.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};h.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};h.prototype.text=function(a,b){var c=r(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",
b,c)};h.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":21}],23:[function(c,p,l){p.exports=c("./readable").PassThrough},{"./readable":24}],24:[function(c,p,l){l=p.exports=c("./lib/_stream_readable.js");l.Stream=l;l.Readable=l;l.Writable=c("./lib/_stream_writable.js");
l.Duplex=c("./lib/_stream_duplex.js");l.Transform=c("./lib/_stream_transform.js");l.PassThrough=c("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":13,"./lib/_stream_passthrough.js":14,"./lib/_stream_readable.js":15,"./lib/_stream_transform.js":16,"./lib/_stream_writable.js":17}],25:[function(c,p,l){p.exports=c("./readable").Transform},{"./readable":24}],26:[function(c,p,l){p.exports=c("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":17}],27:[function(c,p,l){function b(b,c){for(var a in b)c[a]=
b[a]}function h(b,c,a){return r(b,c,a)}var m=c("buffer"),r=m.Buffer;r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?p.exports=m:(b(m,l),l.Buffer=h);h.prototype=Object.create(r.prototype);b(r,h);h.from=function(b,c,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");return r(b,c,a)};h.alloc=function(b,c,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=r(b);void 0!==c?"string"===typeof a?b.fill(c,a):b.fill(c):b.fill(0);return b};h.allocUnsafe=
function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return r(b)};h.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return m.SlowBuffer(b)}},{buffer:3}],28:[function(c,p,l){(function(b){(function(h){function m(a,d){if(!(this instanceof m))return new m(a,d);for(var b=0,c=n.length;b<c;b++)this[n[b]]="";this.q=this.c="";this.bufferCheckPosition=h.MAX_BUFFER_LENGTH;this.opt=d||{};this.opt.lowercase=this.opt.lowercase||
this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!a;this.noscript=!(!a&&!this.opt.noscript);this.state=g.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(h.XML_ENTITIES):Object.create(h.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(F));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=
0;this.onready&&this.onready(void 0)}function r(a,d){if(!(this instanceof r))return new r(a,d);f.apply(this);this._parser=new m(a,d);this.readable=this.writable=!0;var b=this;this._parser.onend=function(){b.emit("end")};this._parser.onerror=function(a){b.emit("error",a);b._parser.error=null};this._decoder=null;z.forEach(function(a){Object.defineProperty(b,"on"+a,{get:function(){return b._parser["on"+a]},set:function(d){if(!d)return b.removeAllListeners(a),b._parser["on"+a]=d;b.on(a,d)},enumerable:!0,
configurable:!1})})}function l(a){return" "===a||"\n"===a||"\r"===a||"\t"===a}function p(a){return'"'===a||"'"===a}function a(a,d,b){a.textNode&&w(a);a[d]&&a[d](b)}function w(a){a.textNode=B(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function B(a,d){a.trim&&(d=d.trim());a.normalize&&(d=d.replace(/\s+/g," "));return d}function x(a,d){w(a);a.trackPosition&&(d+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c);d=Error(d);a.error=d;a.onerror&&a.onerror(d);return a}
function q(a){a.sawRoot&&!a.closedRoot&&y(a,"Unclosed root tag");a.state!==g.BEGIN&&a.state!==g.BEGIN_WHITESPACE&&a.state!==g.TEXT&&x(a,"Unexpected end");w(a);a.c="";a.closed=!0;a.onend&&a.onend(void 0);m.call(a,a.strict,a.opt);return a}function y(a,d){if("object"!==typeof a||!(a instanceof m))throw Error("bad call to strictFail");a.strict&&x(a,d)}function G(a,d){var b=0>a.indexOf(":")?["",a]:a.split(":"),c=b[0];b=b[1];d&&"xmlns"===a&&(c="xmlns",b="");return{prefix:c,local:b}}function D(d){d.strict||
(d.attribName=d.attribName[d.looseCase]());if(-1===d.attribList.indexOf(d.attribName)&&!d.tag.attributes.hasOwnProperty(d.attribName))if(d.opt.xmlns){var b=G(d.attribName,!0),c=b.local;if("xmlns"===b.prefix)if("xml"===c&&d.attribValue!==E)y(d,"xml: prefix must be bound to "+E+"\nActual: "+d.attribValue);else if("xmlns"===c&&d.attribValue!==J)y(d,"xmlns: prefix must be bound to "+J+"\nActual: "+d.attribValue);else{b=d.tag;var g=d.tags[d.tags.length-1]||d;b.ns===g.ns&&(b.ns=Object.create(g.ns));b.ns[c]=
d.attribValue}d.attribList.push([d.attribName,d.attribValue])}else d.tag.attributes[d.attribName]=d.attribValue,a(d,"onattribute",{name:d.attribName,value:d.attribValue});d.attribName=d.attribValue=""}function A(d,b){if(d.opt.xmlns){var c=d.tag,e=G(d.tagName);c.prefix=e.prefix;c.local=e.local;c.uri=c.ns[e.prefix]||"";c.prefix&&!c.uri&&(y(d,"Unbound namespace prefix: "+JSON.stringify(d.tagName)),c.uri=e.prefix);e=d.tags[d.tags.length-1]||d;c.ns&&e.ns!==c.ns&&Object.keys(c.ns).forEach(function(b){a(d,
"onopennamespace",{prefix:b,uri:c.ns[b]})});e=0;for(var k=d.attribList.length;e<k;e++){var n=d.attribList[e],f=n[0],m=n[1],h=G(f,!0);n=h.prefix;var u=""===n?"":c.ns[n]||"";m={name:f,value:m,prefix:n,local:h.local,uri:u};n&&"xmlns"!==n&&!u&&(y(d,"Unbound namespace prefix: "+JSON.stringify(n)),m.uri=n);d.tag.attributes[f]=m;a(d,"onattribute",m)}d.attribList.length=0}d.tag.isSelfClosing=!!b;d.sawRoot=!0;d.tags.push(d.tag);a(d,"onopentag",d.tag);b||(d.noscript||"script"!==d.tagName.toLowerCase()?d.state=
g.TEXT:d.state=g.SCRIPT,d.tag=null,d.tagName="");d.attribName=d.attribValue="";d.attribList.length=0}function C(d){if(d.tagName){if(d.script){if("script"!==d.tagName){d.script+="</"+d.tagName+">";d.tagName="";d.state=g.SCRIPT;return}a(d,"onscript",d.script);d.script=""}var b=d.tags.length,c=d.tagName;d.strict||(c=c[d.looseCase]());for(var e=c;b--;)if(d.tags[b].name!==e)y(d,"Unexpected close tag");else break;if(0>b)y(d,"Unmatched closing tag: "+d.tagName),d.textNode+="</"+d.tagName+">";else{d.tagName=
c;for(c=d.tags.length;c-- >b;){var k=d.tag=d.tags.pop();d.tagName=d.tag.name;a(d,"onclosetag",d.tagName);for(var n in k.ns);e=d.tags[d.tags.length-1]||d;d.opt.xmlns&&k.ns!==e.ns&&Object.keys(k.ns).forEach(function(b){a(d,"onclosenamespace",{prefix:b,uri:k.ns[b]})})}0===b&&(d.closedRoot=!0);d.tagName=d.attribValue=d.attribName="";d.attribList.length=0}}else y(d,"Weird empty close tag."),d.textNode+="</>";d.state=g.TEXT}function I(a){var d=a.entity,b=d.toLowerCase(),c="";if(a.ENTITIES[d])return a.ENTITIES[d];
if(a.ENTITIES[b])return a.ENTITIES[b];d=b;if("#"===d.charAt(0))if("x"===d.charAt(1)){d=d.slice(2);var g=parseInt(d,16);c=g.toString(16)}else d=d.slice(1),g=parseInt(d,10),c=g.toString(10);d=d.replace(/^0+/,"");return isNaN(g)||c.toLowerCase()!==d?(y(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(g)}function d(a,d){"<"===d?(a.state=g.OPEN_WAKA,a.startTagPosition=a.position):l(d)||(y(a,"Non-whitespace before first tag."),a.textNode=d,a.state=g.TEXT)}function u(a,d){var b="";d<
a.length&&(b=a.charAt(d));return b}h.parser=function(a,d){return new m(a,d)};h.SAXParser=m;h.SAXStream=r;h.createStream=function(a,d){return new r(a,d)};h.MAX_BUFFER_LENGTH=65536;var n="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");h.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function d(){}d.prototype=a;return new d});Object.keys||(Object.keys=function(a){var d=[],b;for(b in a)a.hasOwnProperty(b)&&d.push(b);return d});m.prototype={end:function(){q(this)},write:function(b){if(this.error)throw this.error;if(this.closed)return x(this,"Cannot write after close. Assign an onready handler.");if(null===b)return q(this);"object"===typeof b&&(b=b.toString());for(var c=0,f;;){this.c=f=u(b,c++);if(!f)break;this.trackPosition&&(this.position++,
"\n"===f?(this.line++,this.column=0):this.column++);switch(this.state){case g.BEGIN:this.state=g.BEGIN_WHITESPACE;if("\ufeff"===f)continue;d(this,f);continue;case g.BEGIN_WHITESPACE:d(this,f);continue;case g.TEXT:if(this.sawRoot&&!this.closedRoot){for(var m=c-1;f&&"<"!==f&&"&"!==f;)(f=u(b,c++))&&this.trackPosition&&(this.position++,"\n"===f?(this.line++,this.column=0):this.column++);this.textNode+=b.substring(m,c-1)}"<"!==f||this.sawRoot&&this.closedRoot&&!this.strict?(l(f)||this.sawRoot&&!this.closedRoot||
y(this,"Text data outside of root node."),"&"===f?this.state=g.TEXT_ENTITY:this.textNode+=f):(this.state=g.OPEN_WAKA,this.startTagPosition=this.position);continue;case g.SCRIPT:"<"===f?this.state=g.SCRIPT_ENDING:this.script+=f;continue;case g.SCRIPT_ENDING:"/"===f?this.state=g.CLOSE_TAG:(this.script+="<"+f,this.state=g.SCRIPT);continue;case g.OPEN_WAKA:"!"===f?(this.state=g.SGML_DECL,this.sgmlDecl=""):l(f)||(N.test(f)?(this.state=g.OPEN_TAG,this.tagName=f):"/"===f?(this.state=g.CLOSE_TAG,this.tagName=
""):"?"===f?(this.state=g.PROC_INST,this.procInstName=this.procInstBody=""):(y(this,"Unencoded <"),this.startTagPosition+1<this.position&&(f=Array(this.position-this.startTagPosition).join(" ")+f),this.textNode+="<"+f,this.state=g.TEXT));continue;case g.SGML_DECL:(this.sgmlDecl+f).toUpperCase()===L?(a(this,"onopencdata"),this.state=g.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+f?(this.state=g.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+f).toUpperCase()===K?(this.state=g.DOCTYPE,
(this.doctype||this.sawRoot)&&y(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===f?(a(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=g.TEXT):(p(f)&&(this.state=g.SGML_DECL_QUOTED),this.sgmlDecl+=f);continue;case g.SGML_DECL_QUOTED:f===this.q&&(this.state=g.SGML_DECL,this.q="");this.sgmlDecl+=f;continue;case g.DOCTYPE:">"===f?(this.state=g.TEXT,a(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=f,"["===f?this.state=g.DOCTYPE_DTD:
p(f)&&(this.state=g.DOCTYPE_QUOTED,this.q=f));continue;case g.DOCTYPE_QUOTED:this.doctype+=f;f===this.q&&(this.q="",this.state=g.DOCTYPE);continue;case g.DOCTYPE_DTD:this.doctype+=f;"]"===f?this.state=g.DOCTYPE:p(f)&&(this.state=g.DOCTYPE_DTD_QUOTED,this.q=f);continue;case g.DOCTYPE_DTD_QUOTED:this.doctype+=f;f===this.q&&(this.state=g.DOCTYPE_DTD,this.q="");continue;case g.COMMENT:"-"===f?this.state=g.COMMENT_ENDING:this.comment+=f;continue;case g.COMMENT_ENDING:"-"===f?(this.state=g.COMMENT_ENDED,
(this.comment=B(this.opt,this.comment))&&a(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+f,this.state=g.COMMENT);continue;case g.COMMENT_ENDED:">"!==f?(y(this,"Malformed comment"),this.comment+="--"+f,this.state=g.COMMENT):this.state=g.TEXT;continue;case g.CDATA:"]"===f?this.state=g.CDATA_ENDING:this.cdata+=f;continue;case g.CDATA_ENDING:"]"===f?this.state=g.CDATA_ENDING_2:(this.cdata+="]"+f,this.state=g.CDATA);continue;case g.CDATA_ENDING_2:">"===f?(this.cdata&&a(this,"oncdata",
this.cdata),a(this,"onclosecdata"),this.cdata="",this.state=g.TEXT):"]"===f?this.cdata+="]":(this.cdata+="]]"+f,this.state=g.CDATA);continue;case g.PROC_INST:"?"===f?this.state=g.PROC_INST_ENDING:l(f)?this.state=g.PROC_INST_BODY:this.procInstName+=f;continue;case g.PROC_INST_BODY:if(!this.procInstBody&&l(f))continue;else"?"===f?this.state=g.PROC_INST_ENDING:this.procInstBody+=f;continue;case g.PROC_INST_ENDING:">"===f?(a(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=g.TEXT):(this.procInstBody+="?"+f,this.state=g.PROC_INST_BODY);continue;case g.OPEN_TAG:if(k.test(f))this.tagName+=f;else{this.strict||(this.tagName=this.tagName[this.looseCase]());m=this.tags[this.tags.length-1]||this;var r=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(r.ns=m.ns);this.attribList.length=0;a(this,"onopentagstart",r);">"===f?A(this):"/"===f?this.state=g.OPEN_TAG_SLASH:(l(f)||y(this,"Invalid character in tag name"),this.state=
g.ATTRIB)}continue;case g.OPEN_TAG_SLASH:">"===f?(A(this,!0),C(this)):(y(this,"Forward-slash in opening tag not followed by >"),this.state=g.ATTRIB);continue;case g.ATTRIB:if(l(f))continue;else">"===f?A(this):"/"===f?this.state=g.OPEN_TAG_SLASH:N.test(f)?(this.attribName=f,this.attribValue="",this.state=g.ATTRIB_NAME):y(this,"Invalid attribute name");continue;case g.ATTRIB_NAME:"="===f?this.state=g.ATTRIB_VALUE:">"===f?(y(this,"Attribute without value"),this.attribValue=this.attribName,D(this),A(this)):
l(f)?this.state=g.ATTRIB_NAME_SAW_WHITE:k.test(f)?this.attribName+=f:y(this,"Invalid attribute name");continue;case g.ATTRIB_NAME_SAW_WHITE:if("="===f)this.state=g.ATTRIB_VALUE;else if(l(f))continue;else y(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",a(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===f?A(this):N.test(f)?(this.attribName=f,this.state=g.ATTRIB_NAME):(y(this,"Invalid attribute name"),this.state=g.ATTRIB);continue;
case g.ATTRIB_VALUE:if(l(f))continue;else p(f)?(this.q=f,this.state=g.ATTRIB_VALUE_QUOTED):(y(this,"Unquoted attribute value"),this.state=g.ATTRIB_VALUE_UNQUOTED,this.attribValue=f);continue;case g.ATTRIB_VALUE_QUOTED:if(f!==this.q){"&"===f?this.state=g.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=f;continue}D(this);this.q="";this.state=g.ATTRIB_VALUE_CLOSED;continue;case g.ATTRIB_VALUE_CLOSED:l(f)?this.state=g.ATTRIB:">"===f?A(this):"/"===f?this.state=g.OPEN_TAG_SLASH:N.test(f)?(y(this,"No whitespace between attributes"),
this.attribName=f,this.attribValue="",this.state=g.ATTRIB_NAME):y(this,"Invalid attribute name");continue;case g.ATTRIB_VALUE_UNQUOTED:if(">"!==f&&!l(f)){"&"===f?this.state=g.ATTRIB_VALUE_ENTITY_U:this.attribValue+=f;continue}D(this);">"===f?A(this):this.state=g.ATTRIB;continue;case g.CLOSE_TAG:if(this.tagName)">"===f?C(this):k.test(f)?this.tagName+=f:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=g.SCRIPT):(l(f)||y(this,"Invalid tagname in closing tag"),this.state=g.CLOSE_TAG_SAW_WHITE);
else if(l(f))continue;else N.test(f)?this.tagName=f:this.script?(this.script+="</"+f,this.state=g.SCRIPT):y(this,"Invalid tagname in closing tag.");continue;case g.CLOSE_TAG_SAW_WHITE:if(l(f))continue;">"===f?C(this):y(this,"Invalid characters in closing tag");continue;case g.TEXT_ENTITY:case g.ATTRIB_VALUE_ENTITY_Q:case g.ATTRIB_VALUE_ENTITY_U:switch(this.state){case g.TEXT_ENTITY:var z=g.TEXT;var E="textNode";break;case g.ATTRIB_VALUE_ENTITY_Q:z=g.ATTRIB_VALUE_QUOTED;E="attribValue";break;case g.ATTRIB_VALUE_ENTITY_U:z=
g.ATTRIB_VALUE_UNQUOTED,E="attribValue"}";"===f?(this[E]+=I(this),this.entity="",this.state=z):(this.entity.length?e:t).test(f)?this.entity+=f:(y(this,"Invalid character in entity name"),this[E]+="&"+this.entity+f,this.entity="",this.state=z);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){b=Math.max(h.MAX_BUFFER_LENGTH,10);f=c=0;for(z=n.length;f<z;f++){E=this[n[f]].length;if(E>b)switch(n[f]){case "textNode":w(this);break;case "cdata":a(this,
"oncdata",this.cdata);this.cdata="";break;case "script":a(this,"onscript",this.script);this.script="";break;default:x(this,"Max buffer length exceeded: "+n[f])}c=Math.max(c,E)}this.bufferCheckPosition=h.MAX_BUFFER_LENGTH-c+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){w(this);""!==this.cdata&&(a(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(a(this,"onscript",this.script),this.script="")}};try{var f=
c("stream").Stream}catch(O){f=function(){}}var z=h.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});r.prototype=Object.create(f.prototype,{constructor:{value:r}});r.prototype.write=function(a){"function"===typeof b&&"function"===typeof b.isBuffer&&b.isBuffer(a)&&(this._decoder||(this._decoder=new (c("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());this.emit("data",a);return!0};r.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};r.prototype.on=function(a,d){var b=this;b._parser["on"+a]||-1===z.indexOf(a)||(b._parser["on"+a]=function(){var d=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);d.splice(0,0,a);b.emit.apply(b,d)});return f.prototype.on.call(b,a,d)};var L="[CDATA[",K="DOCTYPE",E="http://www.w3.org/XML/1998/namespace",J="http://www.w3.org/2000/xmlns/",F={xml:E,xmlns:J},N=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
k=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,t=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,e=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,
g=0;h.STATE={BEGIN:g++,BEGIN_WHITESPACE:g++,TEXT:g++,TEXT_ENTITY:g++,OPEN_WAKA:g++,SGML_DECL:g++,SGML_DECL_QUOTED:g++,DOCTYPE:g++,DOCTYPE_QUOTED:g++,DOCTYPE_DTD:g++,DOCTYPE_DTD_QUOTED:g++,COMMENT_STARTING:g++,COMMENT:g++,COMMENT_ENDING:g++,COMMENT_ENDED:g++,CDATA:g++,CDATA_ENDING:g++,CDATA_ENDING_2:g++,PROC_INST:g++,PROC_INST_BODY:g++,PROC_INST_ENDING:g++,OPEN_TAG:g++,OPEN_TAG_SLASH:g++,ATTRIB:g++,ATTRIB_NAME:g++,ATTRIB_NAME_SAW_WHITE:g++,ATTRIB_VALUE:g++,ATTRIB_VALUE_QUOTED:g++,ATTRIB_VALUE_CLOSED:g++,
ATTRIB_VALUE_UNQUOTED:g++,ATTRIB_VALUE_ENTITY_Q:g++,ATTRIB_VALUE_ENTITY_U:g++,CLOSE_TAG:g++,CLOSE_TAG_SAW_WHITE:g++,SCRIPT:g++,SCRIPT_ENDING:g++};h.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};h.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,
THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,
laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,
Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,
lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,
ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(h.ENTITIES).forEach(function(a){var d=h.ENTITIES[a];d="number"===typeof d?String.fromCharCode(d):d;h.ENTITIES[a]=d});for(var S in h.STATE)h.STATE[h.STATE[S]]=S;g=h.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,d=Math.floor,b=function(){var b=[],c=-1,
f=arguments.length;if(!f)return"";for(var g="";++c<f;){var e=Number(arguments[c]);if(!isFinite(e)||0>e||1114111<e||d(e)!==e)throw RangeError("Invalid code point: "+e);if(65535>=e)b.push(e);else{e-=65536;var k=(e>>10)+55296;e=e%1024+56320;b.push(k,e)}if(c+1===f||16384<b.length)g+=a.apply(null,b),b.length=0}return g};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:b,configurable:!0,writable:!0}):String.fromCodePoint=b}()})("undefined"===typeof l?this.sax={}:l)}).call(this,
c("buffer").Buffer)},{buffer:3,stream:29,string_decoder:30}],29:[function(c,p,l){function b(){h.call(this)}p.exports=b;var h=c("events").EventEmitter;c("inherits")(b,h);b.Readable=c("readable-stream/readable.js");b.Writable=c("readable-stream/writable.js");b.Duplex=c("readable-stream/duplex.js");b.Transform=c("readable-stream/transform.js");b.PassThrough=c("readable-stream/passthrough.js");b.Stream=b;b.prototype.pipe=function(b,c){function m(a){b.writable&&!1===b.write(a)&&r.pause&&r.pause()}function l(){r.readable&&
r.resume&&r.resume()}function a(){y||(y=!0,b.end())}function w(){y||(y=!0,"function"===typeof b.destroy&&b.destroy())}function B(a){x();if(0===h.listenerCount(this,"error"))throw a;}function x(){r.removeListener("data",m);b.removeListener("drain",l);r.removeListener("end",a);r.removeListener("close",w);r.removeListener("error",B);b.removeListener("error",B);r.removeListener("end",x);r.removeListener("close",x);b.removeListener("close",x)}var r=this;r.on("data",m);b.on("drain",l);b._isStdio||c&&!1===
c.end||(r.on("end",a),r.on("close",w));var y=!1;r.on("error",B);b.on("error",B);r.on("end",x);r.on("close",x);b.on("close",x);b.emit("pipe",r);return b}},{events:5,inherits:7,"readable-stream/duplex.js":12,"readable-stream/passthrough.js":23,"readable-stream/readable.js":24,"readable-stream/transform.js":25,"readable-stream/writable.js":26}],30:[function(c,p,l){arguments[4][22][0].apply(l,arguments)},{dup:22,"safe-buffer":27}],31:[function(c,p,l){(function(b,h){function m(a,b){this._id=a;this._clearFn=
b}var r=c("process/browser.js").nextTick,p=Function.prototype.apply,H=Array.prototype.slice,a={},w=0;l.setTimeout=function(){return new m(p.call(setTimeout,window,arguments),clearTimeout)};l.setInterval=function(){return new m(p.call(setInterval,window,arguments),clearInterval)};l.clearTimeout=l.clearInterval=function(a){a.close()};m.prototype.unref=m.prototype.ref=function(){};m.prototype.close=function(){this._clearFn.call(window,this._id)};l.enroll=function(a,b){clearTimeout(a._idleTimeoutId);
a._idleTimeout=b};l.unenroll=function(a){clearTimeout(a._idleTimeoutId);a._idleTimeout=-1};l._unrefActive=l.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;0<=b&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))};l.setImmediate="function"===typeof b?b:function(b){var c=w++,m=2>arguments.length?!1:H.call(arguments,1);a[c]=!0;r(function(){a[c]&&(m?b.apply(null,m):b.call(null),l.clearImmediate(c))});return c};l.clearImmediate="function"===typeof h?h:function(b){delete a[b]}}).call(this,
c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":11,timers:31}],32:[function(c,p,l){(function(b){function c(c){try{if(!b.localStorage)return!1}catch(r){return!1}c=b.localStorage[c];return null==c?!1:"true"===String(c).toLowerCase()}p.exports=function(b,h){if(c("noDeprecation"))return b;var m=!1;return function(){if(!m){if(c("throwDeprecation"))throw Error(h);c("traceDeprecation")?console.trace(h):console.warn(h);m=!0}return b.apply(this,arguments)}}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],33:[function(c,p,l){(function(b,c,m,r,l){function h(a,d){var b=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!b&&d&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=d);else if(b&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],a.contents)for(var c=0;c<a.contents.length;c++)h(a.contents[c],
b||d)}function a(d){if("contents"in d){var b="styleAttrs"in d?d.styleAttrs[r.byName.ruby.qname]:null;b="span"===d.kind&&("container"===b||"textContainer"===b||"baseContainer"===b);for(var c=d.contents.length-1;0<=c;c--)!b||"styleAttrs"in d.contents[c]&&r.byName.ruby.qname in d.contents[c].styleAttrs?a(d.contents[c]):delete d.contents[c]}}function w(a,d,b,c){var f=c&&"seq"===c.timeContainer,g=0;c&&(g=f&&b?b.end:c.begin);d.begin=d.explicit_begin?d.explicit_begin+g:g;b=d.begin;c=null;for(var e in d.sets)d.sets.hasOwnProperty(e)&&
(w(a,d.sets[e],c,d),b="seq"===d.timeContainer?d.sets[e].end:Math.max(b,d.sets[e].end),c=d.sets[e]);if("contents"in d)for(var k in d.contents)d.contents.hasOwnProperty(k)&&(w(a,d.contents[k],c,d),b="seq"===d.timeContainer?d.contents[k].end:Math.max(b,d.contents[k].end),c=d.contents[k]);else b=f?d.begin:Number.POSITIVE_INFINITY;d.end=null!==d.explicit_end&&null!==d.explicit_dur?Math.min(d.begin+d.explicit_dur,g+d.explicit_end):null===d.explicit_end&&null!==d.explicit_dur?d.begin+d.explicit_dur:null!==
d.explicit_end&&null===d.explicit_dur?g+d.explicit_end:b;delete d.explicit_begin;delete d.explicit_dur;delete d.explicit_end;a._registerEvent(d)}function B(a){this.node=a}function x(){this.events=[];this.head=new q;this.body=null}function q(){this.styling=new y;this.layout=new A}function y(){this.styles={};this.initials={}}function p(){this.styleRefs=this.styleAttrs=this.id=null}function v(){this.styleAttrs=null}function A(){this.regions={}}function C(a,d){this.kind="image";this.src=a;this.type=d}
function I(a){this.id=a}function d(a){this.regionID=a}function u(a){this.styleAttrs=a}function n(a){this.sets=a}function f(a){this.contents=a}function z(a,d,b){this.explicit_begin=a;this.explicit_end=d;this.explicit_dur=b}function L(){this.kind="body"}function K(){this.kind="div"}function E(){this.kind="p"}function J(){this.kind="span"}function F(){this.kind="span"}function N(){this.kind="br"}function k(){}function t(){}function e(a){var d=null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(d=a.value||
null);return d}function g(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function S(a,d){var b={};if(null!==a)for(var c in a.attributes)if(a.attributes.hasOwnProperty(c)){var f=a.attributes[c].uri+" "+a.attributes[c].local,g=r.byQName[f];if(void 0!==g){var e=g.parse(a.attributes[c].value);null!==e?(b[f]=e,g===r.byName.zIndex&&Q(d,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):P(d,"Cannot parse styling attribute "+f+" --\x3e "+a.attributes[c].value)}}return b}
function O(a,d,b){for(var c in a.attributes)if(a.attributes.hasOwnProperty(c)&&a.attributes[c].uri===d&&a.attributes[c].local===b)return a.attributes[c].value;return null}function Z(a,d){a=O(a,m.ns_tts,"extent");if(null===a)return null;var b=a.split(" ");if(2!==b.length)return Q(d,"Malformed extent (ignoring)"),null;a=l.parseLength(b[0]);b=l.parseLength(b[1]);return b&&a?{h:b,w:a}:(Q(d,"Malformed extent values (ignoring)"),null)}function U(a,d,b){var c=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,f=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,
g=/^(\d+(?:\.\d+)?)t$/,e=/^(\d+(?:\.\d+)?)ms$/,k=/^(\d+(?:\.\d+)?)s$/,n=/^(\d+(?:\.\d+)?)h$/,m=/^(\d+(?:\.\d+)?)m$/,h,u=null;null!==(h=/^(\d+(?:\.\d+)?)f$/.exec(b))?null!==d&&(u=parseFloat(h[1])/d):null!==(h=g.exec(b))?null!==a&&(u=parseFloat(h[1])/a):null!==(h=e.exec(b))?u=parseFloat(h[1])/1E3:null!==(h=k.exec(b))?u=parseFloat(h[1]):null!==(h=n.exec(b))?u=3600*parseFloat(h[1]):null!==(h=m.exec(b))?u=60*parseFloat(h[1]):null!==(h=c.exec(b))?u=3600*parseInt(h[1])+60*parseInt(h[2])+parseFloat(h[3]):
null!==(h=f.exec(b))&&null!==d&&(u=3600*parseInt(h[1])+60*parseInt(h[2])+parseInt(h[3])+(null===h[4]?0:parseInt(h[4])/d));return u}function W(a,d,b){for(;0<d.styleRefs.length;){var c=d.styleRefs.pop();c in a.styles?(W(a,a.styles[c],b),T(a.styles[c].styleAttrs,d.styleAttrs)):P(b,"Non-existant style id referenced")}}function V(a,d,b,c){for(var f=d.length-1;0<=f;f--){var g=d[f];g in a.styles?T(a.styles[g].styleAttrs,b):P(c,"Non-existant style id referenced")}}function T(a,d){for(var b in a)!a.hasOwnProperty(b)||
b in d||(d[b]=a[b])}function Q(a,d){if(a&&a.warn&&a.warn(d))throw d;}function P(a,d){if(a&&a.error&&a.error(d))throw d;}function M(a,d){a&&a.fatal&&a.fatal(d);throw d;}function Y(a,d){for(var b=0,c=a.length-1,f;b<=c;){f=Math.floor((b+c)/2);var g=a[f];if(g<d)b=f+1;else if(g>d)c=f-1;else return{found:!0,index:f}}return{found:!1,index:b}}b.fromXML=function(d,b,f){var g=c.parser(!0,{xmlns:!0}),e=[],n=[],u=[],l=0,z=null;g.onclosetag=function(a){if(e[0]instanceof k)null!==z.head&&null!==z.head.styling&&
V(z.head.styling,e[0].styleRefs,e[0].styleAttrs,b),delete e[0].styleRefs;else if(e[0]instanceof y)for(var d in e[0].styles)e[0].styles.hasOwnProperty(d)&&W(e[0],e[0].styles[d],b);else if(e[0]instanceof E||e[0]instanceof J){if(1<e[0].contents.length){a=[e[0].contents[0]];for(d=1;d<e[0].contents.length;d++)e[0].contents[d]instanceof F&&a[a.length-1]instanceof F?a[a.length-1].text+=e[0].contents[d].text:a.push(e[0].contents[d]);e[0].contents=a}e[0]instanceof J&&1===e[0].contents.length&&e[0].contents[0]instanceof
F&&(e[0].text=e[0].contents[0].text,delete e[0].contents)}else if(e[0]instanceof B)if(e[0].node.uri===m.ns_tt&&"metadata"===e[0].node.local)l--;else if(0<l&&f&&"onCloseTag"in f)f.onCloseTag();u.shift();n.shift();e.shift()};g.ontext=function(a){if(void 0!==e[0])if(e[0]instanceof J||e[0]instanceof E){if(e[0]instanceof J){var d=e[0].styleAttrs[r.byName.ruby.qname];if("container"===d||"textContainer"===d||"baseContainer"===d)return}d=new F;d.initFromText(z,e[0],a,n[0],u[0],b);e[0].contents.push(d)}else if(e[0]instanceof
B&&0<l&&f&&"onText"in f)f.onText(a)};g.onopentag=function(a){function d(a){m.ttaf_map[a.uri]&&(a.uri=m.ttaf_map[a.uri])}var c=a.attributes["xml:space"];c?u.unshift(c.value):0===u.length?u.unshift("default"):u.unshift(u[0]);(c=a.attributes["xml:lang"])?n.unshift(c.value):0===n.length?n.unshift(""):n.unshift(n[0]);d(a);if(a.attributes)for(var g in a.attributes)a.attributes.hasOwnProperty(g)&&d(a.attributes[g]);if(a.uri===m.ns_tt)if("tt"===a.local)null!==z&&M(b,"Two <tt> elements at ("+this.line+","+
this.column+")"),z=new x,z.initFromNode(a,n[0],b),e.unshift(z);else if("head"===a.local)e[0]instanceof x||M(b,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),e.unshift(z.head);else if("styling"===a.local)e[0]instanceof q||M(b,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),e.unshift(z.head.styling);else if("style"===a.local)if(e[0]instanceof y){var h=new p;h.initFromNode(a,b);h.id?z.head.styling.styles[h.id]=h:P(b,"<style> element missing @id attribute");
e.unshift(h)}else e[0]instanceof k?(h=new p,h.initFromNode(a,b),T(h.styleAttrs,e[0].styleAttrs),e.unshift(h)):M(b,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===a.local)if(e[0]instanceof y){g=new v;g.initFromNode(a,b);for(h in g.styleAttrs)g.styleAttrs.hasOwnProperty(h)&&(z.head.styling.initials[h]=g.styleAttrs[h]);e.unshift(g)}else M(b,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===
a.local)e[0]instanceof q||M(b,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),e.unshift(z.head.layout);else if("region"===a.local)e[0]instanceof A||M(b,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),h=new k,h.initFromNode(z,a,n[0],b),!h.id||h.id in z.head.layout.regions?P(b,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):z.head.layout.regions[h.id]=h,e.unshift(h);else if("body"===a.local)e[0]instanceof
x||M(b,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==z.body&&M(b,"Second <body> element at "+this.line+","+this.column+")"),h=new L,h.initFromNode(z,a,n[0],b),z.body=h,e.unshift(h);else if("div"===a.local){e[0]instanceof K||e[0]instanceof L||M(b,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");h=new K;h.initFromNode(z,e[0],a,n[0],b);if(g=h.styleAttrs[r.byName.backgroundImage.qname])h.contents.push(new C(g)),delete h.styleAttrs[r.byName.backgroundImage.qname];
e[0].contents.push(h);e.unshift(h)}else"image"===a.local?(e[0]instanceof K||M(b,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),h=new C,h.initFromNode(z,e[0],a,n[0],b),e[0].contents.push(h),e.unshift(h)):"p"===a.local?(e[0]instanceof K||M(b,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),h=new E,h.initFromNode(z,e[0],a,n[0],b),e[0].contents.push(h),e.unshift(h)):"span"===a.local?(e[0]instanceof J||e[0]instanceof E||M(b,"Parent of <span> element is not <span> or <p> at "+
this.line+","+this.column+")"),h=new J,h.initFromNode(z,e[0],a,n[0],u[0],b),e[0].contents.push(h),e.unshift(h)):"br"===a.local?(e[0]instanceof J||e[0]instanceof E||M(b,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),h=new N,h.initFromNode(z,e[0],a,n[0],b),e[0].contents.push(h),e.unshift(h)):"set"===a.local?(e[0]instanceof J||e[0]instanceof E||e[0]instanceof K||e[0]instanceof L||e[0]instanceof k||e[0]instanceof N||M(b,"Parent of <set> element is not a content element or a region at "+
this.line+","+this.column+")"),h=new t,h.initFromNode(z,e[0],a,b),e[0].sets.push(h),e.unshift(h)):e.unshift(new B(a));else e.unshift(new B(a));if(e[0]instanceof B)if(a.uri===m.ns_tt&&"metadata"===a.local)l++;else if(0<l&&f&&"onOpenTag"in f){h=[];for(var w in a.attributes)a.attributes.hasOwnProperty(w)&&(h[a.attributes[w].uri+" "+a.attributes[w].local]={uri:a.attributes[w].uri,local:a.attributes[w].local,value:a.attributes[w].value});f.onOpenTag(a.uri,a.local,h)}};g.write(d).close();delete z.head.styling.styles;
d=!1;for(var R in z.head.layout.regions)if(z.head.layout.regions.hasOwnProperty(R)){d=!0;break}d||(R=k.prototype.createDefaultRegion(z,b),z.head.layout.regions[R.id]=R);for(var X in z.head.layout.regions)z.head.layout.regions.hasOwnProperty(X)&&w(z,z.head.layout.regions[X],null,null);z.body&&w(z,z.body,null,null);z.body&&a(z.body);z.body&&h(z.body);return z};x.prototype.initFromNode=function(a,d,b){var c=O(a,m.ns_ttp,"cellResolution"),e=15;var f=32;null!==c&&(c=/(\d+) (\d+)/.exec(c),null!==c?(f=parseInt(c[1]),
e=parseInt(c[2])):Q(b,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new l.ComputedLength(0,1/e),w:new l.ComputedLength(1/f,0)};e=O(a,m.ns_ttp,"frameRate");c=30;null!==e&&(f=/(\d+)/.exec(e),null!==f?c=parseInt(f[1]):Q(b,"Malformed frame rate attribute (using initial value instead)"));f=O(a,m.ns_ttp,"frameRateMultiplier");var g=1;null!==f&&(f=/(\d+) (\d+)/.exec(f),null!==f?g=parseInt(f[1])/parseInt(f[2]):Q(b,"Malformed frame rate multiplier attribute (using initial value instead)"));
c*=g;g=1;f=O(a,m.ns_ttp,"tickRate");null===f?null!==e&&(g=c):(f=/(\d+)/.exec(f),null!==f?g=parseInt(f[1]):Q(b,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=c;this.tickRate=g;f=O(a,m.ns_ittp,"aspectRatio");null===f&&(f=O(a,m.ns_ttp,"displayAspectRatio"));e=null;null!==f&&(c=/(\d+)\s+(\d+)/.exec(f),null!==c?(f=parseInt(c[1]),c=parseInt(c[2]),0!==f&&0!==c?e=f/c:P(b,"Illegal aspectRatio values (ignoring)")):P(b,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=
e;e=O(a,m.ns_ttp,"timeBase");null!==e&&"media"!==e&&M(b,"Unsupported time base");a=Z(a,b);null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||M(b,"Extent on TT must be in px or absent"),this.pxLength={h:new l.ComputedLength(0,1/a.h.value),w:new l.ComputedLength(1/a.w.value,0)});this.dimensions={h:new l.ComputedLength(0,1),w:new l.ComputedLength(1,0)};this.lang=d};x.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var d=Y(this.events,a.begin);d.found||this.events.splice(d.index,
0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(d=Y(this.events,a.end),d.found||this.events.splice(d.index,0,a.end))}};x.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};x.prototype.getMediaTimeEvents=function(){return this.events};p.prototype.initFromNode=function(a,d){this.id=e(a);this.styleAttrs=S(a,d);this.styleRefs=g(a)};v.prototype.initFromNode=function(a,d){this.styleAttrs={};for(var b in a.attributes)!a.attributes.hasOwnProperty(b)||a.attributes[b].uri!==
m.ns_itts&&a.attributes[b].uri!==m.ns_ebutts&&a.attributes[b].uri!==m.ns_tts||(this.styleAttrs[a.attributes[b].uri+" "+a.attributes[b].local]=a.attributes[b].value)};C.prototype.initFromNode=function(a,b,c,e,f){(this.src="src"in c.attributes?c.attributes.src.value:null)||P(f,"Invalid image@src attribute");(this.type="type"in c.attributes?c.attributes.type.value:null)||P(f,"Invalid image@type attribute");u.prototype.initFromNode.call(this,a,b,c,f);z.prototype.initFromNode.call(this,a,b,c,f);n.prototype.initFromNode.call(this,
a,b,c,f);d.prototype.initFromNode.call(this,a,b,c,f);this.lang=e};I.prototype.initFromNode=function(a,d,b,c){this.id=e(b)};d.prototype.initFromNode=function(a,d,b,c){this.regionID=b&&"region"in b.attributes?b.attributes.region.value:""};u.prototype.initFromNode=function(a,d,b,c){this.styleAttrs=S(b,c);null!==a.head&&null!==a.head.styling&&V(a.head.styling,g(b),this.styleAttrs,c)};n.prototype.initFromNode=function(a,d,b,c){this.sets=[]};f.prototype.initFromNode=function(a,d,b,c){this.contents=[]};
z.prototype.initFromNode=function(a,d,b,c){d=null;b&&"begin"in b.attributes&&(d=U(a.tickRate,a.effectiveFrameRate,b.attributes.begin.value),null===d&&Q(c,"Malformed begin value "+b.attributes.begin.value+" (using 0)"));var e=null;b&&"dur"in b.attributes&&(e=U(a.tickRate,a.effectiveFrameRate,b.attributes.dur.value),null===e&&Q(c,"Malformed dur value "+b.attributes.dur.value+" (ignoring)"));var f=null;b&&"end"in b.attributes&&(f=U(a.tickRate,a.effectiveFrameRate,b.attributes.end.value),null===f&&Q(c,
"Malformed end value (ignoring)"));this.explicit_begin=d;this.explicit_end=f;this.explicit_dur=e;(a=b&&"timeContainer"in b.attributes?b.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?c="seq":(P(c,"Illegal value of timeContainer (assuming 'par')"),c="par"):c="par";this.timeContainer=c};L.prototype.initFromNode=function(a,b,c,e){u.prototype.initFromNode.call(this,a,null,b,e);z.prototype.initFromNode.call(this,a,null,b,e);n.prototype.initFromNode.call(this,a,null,b,e);d.prototype.initFromNode.call(this,
a,null,b,e);f.prototype.initFromNode.call(this,a,null,b,e);this.lang=c};K.prototype.initFromNode=function(a,b,c,e,g){u.prototype.initFromNode.call(this,a,b,c,g);z.prototype.initFromNode.call(this,a,b,c,g);n.prototype.initFromNode.call(this,a,b,c,g);d.prototype.initFromNode.call(this,a,b,c,g);f.prototype.initFromNode.call(this,a,b,c,g);this.lang=e};E.prototype.initFromNode=function(a,b,c,e,g){u.prototype.initFromNode.call(this,a,b,c,g);z.prototype.initFromNode.call(this,a,b,c,g);n.prototype.initFromNode.call(this,
a,b,c,g);d.prototype.initFromNode.call(this,a,b,c,g);f.prototype.initFromNode.call(this,a,b,c,g);this.lang=e};J.prototype.initFromNode=function(a,b,c,e,g,k){u.prototype.initFromNode.call(this,a,b,c,k);z.prototype.initFromNode.call(this,a,b,c,k);n.prototype.initFromNode.call(this,a,b,c,k);d.prototype.initFromNode.call(this,a,b,c,k);f.prototype.initFromNode.call(this,a,b,c,k);this.space=g;this.lang=e};F.prototype.initFromText=function(a,d,b,c,e,f){z.prototype.initFromNode.call(this,a,d,null,f);this.text=
b;this.space=e;this.lang=c};N.prototype.initFromNode=function(a,b,c,e,f){d.prototype.initFromNode.call(this,a,b,c,f);z.prototype.initFromNode.call(this,a,b,c,f);this.lang=e};k.prototype.createDefaultRegion=function(a,d){var b=new k;b.id="";u.prototype.initFromNode.call(b,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",
uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",
ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},d);b.sets=[];z.call(b,0,Number.POSITIVE_INFINITY,null);this.lang=a.xmllang;return b};k.prototype.initFromNode=function(a,d,b,c){I.prototype.initFromNode.call(this,a,null,d,c);z.prototype.initFromNode.call(this,a,null,d,c);n.prototype.initFromNode.call(this,a,null,d,c);this.styleAttrs=S(d,c);this.styleRefs=
g(d);this.lang=b};t.prototype.initFromNode=function(a,d,b,c){z.prototype.initFromNode.call(this,a,d,b,c);a=S(b,c);this.value=this.qname=null;for(var e in a)if(a.hasOwnProperty(e)){if(this.qname){P(c,"More than one style specified on set");break}this.qname=e;this.value=a[e]}}})("undefined"===typeof l?this.imscDoc={}:l,"undefined"===typeof sax?c("sax"):sax,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):
imscUtils)},{"./names":37,"./styles":38,"./utils":39,sax:28}],34:[function(c,p,l){(function(b,c,m,l){function h(a){var d={};a=Object.entries(a);for(var b in a)if(a.hasOwnProperty(b)){var c=l.parseColor(a[b][0]),h=l.parseColor(a[b][1]);c&&h&&(d[c.toString()]=h)}return d}function r(d,b,c,f){if("region"===c.kind){var h=document.createElement("div");h.style.position="absolute"}else if("body"===c.kind)h=document.createElement("div");else if("div"===c.kind)h=document.createElement("div");else if("image"===
c.kind){if(h=document.createElement("img"),null!==d.imgResolver&&null!==c.src){var n=d.imgResolver(c.src,h);n&&(h.src=n);h.height=d.regionH;h.width=d.regionW}}else if("p"===c.kind)h=document.createElement("p");else if("span"===c.kind)if("container"===c.styleAttrs[m.byName.ruby.qname])h=document.createElement("ruby"),d.ruby=!0;else if("base"===c.styleAttrs[m.byName.ruby.qname])h=document.createElement("rb");else if("text"===c.styleAttrs[m.byName.ruby.qname])h=document.createElement("rt");else if("baseContainer"===
c.styleAttrs[m.byName.ruby.qname])h=document.createElement("rbc");else if("textContainer"===c.styleAttrs[m.byName.ruby.qname])h=document.createElement("rtc");else{if("delimiter"===c.styleAttrs[m.byName.ruby.qname])return;h=document.createElement("span")}else"br"===c.kind&&(h=document.createElement("br"));if(h){!c.lang||"region"!==c.kind&&c.lang===f.lang||(h.lang=c.lang);b.appendChild(h);h.style.margin="0";if("region"===c.kind)if(b=c.styleAttrs[m.byName.writingMode.qname],"lrtb"===b||"lr"===b)d.ipd=
"lr",d.bpd="tb";else if("rltb"===b||"rl"===b)d.ipd="rl",d.bpd="tb";else if("tblr"===b)d.ipd="tb",d.bpd="lr";else{if("tbrl"===b||"tb"===b)d.ipd="tb",d.bpd="rl"}else"p"===c.kind&&"tb"===d.bpd&&(d.ipd="ltr"===c.styleAttrs[m.byName.direction.qname]?"lr":"rl");for(var l in y)y.hasOwnProperty(l)&&(b=y[l],f=c.styleAttrs[b.qname],void 0!==f&&null!==b.map&&b.map(d,h,c,f));l=h;(b=c.styleAttrs[m.byName.linePadding.qname])&&!b.isZero()&&(f=b.multiply(b.toUsedLength(d.w,d.h),d.options.sizeAdjust),0<f&&(f=Math.ceil(f)+
"px","tb"===d.bpd?(l.style.paddingLeft=f,l.style.paddingRight=f):(l.style.paddingTop=f,l.style.paddingBottom=f),d.removePaddingElement=l,d.lp=b));(b=c.styleAttrs[m.byName.multiRowAlign.qname])&&"auto"!==b&&(l=document.createElement("span"),l.style.display="inline-block",l.style.textAlign=b,h.appendChild(l),d.mra=b);(b=c.styleAttrs[m.byName.rubyReserve.qname])&&"none"!==b[0]&&(d.rubyReserve=b);c.styleAttrs[m.byName.fillLineGap.qname]&&(d.flg=!0);if("span"===c.kind&&c.text)if((b=c.styleAttrs[m.byName.textEmphasis.qname])&&
"none"!==b.style&&(d.textEmphasis=!0),m.byName.textCombine.qname in c.styleAttrs&&"all"===c.styleAttrs[m.byName.textCombine.qname])h.textContent=c.text,b&&x(d,h,c,b);else for(f="",n=0;n<c.text.length;n++){f+=c.text.charAt(n);var u=c.text.charCodeAt(n);if(55296>u||56319<u||n===c.text.length-1)u=document.createElement("span"),u.textContent=f,b&&x(d,u,c,b),h.appendChild(u),f="",u._isd_element=c}for(var q in c.contents)c.contents.hasOwnProperty(q)&&r(d,l,c.contents[q],c);q=[];if((d.lp||d.mra||d.flg||
d.ruby||d.textEmphasis||d.rubyReserve)&&"p"===c.kind){B(d,l,q,null);if(d.rubyReserve){for(b=0;b<q.length;b++){f=document.createElement("ruby");n=document.createElement("rb");n.textContent="\u200b";f.appendChild(n);var p=d.rubyReserve[1].toUsedLength(d.w,d.h)+"px";"both"===d.rubyReserve[0]||"outside"===d.rubyReserve[0]&&1==q.length?(n=document.createElement("rtc"),n.style[A]=D?"after":"under",n.textContent="\u200b",n.style.fontSize=p,u=document.createElement("rtc"),u.style[A]=D?"before":"over",u.textContent=
"\u200b",u.style.fontSize=p,f.appendChild(n),f.appendChild(u)):(n=document.createElement("rtc"),n.textContent="\u200b",n.style.fontSize=p,n.style[A]="after"===d.rubyReserve[0]||"outside"===d.rubyReserve[0]&&0<b?D?"after":"tb"===d.bpd||"rl"===d.bpd?"under":"over":D?"before":"tb"===d.bpd||"rl"===d.bpd?"over":"under",f.appendChild(n));n=null;for(u=0;u<q[b].rbc.length;u++)if("ruby"===q[b].rbc[u].localName){n=q[b].rbc[u];for(u=0;u<n.style.length;u++)f.style.setProperty(n.style.item(u),n.style.getPropertyValue(n.style.item(u)));
break}n=n||q[b].elements[0].node;n.parentElement.insertBefore(f,n)}d.rubyReserve=null}if(d.ruby||d.rubyReserve){for(b=0;b<q.length;b++)for(f=0;f<q[b].rbc.length;f++)q[b].rbc[f].style[A]||(q[b].rbc[f].style[A]=D?0===b?"before":"after":"tb"===d.bpd?0===b?"over":"under":"rl"===d.bpd?0===b?"over":"under":0===b?"under":"over");d.ruby=null}if(d.textEmphasis){for(b=0;b<q.length;b++)for(f=0;f<q[b].te.length;f++)q[b].te[f].style[I]&&"none"!==q[b].te[f].style[I]||(q[b].te[f].style[I]="tb"===d.bpd?0===b?"left over":
"left under":"rl"===d.bpd?0===b?"right under":"left under":0===b?"left under":"right under");d.textEmphasis=null}if(d.mra){for(b=0;b<q.length-1;b++)n=q[b].elements.length,0!==n&&!1===q[b].br&&(f=document.createElement("br"),n=q[b].elements[n-1].node,n.parentElement.insertBefore(f,n.nextSibling));d.mra=null}if(d.lp){b=d.lp.multiply(d.lp.toUsedLength(d.w,d.h),d.options.sizeAdjust);for(f=0;f<q.length;f++){n=q[f].elements[q[f].start_elem];u=q[f].elements[q[f].end_elem];p=Math.ceil(b)+"px";var v="-"+Math.ceil(b)+
"px";0!==q[f].elements.length&&("lr"===d.ipd?n.node.style.paddingLeft=p:"rl"===d.ipd?(n.node.style.borderRightColor=n.bgcolor||"#00000000",n.node.style.borderRightStyle="solid",n.node.style.borderRightWidth=p,n.node.style.marginRight=v):"tb"===d.ipd&&(n.node.style.borderTopColor=n.bgcolor||"#00000000",n.node.style.borderTopStyle="solid",n.node.style.borderTopWidth=p,n.node.style.marginTop=v),"lr"===d.ipd?u.node.style.paddingRight=p:"rl"===d.ipd?(u.node.style.borderLeftColor=u.bgcolor||"#00000000",
u.node.style.borderLeftStyle="solid",u.node.style.borderLeftWidth=p,u.node.style.marginLeft=v):"tb"===d.ipd&&(u.node.style.borderBottomColor=u.bgcolor||"#00000000",u.node.style.borderBottomStyle="solid",u.node.style.borderBottomWidth=p,u.node.style.marginBottom=v))}"tb"===d.bpd?(d.removePaddingElement.style.paddingLeft=0,d.removePaddingElement.style.paddingRight=0):(d.removePaddingElement.style.paddingTop=0,d.removePaddingElement.style.paddingBottom=0);d.lp=null}if(d.flg){f=w(l.getBoundingClientRect(),
d);b=f.before;f=f.after;n=l;u=Math.sign(f-b);for(p=0;p<=q.length;p++){v=0;var k=0===p?b:p===q.length?f:Math.abs(q[p].end-q[p].start)>Math.abs(q[p-1].end-q[p-1].start)?q[p].before:q[p-1].after+v;var t;if(0<p){for(t=0;t<q[p-1].elements.length;t++)if(null!==q[p-1].elements[t].bgcolor){var e=q[p-1].elements[t];0>u*(e.after-k)&&(e=Math.abs(k-e.after),e>v&&(v=e))}var g=n.getElementsByTagName("span")[p];if(q[p]&&g.childElementCount!=q[p].elements.length)for(t=0;t<q[p-1].elements.length;t++)g=q[p-1].elements[t],
e=v+"px solid "+g.bgcolor,"lr"===d.bpd?g.node.style.borderRight=e:"rl"===d.bpd?g.node.style.borderLeft=e:"tb"===d.bpd&&(g.node.style.borderBottom=e);else""==g.style.borderBottom&&("lr"===d.bpd?g.style.paddingRight=v+"px":"rl"===d.bpd?g.style.paddingLeft=v+"px":"tb"===d.bpd&&(g.style.paddingBottom=v+"px"))}if(p<q.length){for(t=v=0;t<q[p].elements.length;t++)e=q[p].elements[t],null!==e.bgcolor&&0<u*(e.before-k)&&(e=Math.abs(e.before-k),e>v&&(v=e));g=n.getElementsByTagName("span")[p];if(g.childElementCount==
q[p].elements.length)"lr"===d.bpd?g.style.paddingLeft=v+"px":"rl"===d.bpd?g.style.paddingRight=v+"px":"tb"===d.bpd&&(g.style.paddingTop=v+"px");else for(t=0;t<q[p].elements.length;t++)g=q[p].elements[t],e=v+"px solid "+g.bgcolor,"lr"===d.bpd?g.node.style.borderLeft=e:"rl"===d.bpd?g.node.style.borderRight=e:"tb"===d.bpd&&(g.node.style.borderTop=e)}}d.flg=null}for(b=0;b<q.length;b++)for(f=q[b],n=1;n<f.elements.length;){u=f.elements[n-1].node;p=f.elements[n].node;if("SPAN"===u.tagName&&"SPAN"===p.tagName&&
u._isd_element===p._isd_element){u.textContent+=p.textContent;for(v=0;v<p.style.length;v++)if(k=p.style[v],0<=k.indexOf("border")||0<=k.indexOf("padding"))u.style[k]=p.style[k];p.parentElement.removeChild(p);u=!0}else u=!1;u?f.elements.splice(n,1):n++}}"region"===c.kind&&"tb"===d.bpd&&d.enableRollUp&&0<c.contents.length&&"after"===c.styleAttrs[m.byName.displayAlign.qname]&&(B(d,l,q,null),c=new a(""===c.id?"_":c.id,q),d.currentISDState[c.id]=c,d.previousISDState&&c.id in d.previousISDState&&0<d.previousISDState[c.id].plist.length&&
1<c.plist.length&&c.plist[c.plist.length-2].text===d.previousISDState[c.id].plist[d.previousISDState[c.id].plist.length-1].text&&(d=h.firstElementChild,c=c.plist[c.plist.length-1].after-c.plist[c.plist.length-1].before,d.style.bottom="-"+c+"px",d.style.transition="transform 0.4s",d.style.position="relative",d.style.transform="translateY(-"+c+"px)"))}else if(d=d.errorHandler,c="Error processing ISD element kind: "+c.kind,d&&d.error&&d.error(c))throw c;}function a(a,b){this.id=a;this.plist=b}function w(a,
b){var d={before:null,after:null,start:null,end:null};"tb"===b.bpd?(d.before=a.top,d.after=a.bottom,"lr"===b.ipd?(d.start=a.left,d.end=a.right):(d.start=a.right,d.end=a.left)):"lr"===b.bpd?(d.before=a.left,d.after=a.right,d.start=a.top,d.end=a.bottom):"rl"===b.bpd&&(d.before=a.right,d.after=a.left,d.start=a.top,d.end=a.bottom);return d}function B(a,b,c,f){if("rt"!==b.localName&&"rtc"!==b.localName)if(f=b.style.backgroundColor||f,0===b.childElementCount)if("span"===b.localName||"rb"===b.localName){var d=
b.getBoundingClientRect();if(0!==d.height&&0!==d.width){a=w(d,a);if(!(d=0===c.length)){d=a.before;var h=a.after,n=c[c.length-1].before,m=c[c.length-1].after;d=!(h<m&&d>n||m<=h&&n>=d)}d?c.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(d=Math.sign(a.after-a.before),h=Math.sign(a.end-a.start),0>d*(a.before-c[c.length-1].before)&&(c[c.length-1].before=a.before),0<d*(a.after-c[c.length-1].after)&&(c[c.length-1].after=a.after),
0>h*(a.start-c[c.length-1].start)&&(c[c.length-1].start=a.start,c[c.length-1].start_elem=c[c.length-1].elements.length),0<h*(a.end-c[c.length-1].end)&&(c[c.length-1].end=a.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=b.textContent;c[c.length-1].elements.push({node:b,bgcolor:f,before:a.before,after:a.after})}}else"br"===b.localName&&0!==c.length&&(c[c.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(B(a,b,c,f),"ruby"===b.localName||"rtc"===
b.localName?0<c.length&&c[c.length-1].rbc.push(b):"span"===b.localName&&b.style[C]&&"none"!==b.style[C]&&0<c.length&&c[c.length-1].te.push(b)),b=b.nextSibling}function x(a,b,c,f){"none"!==f.style&&(b.style[C]="auto"===f.style?"filled":f.style+" "+f.symbol,"before"===f.position||"after"===f.position)&&(b.style[I]="tb"===a.bpd?"before"===f.position?"left over":"left under":"rl"===a.bpd?"before"===f.position?"right under":"left under":"before"===f.position?"left under":"right under")}function q(a,b){this.qname=
a;this.map=b}b.render=function(a,b,c,f,m,w,l,x,q,y){f=f||b.clientHeight;var d=m||b.clientWidth;null!==a.aspectRatio&&(m=f*a.aspectRatio,m>d?f=Math.round(d/a.aspectRatio):d=m);m=document.createElement("div");m.style.position="relative";m.style.width=d+"px";m.style.height=f+"px";m.style.margin="auto";m.style.top=0;m.style.bottom=0;m.style.left=0;m.style.right=0;m.style.zIndex=0;c={h:f,w:d,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:w||!1,isd:a,errorHandler:l,previousISDState:x,enableRollUp:q||
!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},y)||{}};c.options.colorAdjust&&(c.options.colorAdjust=h(c.options.colorAdjust));w=["region","body","div","p","span"];for(var k in w)w.hasOwnProperty(k)&&(l=w[k]+"BackgroundColorAdjust",c.options[l]&&(c.options[l]=h(c.options[l])));b.appendChild(m);for(var n in a.contents)a.contents.hasOwnProperty(n)&&r(c,m,a.contents[n],a);return c.currentISDState};var y=[new q("http://www.w3.org/ns/ttml#styling backgroundColor",
function(a,b,c,f){(c=(c=a.options[c.kind+"BackgroundColorAdjust"])&&c[f.toString()])&&(f=c);c=f[3];0!==c&&(void 0!=a.options.backgroundOpacityScale&&(c*=a.options.backgroundOpacityScale),b.style.backgroundColor="rgba("+f[0].toString()+","+f[1].toString()+","+f[2].toString()+","+(c/255).toString()+")")}),new q("http://www.w3.org/ns/ttml#styling color",function(a,b,c,f){c=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=a[f.toString()])&&(f=a);b.style.color="rgba("+f[0].toString()+
","+f[1].toString()+","+f[2].toString()+","+(c*f[3]/255).toString()+")"}),new q("http://www.w3.org/ns/ttml#styling direction",function(a,b,c,f){b.style.direction=f}),new q("http://www.w3.org/ns/ttml#styling display",function(a,b,c,f){}),new q("http://www.w3.org/ns/ttml#styling displayAlign",function(a,b,c,f){b.style.display="flex";b.style.flexDirection="column";"before"===f?b.style.justifyContent="flex-start":"center"===f?b.style.justifyContent="center":"after"===f&&(b.style.justifyContent="flex-end")}),
new q("http://www.w3.org/ns/ttml#styling extent",function(a,b,c,f){a.regionH=f.h.toUsedLength(a.w,a.h);a.regionW=f.w.toUsedLength(a.w,a.h);var d=f=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])f=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),d=c[1].toUsedLength(a.w,a.h)+c[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-f+"px";b.style.width=a.regionW-d+"px"}),new q("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,c,f){c=[];a.options.fontFamily&&(f=a.options.fontFamily.split(","));
for(var d in f)f[d].hasOwnProperty(d)&&(f[d]=f[d].trim(),"monospaceSerif"===f[d]?(c.push("Courier New"),c.push('"Liberation Mono"'),c.push("Courier"),c.push("monospace")):"proportionalSansSerif"===f[d]||"default"===f[d]?(c.push("Arial"),c.push("Helvetica"),c.push('"Liberation Sans"'),c.push("sans-serif")):"monospace"===f[d]?c.push("monospace"):"sansSerif"===f[d]?c.push("sans-serif"):"serif"===f[d]?c.push("serif"):"monospaceSansSerif"===f[d]?(c.push("Consolas"),c.push("monospace")):"proportionalSerif"===
f[d]?c.push("serif"):c.push(f[d]));if(0<c.length){a=[c[0]];for(f=1;f<c.length;f++)-1==a.indexOf(c[f])&&a.push(c[f]);c=a}b.style.fontFamily=c.join(",")}),new q("http://www.w3.org/ns/ttml#styling shear",function(a,b,c,f){0!==f&&(c=-.9*f,b.style.transform="tb"===a.bpd?"skewX("+c+"deg)":"skewY("+c+"deg)")}),new q("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,c,f){b.style.fontSize=f.multiply(f.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new q("http://www.w3.org/ns/ttml#styling fontStyle",
function(a,b,c,f){b.style.fontStyle=f}),new q("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,c,f){b.style.fontWeight=f}),new q("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,c,f){b.style.lineHeight="normal"===f?"normal":f.multiply(f.multiply(f.toUsedLength(a.w,a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new q("http://www.w3.org/ns/ttml#styling opacity",function(a,b,c,f){c=f;void 0!=a.options.regionOpacityScale&&(c*=a.options.regionOpacityScale);b.style.opacity=
c}),new q("http://www.w3.org/ns/ttml#styling origin",function(a,b,c,f){b.style.top=f.h.toUsedLength(a.w,a.h)+"px";b.style.left=f.w.toUsedLength(a.w,a.h)+"px"}),new q("http://www.w3.org/ns/ttml#styling overflow",function(a,b,c,f){b.style.overflow=f}),new q("http://www.w3.org/ns/ttml#styling padding",function(a,b,c,f){c=[];c[0]=f[0].toUsedLength(a.w,a.h)+"px";c[1]=f[3].toUsedLength(a.w,a.h)+"px";c[2]=f[2].toUsedLength(a.w,a.h)+"px";c[3]=f[1].toUsedLength(a.w,a.h)+"px";b.style.padding=c.join(" ")}),
new q("http://www.w3.org/ns/ttml#styling position",function(a,b,c,f){b.style.top=f.h.toUsedLength(a.w,a.h)+"px";b.style.left=f.w.toUsedLength(a.w,a.h)+"px"}),new q("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,c,f){b.style.rubyAlign="spaceAround"===f?"space-around":"center"}),new q("http://www.w3.org/ns/ttml#styling rubyPosition",function(a,b,c,f){if("before"===f||"after"===f)b.parentElement.style[A]=D?f:"tb"===a.bpd?"before"===f?"over":"under":"rl"===a.bpd?"before"===f?"over":"under":
"before"===f?"under":"over"}),new q("http://www.w3.org/ns/ttml#styling showBackground",null),new q("http://www.w3.org/ns/ttml#styling textAlign",function(a,b,c,f){b.style.textAlign="start"===f?"rl"===a.ipd?"right":"left":"end"===f?"rl"===a.ipd?"left":"right":f}),new q("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,c,f){b.style.textDecoration=f.join(" ").replace("lineThrough","line-through")}),new q("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,c,f){}),new q("http://www.w3.org/ns/ttml#styling textShadow",
function(a,b,c,f){c=c.styleAttrs[m.byName.textOutline.qname];var d=a.options.textOutline;if(d)if("none"===d)c=d;else{var h={};d=d.split(" ");if(0!==d.length&&2>=d.length){var w=l.parseColor(d[0]);h.color=w;null!==w&&d.shift();1===d.length&&(d=l.parseLength(d[0]))&&(h.thickness=d,c=h)}}if("none"===f&&"none"===c)b.style.textShadow="";else{h=[];"none"!==c&&(c="rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+","+(c.color[3]/255).toString()+")",h.push("1px 1px 1px "+c),
h.push("-1px 1px 1px "+c),h.push("1px -1px 1px "+c),h.push("-1px -1px 1px "+c));if("none"!==f)for(var x in f)f.hasOwnProperty(x)&&h.push(f[x].x_off.toUsedLength(a.w,a.h)+"px "+f[x].y_off.toUsedLength(a.w,a.h)+"px "+f[x].b_radius.toUsedLength(a.w,a.h)+"px rgba("+f[x].color[0].toString()+","+f[x].color[1].toString()+","+f[x].color[2].toString()+","+(f[x].color[3]/255).toString()+")");b.style.textShadow=h.join(",")}}),new q("http://www.w3.org/ns/ttml#styling textCombine",function(a,b,c,f){b.style.textCombineUpright=
f}),new q("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,c,f){}),new q("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,c,f){b.style.unicodeBidi="bidiOverride"===f?"bidi-override":f}),new q("http://www.w3.org/ns/ttml#styling visibility",function(a,b,c,f){b.style.visibility=f}),new q("http://www.w3.org/ns/ttml#styling wrapOption",function(a,b,c,f){b.style.whiteSpace="wrap"===f?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new q("http://www.w3.org/ns/ttml#styling writingMode",
function(a,b,c,f){if("lrtb"===f||"lr"===f)b.style.writingMode="horizontal-tb";else if("rltb"===f||"rl"===f)b.style.writingMode="horizontal-tb";else if("tblr"===f)b.style.writingMode="vertical-lr";else if("tbrl"===f||"tb"===f)b.style.writingMode="vertical-rl"}),new q("http://www.w3.org/ns/ttml#styling zIndex",function(a,b,c,f){b.style.zIndex=f}),new q("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,c,f){a.displayForcedOnlyMode&&!1===f&&(b.style.visibility="hidden")})],
p;for(p in y)y.hasOwnProperty(p);var D="webkitRubyPosition"in window.getComputedStyle(document.documentElement),A=D?"webkitRubyPosition":"rubyPosition",C="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",I="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof l?this.imscHTML={}:l,"undefined"===typeof imscNames?c("./names"):
imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],35:[function(c,p,l){(function(b,c,m,l){function h(b,c,p,B,v,I,d,u,n){if(c<d.begin||c>=d.end)return null;I="regionID"in d&&""!==d.regionID?d.regionID:I;if(null!==v&&I!==p.id&&(!("contents"in d)||"contents"in d&&0===d.contents.length||""!==I))return null;var f=new x(d);for(y in d.sets)!d.sets.hasOwnProperty(y)||c<d.sets[y].begin||c>=d.sets[y].end||
(f.styleAttrs[d.sets[y].qname]=d.sets[y].value);var y={};for(var A in f.styleAttrs)if(f.styleAttrs.hasOwnProperty(A)&&(y[A]=!0,"region"===f.kind&&A===m.byName.writingMode.qname&&!(m.byName.direction.qname in f.styleAttrs))){var C=f.styleAttrs[A];if("lrtb"===C||"lr"===C)f.styleAttrs[m.byName.direction.qname]="ltr";else if("rltb"===C||"rl"===C)f.styleAttrs[m.byName.direction.qname]="rtl"}if(null!==v)for(var E in m.all)if(m.all.hasOwnProperty(E))if(A=m.all[E],A.qname===m.byName.textDecoration.qname){C=
v.styleAttrs[A.qname];var G=f.styleAttrs[A.qname],F=[];void 0===G?F=C:-1===G.indexOf("none")?((-1===G.indexOf("noUnderline")&&-1!==C.indexOf("underline")||-1!==G.indexOf("underline"))&&F.push("underline"),(-1===G.indexOf("noLineThrough")&&-1!==C.indexOf("lineThrough")||-1!==G.indexOf("lineThrough"))&&F.push("lineThrough"),(-1===G.indexOf("noOverline")&&-1!==C.indexOf("overline")||-1!==G.indexOf("overline"))&&F.push("overline")):F.push("none");f.styleAttrs[A.qname]=F}else A.qname!==m.byName.fontSize.qname||
A.qname in f.styleAttrs||"span"!==f.kind||"textContainer"!==f.styleAttrs[m.byName.ruby.qname]?A.qname!==m.byName.fontSize.qname||A.qname in f.styleAttrs||"span"!==f.kind||"text"!==f.styleAttrs[m.byName.ruby.qname]?A.inherit&&A.qname in v.styleAttrs&&!(A.qname in f.styleAttrs)&&(f.styleAttrs[A.qname]=v.styleAttrs[A.qname]):(C=v.styleAttrs[m.byName.fontSize.qname],f.styleAttrs[A.qname]="textContainer"===v.styleAttrs[m.byName.ruby.qname]?C:new l.ComputedLength(.5*C.rw,.5*C.rh)):(C=v.styleAttrs[m.byName.fontSize.qname],
f.styleAttrs[A.qname]=new l.ComputedLength(.5*C.rw,.5*C.rh));for(var D in m.all)if(m.all.hasOwnProperty(D)&&(E=m.all[D],!(E.qname in f.styleAttrs||E.qname===m.byName.position.qname&&m.byName.origin.qname in f.styleAttrs||E.qname===m.byName.origin.qname&&m.byName.position.qname in f.styleAttrs)&&(A=b.head.styling.initials[E.qname]||E.initial,null!==A&&("region"===f.kind||!1===E.inherit&&null!==A))))if(A=E.parse(A),null!==A)f.styleAttrs[E.qname]=A,y[E.qname]=!0;else if(E="Invalid initial value for '"+
E.qname+"' on element '"+f.kind,u&&u.error&&u.error(E))throw E;for(var k in m.all)if(m.all.hasOwnProperty(k)&&(D=m.all[k],D.qname in y&&null!==D.compute))if(E=D.compute(b,v,f,f.styleAttrs[D.qname],n),null!==E)f.styleAttrs[D.qname]=E;else if(f.styleAttrs[D.qname]=D.compute(b,v,f,D.parse(D.initial),n),D="Style '"+D.qname+"' on element '"+f.kind+"' cannot be computed",u&&u.error&&u.error(D))throw D;if("none"===f.styleAttrs[m.byName.display.qname])return null;if(null===v)var t=null===B?[]:[B];else"contents"in
d&&(t=d.contents);for(var e in t)t.hasOwnProperty(e)&&(v=h(b,c,p,B,f,I,t[e],u,n),null!==v&&f.contents.push(v.element));for(var g in f.styleAttrs)f.styleAttrs.hasOwnProperty(g)&&(b=!1,"span"===f.kind&&(c=f.styleAttrs[m.byName.ruby.qname],(b=("container"===c||"textContainer"===c||"baseContainer"===c)&&-1!==q.indexOf(g))||(b="container"!==c&&g===m.byName.rubyAlign.qname),b||(b=!("textContainer"===c||"text"===c)&&g===m.byName.rubyPosition.qname)),b||(b=-1===m.byQName[g].applies.indexOf(f.kind)),b&&delete f.styleAttrs[g]);
g=f.styleAttrs[m.byName.ruby.qname];if("p"===f.kind||"span"===f.kind&&("textContainer"===g||"text"===g))g=[],a(f,g),r(g),w(f);return"div"===f.kind&&m.byName.backgroundImage.qname in f.styleAttrs||"br"===f.kind||"image"===f.kind||"contents"in f&&0<f.contents.length||"span"===f.kind&&null!==f.text||"region"===f.kind&&"always"===f.styleAttrs[m.byName.showBackground.qname]?{region_id:I,element:f}:null}function r(a){function b(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function c(a){return"br"===
a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var h,m=0;m<a.length;)if(h=a[m],"br"===h.kind||"preserve"===h.space)m++;else{var w=h.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(w)&&(0===m||b(a[m-1]))&&(w=w.substring(1));h.text=w;0===w.length?a.splice(m,1):m++}for(m=0;m<a.length;m++)h=a[m],"br"===h.kind||"preserve"===h.space?m++:/[ ]$/.test(h.text)&&(m===a.length-1||c(a[m+1]))&&(h.text=h.text.slice(0,-1))}function a(b,c){for(var h in b.contents)if(b.contents.hasOwnProperty(h)){var w=b.contents[h],
l=w.styleAttrs[m.byName.ruby.qname];if("span"!==w.kind||"textContainer"!==l&&"text"!==l)"contents"in w?a(w,c):("span"===w.kind&&0!==w.text.length||"br"===w.kind)&&c.push(w)}}function w(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)w(a.contents[b])&&a.contents.splice(b,1);return 0===a.contents.length}}function p(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=a.lang}function x(a){this.kind=a.kind||"region";this.lang=
a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)a.styleAttrs.hasOwnProperty(b)&&(this.styleAttrs[b]=a.styleAttrs[b]);"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}b.generateISD=function(a,b,c){function w(a,b){function d(b){return!(a<b.begin||a>=b.end)}if(b.contents){var c={},f;for(f in b)b.hasOwnProperty(f)&&(c[f]=b[f]);c.contents=[];
b.contents.filter(d).forEach(function(b){b=w(a,b);b.regionID&&(q[b.regionID]=!0);null!==b&&c.contents.push(b)});return c}return b}var l=new p(a),x={},d={},q={};d=a.head.styling.initials[m.byName.showBackground.qname];var n=a.head.styling.initials[m.byName.backgroundColor.qname];for(v in a.head.layout.regions)if(a.head.layout.regions.hasOwnProperty(v)){var f=a.head.layout.regions[v],r=f.styleAttrs[m.byName.showBackground.qname]||d,B=f.styleAttrs[m.byName.backgroundColor.qname]||n;q[f.id]=("always"===
r||void 0===r)&&void 0!==B&&!(b<f.begin||b>=f.end)}a.body&&a.body.regionID&&(q[a.body.regionID]=!0);d=null!==a.body?w(b,a.body):null;1===Object.getOwnPropertyNames(q).length&&void 0!==q[""]&&(q[""]=!0);for(var y in q)if(q[y]){var v=h(a,b,a.head.layout.regions[y],d,null,"",a.head.layout.regions[y],c,x);null!==v&&l.contents.push(v.element)}return l};var q=[m.byName.color.qname,m.byName.textCombine.qname,m.byName.textDecoration.qname,m.byName.textEmphasis.qname,m.byName.textOutline.qname,m.byName.textShadow.qname]})("undefined"===
typeof l?this.imscISD={}:l,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],36:[function(c,p,l){l.generateISD=c("./isd").generateISD;l.fromXML=c("./doc").fromXML;l.renderHTML=c("./html").render},{"./doc":33,"./html":34,"./isd":35}],37:[function(c,p,l){c="undefined"===typeof l?this.imscNames={}:l;c.ns_tt="http://www.w3.org/ns/ttml";c.ns_tts=
"http://www.w3.org/ns/ttml#styling";c.ns_ttp="http://www.w3.org/ns/ttml#parameter";c.ns_xml="http://www.w3.org/XML/1998/namespace";c.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";c.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";c.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";c.ns_ebutts="urn:ebu:tt:style";c.ttaf_map={"http://www.w3.org/2006/10/ttaf1":c.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":c.ns_tts,"http://www.w3.org/2006/10/ttaf1#parameter":c.ns_ttp}},
{}],38:[function(c,p,l){(function(b,c,m){function h(a,b,c,h,m,l,p,r){this.name=b;this.ns=a;this.qname=a+" "+b;this.inherit=m;this.animatable=l;this.initial=c;this.applies=h;this.parse=p;this.compute=r}b.all=[new h(c.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,m.parseColor,null),new h(c.ns_tts,"color","white",["span"],!0,!0,m.parseColor,null),new h(c.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},null),new h(c.ns_tts,"display","auto",["body","div",
"p","region","span"],!1,!0,function(a){return a},null),new h(c.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new h(c.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=m.parseLength(b[0]);return(b=m.parseLength(b[1]))&&a?{h:b,w:a}:null},function(a,b,c,h,l){if("auto"===h)b=new m.ComputedLength(0,1);else if(b=m.toComputedLength(h.h.value,h.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===
b)return null;if("auto"===h)a=new m.ComputedLength(1,0);else if(a=m.toComputedLength(h.w.value,h.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new h(c.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(a){a=a.split(",");for(var b=[],c=0;c<a.length;c++)"'"!==a[c].charAt(0)&&'"'!==a[c].charAt(0)?"default"===a[c]?b.push("monospaceSerif"):b.push(a[c]):b.push(a[c]);return b},null),new h(c.ns_tts,"shear","0%",["p"],!0,!0,m.parseLength,function(a,b,c,h){if("%"===
h.unit)a=100<Math.abs(h.value)?100*Math.sign(h.value):h.value;else return null;return a}),new h(c.ns_tts,"fontSize","1c",["span","p"],!0,!0,m.parseLength,function(a,c,h,l,q){return m.toComputedLength(l.value,l.unit,null!==c?c.styleAttrs[b.byName.fontSize.qname]:a.cellLength.h,null!==c?c.styleAttrs[b.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new h(c.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new h(c.ns_tts,"fontWeight","normal",["span","p"],
!0,!0,function(a){return a},null),new h(c.ns_tts,"lineHeight","normal",["p"],!0,!0,function(a){return"normal"===a?a:m.parseLength(a)},function(a,c,h,l,q){if("normal"===l)a=l;else if(a=m.toComputedLength(l.value,l.unit,h.styleAttrs[b.byName.fontSize.qname],h.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new h(c.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new h(c.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===a)return a;var b=
a.split(" ");if(2!==b.length)return null;a=m.parseLength(b[0]);return(b=m.parseLength(b[1]))&&a?{h:b,w:a}:null},function(a,b,c,h,l){if("auto"===h)b=new m.ComputedLength(0,0);else if(b=m.toComputedLength(h.h.value,h.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===h)a=new m.ComputedLength(0,0);else if(a=m.toComputedLength(h.w.value,h.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new h(c.ns_tts,"overflow","hidden",["region"],!1,!0,
function(a){return a},null),new h(c.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;for(var b=[],c=0;c<a.length;c++){var h=m.parseLength(a[c]);if(!h)return null;b.push(h)}return b},function(a,c,h,l,q){if(1===l.length)c=[l[0],l[0],l[0],l[0]];else if(2===l.length)c=[l[0],l[1],l[0],l[1]];else if(3===l.length)c=[l[0],l[1],l[2],l[1]];else if(4===l.length)c=[l[0],l[1],l[2],l[3]];else return null;l=h.styleAttrs[b.byName.writingMode.qname];if("lrtb"===l||"lr"===
l)c=[c[0],c[3],c[2],c[1]];else if("rltb"===l||"rl"===l)c=[c[0],c[1],c[2],c[3]];else if("tblr"===l)c=[c[3],c[0],c[1],c[2]];else if("tbrl"===l||"tb"===l)c=[c[3],c[2],c[1],c[0]];else return null;l=[];for(q=0;q<c.length;q++)if(0===c[q].value)l[q]=new m.ComputedLength(0,0);else if(l[q]=m.toComputedLength(c[q].value,c[q].unit,h.styleAttrs[b.byName.fontSize.qname],"0"===q||"2"===q?h.styleAttrs[b.byName.extent.qname].h:h.styleAttrs[b.byName.extent.qname].w,"0"===q||"2"===q?a.cellLength.h:a.cellLength.w,"0"===
q||"2"===q?a.pxLength.h:a.pxLength.w),null===l[q])return null;return l}),new h(c.ns_tts,"position","top left",["region"],!1,!0,function(a){return m.parsePosition(a)},function(a,c,h,l){c=m.toComputedLength(l.v.offset.value,l.v.offset.unit,null,new m.ComputedLength(-h.styleAttrs[b.byName.extent.qname].h.rw,a.dimensions.h.rh-h.styleAttrs[b.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===c)return null;"bottom"===l.v.edge&&(c=new m.ComputedLength(-c.rw-h.styleAttrs[b.byName.extent.qname].h.rw,
a.dimensions.h.rh-c.rh-h.styleAttrs[b.byName.extent.qname].h.rh));var q=m.toComputedLength(l.h.offset.value,l.h.offset.unit,null,new m.ComputedLength(a.dimensions.w.rw-h.styleAttrs[b.byName.extent.qname].w.rw,-h.styleAttrs[b.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===c)return null;"right"===l.h.edge&&(q=new m.ComputedLength(a.dimensions.w.rw-q.rw-h.styleAttrs[b.byName.extent.qname].w.rw,-q.rh-h.styleAttrs[b.byName.extent.qname].w.rh));return{h:c,w:q}}),new h(c.ns_tts,"ruby","none",["span"],
!1,!0,function(a){return a},null),new h(c.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new h(c.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new h(c.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var b=a.split(" ");a=[null,null];if(0===b.length||2<b.length||"none"!==b[0]&&"both"!==b[0]&&"after"!==b[0]&&"before"!==b[0]&&"outside"!==b[0])return null;a[0]=b[0];if(2===b.length&&"none"!==b[0])if(b=m.parseLength(b[1]))a[1]=
b;else return null;return a},function(a,c,h,l,q){if("none"===l[0])return l;a=null===l[1]?new m.ComputedLength(.5*h.styleAttrs[b.byName.fontSize.qname].rw,.5*h.styleAttrs[b.byName.fontSize.qname].rh):m.toComputedLength(l[1].value,l[1].unit,h.styleAttrs[b.byName.fontSize.qname],h.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[l[0],a]}),new h(c.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new h(c.ns_tts,"textAlign","start",
["p"],!0,!0,function(a){return a},function(a,b,c,h,m){return"left"===h?"start":"right"===h?"end":h}),new h(c.ns_tts,"textCombine","none",["span"],!0,!0,function(a){return"none"===a||"all"===a?a:null},null),new h(c.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new h(c.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");for(var b={style:null,symbol:null,color:null,position:null},c=0;c<a.length;c++)if("none"===a[c]||"auto"===a[c])b.style=a[c];
else if("filled"===a[c]||"open"===a[c])b.style=a[c];else if("circle"===a[c]||"dot"===a[c]||"sesame"===a[c])b.symbol=a[c];else if("current"===a[c])b.color=a[c];else if("outside"===a[c]||"before"===a[c]||"after"===a[c])b.position=a[c];else if(b.color=m.parseColor(a[c]),null===b.color)return null;null==b.style&&null==b.symbol?b.style="auto":(b.symbol=b.symbol||"circle",b.style=b.style||"filled");b.position=b.position||"outside";b.color=b.color||"current";return b},null),new h(c.ns_tts,"textOutline",
"none",["span"],!0,!0,function(a){if("none"===a)return a;var b={};a=a.split(" ");if(0===a.length||2<a.length)return null;var c=m.parseColor(a[0]);b.color=c;null!==c&&a.shift();if(1!==a.length)return null;a=m.parseLength(a[0]);if(!a)return null;b.thickness=a;return b},function(a,c,h,l,q){if("none"===l)return l;c={};c.color=null===l.color?h.styleAttrs[b.byName.color.qname]:l.color;c.thickness=m.toComputedLength(l.thickness.value,l.thickness.unit,h.styleAttrs[b.byName.fontSize.qname],h.styleAttrs[b.byName.fontSize.qname],
a.cellLength.h,a.pxLength.h);return null===c.thickness?null:c}),new h(c.ns_tts,"textShadow","none",["span"],!0,!0,m.parseTextShadow,function(a,c,h,l){if("none"===l)return l;c=[];for(var q in l)if(q.hasOwnProperty(l)){var p={};p.x_off=m.toComputedLength(l[q][0].value,l[q][0].unit,null,h.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.w);if(null===p.x_off)return null;p.y_off=m.toComputedLength(l[q][1].value,l[q][1].unit,null,h.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.h);if(null===p.y_off)return null;
if(null===l[q][2])p.b_radius=0;else if(p.b_radius=m.toComputedLength(l[q][2].value,l[q][2].unit,null,h.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.h),null===p.b_radius)return null;p.color=null===l[q][3]?h.styleAttrs[b.byName.color.qname]:l[q][3];c.push(p)}return c}),new h(c.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new h(c.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new h(c.ns_tts,"wrapOption","wrap",
["span"],!0,!0,function(a){return a},null),new h(c.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new h(c.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new h(c.ns_ebutts,"linePadding","0c",["p"],!0,!1,m.parseLength,function(a,b,c,h,l){return m.toComputedLength(h.value,h.unit,null,null,a.cellLength.w,null)}),new h(c.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new h(c.ns_smpte,
"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new h(c.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new h(c.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];b.byQName={};for(var l in b.all)b.all.hasOwnProperty(l)&&(b.byQName[b.all[l].qname]=b.all[l]);b.byName={};for(var p in b.all)b.all.hasOwnProperty(p)&&(b.byName[b.all[p].name]=b.all[p])})("undefined"===typeof l?this.imscStyles=
{}:l,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":37,"./utils":39}],39:[function(c,p,l){(function(b){var c=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,l=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,p=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,
0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};b.parseColor=function(a){var b,h=null,m=v[a.toLowerCase()];void 0!==m?h=m:null!==(b=c.exec(a))?h=[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),void 0!==b[4]?parseInt(b[4],16):255]:null!==(b=l.exec(a))?h=[parseInt(b[1]),parseInt(b[2]),
parseInt(b[3]),255]:null!==(b=p.exec(a))&&(h=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])]);return h};var H=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;b.parseLength=function(a){var b,c=null;null!==(b=H.exec(a))&&(c={value:parseFloat(b[1]),unit:b[2]});return c};b.parseTextShadow=function(a){a=a.split(",");for(var c=[],h=0;h<a.length;h++){var l=a[h].split(" ");if(1===l.length&&"none"===l[0])return"none";if(1<l.length&&5>l.length){var m=[null,null,null,null],p=b.parseLength(l.shift());
if(null===p)return null;m[0]=p;p=b.parseLength(l.shift());if(null===p)return null;m[1]=p;if(0!==l.length&&(p=b.parseLength(l[0]),null!==p&&(m[2]=p,l.shift()),0!==l.length)){l=b.parseColor(l[0]);if(null===l)return null;m[3]=l}c.push(m)}}return c};b.parsePosition=function(a){a=a.split(" ");var c=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var h in a)if(a.hasOwnProperty(h)&&!c(a[h])){var l=b.parseLength(a[h]);if(null===l)return null;
a[h]=l}h={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(l=0;l<a.length;){var m=a[l++];if(c(m)){var p={value:0,unit:"%"};2!==a.length&&l<a.length&&!c(a[l])&&(p=a[l++]);"right"===m?(h.h.edge=m,h.h.offset=p):"bottom"===m?(h.v.edge=m,h.v.offset=p):"left"===m?h.h.offset=p:"top"===m&&(h.v.offset=p)}else if(1===a.length||2===a.length)1===l?h.h.offset=m:h.v.offset=m;else return null}return h};b.ComputedLength=function(a,b){this.rw=a;this.rh=b};b.ComputedLength.prototype.toUsedLength=
function(a,b){return a*this.rw+b*this.rh};b.ComputedLength.prototype.multiply=function(a,b){return b?a*b:a};b.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};b.toComputedLength=function(a,c,h,l,m,p){return"%"===c&&l?new b.ComputedLength(l.rw*a/100,l.rh*a/100):"em"===c&&h?new b.ComputedLength(h.rw*a,h.rh*a):"c"===c&&m?new b.ComputedLength(a*m.rw,a*m.rh):"px"===c&&p?new b.ComputedLength(a*p.rw,a*p.rh):"rh"===c?new b.ComputedLength(0,a/100):"rw"===c?new b.ComputedLength(a/
100,0):null}})("undefined"===typeof l?this.imscUtils={}:l)},{}]},{},[36])(36)});
