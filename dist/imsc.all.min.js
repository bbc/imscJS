/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,v,n){c!=Array.prototype&&c!=Object.prototype&&(c[v]=n.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,v,n,h){if(v){n=$jscomp.global;c=c.split(".");for(h=0;h<c.length-1;h++){var g=c[h];g in n||(n[g]={});n=n[g]}c=c[c.length-1];h=n[c];v=v(h);v!=h&&null!=v&&$jscomp.defineProperty(n,c,{configurable:!0,writable:!0,value:v})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,n,h){var g=this.length||0;0>n&&(n=Math.max(0,g+n));if(null==h||h>g)h=g;h=Number(h);0>h&&(h=Math.max(0,g+h));for(n=Number(n||0);n<h;n++)this[n]=c;return this}},"es6","es3");
$jscomp.polyfill("Number.isNaN",function(c){return c?c:function(c){return"number"===typeof c&&isNaN(c)}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(v){return $jscomp.SYMBOL_PREFIX+(v||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var v=0;return $jscomp.iteratorPrototype(function(){return v<c.length?{done:!1,value:c[v++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,v){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var n=0,h={next:function(){if(n<c.length){var g=n++;return{value:v(g,c[g]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var v=c[Symbol.iterator];return v?v.call(c):$jscomp.arrayIterator(c)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function v(){this.batch_=null}function n(a){return a instanceof g?a:new g(function(l,g){l(a)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;v.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};v.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var h=$jscomp.global.setTimeout;v.prototype.asyncExecuteFunction=function(a){h(a,
0)};v.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var l=0;l<a.length;++l){var g=a[l];a[l]=null;try{g()}catch(b){this.asyncThrow_(b)}}}this.batch_=null};v.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var g=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var l=this.createResolveAndReject_();try{a(l.resolve,l.reject)}catch(t){l.reject(t)}};g.prototype.createResolveAndReject_=
function(){function a(b){return function(a){g||(g=!0,b.call(l,a))}}var l=this,g=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};g.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof g)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var l=null!=a;break a;case "function":l=!0;break a;default:l=!1}l?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};g.prototype.resolveToNonPromiseObj_=function(a){var l=
void 0;try{l=a.then}catch(t){this.reject_(t);return}"function"==typeof l?this.settleSameAsThenable_(l,a):this.fulfill_(a)};g.prototype.reject_=function(a){this.settle_(2,a)};g.prototype.fulfill_=function(a){this.settle_(1,a)};g.prototype.settle_=function(a,l){if(0!=this.state_)throw Error("Cannot settle("+a+", "+l+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=l;this.executeOnSettledCallbacks_()};g.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var g=
0;g<this.onSettledCallbacks_.length;++g)a.asyncExecute(this.onSettledCallbacks_[g]);this.onSettledCallbacks_=null}};var a=new v;g.prototype.settleSameAsPromise_=function(a){var l=this.createResolveAndReject_();a.callWhenSettled_(l.resolve,l.reject)};g.prototype.settleSameAsThenable_=function(a,l){var g=this.createResolveAndReject_();try{a.call(l,g.resolve,g.reject)}catch(b){g.reject(b)}};g.prototype.then=function(a,l){function c(a,m){return"function"==typeof a?function(d){try{b(a(d))}catch(E){w(E)}}:
m}var b,w,m=new g(function(a,m){b=a;w=m});this.callWhenSettled_(c(a,b),c(l,w));return m};g.prototype.catch=function(a){return this.then(void 0,a)};g.prototype.callWhenSettled_=function(g,l){function c(){switch(b.state_){case 1:g(b.result_);break;case 2:l(b.result_);break;default:throw Error("Unexpected state: "+b.state_);}}var b=this;null==this.onSettledCallbacks_?a.asyncExecute(c):this.onSettledCallbacks_.push(c)};g.resolve=n;g.reject=function(a){return new g(function(l,g){g(a)})};g.race=function(a){return new g(function(l,
g){for(var b=$jscomp.makeIterator(a),w=b.next();!w.done;w=b.next())n(w.value).callWhenSettled_(l,g)})};g.all=function(a){var l=$jscomp.makeIterator(a),c=l.next();return c.done?n([]):new g(function(a,w){function b(b){return function(m){d[b]=m;g--;0==g&&a(d)}}var d=[],g=0;do d.push(void 0),g++,n(c.value).callWhenSettled_(b(d.length-1),w),c=l.next();while(!c.done)})};return g},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},v={};try{return v.__proto__=c,v.a}catch(n){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,v){c.__proto__=v;if(c.__proto__!==v)throw new TypeError(c+" is not extensible");return c}:null;$jscomp.polyfill("Object.setPrototypeOf",function(c){return c||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(c){return c?c:function(c){for(var n="",h=0;h<arguments.length;h++){var g=Number(arguments[h]);if(0>g||1114111<g||g!==Math.floor(g))throw new RangeError("invalid_code_point "+g);65535>=g?n+=String.fromCharCode(g):(g-=65536,n+=String.fromCharCode(g>>>10&1023|55296),n+=String.fromCharCode(g&1023|56320))}return n}},"es6","es3");$jscomp.owns=function(c,v){return Object.prototype.hasOwnProperty.call(c,v)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,v){for(var n=1;n<arguments.length;n++){var h=arguments[n];if(h)for(var g in h)$jscomp.owns(h,g)&&(c[g]=h[g])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(c){return c?c:function(c){var n=[],h;for(h in c)$jscomp.owns(c,h)&&n.push([h,c[h]]);return n}},"es8","es3");
$jscomp.polyfill("Object.is",function(c){return c?c:function(c,n){return c===n?0!==c||1/c===1/n:c!==c&&n!==n}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,n){var h=this;h instanceof String&&(h=String(h));var g=h.length;n=n||0;for(0>n&&(n=Math.max(n+g,0));n<g;n++){var a=h[n];if(a===c||Object.is(a,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,v,n){if(null==c)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(v instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,n){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,n||0)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(c){return c?c:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=c()})(function(){return function(){function c(v,n,h){function g(l,t){if(!n[l]){if(!v[l]){var b="function"==typeof require&&require;if(!t&&b)return b(l,!0);if(a)return a(l,!0);t=Error("Cannot find module '"+l+"'");throw t.code="MODULE_NOT_FOUND",t;}t=
n[l]={exports:{}};v[l][0].call(t.exports,function(a){return g(v[l][1][a]||a)},t,t.exports,c,v,n,h)}return n[l].exports}for(var a="function"==typeof require&&require,x=0;x<h.length;x++)g(h[x]);return g}return c}()({1:[function(c,v,n){function h(a){var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=b);return[a,a===b?0:4-a%4]}function g(c,b,w){for(var m=[],d=b;d<w;d+=3)b=(c[d]<<16&16711680)+(c[d+1]<<8&65280)+(c[d+2]&255),m.push(a[b>>18&63]+
a[b>>12&63]+a[b>>6&63]+a[b&63]);return m.join("")}n.byteLength=function(a){a=h(a);var b=a[1];return 3*(a[0]+b)/4-b};n.toByteArray=function(a){var b=h(a);var c=b[0];b=b[1];var m=new l(3*(c+b)/4-b),d=0,g=0<b?c-4:c,r;for(r=0;r<g;r+=4)c=x[a.charCodeAt(r)]<<18|x[a.charCodeAt(r+1)]<<12|x[a.charCodeAt(r+2)]<<6|x[a.charCodeAt(r+3)],m[d++]=c>>16&255,m[d++]=c>>8&255,m[d++]=c&255;2===b&&(c=x[a.charCodeAt(r)]<<2|x[a.charCodeAt(r+1)]>>4,m[d++]=c&255);1===b&&(c=x[a.charCodeAt(r)]<<10|x[a.charCodeAt(r+1)]<<4|x[a.charCodeAt(r+
2)]>>2,m[d++]=c>>8&255,m[d++]=c&255);return m};n.fromByteArray=function(c){for(var b=c.length,l=b%3,m=[],d=0,h=b-l;d<h;d+=16383)m.push(g(c,d,d+16383>h?h:d+16383));1===l?(c=c[b-1],m.push(a[c>>2]+a[c<<4&63]+"==")):2===l&&(c=(c[b-2]<<8)+c[b-1],m.push(a[c>>10]+a[c>>4&63]+a[c<<2&63]+"="));return m.join("")};var a=[],x=[],l="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)a[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],x["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=
c;x[45]=62;x[95]=63},{}],2:[function(c,v,n){},{}],3:[function(c,v,n){(function(h){(function(){function g(f){if(f>Q)throw new RangeError('The value "'+f+'" is invalid for option "size"');f=new Uint8Array(f);f.__proto__=a.prototype;return f}function a(f,p,a){if("number"===typeof f){if("string"===typeof p)throw new TypeError('The "string" argument must be of type string. Received type number');return t(f)}return h(f,p,a)}function h(f,p,K){if("string"===typeof f){var e=p;if("string"!==typeof e||""===
e)e="utf8";if(!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);p=d(f,e)|0;K=g(p);f=K.write(f,e);f!==p&&(K=K.slice(0,f));return K}if(ArrayBuffer.isView(f))return b(f);if(null==f)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(v(f,ArrayBuffer)||f&&v(f.buffer,ArrayBuffer)){if(0>p||f.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<p+(K||0))throw new RangeError('"length" is outside of buffer bounds');
f=void 0===p&&void 0===K?new Uint8Array(f):void 0===K?new Uint8Array(f,p):new Uint8Array(f,p,K);f.__proto__=a.prototype;return f}if("number"===typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');e=f.valueOf&&f.valueOf();if(null!=e&&e!==f)return a.from(e,p,K);if(e=w(f))return e;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof f[Symbol.toPrimitive])return a.from(f[Symbol.toPrimitive]("string"),p,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof f);}function l(f){if("number"!==typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function t(f){l(f);return g(0>f?0:m(f)|0)}function b(f){for(var p=0>f.length?0:m(f.length)|0,a=g(p),b=0;b<p;b+=1)a[b]=f[b]&255;return a}function w(f){if(a.isBuffer(f)){var p=m(f.length)|0,e=g(p);if(0===e.length)return e;f.copy(e,0,0,p);return e}if(void 0!==f.length)return(p="number"!==typeof f.length)||(p=f.length,
p=p!==p),p?g(0):b(f);if("Buffer"===f.type&&Array.isArray(f.data))return b(f.data)}function m(f){if(f>=Q)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Q.toString(16)+" bytes");return f|0}function d(f,p){if(a.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||v(f,ArrayBuffer))return f.byteLength;if("string"!==typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var b=f.length,e=2<arguments.length&&
!0===arguments[2];if(!e&&0===b)return 0;for(var d=!1;;)switch(p){case "ascii":case "latin1":case "binary":return b;case "utf8":case "utf-8":return q(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*b;case "hex":return b>>>1;case "base64":return H.toByteArray(k(f)).length;default:if(d)return e?-1:q(f).length;p=(""+p).toLowerCase();d=!0}}function A(f,p,a){var b=!1;if(void 0===p||0>p)p=0;if(p>this.length)return"";if(void 0===a||a>this.length)a=this.length;if(0>=a)return"";a>>>=
0;p>>>=0;if(a<=p)return"";for(f||(f="utf8");;)switch(f){case "hex":f=p;p=a;a=this.length;if(!f||0>f)f=0;if(!p||0>p||p>a)p=a;b="";for(a=f;a<p;++a)f=b,b=this[a],b=16>b?"0"+b.toString(16):b.toString(16),b=f+b;return b;case "utf8":case "utf-8":return D(this,p,a);case "ascii":f="";for(a=Math.min(this.length,a);p<a;++p)f+=String.fromCharCode(this[p]&127);return f;case "latin1":case "binary":f="";for(a=Math.min(this.length,a);p<a;++p)f+=String.fromCharCode(this[p]);return f;case "base64":return p=0===p&&
a===this.length?H.fromByteArray(this):H.fromByteArray(this.slice(p,a)),p;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":p=this.slice(p,a);a="";for(f=0;f<p.length;f+=2)a+=String.fromCharCode(p[f]+256*p[f+1]);return a;default:if(b)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase();b=!0}}function r(f,p,a){var b=f[p];f[p]=f[a];f[a]=b}function E(f,p,b,e,d){if(0===f.length)return-1;"string"===typeof b?(e=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648);b=+b;b!==b&&
(b=d?0:f.length-1);0>b&&(b=f.length+b);if(b>=f.length){if(d)return-1;b=f.length-1}else if(0>b)if(d)b=0;else return-1;"string"===typeof p&&(p=a.from(p,e));if(a.isBuffer(p))return 0===p.length?-1:J(f,p,b,e,d);if("number"===typeof p)return p&=255,"function"===typeof Uint8Array.prototype.indexOf?d?Uint8Array.prototype.indexOf.call(f,p,b):Uint8Array.prototype.lastIndexOf.call(f,p,b):J(f,[p],b,e,d);throw new TypeError("val must be string, number or Buffer");}function J(f,p,a,b,e){function d(f,p){return 1===
k?f[p]:f.readUInt16BE(p*k)}var k=1,c=f.length,m=p.length;if(void 0!==b&&(b=String(b).toLowerCase(),"ucs2"===b||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(2>f.length||2>p.length)return-1;k=2;c/=2;m/=2;a/=2}if(e)for(b=-1;a<c;a++)if(d(f,a)===d(p,-1===b?0:a-b)){if(-1===b&&(b=a),a-b+1===m)return b*k}else-1!==b&&(a-=a-b),b=-1;else for(a+m>c&&(a=c-m);0<=a;a--){c=!0;for(b=0;b<m;b++)if(d(f,a+b)!==d(p,b)){c=!1;break}if(c)return a}return-1}function D(f,p,a){a=Math.min(f.length,a);for(var b=[];p<a;){var e=
f[p],d=null,k=239<e?4:223<e?3:191<e?2:1;if(p+k<=a)switch(k){case 1:128>e&&(d=e);break;case 2:var c=f[p+1];128===(c&192)&&(e=(e&31)<<6|c&63,127<e&&(d=e));break;case 3:c=f[p+1];var m=f[p+2];128===(c&192)&&128===(m&192)&&(e=(e&15)<<12|(c&63)<<6|m&63,2047<e&&(55296>e||57343<e)&&(d=e));break;case 4:c=f[p+1];m=f[p+2];var P=f[p+3];128===(c&192)&&128===(m&192)&&128===(P&192)&&(e=(e&15)<<18|(c&63)<<12|(m&63)<<6|P&63,65535<e&&1114112>e&&(d=e))}null===d?(d=65533,k=1):65535<d&&(d-=65536,b.push(d>>>10&1023|55296),
d=56320|d&1023);b.push(d);p+=k}f=b.length;if(f<=L)b=String.fromCharCode.apply(String,b);else{a="";for(p=0;p<f;)a+=String.fromCharCode.apply(String,b.slice(p,p+=L));b=a}return b}function z(f,p,a){if(0!==f%1||0>f)throw new RangeError("offset is not uint");if(f+p>a)throw new RangeError("Trying to access beyond buffer length");}function F(f,p,b,e,d,k){if(!a.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>d||p<k)throw new RangeError('"value" argument is out of bounds');
if(b+e>f.length)throw new RangeError("Index out of range");}function G(f,p,a,b,e,d){if(a+b>f.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function e(f,p,a,b,e){p=+p;a>>>=0;e||G(f,p,a,4,3.4028234663852886E38,-3.4028234663852886E38);B.write(f,p,a,b,23,4);return a+4}function y(f,p,a,b,e){p=+p;a>>>=0;e||G(f,p,a,8,1.7976931348623157E308,-1.7976931348623157E308);B.write(f,p,a,b,52,8);return a+8}function k(f){f=f.split("=")[0];f=f.trim().replace(M,
"");if(2>f.length)return"";for(;0!==f.length%4;)f+="=";return f}function q(f,p){p=p||Infinity;for(var a,b=f.length,e=null,d=[],k=0;k<b;++k){a=f.charCodeAt(k);if(55295<a&&57344>a){if(!e){if(56319<a){-1<(p-=3)&&d.push(239,191,189);continue}else if(k+1===b){-1<(p-=3)&&d.push(239,191,189);continue}e=a;continue}if(56320>a){-1<(p-=3)&&d.push(239,191,189);e=a;continue}a=(e-55296<<10|a-56320)+65536}else e&&-1<(p-=3)&&d.push(239,191,189);e=null;if(128>a){if(0>--p)break;d.push(a)}else if(2048>a){if(0>(p-=2))break;
d.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(p-=3))break;d.push(a>>12|224,a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(p-=4))break;d.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return d}function I(f){for(var a=[],b=0;b<f.length;++b)a.push(f.charCodeAt(b)&255);return a}function N(f,a,b,e){for(var p=0;p<e&&!(p+b>=a.length||p>=f.length);++p)a[p+b]=f[p];return p}function v(f,a){return f instanceof a||null!=f&&null!=f.constructor&&null!=f.constructor.name&&
f.constructor.name===a.name}var H=c("base64-js"),B=c("ieee754");n.Buffer=a;n.SlowBuffer=function(f){+f!=f&&(f=0);return a.alloc(+f)};n.INSPECT_MAX_BYTES=50;var Q=2147483647;n.kMaxLength=Q;a.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1);f.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===f.foo()}catch(p){return!1}}();a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}});Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});a.poolSize=8192;a.from=function(f,a,b){return h(f,a,b)};a.prototype.__proto__=Uint8Array.prototype;
a.__proto__=Uint8Array;a.alloc=function(f,a,b){l(f);f=0>=f?g(f):void 0!==a?"string"===typeof b?g(f).fill(a,b):g(f).fill(a):g(f);return f};a.allocUnsafe=function(f){return t(f)};a.allocUnsafeSlow=function(f){return t(f)};a.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==a.prototype};a.compare=function(f,p){v(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength));v(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength));if(!a.isBuffer(f)||!a.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(f===p)return 0;for(var b=f.length,e=p.length,d=0,k=Math.min(b,e);d<k;++d)if(f[d]!==p[d]){b=f[d];e=p[d];break}return b<e?-1:e<b?1:0};a.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};a.concat=function(f,p){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return a.alloc(0);
var b;if(void 0===p)for(b=p=0;b<f.length;++b)p+=f[b].length;p=a.allocUnsafe(p);var e=0;for(b=0;b<f.length;++b){var d=f[b];v(d,Uint8Array)&&(d=a.from(d));if(!a.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(p,e);e+=d.length}return p};a.byteLength=d;a.prototype._isBuffer=!0;a.prototype.swap16=function(){var f=this.length;if(0!==f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<f;a+=2)r(this,a,a+1);return this};a.prototype.swap32=
function(){var f=this.length;if(0!==f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<f;a+=4)r(this,a,a+3),r(this,a+1,a+2);return this};a.prototype.swap64=function(){var f=this.length;if(0!==f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<f;a+=8)r(this,a,a+7),r(this,a+1,a+6),r(this,a+2,a+5),r(this,a+3,a+4);return this};a.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?D(this,0,f):A.apply(this,
arguments)};a.prototype.toLocaleString=a.prototype.toString;a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:0===a.compare(this,f)};a.prototype.inspect=function(){var f=n.INSPECT_MAX_BYTES;var a=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim();this.length>f&&(a+=" ... ");return"<Buffer "+a+">"};a.prototype.compare=function(f,b,e,d,k){v(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength));if(!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof f);void 0===b&&(b=0);void 0===e&&(e=f?f.length:0);void 0===d&&(d=0);void 0===k&&(k=this.length);if(0>b||e>f.length||0>d||k>this.length)throw new RangeError("out of range index");if(d>=k&&b>=e)return 0;if(d>=k)return-1;if(b>=e)return 1;b>>>=0;e>>>=0;d>>>=0;k>>>=0;if(this===f)return 0;var p=k-d,c=e-b,m=Math.min(p,c);d=this.slice(d,k);f=f.slice(b,e);for(b=0;b<m;++b)if(d[b]!==f[b]){p=d[b];c=f[b];break}return p<c?-1:c<p?1:0};a.prototype.includes=function(f,a,b){return-1!==this.indexOf(f,a,b)};a.prototype.indexOf=
function(f,a,b){return E(this,f,a,b,!0)};a.prototype.lastIndexOf=function(f,a,b){return E(this,f,a,b,!1)};a.prototype.write=function(f,a,b,e){if(void 0===a)e="utf8",b=this.length,a=0;else if(void 0===b&&"string"===typeof a)e=a,b=this.length,a=0;else if(isFinite(a))a>>>=0,isFinite(b)?(b>>>=0,void 0===e&&(e="utf8")):(e=b,b=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var p=this.length-a;if(void 0===b||b>p)b=p;if(0<f.length&&(0>b||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");
e||(e="utf8");for(p=!1;;)switch(e){case "hex":a:{a=Number(a)||0;e=this.length-a;b?(b=Number(b),b>e&&(b=e)):b=e;e=f.length;b>e/2&&(b=e/2);for(e=0;e<b;++e){p=parseInt(f.substr(2*e,2),16);if(p!==p){f=e;break a}this[a+e]=p}f=e}return f;case "utf8":case "utf-8":return N(q(f,this.length-a),this,a,b);case "ascii":return N(I(f),this,a,b);case "latin1":case "binary":return N(I(f),this,a,b);case "base64":return N(H.toByteArray(k(f)),this,a,b);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=f;p=this.length-
a;for(var d=[],c=0;c<e.length&&!(0>(p-=2));++c){var m=e.charCodeAt(c);f=m>>8;m%=256;d.push(m);d.push(f)}return N(d,this,a,b);default:if(p)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase();p=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;a.prototype.slice=function(f,b){var e=this.length;f=~~f;b=void 0===b?e:~~b;0>f?(f+=e,0>f&&(f=0)):f>e&&(f=e);0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);b<f&&(b=f);f=this.subarray(f,b);f.__proto__=
a.prototype;return f};a.prototype.readUIntLE=function(f,a,b){f>>>=0;a>>>=0;b||z(f,a,this.length);b=this[f];for(var e=1,p=0;++p<a&&(e*=256);)b+=this[f+p]*e;return b};a.prototype.readUIntBE=function(f,a,b){f>>>=0;a>>>=0;b||z(f,a,this.length);b=this[f+--a];for(var e=1;0<a&&(e*=256);)b+=this[f+--a]*e;return b};a.prototype.readUInt8=function(f,a){f>>>=0;a||z(f,1,this.length);return this[f]};a.prototype.readUInt16LE=function(f,a){f>>>=0;a||z(f,2,this.length);return this[f]|this[f+1]<<8};a.prototype.readUInt16BE=
function(f,a){f>>>=0;a||z(f,2,this.length);return this[f]<<8|this[f+1]};a.prototype.readUInt32LE=function(f,a){f>>>=0;a||z(f,4,this.length);return(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};a.prototype.readUInt32BE=function(f,a){f>>>=0;a||z(f,4,this.length);return 16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};a.prototype.readIntLE=function(f,a,b){f>>>=0;a>>>=0;b||z(f,a,this.length);b=this[f];for(var e=1,d=0;++d<a&&(e*=256);)b+=this[f+d]*e;b>=128*e&&(b-=Math.pow(2,8*a));return b};
a.prototype.readIntBE=function(f,a,b){f>>>=0;a>>>=0;b||z(f,a,this.length);b=a;for(var e=1,d=this[f+--b];0<b&&(e*=256);)d+=this[f+--b]*e;d>=128*e&&(d-=Math.pow(2,8*a));return d};a.prototype.readInt8=function(f,a){f>>>=0;a||z(f,1,this.length);return this[f]&128?-1*(255-this[f]+1):this[f]};a.prototype.readInt16LE=function(f,a){f>>>=0;a||z(f,2,this.length);f=this[f]|this[f+1]<<8;return f&32768?f|4294901760:f};a.prototype.readInt16BE=function(f,a){f>>>=0;a||z(f,2,this.length);f=this[f+1]|this[f]<<8;return f&
32768?f|4294901760:f};a.prototype.readInt32LE=function(f,a){f>>>=0;a||z(f,4,this.length);return this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};a.prototype.readInt32BE=function(f,a){f>>>=0;a||z(f,4,this.length);return this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};a.prototype.readFloatLE=function(f,a){f>>>=0;a||z(f,4,this.length);return B.read(this,f,!0,23,4)};a.prototype.readFloatBE=function(f,a){f>>>=0;a||z(f,4,this.length);return B.read(this,f,!1,23,4)};a.prototype.readDoubleLE=function(a,
b){a>>>=0;b||z(a,8,this.length);return B.read(this,a,!0,52,8)};a.prototype.readDoubleBE=function(a,b){a>>>=0;b||z(a,8,this.length);return B.read(this,a,!1,52,8)};a.prototype.writeUIntLE=function(a,b,e,d){a=+a;b>>>=0;e>>>=0;d||F(this,a,b,e,Math.pow(2,8*e)-1,0);d=1;var f=0;for(this[b]=a&255;++f<e&&(d*=256);)this[b+f]=a/d&255;return b+e};a.prototype.writeUIntBE=function(a,b,e,d){a=+a;b>>>=0;e>>>=0;d||F(this,a,b,e,Math.pow(2,8*e)-1,0);d=e-1;var f=1;for(this[b+d]=a&255;0<=--d&&(f*=256);)this[b+d]=a/f&
255;return b+e};a.prototype.writeUInt8=function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,1,255,0);this[b]=a&255;return b+1};a.prototype.writeUInt16LE=function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,2,65535,0);this[b]=a&255;this[b+1]=a>>>8;return b+2};a.prototype.writeUInt16BE=function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,2,65535,0);this[b]=a>>>8;this[b+1]=a&255;return b+2};a.prototype.writeUInt32LE=function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,4,4294967295,0);this[b+3]=a>>>24;this[b+2]=a>>>16;this[b+1]=a>>>8;this[b]=a&
255;return b+4};a.prototype.writeUInt32BE=function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,4,4294967295,0);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};a.prototype.writeIntLE=function(a,b,e,d){a=+a;b>>>=0;d||(d=Math.pow(2,8*e-1),F(this,a,b,e,d-1,-d));d=0;var f=1,k=0;for(this[b]=a&255;++d<e&&(f*=256);)0>a&&0===k&&0!==this[b+d-1]&&(k=1),this[b+d]=(a/f>>0)-k&255;return b+e};a.prototype.writeIntBE=function(a,b,e,d){a=+a;b>>>=0;d||(d=Math.pow(2,8*e-1),F(this,a,b,e,d-1,-d));d=e-
1;var f=1,k=0;for(this[b+d]=a&255;0<=--d&&(f*=256);)0>a&&0===k&&0!==this[b+d+1]&&(k=1),this[b+d]=(a/f>>0)-k&255;return b+e};a.prototype.writeInt8=function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,1,127,-128);0>a&&(a=255+a+1);this[b]=a&255;return b+1};a.prototype.writeInt16LE=function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,2,32767,-32768);this[b]=a&255;this[b+1]=a>>>8;return b+2};a.prototype.writeInt16BE=function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,2,32767,-32768);this[b]=a>>>8;this[b+1]=a&255;return b+2};a.prototype.writeInt32LE=
function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,4,2147483647,-2147483648);this[b]=a&255;this[b+1]=a>>>8;this[b+2]=a>>>16;this[b+3]=a>>>24;return b+4};a.prototype.writeInt32BE=function(a,b,e){a=+a;b>>>=0;e||F(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};a.prototype.writeFloatLE=function(a,b,d){return e(this,a,b,!0,d)};a.prototype.writeFloatBE=function(a,b,d){return e(this,a,b,!1,d)};a.prototype.writeDoubleLE=function(a,
b,e){return y(this,a,b,!0,e)};a.prototype.writeDoubleBE=function(a,b,e){return y(this,a,b,!1,e)};a.prototype.copy=function(b,e,d,k){if(!a.isBuffer(b))throw new TypeError("argument should be a Buffer");d||(d=0);k||0===k||(k=this.length);e>=b.length&&(e=b.length);e||(e=0);0<k&&k<d&&(k=d);if(k===d||0===b.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("Index out of range");if(0>k)throw new RangeError("sourceEnd out of bounds");
k>this.length&&(k=this.length);b.length-e<k-d&&(k=b.length-e+d);var f=k-d;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,d,k);else if(this===b&&d<e&&e<k)for(k=f-1;0<=k;--k)b[k+e]=this[k+d];else Uint8Array.prototype.set.call(b,this.subarray(d,k),e);return f};a.prototype.fill=function(b,e,d,k){if("string"===typeof b){"string"===typeof e?(k=e,e=0,d=this.length):"string"===typeof d&&(k=d,d=this.length);if(void 0!==k&&"string"!==typeof k)throw new TypeError("encoding must be a string");
if("string"===typeof k&&!a.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(1===b.length){var f=b.charCodeAt(0);if("utf8"===k&&128>f||"latin1"===k)b=f}}else"number"===typeof b&&(b&=255);if(0>e||this.length<e||this.length<d)throw new RangeError("Out of range index");if(d<=e)return this;e>>>=0;d=void 0===d?this.length:d>>>0;b||(b=0);if("number"===typeof b)for(k=e;k<d;++k)this[k]=b;else{f=a.isBuffer(b)?b:a.from(b,k);var c=f.length;if(0===c)throw new TypeError('The value "'+b+'" is invalid for argument "value"');
for(k=0;k<d-e;++k)this[k+e]=f[k%c]}return this};var M=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,c("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:20}],4:[function(c,v,n){function h(){h.init.call(this)}function g(a){if("function"!==typeof a)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a);}function a(a,b,d,c){g(d);var e=a._events;if(void 0===e)e=a._events=Object.create(null),a._eventsCount=0;else{void 0!==e.newListener&&(a.emit("newListener",b,
d.listener?d.listener:d),e=a._events);var m=e[b]}void 0===m?(e[b]=d,++a._eventsCount):("function"===typeof m?m=e[b]=c?[d,m]:[m,d]:c?m.unshift(d):m.push(d),d=void 0===a._maxListeners?h.defaultMaxListeners:a._maxListeners,0<d&&m.length>d&&!m.warned&&(m.warned=!0,d=Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit"),d.name="MaxListenersExceededWarning",d.emitter=a,d.type=b,d.count=m.length,console&&console.warn&&
console.warn(d)));return a}function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(a,b,d){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:d};b=x.bind(a);b.listener=d;return a.wrapFn=b}function t(a,b,d){a=a._events;if(void 0===a)return[];b=a[b];if(void 0===b)return[];if("function"===typeof b)return d?[b.listener||b]:[b];if(d)for(d=Array(b.length),
a=0;a<d.length;++a)d[a]=b[a].listener||b[a];else d=w(b,b.length);return d}function b(a){var b=this._events;if(void 0!==b){a=b[a];if("function"===typeof a)return 1;if(void 0!==a)return a.length}return 0}function w(a,b){for(var d=Array(b),c=0;c<b;++c)d[c]=a[c];return d}function m(a,b,c){"function"===typeof a.on&&d(a,"error",b,c)}function d(a,b,d,c){if("function"===typeof a.on)if(c.once)a.once(b,d);else a.on(b,d);else if("function"===typeof a.addEventListener)a.addEventListener(b,function k(m){c.once&&
a.removeEventListener(b,k);d(m)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a);}var A=(c="object"===typeof Reflect?Reflect:null)&&"function"===typeof c.apply?c.apply:function(a,b,d){return Function.prototype.apply.call(a,b,d)};var r=c&&"function"===typeof c.ownKeys?c.ownKeys:Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.getOwnPropertyNames(a)};
var E=Number.isNaN||function(a){return a!==a};v.exports=h;v.exports.once=function(a,b){return new Promise(function(c,l){function e(e){a.removeListener(b,g);l(e)}function g(){"function"===typeof a.removeListener&&a.removeListener("error",e);c([].slice.call(arguments))}d(a,b,g,{once:!0});"error"!==b&&m(a,e,{once:!0})})};h.EventEmitter=h;h.prototype._events=void 0;h.prototype._eventsCount=0;h.prototype._maxListeners=void 0;var J=10;Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return J},
set:function(a){if("number"!==typeof a||0>a||E(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");J=a}});h.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};h.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||E(a))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
a+".");this._maxListeners=a;return this};h.prototype.getMaxListeners=function(){return void 0===this._maxListeners?h.defaultMaxListeners:this._maxListeners};h.prototype.emit=function(a){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);d="error"===a;var c=this._events;if(void 0!==c)d=d&&void 0===c.error;else if(!d)return!1;if(d){var e;0<b.length&&(e=b[0]);if(e instanceof Error)throw e;b=Error("Unhandled error."+(e?" ("+e.message+")":""));b.context=e;throw b;}d=c[a];if(void 0===d)return!1;
if("function"===typeof d)A(d,this,b);else for(e=d.length,c=w(d,e),d=0;d<e;++d)A(c[d],this,b);return!0};h.prototype.addListener=function(b,d){return a(this,b,d,!1)};h.prototype.on=h.prototype.addListener;h.prototype.prependListener=function(b,d){return a(this,b,d,!0)};h.prototype.once=function(a,b){g(b);this.on(a,l(this,a,b));return this};h.prototype.prependOnceListener=function(a,b){g(b);this.prependListener(a,l(this,a,b));return this};h.prototype.removeListener=function(a,b){var d;g(b);var c=this._events;
if(void 0===c)return this;var e=c[a];if(void 0===e)return this;if(e===b||e.listener===b)0===--this._eventsCount?this._events=Object.create(null):(delete c[a],c.removeListener&&this.emit("removeListener",a,e.listener||b));else if("function"!==typeof e){var m=-1;for(d=e.length-1;0<=d;d--)if(e[d]===b||e[d].listener===b){var k=e[d].listener;m=d;break}if(0>m)return this;if(0===m)e.shift();else{for(;m+1<e.length;m++)e[m]=e[m+1];e.pop()}1===e.length&&(c[a]=e[0]);void 0!==c.removeListener&&this.emit("removeListener",
a,k||b)}return this};h.prototype.off=h.prototype.removeListener;h.prototype.removeAllListeners=function(a){var b=this._events;if(void 0===b)return this;if(void 0===b.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==b[a]&&(0===--this._eventsCount?this._events=Object.create(null):delete b[a]),this;if(0===arguments.length){var d=Object.keys(b);for(b=0;b<d.length;++b){var c=d[b];"removeListener"!==c&&this.removeAllListeners(c)}this.removeAllListeners("removeListener");
this._events=Object.create(null);this._eventsCount=0;return this}d=b[a];if("function"===typeof d)this.removeListener(a,d);else if(void 0!==d)for(b=d.length-1;0<=b;b--)this.removeListener(a,d[b]);return this};h.prototype.listeners=function(a){return t(this,a,!0)};h.prototype.rawListeners=function(a){return t(this,a,!1)};h.listenerCount=function(a,d){return"function"===typeof a.listenerCount?a.listenerCount(d):b.call(a,d)};h.prototype.listenerCount=b;h.prototype.eventNames=function(){return 0<this._eventsCount?
r(this._events):[]}},{}],5:[function(c,v,n){function h(){g.call(this)}v.exports=h;var g=c("events").EventEmitter;c("inherits")(h,g);h.Readable=c("readable-stream/lib/_stream_readable.js");h.Writable=c("readable-stream/lib/_stream_writable.js");h.Duplex=c("readable-stream/lib/_stream_duplex.js");h.Transform=c("readable-stream/lib/_stream_transform.js");h.PassThrough=c("readable-stream/lib/_stream_passthrough.js");h.finished=c("readable-stream/lib/internal/streams/end-of-stream.js");h.pipeline=c("readable-stream/lib/internal/streams/pipeline.js");
h.Stream=h;h.prototype.pipe=function(a,c){function l(b){a.writable&&!1===a.write(b)&&A.pause&&A.pause()}function h(){A.readable&&A.resume&&A.resume()}function b(){r||(r=!0,a.end())}function w(){r||(r=!0,"function"===typeof a.destroy&&a.destroy())}function m(a){d();if(0===g.listenerCount(this,"error"))throw a;}function d(){A.removeListener("data",l);a.removeListener("drain",h);A.removeListener("end",b);A.removeListener("close",w);A.removeListener("error",m);a.removeListener("error",m);A.removeListener("end",
d);A.removeListener("close",d);a.removeListener("close",d)}var A=this;A.on("data",l);a.on("drain",h);a._isStdio||c&&!1===c.end||(A.on("end",b),A.on("close",w));var r=!1;A.on("error",m);a.on("error",m);A.on("end",d);A.on("close",d);a.on("close",d);a.emit("pipe",A);return a}},{events:4,inherits:21,"readable-stream/lib/_stream_duplex.js":7,"readable-stream/lib/_stream_passthrough.js":8,"readable-stream/lib/_stream_readable.js":9,"readable-stream/lib/_stream_transform.js":10,"readable-stream/lib/_stream_writable.js":11,
"readable-stream/lib/internal/streams/end-of-stream.js":15,"readable-stream/lib/internal/streams/pipeline.js":17}],6:[function(c,v,n){function h(a,c){a.prototype=Object.create(c.prototype);a.prototype.constructor=a;a.__proto__=c}function g(a,c,b){b||(b=Error);var l=function(a){function b(b,d,m){return a.call(this,"string"===typeof c?c:c(b,d,m))||this}h(b,a);return b}(b);l.prototype.name=b.name;l.prototype.code=a;x[a]=l}function a(a,c){if(Array.isArray(a)){var b=a.length;a=a.map(function(a){return String(a)});
return 2<b?"one of ".concat(c," ").concat(a.slice(0,b-1).join(", "),", or ")+a[b-1]:2===b?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}return"of ".concat(c," ").concat(String(a))}var x={};g("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(c,g,b){var w;if(w="string"===typeof g)w="not "===g.substr(0,4);w?(w="must not be",g=g.replace(/^not /,"")):w="must be";var m=void 0;
if(void 0===m||m>c.length)m=c.length;" argument"===c.substring(m-9,m)?c="The ".concat(c," ").concat(w," ").concat(a(g,"type")):(m=void 0,"number"!==typeof m&&(m=0),m=m+1>c.length?!1:-1!==c.indexOf(".",m),m=m?"property":"argument",c='The "'.concat(c,'" ').concat(m," ").concat(w," ").concat(a(g,"type")));return c+=". Received type ".concat(typeof b)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"});
g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK","Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT",
"stream.unshift() after end event");v.exports.codes=x},{}],7:[function(c,v,n){(function(h){(function(){function g(d){if(!(this instanceof g))return new g(d);t.call(this,d);b.call(this,d);this.allowHalfOpen=!0;d&&(!1===d.readable&&(this.readable=!1),!1===d.writable&&(this.writable=!1),!1===d.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||h.nextTick(x,this)}function x(a){a.end()}var l=Object.keys||function(a){var b=[],d;for(d in a)b.push(d);return b};
v.exports=g;var t=c("./_stream_readable"),b=c("./_stream_writable");c("inherits")(g,t);l=l(b.prototype);for(var w=0;w<l.length;w++){var m=l[w];g.prototype[m]||(g.prototype[m]=b.prototype[m])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}})}).call(this)}).call(this,c("_process"))},{"./_stream_readable":9,
"./_stream_writable":11,_process:22,inherits:21}],8:[function(c,v,n){function h(a){if(!(this instanceof h))return new h(a);g.call(this,a)}v.exports=h;var g=c("./_stream_transform");c("inherits")(h,g);h.prototype._transform=function(a,c,g){g(null,a)}},{"./_stream_transform":10,inherits:21}],9:[function(c,v,n){(function(h,g){(function(){function a(a,b,d){if("function"===typeof a.prependListener)return a.prependListener(b,d);if(a._events&&a._events[b])Array.isArray(a._events[b])?a._events[b].unshift(d):
a._events[b]=[d,a._events[b]];else a.on(b,d)}function x(a,b,d){q=q||c("./_stream_duplex");a=a||{};"boolean"!==typeof d&&(d=b instanceof q);this.objectMode=!!a.objectMode;d&&(this.objectMode=this.objectMode||!!a.readableObjectMode);this.highWaterMark=L(this,a,"readableHighWaterMark",d);this.buffer=new Q;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=
!1;this.paused=!0;this.emitClose=!1!==a.emitClose;this.autoDestroy=!!a.autoDestroy;this.destroyed=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(U||(U=c("string_decoder/").StringDecoder),this.decoder=new U(a.encoding),this.encoding=a.encoding)}function l(a){q=q||c("./_stream_duplex");if(!(this instanceof l))return new l(a);this._readableState=new x(a,this,this instanceof q);this.readable=!0;a&&("function"===typeof a.read&&
(this._read=a.read),"function"===typeof a.destroy&&(this._destroy=a.destroy));I.call(this)}function t(a,e,k,c,g){B("readableAddChunk",e);var C=a._readableState;if(null===e)C.reading=!1,B("onEofChunk"),C.ended||(C.decoder&&(e=C.decoder.end())&&e.length&&(C.buffer.push(e),C.length+=C.objectMode?1:e.length),C.ended=!0,C.sync?m(a):(C.needReadable=!1,C.emittedReadable||(C.emittedReadable=!0,d(a))));else{if(!g){g=e;var P;N.isBuffer(g)||g instanceof S||"string"===typeof g||void 0===g||C.objectMode||(P=new f("chunk",
["string","Buffer","Uint8Array"],g));var w=P}if(w)T(a,w);else if(C.objectMode||e&&0<e.length)if("string"===typeof e||C.objectMode||Object.getPrototypeOf(e)===N.prototype||(e=N.from(e)),c)C.endEmitted?T(a,new R):b(a,C,e,!0);else if(C.ended)T(a,new p);else{if(C.destroyed)return!1;C.reading=!1;C.decoder&&!k?(e=C.decoder.write(e),C.objectMode||0!==e.length?b(a,C,e,!1):A(a,C)):b(a,C,e,!1)}else c||(C.reading=!1,A(a,C))}return!C.ended&&(C.length<C.highWaterMark||0===C.length)}function b(a,b,e,d){b.flowing&&
0===b.length&&!b.sync?(b.awaitDrain=0,a.emit("data",e)):(b.length+=b.objectMode?1:e.length,d?b.buffer.unshift(e):b.buffer.push(e),b.needReadable&&m(a));A(a,b)}function w(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var e=a;1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++);b.highWaterMark=e}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}
function m(a){var b=a._readableState;B("emitReadable",b.needReadable,b.emittedReadable);b.needReadable=!1;b.emittedReadable||(B("emitReadable",b.flowing),b.emittedReadable=!0,h.nextTick(d,a))}function d(a){var b=a._readableState;B("emitReadable_",b.destroyed,b.length,b.ended);b.destroyed||!b.length&&!b.ended||(a.emit("readable"),b.emittedReadable=!1);b.needReadable=!b.flowing&&!b.ended&&b.length<=b.highWaterMark;F(a)}function A(a,b){b.readingMore||(b.readingMore=!0,h.nextTick(r,a,b))}function r(a,
b){for(;!b.reading&&!b.ended&&(b.length<b.highWaterMark||b.flowing&&0===b.length);){var e=b.length;B("maybeReadMore read 0");a.read(0);if(e===b.length)break}b.readingMore=!1}function n(a){return function(){var b=a._readableState;B("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,F(a))}}function J(a){var b=a._readableState;b.readableListening=0<a.listenerCount("readable");b.resumeScheduled&&!b.paused?b.flowing=!0:0<a.listenerCount("data")&&
a.resume()}function D(a){B("readable nexttick read 0");a.read(0)}function z(a,b){B("resume",b.reading);b.reading||a.read(0);b.resumeScheduled=!1;a.emit("resume");F(a);b.flowing&&!b.reading&&a.read(0)}function F(a){var b=a._readableState;for(B("flow",b.flowing);b.flowing&&null!==a.read(););}function G(a,b){if(0===b.length)return null;b.objectMode?a=b.buffer.shift():!a||a>=b.length?(a=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.first():b.buffer.concat(b.length),b.buffer.clear()):a=b.buffer.consume(a,
b.decoder);return a}function e(a){var b=a._readableState;B("endReadable",b.endEmitted);b.endEmitted||(b.ended=!0,h.nextTick(y,b,a))}function y(a,b){B("endReadableNT",a.endEmitted,a.length);a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"),a.autoDestroy&&(a=b._writableState,(!a||a.autoDestroy&&a.finished)&&b.destroy()))}function k(a,b){for(var e=0,d=a.length;e<d;e++)if(a[e]===b)return e;return-1}v.exports=l;var q;l.ReadableState=x;c("events");var I=c("./internal/streams/stream"),
N=c("buffer").Buffer,S=g.Uint8Array||function(){},H=c("util");var B=H&&H.debuglog?H.debuglog("stream"):function(){};var Q=c("./internal/streams/buffer_list");H=c("./internal/streams/destroy");var L=c("./internal/streams/state").getHighWaterMark,M=c("../errors").codes,f=M.ERR_INVALID_ARG_TYPE,p=M.ERR_STREAM_PUSH_AFTER_EOF,K=M.ERR_METHOD_NOT_IMPLEMENTED,R=M.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,U,V,u;c("inherits")(l,I);var T=H.errorOrDestroy,W=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}});l.prototype.destroy=H.destroy;l.prototype._undestroy=H.undestroy;l.prototype._destroy=function(a,b){b(a)};l.prototype.push=function(a,b){var e=this._readableState;if(e.objectMode)var d=!0;else"string"===typeof a&&(b=b||e.defaultEncoding,b!==e.encoding&&(a=N.from(a,b),b=""),d=!0);return t(this,a,b,!1,d)};l.prototype.unshift=
function(a){return t(this,a,null,!0,!1)};l.prototype.isPaused=function(){return!1===this._readableState.flowing};l.prototype.setEncoding=function(a){U||(U=c("string_decoder/").StringDecoder);a=new U(a);this._readableState.decoder=a;this._readableState.encoding=this._readableState.decoder.encoding;for(var b=this._readableState.buffer.head,e="";null!==b;)e+=a.write(b.data),b=b.next;this._readableState.buffer.clear();""!==e&&this._readableState.buffer.push(e);this._readableState.length=e.length;return this};
l.prototype.read=function(a){B("read",a);a=parseInt(a,10);var b=this._readableState,d=a;0!==a&&(b.emittedReadable=!1);if(0===a&&b.needReadable&&((0!==b.highWaterMark?b.length>=b.highWaterMark:0<b.length)||b.ended))return B("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?e(this):m(this),null;a=w(a,b);if(0===a&&b.ended)return 0===b.length&&e(this),null;var f=b.needReadable;B("need readable",f);if(0===b.length||b.length-a<b.highWaterMark)f=!0,B("length less than watermark",f);b.ended||b.reading?
B("reading or ended",!1):f&&(B("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=w(d,b)));f=0<a?G(a,b):null;null===f?(b.needReadable=b.length<=b.highWaterMark,a=0):(b.length-=a,b.awaitDrain=0);0===b.length&&(b.ended||(b.needReadable=!0),d!==a&&b.ended&&e(this));null!==f&&this.emit("data",f);return f};l.prototype._read=function(a){T(this,new K("_read()"))};l.prototype.pipe=function(b,e){function d(a,e){B("onunpipe");a===C&&e&&!1===
e.hasUnpiped&&(e.hasUnpiped=!0,B("cleanup"),b.removeListener("close",g),b.removeListener("finish",p),b.removeListener("drain",l),b.removeListener("error",m),b.removeListener("unpipe",d),C.removeListener("end",f),C.removeListener("end",w),C.removeListener("data",c),y=!0,!r.awaitDrain||b._writableState&&!b._writableState.needDrain||l())}function f(){B("onend");b.end()}function c(a){B("ondata");a=b.write(a);B("dest.write",a);!1===a&&((1===r.pipesCount&&r.pipes===b||1<r.pipesCount&&-1!==k(r.pipes,b))&&
!y&&(B("false write response, pause",r.awaitDrain),r.awaitDrain++),C.pause())}function m(a){B("onerror",a);w();b.removeListener("error",m);0===b.listeners("error").length&&T(b,a)}function g(){b.removeListener("finish",p);w()}function p(){B("onfinish");b.removeListener("close",g);w()}function w(){B("unpipe");C.unpipe(b)}var C=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=b;break;case 1:r.pipes=[r.pipes,b];break;default:r.pipes.push(b)}r.pipesCount+=1;B("pipe count=%d opts=%j",r.pipesCount,
e);e=e&&!1===e.end||b===h.stdout||b===h.stderr?w:f;if(r.endEmitted)h.nextTick(e);else C.once("end",e);b.on("unpipe",d);var l=n(C);b.on("drain",l);var y=!1;C.on("data",c);a(b,"error",m);b.once("close",g);b.once("finish",p);b.emit("pipe",C);r.flowing||(B("pipe resume"),C.resume());return b};l.prototype.unpipe=function(a){var b=this._readableState,e={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=
!1;a&&a.emit("unpipe",this,e);return this}if(!a){a=b.pipes;e=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<e;b++)a[b].emit("unpipe",this,{hasUnpiped:!1});return this}var d=k(b.pipes,a);if(-1===d)return this;b.pipes.splice(d,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this,e);return this};l.prototype.on=function(a,b){b=I.prototype.on.call(this,a,b);var e=this._readableState;"data"===a?(e.readableListening=0<this.listenerCount("readable"),!1!==e.flowing&&
this.resume()):"readable"!==a||e.endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.flowing=!1,e.emittedReadable=!1,B("on readable",e.length,e.reading),e.length?m(this):e.reading||h.nextTick(D,this));return b};l.prototype.addListener=l.prototype.on;l.prototype.removeListener=function(a,b){b=I.prototype.removeListener.call(this,a,b);"readable"===a&&h.nextTick(J,this);return b};l.prototype.removeAllListeners=function(a){var b=I.prototype.removeAllListeners.apply(this,arguments);
"readable"!==a&&void 0!==a||h.nextTick(J,this);return b};l.prototype.resume=function(){var a=this._readableState;a.flowing||(B("resume"),a.flowing=!a.readableListening,a.resumeScheduled||(a.resumeScheduled=!0,h.nextTick(z,this,a)));a.paused=!1;return this};l.prototype.pause=function(){B("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(B("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};l.prototype.wrap=function(a){var b=
this,e=this._readableState,d=!1;a.on("end",function(){B("wrapped end");if(e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(f){B("wrapped data");e.decoder&&(f=e.decoder.write(f));e.objectMode&&(null===f||void 0===f)||!(e.objectMode||f&&f.length)||b.push(f)||(d=!0,a.pause())});for(var f in a)void 0===this[f]&&"function"===typeof a[f]&&(this[f]=function(b){return function(){return a[b].apply(a,arguments)}}(f));for(f=0;f<W.length;f++)a.on(W[f],this.emit.bind(this,
W[f]));this._read=function(b){B("wrapped _read",b);d&&(d=!1,a.resume())};return this};"function"===typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){void 0===V&&(V=c("./internal/streams/async_iterator"));return V(this)});Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});
Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}});l._fromList=G;Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(l.from=function(a,b){void 0===u&&(u=c("./internal/streams/from"));return u(l,a,b)})}).call(this)}).call(this,c("_process"),"undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/async_iterator":12,"./internal/streams/buffer_list":13,"./internal/streams/destroy":14,"./internal/streams/from":16,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,events:4,inherits:21,"string_decoder/":25,util:2}],10:[function(c,v,n){function h(a,b){var d=this._transformState;d.transforming=!1;var c=d.writecb;if(null===c)return this.emit("error",
new t);d.writechunk=null;d.writecb=null;null!=b&&this.push(b);c(a);a=this._readableState;a.reading=!1;(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function g(b){if(!(this instanceof g))return new g(b);m.call(this,b);this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;b&&("function"===typeof b.transform&&(this._transform=b.transform),
"function"===typeof b.flush&&(this._flush=b.flush));this.on("prefinish",a)}function a(){var a=this;"function"!==typeof this._flush||this._readableState.destroyed?x(this,null,null):this._flush(function(b,d){x(a,b,d)})}function x(a,c,m){if(c)return a.emit("error",c);null!=m&&a.push(m);if(a._writableState.length)throw new w;if(a._transformState.transforming)throw new b;return a.push(null)}v.exports=g;v=c("../errors").codes;var l=v.ERR_METHOD_NOT_IMPLEMENTED,t=v.ERR_MULTIPLE_CALLBACK,b=v.ERR_TRANSFORM_ALREADY_TRANSFORMING,
w=v.ERR_TRANSFORM_WITH_LENGTH_0,m=c("./_stream_duplex");c("inherits")(g,m);g.prototype.push=function(a,b){this._transformState.needTransform=!1;return m.prototype.push.call(this,a,b)};g.prototype._transform=function(a,b,c){c(new l("_transform()"))};g.prototype._write=function(a,b,c){var d=this._transformState;d.writecb=c;d.writechunk=a;d.writeencoding=b;d.transforming||(a=this._readableState,(d.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};g.prototype._read=
function(a){a=this._transformState;null===a.writechunk||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))};g.prototype._destroy=function(a,b){m.prototype._destroy.call(this,a,function(a){b(a)})}},{"../errors":6,"./_stream_duplex":7,inherits:21}],11:[function(c,v,n){(function(h,g){(function(){function a(a){var b=this;this.entry=this.next=null;this.finish=function(){var e=b.entry;for(b.entry=null;e;){var d=e.callback;a.pendingcb--;d(void 0);
e=e.next}a.corkedRequestsFree.next=b}}function x(){}function l(b,k,g){n=n||c("./_stream_duplex");b=b||{};"boolean"!==typeof g&&(g=k instanceof n);this.objectMode=!!b.objectMode;g&&(this.objectMode=this.objectMode||!!b.writableObjectMode);this.highWaterMark=e(this,b,"writableHighWaterMark",g);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==b.decodeStrings;this.defaultEncoding=b.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=
0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var b=k._writableState,e=b.sync,f=b.writecb;if("function"!==typeof f)throw new I;b.writing=!1;b.writecb=null;b.length-=b.writelen;b.writelen=0;a?(--b.pendingcb,e?(h.nextTick(f,a),h.nextTick(r,k,b),k._writableState.errorEmitted=!0,L(k,a)):(f(a),k._writableState.errorEmitted=!0,L(k,a),r(k,b))):((a=d(b)||k.destroyed)||b.corked||b.bufferProcessing||!b.bufferedRequest||m(k,b),e?h.nextTick(w,k,b,a,f):w(k,b,a,f))};this.writecb=null;this.writelen=
0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==b.emitClose;this.autoDestroy=!!b.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new a(this)}function t(a){n=n||c("./_stream_duplex");var b=this instanceof n;if(!b&&!M.call(t,this))return new t(a);this._writableState=new l(a,this,b);this.writable=!0;a&&("function"===typeof a.write&&(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev),
"function"===typeof a.destroy&&(this._destroy=a.destroy),"function"===typeof a.final&&(this._final=a.final));D.call(this)}function b(a,b,e,d,k,c,m){b.writelen=d;b.writecb=m;b.writing=!0;b.sync=!0;if(b.destroyed)b.onwrite(new S("write"));else e?a._writev(k,b.onwrite):a._write(k,c,b.onwrite);b.sync=!1}function w(a,b,e,d){!e&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;d();r(a,b)}function m(e,d){d.bufferProcessing=!0;var f=d.bufferedRequest;if(e._writev&&f&&f.next){var k=
Array(d.bufferedRequestCount),c=d.corkedRequestsFree;c.entry=f;for(var m=0,g=!0;f;)k[m]=f,f.isBuf||(g=!1),f=f.next,m+=1;k.allBuffers=g;b(e,d,!0,d.length,k,"",c.finish);d.pendingcb++;d.lastBufferedRequest=null;c.next?(d.corkedRequestsFree=c.next,c.next=null):d.corkedRequestsFree=new a(d);d.bufferedRequestCount=0}else{for(;f&&(k=f.chunk,b(e,d,!1,d.objectMode?1:k.length,k,f.encoding,f.callback),f=f.next,d.bufferedRequestCount--,!d.writing););null===f&&(d.lastBufferedRequest=null)}d.bufferedRequest=f;
d.bufferProcessing=!1}function d(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function A(a,b){a._final(function(e){b.pendingcb--;e&&L(a,e);b.prefinished=!0;a.emit("prefinish");r(a,b)})}function r(a,b){var e=d(b);e&&(b.prefinished||b.finalCalled||("function"!==typeof a._final||b.destroyed?(b.prefinished=!0,a.emit("prefinish")):(b.pendingcb++,b.finalCalled=!0,h.nextTick(A,a,b))),0===b.pendingcb&&(b.finished=!0,a.emit("finish"),b.autoDestroy&&(b=a._readableState,
(!b||b.autoDestroy&&b.endEmitted)&&a.destroy())));return e}v.exports=t;var n;t.WritableState=l;var J={deprecate:c("util-deprecate")},D=c("./internal/streams/stream"),z=c("buffer").Buffer,F=g.Uint8Array||function(){},G=c("./internal/streams/destroy"),e=c("./internal/streams/state").getHighWaterMark,y=c("../errors").codes,k=y.ERR_INVALID_ARG_TYPE,q=y.ERR_METHOD_NOT_IMPLEMENTED,I=y.ERR_MULTIPLE_CALLBACK,N=y.ERR_STREAM_CANNOT_PIPE,S=y.ERR_STREAM_DESTROYED,H=y.ERR_STREAM_NULL_VALUES,B=y.ERR_STREAM_WRITE_AFTER_END,
Q=y.ERR_UNKNOWN_ENCODING,L=G.errorOrDestroy;c("inherits")(t,D);l.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(l.prototype,"buffer",{get:J.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(f){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var M=Function.prototype[Symbol.hasInstance];
Object.defineProperty(t,Symbol.hasInstance,{value:function(a){return M.call(this,a)?!0:this!==t?!1:a&&a._writableState instanceof l}})}else M=function(a){return a instanceof this};t.prototype.pipe=function(){L(this,new N)};t.prototype.write=function(a,e,d){var f=this._writableState,c=!1,m;if(m=!f.objectMode)m=a,m=z.isBuffer(m)||m instanceof F;m&&!z.isBuffer(a)&&(a=z.from(a));"function"===typeof e&&(d=e,e=null);m?e="buffer":e||(e=f.defaultEncoding);"function"!==typeof d&&(d=x);if(f.ending)f=d,d=new B,
L(this,d),h.nextTick(f,d);else{var g;if(!(g=m)){g=a;var w=d,l;null===g?l=new H:"string"===typeof g||f.objectMode||(l=new k("chunk",["string","Buffer"],g));l?(L(this,l),h.nextTick(w,l),g=!1):g=!0}g&&(f.pendingcb++,c=m,c||(l=a,f.objectMode||!1===f.decodeStrings||"string"!==typeof l||(l=z.from(l,e)),a!==l&&(c=!0,e="buffer",a=l)),m=f.objectMode?1:a.length,f.length+=m,l=f.length<f.highWaterMark,l||(f.needDrain=!0),f.writing||f.corked?(m=f.lastBufferedRequest,f.lastBufferedRequest={chunk:a,encoding:e,isBuf:c,
callback:d,next:null},m?m.next=f.lastBufferedRequest:f.bufferedRequest=f.lastBufferedRequest,f.bufferedRequestCount+=1):b(this,f,!1,m,a,e,d),c=l)}return c};t.prototype.cork=function(){this._writableState.corked++};t.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.bufferProcessing||!a.bufferedRequest||m(this,a))};t.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new Q(a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});t.prototype._write=function(a,b,e){e(new q("_write()"))};t.prototype._writev=null;t.prototype.end=function(a,b,e){var d=this._writableState;
"function"===typeof a?(e=a,b=a=null):"function"===typeof b&&(e=b,b=null);null!==a&&void 0!==a&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());if(!d.ending){a=e;d.ending=!0;r(this,d);if(a)if(d.finished)h.nextTick(a);else this.once("finish",a);d.ended=!0;this.writable=!1}return this};Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?
!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});t.prototype.destroy=G.destroy;t.prototype._undestroy=G.undestroy;t.prototype._destroy=function(a,b){b(a)}}).call(this)}).call(this,c("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/destroy":14,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,
inherits:21,"util-deprecate":26}],12:[function(c,v,n){(function(h){(function(){function g(a,b,d){b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d;return a}function a(a,b){return{value:a,done:b}}function x(b){var e=b[m];if(null!==e){var c=b[D].read();null!==c&&(b[n]=null,b[m]=null,b[d]=null,e(a(c,!1)))}}function l(a){h.nextTick(x,a)}function t(b,e){return function(d,k){b.then(function(){if(e[r])d(a(void 0,!0));else e[J](d,k)},k)}}var b,w=c("./end-of-stream"),
m=Symbol("lastResolve"),d=Symbol("lastReject"),A=Symbol("error"),r=Symbol("ended"),n=Symbol("lastPromise"),J=Symbol("handlePromise"),D=Symbol("stream"),z=Object.getPrototypeOf(function(){}),F=Object.setPrototypeOf((b={get stream(){return this[D]},next:function(){var b=this,e=this[A];if(null!==e)return Promise.reject(e);if(this[r])return Promise.resolve(a(void 0,!0));if(this[D].destroyed)return new Promise(function(e,d){h.nextTick(function(){b[A]?d(b[A]):e(a(void 0,!0))})});if(e=this[n])e=new Promise(t(e,
this));else{e=this[D].read();if(null!==e)return Promise.resolve(a(e,!1));e=new Promise(this[J])}return this[n]=e}},g(b,Symbol.asyncIterator,function(){return this}),g(b,"return",function(){var b=this;return new Promise(function(e,d){b[D].destroy(null,function(b){b?d(b):e(a(void 0,!0))})})}),b),z);v.exports=function(b){var e,c=Object.create(F,(e={},g(e,D,{value:b,writable:!0}),g(e,m,{value:null,writable:!0}),g(e,d,{value:null,writable:!0}),g(e,A,{value:null,writable:!0}),g(e,r,{value:b._readableState.endEmitted,
writable:!0}),g(e,J,{value:function(b,e){var k=c[D].read();k?(c[n]=null,c[m]=null,c[d]=null,b(a(k,!1))):(c[m]=b,c[d]=e)},writable:!0}),e));c[n]=null;w(b,function(b){if(b&&"ERR_STREAM_PREMATURE_CLOSE"!==b.code){var e=c[d];null!==e&&(c[n]=null,c[m]=null,c[d]=null,e(b));c[A]=b}else b=c[m],null!==b&&(c[n]=null,c[m]=null,c[d]=null,b(a(void 0,!0))),c[r]=!0});b.on("readable",l.bind(null,c));return c}}).call(this)}).call(this,c("_process"))},{"./end-of-stream":15,_process:22}],13:[function(c,v,n){function h(a,
b){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);b&&(c=c.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));d.push.apply(d,c)}return d}function g(a){for(var b=1;b<arguments.length;b++){var d=null!=arguments[b]?arguments[b]:{};b%2?h(Object(d),!0).forEach(function(b){var c=d[b];b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,
Object.getOwnPropertyDescriptors(d)):h(Object(d)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(d,b))})}return a}function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}function x(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}var l=c("buffer").Buffer,t=c("util").inspect,b=t&&t.custom||"inspect";v.exports=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}x(a,[{key:"push",value:function(a){a={data:a,next:null};0<this.length?this.tail.next=a:this.head=a;this.tail=a;++this.length}},{key:"unshift",value:function(a){a={data:a,next:this.head};0===this.length&&(this.tail=a);this.head=a;++this.length}},{key:"shift",value:function(){if(0!==this.length){var a=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return a}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=
0}},{key:"join",value:function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c}},{key:"concat",value:function(a){if(0===this.length)return l.alloc(0);a=l.allocUnsafe(a>>>0);for(var b=this.head,c=0;b;)l.prototype.copy.call(b.data,a,c),c+=b.data.length,b=b.next;return a}},{key:"consume",value:function(a,b){a<this.head.data.length?(b=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):b=a===this.head.data.length?this.shift():b?this._getString(a):
this._getBuffer(a);return b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var b=this.head,c=1,m=b.data;for(a-=m.length;b=b.next;){var g=b.data,l=a>g.length?g.length:a;m=l===g.length?m+g:m+g.slice(0,a);a-=l;if(0===a){l===g.length?(++c,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=g.slice(l));break}++c}this.length-=c;return m}},{key:"_getBuffer",value:function(a){var b=l.allocUnsafe(a),c=this.head,g=1;c.data.copy(b);for(a-=c.data.length;c=
c.next;){var m=c.data,w=a>m.length?m.length:a;m.copy(b,b.length-a,0,w);a-=w;if(0===a){w===m.length?(++g,this.head=c.next?c.next:this.tail=null):(this.head=c,c.data=m.slice(w));break}++g}this.length-=g;return b}},{key:b,value:function(a,b){return t(this,g({},b,{depth:0,customInspect:!1}))}}]);return a}()},{buffer:3,util:2}],14:[function(c,v,n){(function(c){(function(){function g(c,g){h(c,g);a(c)}function a(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||
a.emit("close")}function h(a,c){a.emit("error",c)}v.exports={destroy:function(l,t){var b=this,w=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||w)return t?t(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(h,this,l)):c.nextTick(h,this,l)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(l||null,function(m){!t&&
m?b._writableState?b._writableState.errorEmitted?c.nextTick(a,b):(b._writableState.errorEmitted=!0,c.nextTick(g,b,m)):c.nextTick(g,b,m):t?(c.nextTick(a,b),t(m)):c.nextTick(a,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=
!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,c){var b=a._readableState,g=a._writableState;b&&b.autoDestroy||g&&g.autoDestroy?a.destroy(c):a.emit("error",c)}}}).call(this)}).call(this,c("_process"))},{_process:22}],15:[function(c,v,n){function h(a){var c=!1;return function(){if(!c){c=!0;for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];a.apply(this,g)}}}function g(){}function a(c,t,b){if("function"===
typeof t)return a(c,null,t);t||(t={});b=h(b||g);var w=t.readable||!1!==t.readable&&c.readable,m=t.writable||!1!==t.writable&&c.writable,d=function(){c.writable||r()},l=c._writableState&&c._writableState.finished,r=function(){m=!1;l=!0;w||b.call(c)},n=c._readableState&&c._readableState.endEmitted,J=function(){w=!1;n=!0;m||b.call(c)},D=function(a){b.call(c,a)},z=function(){var a;if(w&&!n)return c._readableState&&c._readableState.ended||(a=new x),b.call(c,a);if(m&&!l)return c._writableState&&c._writableState.ended||
(a=new x),b.call(c,a)},v=function(){c.req.on("finish",r)};if(c.setHeader&&"function"===typeof c.abort)if(c.on("complete",r),c.on("abort",z),c.req)v();else c.on("request",v);else m&&!c._writableState&&(c.on("end",d),c.on("close",d));c.on("end",J);c.on("finish",r);if(!1!==t.error)c.on("error",D);c.on("close",z);return function(){c.removeListener("complete",r);c.removeListener("abort",z);c.removeListener("request",v);c.req&&c.req.removeListener("finish",r);c.removeListener("end",d);c.removeListener("close",
d);c.removeListener("finish",r);c.removeListener("end",J);c.removeListener("error",D);c.removeListener("close",z)}}var x=c("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;v.exports=a},{"../../../errors":6}],16:[function(c,v,n){v.exports=function(){throw Error("Readable.from is not available in the browser");}},{}],17:[function(c,v,n){function h(a){var b=!1;return function(){b||(b=!0,a.apply(void 0,arguments))}}function g(a){if(a)throw a;}function a(a,b,g,r){r=h(r);var d=!1;a.on("close",function(){d=
!0});void 0===t&&(t=c("./end-of-stream"));t(a,{readable:b,writable:g},function(a){if(a)return r(a);d=!0;r()});var m=!1;return function(b){if(!d&&!m){m=!0;if(a.setHeader&&"function"===typeof a.abort)return a.abort();if("function"===typeof a.destroy)return a.destroy();r(b||new w("pipe"))}}}function x(a){a()}function l(a,b){return a.pipe(b)}var t;n=c("../../../errors").codes;var b=n.ERR_MISSING_ARGS,w=n.ERR_STREAM_DESTROYED;v.exports=function(){for(var c=arguments.length,d=Array(c),w=0;w<c;w++)d[w]=
arguments[w];var r=d.length?"function"!==typeof d[d.length-1]?g:d.pop():g;Array.isArray(d[0])&&(d=d[0]);if(2>d.length)throw new b("streams");var h,J=d.map(function(b,c){var g=c<d.length-1;return a(b,g,0<c,function(a){h||(h=a);a&&J.forEach(x);g||(J.forEach(x),r(h))})});return d.reduce(l)}},{"../../../errors":6,"./end-of-stream":15}],18:[function(c,v,n){var h=c("../../../errors").codes.ERR_INVALID_OPT_VALUE;v.exports={getHighWaterMark:function(c,a,x,l){a=null!=a.highWaterMark?a.highWaterMark:l?a[x]:
null;if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||0>a)throw new h(l?x:"highWaterMark",a);return Math.floor(a)}return c.objectMode?16:16384}}},{"../../../errors":6}],19:[function(c,v,n){v.exports=c("events").EventEmitter},{events:4}],20:[function(c,v,n){n.read=function(c,g,a,x,l){var h=8*l-x-1;var b=(1<<h)-1,w=b>>1,m=-7;l=a?l-1:0;var d=a?-1:1,n=c[g+l];l+=d;a=n&(1<<-m)-1;n>>=-m;for(m+=h;0<m;a=256*a+c[g+l],l+=d,m-=8);h=a&(1<<-m)-1;a>>=-m;for(m+=x;0<m;h=256*h+c[g+l],l+=d,m-=8);if(0===a)a=1-w;else{if(a===
b)return h?NaN:Infinity*(n?-1:1);h+=Math.pow(2,x);a-=w}return(n?-1:1)*h*Math.pow(2,a-x)};n.write=function(c,g,a,n,l,t){var b,w=8*t-l-1,m=(1<<w)-1,d=m>>1,h=23===l?Math.pow(2,-24)-Math.pow(2,-77):0;t=n?0:t-1;var r=n?1:-1,x=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,n=m):(n=Math.floor(Math.log(g)/Math.LN2),1>g*(b=Math.pow(2,-n))&&(n--,b*=2),g=1<=n+d?g+h/b:g+h*Math.pow(2,1-d),2<=g*b&&(n++,b/=2),n+d>=m?(g=0,n=m):1<=n+d?(g=(g*b-1)*Math.pow(2,l),n+=d):(g=g*Math.pow(2,d-1)*
Math.pow(2,l),n=0));for(;8<=l;c[a+t]=g&255,t+=r,g/=256,l-=8);n=n<<l|g;for(w+=l;0<w;c[a+t]=n&255,t+=r,n/=256,w-=8);c[a+t-r]|=128*x}},{}],21:[function(c,v,n){v.exports="function"===typeof Object.create?function(c,g){g&&(c.super_=g,c.prototype=Object.create(g.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:function(c,g){if(g){c.super_=g;var a=function(){};a.prototype=g.prototype;c.prototype=new a;c.prototype.constructor=c}}},{}],22:[function(c,v,n){function h(){throw Error("setTimeout has not been defined");
}function g(){throw Error("clearTimeout has not been defined");}function a(a){if(m===setTimeout)return setTimeout(a,0);if((m===h||!m)&&setTimeout)return m=setTimeout,setTimeout(a,0);try{return m(a,0)}catch(z){try{return m.call(null,a,0)}catch(F){return m.call(this,a,0)}}}function x(a){if(d===clearTimeout)return clearTimeout(a);if((d===g||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(a);try{return d(a)}catch(z){try{return d.call(null,a)}catch(F){return d.call(this,a)}}}function l(){r&&E&&(r=
!1,E.length?A=E.concat(A):J=-1,A.length&&t())}function t(){if(!r){var b=a(l);r=!0;for(var d=A.length;d;){E=A;for(A=[];++J<d;)E&&E[J].run();J=-1;d=A.length}E=null;r=!1;x(b)}}function b(a,b){this.fun=a;this.array=b}function w(){}c=v.exports={};try{var m="function"===typeof setTimeout?setTimeout:h}catch(D){m=h}try{var d="function"===typeof clearTimeout?clearTimeout:g}catch(D){d=g}var A=[],r=!1,E,J=-1;c.nextTick=function(d){var c=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)c[g-
1]=arguments[g];A.push(new b(d,c));1!==A.length||r||a(t)};b.prototype.run=function(){this.fun.apply(null,this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=w;c.addListener=w;c.once=w;c.off=w;c.removeListener=w;c.removeAllListeners=w;c.emit=w;c.prependListener=w;c.prependOnceListener=w;c.listeners=function(a){return[]};c.binding=function(a){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(a){throw Error("process.chdir is not supported");
};c.umask=function(){return 0}},{}],23:[function(c,v,n){function h(a,c){for(var b in a)c[b]=a[b]}function g(a,c,b){return x(a,c,b)}var a=c("buffer"),x=a.Buffer;x.from&&x.alloc&&x.allocUnsafe&&x.allocUnsafeSlow?v.exports=a:(h(a,n),n.Buffer=g);g.prototype=Object.create(x.prototype);h(x,g);g.from=function(a,c,b){if("number"===typeof a)throw new TypeError("Argument must not be a number");return x(a,c,b)};g.alloc=function(a,c,b){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=
x(a);void 0!==c?"string"===typeof b?a.fill(c,b):a.fill(c):a.fill(0);return a};g.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return x(a)};g.allocUnsafeSlow=function(c){if("number"!==typeof c)throw new TypeError("Argument must be a number");return a.SlowBuffer(c)}},{buffer:3}],24:[function(c,v,n){(function(h){(function(){(function(g){function a(b,e){if(!(this instanceof a))return new a(b,e);for(var c=0,d=y.length;c<d;c++)this[y[c]]="";this.q=this.c=
"";this.bufferCheckPosition=g.MAX_BUFFER_LENGTH;this.opt=e||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!b;this.noscript=!(!b&&!this.opt.noscript);this.state=u.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(g.XML_ENTITIES):Object.create(g.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=
Object.create(p));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}function n(b,e){if(!(this instanceof n))return new n(b,e);k.apply(this);this._parser=new a(b,e);this.readable=this.writable=!0;var c=this;this._parser.onend=function(){c.emit("end")};this._parser.onerror=function(a){c.emit("error",a);c._parser.error=null};this._decoder=null;q.forEach(function(a){Object.defineProperty(c,"on"+a,{get:function(){return c._parser["on"+
a]},set:function(b){if(!b)return c.removeAllListeners(a),c._parser["on"+a]=b;c.on(a,b)},enumerable:!0,configurable:!1})})}function l(a){return a.split("").reduce(function(a,b){a[b]=!0;return a},{})}function t(a,b){return"[object RegExp]"===Object.prototype.toString.call(a)?!!b.match(a):a[b]}function b(a,b,e){a.textNode&&w(a);a[b]&&a[b](e)}function w(a){a.textNode=m(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function m(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g,
" "));return b}function d(a,b){w(a);a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=Error(b);a.error=b;a.onerror&&a.onerror(b);return a}function A(b){b.sawRoot&&!b.closedRoot&&r(b,"Unclosed root tag");b.state!==u.BEGIN&&b.state!==u.BEGIN_WHITESPACE&&b.state!==u.TEXT&&d(b,"Unexpected end");w(b);b.c="";b.closed=!0;b.onend&&b.onend(void 0);a.call(b,b.strict,b.opt);return b}function r(b,e){if("object"!==typeof b||!(b instanceof a))throw Error("bad call to strictFail");b.strict&&
d(b,e)}function v(a,b){var e=0>a.indexOf(":")?["",a]:a.split(":"),c=e[0];e=e[1];b&&"xmlns"===a&&(c="xmlns",e="");return{prefix:c,local:e}}function J(a){a.strict||(a.attribName=a.attribName[a.looseCase]());if(-1===a.attribList.indexOf(a.attribName)&&!a.tag.attributes.hasOwnProperty(a.attribName))if(a.opt.xmlns){var e=v(a.attribName,!0),c=e.local;if("xmlns"===e.prefix)if("xml"===c&&a.attribValue!==M)r(a,"xml: prefix must be bound to "+M+"\nActual: "+a.attribValue);else if("xmlns"===c&&a.attribValue!==
f)r(a,"xmlns: prefix must be bound to "+f+"\nActual: "+a.attribValue);else{e=a.tag;var d=a.tags[a.tags.length-1]||a;e.ns===d.ns&&(e.ns=Object.create(d.ns));e.ns[c]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,b(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function D(a,e){if(a.opt.xmlns){var c=a.tag,d=v(a.tagName);c.prefix=d.prefix;c.local=d.local;c.uri=c.ns[d.prefix]||"";c.prefix&&!c.uri&&
(r(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),c.uri=d.prefix);d=a.tags[a.tags.length-1]||a;c.ns&&d.ns!==c.ns&&Object.keys(c.ns).forEach(function(e){b(a,"onopennamespace",{prefix:e,uri:c.ns[e]})});d=0;for(var f=a.attribList.length;d<f;d++){var k=a.attribList[d],g=k[0],m=k[1],w=v(g,!0);k=w.prefix;var q=""===k?"":c.ns[k]||"";m={name:g,value:m,prefix:k,local:w.local,uri:q};k&&"xmlns"!==k&&!q&&(r(a,"Unbound namespace prefix: "+JSON.stringify(k)),m.uri=k);a.tag.attributes[g]=m;b(a,"onattribute",
m)}a.attribList.length=0}a.tag.isSelfClosing=!!e;a.sawRoot=!0;a.tags.push(a.tag);b(a,"onopentag",a.tag);e||(a.noscript||"script"!==a.tagName.toLowerCase()?a.state=u.TEXT:a.state=u.SCRIPT,a.tag=null,a.tagName="");a.attribName=a.attribValue="";a.attribList.length=0}function z(a){if(a.tagName){if(a.script){if("script"!==a.tagName){a.script+="</"+a.tagName+">";a.tagName="";a.state=u.SCRIPT;return}b(a,"onscript",a.script);a.script=""}var e=a.tags.length,c=a.tagName;a.strict||(c=c[a.looseCase]());for(var d=
c;e--;)if(a.tags[e].name!==d)r(a,"Unexpected close tag");else break;if(0>e)r(a,"Unmatched closing tag: "+a.tagName),a.textNode+="</"+a.tagName+">";else{a.tagName=c;for(c=a.tags.length;c-- >e;){var f=a.tag=a.tags.pop();a.tagName=a.tag.name;b(a,"onclosetag",a.tagName);for(var k in f.ns);d=a.tags[a.tags.length-1]||a;a.opt.xmlns&&f.ns!==d.ns&&Object.keys(f.ns).forEach(function(e){b(a,"onclosenamespace",{prefix:e,uri:f.ns[e]})})}0===e&&(a.closedRoot=!0);a.tagName=a.attribValue=a.attribName="";a.attribList.length=
0}}else r(a,"Weird empty close tag."),a.textNode+="</>";a.state=u.TEXT}function F(a){var b=a.entity,e=b.toLowerCase(),c="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[e])return a.ENTITIES[e];b=e;if("#"===b.charAt(0))if("x"===b.charAt(1)){b=b.slice(2);var d=parseInt(b,16);c=d.toString(16)}else b=b.slice(1),d=parseInt(b,10),c=d.toString(10);b=b.replace(/^0+/,"");return c.toLowerCase()!==b?(r(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(d)}function G(a,b){"<"===b?(a.state=
u.OPEN_WAKA,a.startTagPosition=a.position):t(I,b)||(r(a,"Non-whitespace before first tag."),a.textNode=b,a.state=u.TEXT)}function e(a,b){var e="";b<a.length&&(e=a.charAt(b));return e}g.parser=function(b,e){return new a(b,e)};g.SAXParser=a;g.SAXStream=n;g.createStream=function(a,b){return new n(a,b)};g.MAX_BUFFER_LENGTH=65536;var y="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");g.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});Object.keys||(Object.keys=function(a){var b=[],e;for(e in a)a.hasOwnProperty(e)&&b.push(e);return b});a.prototype={end:function(){A(this)},write:function(a){if(this.error)throw this.error;if(this.closed)return d(this,"Cannot write after close. Assign an onready handler.");if(null===a)return A(this);"object"===typeof a&&(a=a.toString());for(var c=0,f;;){this.c=f=e(a,c++);if(!f)break;this.trackPosition&&(this.position++,
"\n"===f?(this.line++,this.column=0):this.column++);switch(this.state){case u.BEGIN:this.state=u.BEGIN_WHITESPACE;if("\ufeff"===f)continue;G(this,f);continue;case u.BEGIN_WHITESPACE:G(this,f);continue;case u.TEXT:if(this.sawRoot&&!this.closedRoot){for(var k=c-1;f&&"<"!==f&&"&"!==f;)(f=e(a,c++))&&this.trackPosition&&(this.position++,"\n"===f?(this.line++,this.column=0):this.column++);this.textNode+=a.substring(k,c-1)}"<"!==f||this.sawRoot&&this.closedRoot&&!this.strict?(t(I,f)||this.sawRoot&&!this.closedRoot||
r(this,"Text data outside of root node."),"&"===f?this.state=u.TEXT_ENTITY:this.textNode+=f):(this.state=u.OPEN_WAKA,this.startTagPosition=this.position);continue;case u.SCRIPT:"<"===f?this.state=u.SCRIPT_ENDING:this.script+=f;continue;case u.SCRIPT_ENDING:"/"===f?this.state=u.CLOSE_TAG:(this.script+="<"+f,this.state=u.SCRIPT);continue;case u.OPEN_WAKA:"!"===f?(this.state=u.SGML_DECL,this.sgmlDecl=""):t(I,f)||(t(K,f)?(this.state=u.OPEN_TAG,this.tagName=f):"/"===f?(this.state=u.CLOSE_TAG,this.tagName=
""):"?"===f?(this.state=u.PROC_INST,this.procInstName=this.procInstBody=""):(r(this,"Unencoded <"),this.startTagPosition+1<this.position&&(f=Array(this.position-this.startTagPosition).join(" ")+f),this.textNode+="<"+f,this.state=u.TEXT));continue;case u.SGML_DECL:(this.sgmlDecl+f).toUpperCase()===Q?(b(this,"onopencdata"),this.state=u.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+f?(this.state=u.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+f).toUpperCase()===L?(this.state=u.DOCTYPE,
(this.doctype||this.sawRoot)&&r(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===f?(b(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=u.TEXT):(t(H,f)&&(this.state=u.SGML_DECL_QUOTED),this.sgmlDecl+=f);continue;case u.SGML_DECL_QUOTED:f===this.q&&(this.state=u.SGML_DECL,this.q="");this.sgmlDecl+=f;continue;case u.DOCTYPE:">"===f?(this.state=u.TEXT,b(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=f,"["===f?this.state=u.DOCTYPE_DTD:
t(H,f)&&(this.state=u.DOCTYPE_QUOTED,this.q=f));continue;case u.DOCTYPE_QUOTED:this.doctype+=f;f===this.q&&(this.q="",this.state=u.DOCTYPE);continue;case u.DOCTYPE_DTD:this.doctype+=f;"]"===f?this.state=u.DOCTYPE:t(H,f)&&(this.state=u.DOCTYPE_DTD_QUOTED,this.q=f);continue;case u.DOCTYPE_DTD_QUOTED:this.doctype+=f;f===this.q&&(this.state=u.DOCTYPE_DTD,this.q="");continue;case u.COMMENT:"-"===f?this.state=u.COMMENT_ENDING:this.comment+=f;continue;case u.COMMENT_ENDING:"-"===f?(this.state=u.COMMENT_ENDED,
(this.comment=m(this.opt,this.comment))&&b(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+f,this.state=u.COMMENT);continue;case u.COMMENT_ENDED:">"!==f?(r(this,"Malformed comment"),this.comment+="--"+f,this.state=u.COMMENT):this.state=u.TEXT;continue;case u.CDATA:"]"===f?this.state=u.CDATA_ENDING:this.cdata+=f;continue;case u.CDATA_ENDING:"]"===f?this.state=u.CDATA_ENDING_2:(this.cdata+="]"+f,this.state=u.CDATA);continue;case u.CDATA_ENDING_2:">"===f?(this.cdata&&b(this,"oncdata",
this.cdata),b(this,"onclosecdata"),this.cdata="",this.state=u.TEXT):"]"===f?this.cdata+="]":(this.cdata+="]]"+f,this.state=u.CDATA);continue;case u.PROC_INST:"?"===f?this.state=u.PROC_INST_ENDING:t(I,f)?this.state=u.PROC_INST_BODY:this.procInstName+=f;continue;case u.PROC_INST_BODY:if(!this.procInstBody&&t(I,f))continue;else"?"===f?this.state=u.PROC_INST_ENDING:this.procInstBody+=f;continue;case u.PROC_INST_ENDING:">"===f?(b(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=u.TEXT):(this.procInstBody+="?"+f,this.state=u.PROC_INST_BODY);continue;case u.OPEN_TAG:if(t(R,f))this.tagName+=f;else{this.strict||(this.tagName=this.tagName[this.looseCase]());k=this.tags[this.tags.length-1]||this;var q=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(q.ns=k.ns);this.attribList.length=0;b(this,"onopentagstart",q);">"===f?D(this):"/"===f?this.state=u.OPEN_TAG_SLASH:(t(I,f)||r(this,"Invalid character in tag name"),this.state=
u.ATTRIB)}continue;case u.OPEN_TAG_SLASH:">"===f?(D(this,!0),z(this)):(r(this,"Forward-slash in opening tag not followed by >"),this.state=u.ATTRIB);continue;case u.ATTRIB:if(t(I,f))continue;else">"===f?D(this):"/"===f?this.state=u.OPEN_TAG_SLASH:t(K,f)?(this.attribName=f,this.attribValue="",this.state=u.ATTRIB_NAME):r(this,"Invalid attribute name");continue;case u.ATTRIB_NAME:"="===f?this.state=u.ATTRIB_VALUE:">"===f?(r(this,"Attribute without value"),this.attribValue=this.attribName,J(this),D(this)):
t(I,f)?this.state=u.ATTRIB_NAME_SAW_WHITE:t(R,f)?this.attribName+=f:r(this,"Invalid attribute name");continue;case u.ATTRIB_NAME_SAW_WHITE:if("="===f)this.state=u.ATTRIB_VALUE;else if(t(I,f))continue;else r(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",b(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===f?D(this):t(K,f)?(this.attribName=f,this.state=u.ATTRIB_NAME):(r(this,"Invalid attribute name"),this.state=u.ATTRIB);continue;
case u.ATTRIB_VALUE:if(t(I,f))continue;else t(H,f)?(this.q=f,this.state=u.ATTRIB_VALUE_QUOTED):(r(this,"Unquoted attribute value"),this.state=u.ATTRIB_VALUE_UNQUOTED,this.attribValue=f);continue;case u.ATTRIB_VALUE_QUOTED:if(f!==this.q){"&"===f?this.state=u.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=f;continue}J(this);this.q="";this.state=u.ATTRIB_VALUE_CLOSED;continue;case u.ATTRIB_VALUE_CLOSED:t(I,f)?this.state=u.ATTRIB:">"===f?D(this):"/"===f?this.state=u.OPEN_TAG_SLASH:t(K,f)?(r(this,"No whitespace between attributes"),
this.attribName=f,this.attribValue="",this.state=u.ATTRIB_NAME):r(this,"Invalid attribute name");continue;case u.ATTRIB_VALUE_UNQUOTED:if(!t(B,f)){"&"===f?this.state=u.ATTRIB_VALUE_ENTITY_U:this.attribValue+=f;continue}J(this);">"===f?D(this):this.state=u.ATTRIB;continue;case u.CLOSE_TAG:if(this.tagName)">"===f?z(this):t(R,f)?this.tagName+=f:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=u.SCRIPT):(t(I,f)||r(this,"Invalid tagname in closing tag"),this.state=u.CLOSE_TAG_SAW_WHITE);
else if(t(I,f))continue;else t(K,f)?this.tagName=f:this.script?(this.script+="</"+f,this.state=u.SCRIPT):r(this,"Invalid tagname in closing tag.");continue;case u.CLOSE_TAG_SAW_WHITE:if(t(I,f))continue;">"===f?z(this):r(this,"Invalid characters in closing tag");continue;case u.TEXT_ENTITY:case u.ATTRIB_VALUE_ENTITY_Q:case u.ATTRIB_VALUE_ENTITY_U:switch(this.state){case u.TEXT_ENTITY:var h=u.TEXT;var l="textNode";break;case u.ATTRIB_VALUE_ENTITY_Q:h=u.ATTRIB_VALUE_QUOTED;l="attribValue";break;case u.ATTRIB_VALUE_ENTITY_U:h=
u.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===f?(this[l]+=F(this),this.entity="",this.state=h):t(this.entity.length?V:U,f)?this.entity+=f:(r(this,"Invalid character in entity name"),this[l]+="&"+this.entity+f,this.entity="",this.state=h);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){a=Math.max(g.MAX_BUFFER_LENGTH,10);f=c=0;for(h=y.length;f<h;f++){l=this[y[f]].length;if(l>a)switch(y[f]){case "textNode":w(this);break;case "cdata":b(this,
"oncdata",this.cdata);this.cdata="";break;case "script":b(this,"onscript",this.script);this.script="";break;default:d(this,"Max buffer length exceeded: "+y[f])}c=Math.max(c,l)}this.bufferCheckPosition=g.MAX_BUFFER_LENGTH-c+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){w(this);""!==this.cdata&&(b(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(b(this,"onscript",this.script),this.script="")}};try{var k=
c("stream").Stream}catch(W){k=function(){}}var q=g.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});n.prototype=Object.create(k.prototype,{constructor:{value:n}});n.prototype.write=function(a){"function"===typeof h&&"function"===typeof h.isBuffer&&h.isBuffer(a)&&(this._decoder||(this._decoder=new (c("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());this.emit("data",a);return!0};n.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};n.prototype.on=function(a,b){var e=this;e._parser["on"+a]||-1===q.indexOf(a)||(e._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a);e.emit.apply(e,b)});return k.prototype.on.call(e,a,b)};var I="\r\n\t ",N="0124356789",S="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",H="'\"",B=I+">",Q="[CDATA[",L="DOCTYPE",M="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",p={xml:M,xmlns:f};I=l(I);N=l(N);S=l(S);
var K=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,R=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;H=l(H);B=l(B);var u=0;g.STATE={BEGIN:u++,BEGIN_WHITESPACE:u++,TEXT:u++,TEXT_ENTITY:u++,OPEN_WAKA:u++,SGML_DECL:u++,SGML_DECL_QUOTED:u++,DOCTYPE:u++,DOCTYPE_QUOTED:u++,DOCTYPE_DTD:u++,DOCTYPE_DTD_QUOTED:u++,COMMENT_STARTING:u++,COMMENT:u++,COMMENT_ENDING:u++,COMMENT_ENDED:u++,CDATA:u++,CDATA_ENDING:u++,CDATA_ENDING_2:u++,
PROC_INST:u++,PROC_INST_BODY:u++,PROC_INST_ENDING:u++,OPEN_TAG:u++,OPEN_TAG_SLASH:u++,ATTRIB:u++,ATTRIB_NAME:u++,ATTRIB_NAME_SAW_WHITE:u++,ATTRIB_VALUE:u++,ATTRIB_VALUE_QUOTED:u++,ATTRIB_VALUE_CLOSED:u++,ATTRIB_VALUE_UNQUOTED:u++,ATTRIB_VALUE_ENTITY_Q:u++,ATTRIB_VALUE_ENTITY_U:u++,CLOSE_TAG:u++,CLOSE_TAG_SAW_WHITE:u++,SCRIPT:u++,SCRIPT_ENDING:u++};g.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};g.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,
Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,
ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,
Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,
zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,
ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(g.ENTITIES).forEach(function(a){var b=g.ENTITIES[a];b="number"===
typeof b?String.fromCharCode(b):b;g.ENTITIES[a]=b});for(var T in g.STATE)g.STATE[g.STATE[T]]=T;u=g.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,b=Math.floor,e=function(){var e=[],c=-1,f=arguments.length;if(!f)return"";for(var d="";++c<f;){var k=Number(arguments[c]);if(!isFinite(k)||0>k||1114111<k||b(k)!==k)throw RangeError("Invalid code point: "+k);if(65535>=k)e.push(k);else{k-=65536;var g=(k>>10)+55296;k=k%1024+56320;e.push(g,k)}if(c+1===f||16384<e.length)d+=a.apply(null,e),e.length=
0}return d};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:e,configurable:!0,writable:!0}):String.fromCodePoint=e}()})("undefined"===typeof n?this.sax={}:n)}).call(this)}).call(this,c("buffer").Buffer)},{buffer:3,stream:5,string_decoder:25}],25:[function(c,v,n){function h(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;
default:if(b)return;a=(""+a).toLowerCase();b=!0}}function g(a){var c=h(a);if("string"!==typeof c&&(r.isEncoding===E||!E(a)))throw Error("Unknown encoding: "+a);this.encoding=c||a;switch(this.encoding){case "utf16le":this.text=t;this.end=b;a=4;break;case "utf8":this.fillLast=l;a=4;break;case "base64":this.text=w;this.end=m;a=3;break;default:this.write=d;this.end=A;return}this.lastTotal=this.lastNeed=0;this.lastChar=r.allocUnsafe(a)}function a(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===
a>>6?-1:-2}function x(b,c,d){var g=c.length-1;if(g<d)return 0;var m=a(c[g]);if(0<=m)return 0<m&&(b.lastNeed=m-1),m;if(--g<d||-2===m)return 0;m=a(c[g]);if(0<=m)return 0<m&&(b.lastNeed=m-2),m;if(--g<d||-2===m)return 0;m=a(c[g]);return 0<=m?(0<m&&(2===m?m=0:b.lastNeed=m-3),m):0}function l(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&
128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function t(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,
-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function b(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):a}function w(a,b){var c=(a.length-b)%3;if(0===c)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-
c)}function m(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function d(a){return a.toString(this.encoding)}function A(a){return a&&a.length?this.write(a):""}var r=c("safe-buffer").Buffer,E=r.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};n.StringDecoder=
g;g.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};g.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};g.prototype.text=function(a,b){var c=x(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",
b,c)};g.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":23}],26:[function(c,v,n){(function(c){(function(){function g(a){try{if(!c.localStorage)return!1}catch(x){return!1}a=c.localStorage[a];return null==a?!1:"true"===String(a).toLowerCase()}v.exports=function(a,
c){if(g("noDeprecation"))return a;var h=!1;return function(){if(!h){if(g("throwDeprecation"))throw Error(c);g("traceDeprecation")?console.trace(c):console.warn(c);h=!0}return a.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],27:[function(c,v,n){(function(c,g,a,n,l){function h(a,b){var e=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!e&&
b&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=b);else if(e&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],a.contents)for(var c=0;c<a.contents.length;c++)h(a.contents[c],e||b)}function b(a){if("contents"in a){var e="styleAttrs"in a?a.styleAttrs[n.byName.ruby.qname]:null;e="span"===a.kind&&("container"===e||"textContainer"===e||"baseContainer"===e);for(var c=a.contents.length-1;0<=c;c--)!e||"styleAttrs"in a.contents[c]&&
n.byName.ruby.qname in a.contents[c].styleAttrs?b(a.contents[c]):delete a.contents[c]}}function w(a,b,e,c){var f=c&&"seq"===c.timeContainer,d=0;c&&(d=f&&e?e.end:c.begin);b.begin=b.explicit_begin?b.explicit_begin+d:d;e=b.begin;c=null;for(var k in b.sets)b.sets.hasOwnProperty(k)&&(w(a,b.sets[k],c,b),e="seq"===b.timeContainer?b.sets[k].end:Math.max(e,b.sets[k].end),c=b.sets[k]);if("contents"in b)for(var g in b.contents)b.contents.hasOwnProperty(g)&&(w(a,b.contents[g],c,b),e="seq"===b.timeContainer?b.contents[g].end:
Math.max(e,b.contents[g].end),c=b.contents[g]);else e=f?b.begin:Number.POSITIVE_INFINITY;b.end=null!==b.explicit_end&&null!==b.explicit_dur?Math.min(b.begin+b.explicit_dur,d+b.explicit_end):null===b.explicit_end&&null!==b.explicit_dur?b.begin+b.explicit_dur:null!==b.explicit_end&&null===b.explicit_dur?d+b.explicit_end:e;delete b.explicit_begin;delete b.explicit_dur;delete b.explicit_end;a._registerEvent(b)}function m(a){this.node=a}function d(){this.events=[];this.head=new A;this.body=null}function A(){this.styling=
new r;this.layout=new D}function r(){this.styles={};this.initials={}}function v(){this.styleRefs=this.styleAttrs=this.id=null}function x(){this.styleAttrs=null}function D(){this.regions={}}function z(a,b){this.kind="image";this.src=a;this.type=b}function F(a){this.id=a}function G(a){this.regionID=a}function e(a){this.styleAttrs=a}function y(a){this.sets=a}function k(a){this.contents=a}function q(a,b,e){this.explicit_begin=a;this.explicit_end=b;this.explicit_dur=e}function I(){this.kind="body"}function N(){this.kind=
"div"}function S(){this.kind="p"}function H(){this.kind="span"}function B(){this.kind="span"}function Q(){this.kind="br"}function L(){}function M(){}function f(a){var b=null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(b=a.value||null);return b}function p(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function K(a,b){var e={};if(null!==a)for(var c in a.attributes)if(a.attributes.hasOwnProperty(c)){var f=a.attributes[c].uri+" "+a.attributes[c].local,d=n.byQName[f];if(void 0!==
d){var k=d.parse(a.attributes[c].value);null!==k?(e[f]=k,d===n.byName.zIndex&&P(b,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):C(b,"Cannot parse styling attribute "+f+" --\x3e "+a.attributes[c].value)}}return e}function R(a,b,e){for(var c in a.attributes)if(a.attributes.hasOwnProperty(c)&&a.attributes[c].uri===b&&a.attributes[c].local===e)return a.attributes[c].value;return null}function U(b,e){b=R(b,a.ns_tts,"extent");if(null===b)return null;var c=b.split(" ");
if(2!==c.length)return P(e,"Malformed extent (ignoring)"),null;b=l.parseLength(c[0]);c=l.parseLength(c[1]);return c&&b?{h:c,w:b}:(P(e,"Malformed extent values (ignoring)"),null)}function V(a,b,e){var c=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,f=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,d=/^(\d+(?:\.\d+)?)t$/,k=/^(\d+(?:\.\d+)?)ms$/,g=/^(\d+(?:\.\d+)?)s$/,m=/^(\d+(?:\.\d+)?)h$/,w=/^(\d+(?:\.\d+)?)m$/,h,q=null;null!==(h=/^(\d+(?:\.\d+)?)f$/.exec(e))?null!==b&&(q=parseFloat(h[1])/b):null!==(h=d.exec(e))?null!==
a&&(q=parseFloat(h[1])/a):null!==(h=k.exec(e))?q=parseFloat(h[1])/1E3:null!==(h=g.exec(e))?q=parseFloat(h[1]):null!==(h=m.exec(e))?q=3600*parseFloat(h[1]):null!==(h=w.exec(e))?q=60*parseFloat(h[1]):null!==(h=c.exec(e))?q=3600*parseInt(h[1])+60*parseInt(h[2])+parseFloat(h[3]):null!==(h=f.exec(e))&&null!==b&&(q=3600*parseInt(h[1])+60*parseInt(h[2])+parseInt(h[3])+(null===h[4]?0:parseInt(h[4])/b));return q}function u(a,b,e){for(;0<b.styleRefs.length;){var c=b.styleRefs.pop();c in a.styles?(u(a,a.styles[c],
e),W(a.styles[c].styleAttrs,b.styleAttrs)):C(e,"Non-existant style id referenced")}}function T(a,b,e,c){for(var f=b.length-1;0<=f;f--){var d=b[f];d in a.styles?W(a.styles[d].styleAttrs,e):C(c,"Non-existant style id referenced")}}function W(a,b){for(var e in a)!a.hasOwnProperty(e)||e in b||(b[e]=a[e])}function P(a,b){if(a&&a.warn&&a.warn(b))throw b;}function C(a,b){if(a&&a.error&&a.error(b))throw b;}function O(a,b){a&&a.fatal&&a.fatal(b);throw b;}function Y(a,b){for(var e=0,c=a.length-1,f;e<=c;){f=
Math.floor((e+c)/2);var d=a[f];if(d<b)e=f+1;else if(d>b)c=f-1;else return{found:!0,index:f}}return{found:!1,index:e}}c.fromXML=function(e,c,f){var k=g.parser(!0,{xmlns:!0}),q=[],y=[],l=[],p=0,t=null;k.onclosetag=function(b){if(q[0]instanceof L)null!==t.head&&null!==t.head.styling&&T(t.head.styling,q[0].styleRefs,q[0].styleAttrs,c),delete q[0].styleRefs;else if(q[0]instanceof r)for(var e in q[0].styles)q[0].styles.hasOwnProperty(e)&&u(q[0],q[0].styles[e],c);else if(q[0]instanceof S||q[0]instanceof
H){if(1<q[0].contents.length){b=[q[0].contents[0]];for(e=1;e<q[0].contents.length;e++)q[0].contents[e]instanceof B&&b[b.length-1]instanceof B?b[b.length-1].text+=q[0].contents[e].text:b.push(q[0].contents[e]);q[0].contents=b}q[0]instanceof H&&1===q[0].contents.length&&q[0].contents[0]instanceof B&&(q[0].text=q[0].contents[0].text,delete q[0].contents)}else if(q[0]instanceof m)if(q[0].node.uri===a.ns_tt&&"metadata"===q[0].node.local)p--;else if(0<p&&f&&"onCloseTag"in f)f.onCloseTag();l.shift();y.shift();
q.shift()};k.ontext=function(a){if(void 0!==q[0])if(q[0]instanceof H||q[0]instanceof S){if(q[0]instanceof H){var b=q[0].styleAttrs[n.byName.ruby.qname];if("container"===b||"textContainer"===b||"baseContainer"===b)return}b=new B;b.initFromText(t,q[0],a,y[0],l[0],c);q[0].contents.push(b)}else if(q[0]instanceof m&&0<p&&f&&"onText"in f)f.onText(a)};k.onopentag=function(b){function e(b){a.ttaf_map[b.uri]&&(b.uri=a.ttaf_map[b.uri])}var k=b.attributes["xml:space"];k?l.unshift(k.value):0===l.length?l.unshift("default"):
l.unshift(l[0]);(k=b.attributes["xml:lang"])?y.unshift(k.value):0===y.length?y.unshift(""):y.unshift(y[0]);e(b);if(b.attributes)for(var g in b.attributes)b.attributes.hasOwnProperty(g)&&e(b.attributes[g]);if(b.uri===a.ns_tt)if("tt"===b.local)null!==t&&O(c,"Two <tt> elements at ("+this.line+","+this.column+")"),t=new d,t.initFromNode(b,y[0],c),q.unshift(t);else if("head"===b.local)q[0]instanceof d||O(c,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),q.unshift(t.head);else if("styling"===
b.local)q[0]instanceof A||O(c,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),q.unshift(t.head.styling);else if("style"===b.local)if(q[0]instanceof r){var h=new v;h.initFromNode(b,c);h.id?t.head.styling.styles[h.id]=h:C(c,"<style> element missing @id attribute");q.unshift(h)}else q[0]instanceof L?(h=new v,h.initFromNode(b,c),W(h.styleAttrs,q[0].styleAttrs),q.unshift(h)):O(c,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");
else if("initial"===b.local)if(q[0]instanceof r){g=new x;g.initFromNode(b,c);for(h in g.styleAttrs)g.styleAttrs.hasOwnProperty(h)&&(t.head.styling.initials[h]=g.styleAttrs[h]);q.unshift(g)}else O(c,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===b.local)q[0]instanceof A||O(c,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),q.unshift(t.head.layout);else if("region"===b.local)q[0]instanceof D||O(c,"Parent of <region> element is not <layout> at "+
this.line+","+this.column+")"),h=new L,h.initFromNode(t,b,y[0],c),!h.id||h.id in t.head.layout.regions?C(c,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):t.head.layout.regions[h.id]=h,q.unshift(h);else if("body"===b.local)q[0]instanceof d||O(c,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==t.body&&O(c,"Second <body> element at "+this.line+","+this.column+")"),h=new I,h.initFromNode(t,b,y[0],c),t.body=h,q.unshift(h);else if("div"===
b.local){q[0]instanceof N||q[0]instanceof I||O(c,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");h=new N;h.initFromNode(t,q[0],b,y[0],c);if(g=h.styleAttrs[n.byName.backgroundImage.qname])h.contents.push(new z(g)),delete h.styleAttrs[n.byName.backgroundImage.qname];q[0].contents.push(h);q.unshift(h)}else"image"===b.local?(q[0]instanceof N||O(c,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),h=new z,h.initFromNode(t,q[0],b,y[0],c),q[0].contents.push(h),
q.unshift(h)):"p"===b.local?(q[0]instanceof N||O(c,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),h=new S,h.initFromNode(t,q[0],b,y[0],c),q[0].contents.push(h),q.unshift(h)):"span"===b.local?(q[0]instanceof H||q[0]instanceof S||O(c,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),h=new H,h.initFromNode(t,q[0],b,y[0],l[0],c),q[0].contents.push(h),q.unshift(h)):"br"===b.local?(q[0]instanceof H||q[0]instanceof S||O(c,"Parent of <br> element is not <span> or <p> at "+
this.line+","+this.column+")"),h=new Q,h.initFromNode(t,q[0],b,y[0],c),q[0].contents.push(h),q.unshift(h)):"set"===b.local?(q[0]instanceof H||q[0]instanceof S||q[0]instanceof N||q[0]instanceof I||q[0]instanceof L||q[0]instanceof Q||O(c,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),h=new M,h.initFromNode(t,q[0],b,c),q[0].sets.push(h),q.unshift(h)):q.unshift(new m(b));else q.unshift(new m(b));if(q[0]instanceof m)if(b.uri===a.ns_tt&&"metadata"===b.local)p++;
else if(0<p&&f&&"onOpenTag"in f){h=[];for(var w in b.attributes)b.attributes.hasOwnProperty(w)&&(h[b.attributes[w].uri+" "+b.attributes[w].local]={uri:b.attributes[w].uri,local:b.attributes[w].local,value:b.attributes[w].value});f.onOpenTag(b.uri,b.local,h)}};k.write(e).close();delete t.head.styling.styles;e=!1;for(var X in t.head.layout.regions)if(t.head.layout.regions.hasOwnProperty(X)){e=!0;break}e||(X=L.prototype.createDefaultRegion(t,c),t.head.layout.regions[X.id]=X);for(var Z in t.head.layout.regions)t.head.layout.regions.hasOwnProperty(Z)&&
w(t,t.head.layout.regions[Z],null,null);t.body&&w(t,t.body,null,null);t.body&&b(t.body);t.body&&h(t.body);return t};d.prototype.initFromNode=function(b,e,c){var f=R(b,a.ns_ttp,"cellResolution"),d=15;var k=32;null!==f&&(f=/(\d+) (\d+)/.exec(f),null!==f?(k=parseInt(f[1]),d=parseInt(f[2])):P(c,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new l.ComputedLength(0,1/d),w:new l.ComputedLength(1/k,0)};d=R(b,a.ns_ttp,"frameRate");f=30;null!==d&&(k=/(\d+)/.exec(d),null!==
k?f=parseInt(k[1]):P(c,"Malformed frame rate attribute (using initial value instead)"));k=R(b,a.ns_ttp,"frameRateMultiplier");var g=1;null!==k&&(k=/(\d+) (\d+)/.exec(k),null!==k?g=parseInt(k[1])/parseInt(k[2]):P(c,"Malformed frame rate multiplier attribute (using initial value instead)"));f*=g;g=1;k=R(b,a.ns_ttp,"tickRate");null===k?null!==d&&(g=f):(k=/(\d+)/.exec(k),null!==k?g=parseInt(k[1]):P(c,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=f;this.tickRate=
g;k=R(b,a.ns_ittp,"aspectRatio");null===k&&(k=R(b,a.ns_ttp,"displayAspectRatio"));d=null;null!==k&&(f=/(\d+)\s+(\d+)/.exec(k),null!==f?(k=parseInt(f[1]),f=parseInt(f[2]),0!==k&&0!==f?d=k/f:C(c,"Illegal aspectRatio values (ignoring)")):C(c,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=d;d=R(b,a.ns_ttp,"timeBase");null!==d&&"media"!==d&&O(c,"Unsupported time base");b=U(b,c);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||O(c,"Extent on TT must be in px or absent"),
this.pxLength={h:new l.ComputedLength(0,1/b.h.value),w:new l.ComputedLength(1/b.w.value,0)});this.dimensions={h:new l.ComputedLength(0,1),w:new l.ComputedLength(1,0)};this.lang=e};d.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var b=Y(this.events,a.begin);b.found||this.events.splice(b.index,0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(b=Y(this.events,a.end),b.found||this.events.splice(b.index,0,a.end))}};d.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-
1]]};d.prototype.getMediaTimeEvents=function(){return this.events};v.prototype.initFromNode=function(a,b){this.id=f(a);this.styleAttrs=K(a,b);this.styleRefs=p(a)};x.prototype.initFromNode=function(b,e){this.styleAttrs={};for(var c in b.attributes)!b.attributes.hasOwnProperty(c)||b.attributes[c].uri!==a.ns_itts&&b.attributes[c].uri!==a.ns_ebutts&&b.attributes[c].uri!==a.ns_tts||(this.styleAttrs[b.attributes[c].uri+" "+b.attributes[c].local]=b.attributes[c].value)};z.prototype.initFromNode=function(a,
b,c,f,d){(this.src="src"in c.attributes?c.attributes.src.value:null)||C(d,"Invalid image@src attribute");(this.type="type"in c.attributes?c.attributes.type.value:null)||C(d,"Invalid image@type attribute");e.prototype.initFromNode.call(this,a,b,c,d);q.prototype.initFromNode.call(this,a,b,c,d);y.prototype.initFromNode.call(this,a,b,c,d);G.prototype.initFromNode.call(this,a,b,c,d);this.lang=f};F.prototype.initFromNode=function(a,b,e,c){this.id=f(e)};G.prototype.initFromNode=function(a,b,e,c){this.regionID=
e&&"region"in e.attributes?e.attributes.region.value:""};e.prototype.initFromNode=function(a,b,e,c){this.styleAttrs=K(e,c);null!==a.head&&null!==a.head.styling&&T(a.head.styling,p(e),this.styleAttrs,c)};y.prototype.initFromNode=function(a,b,e,c){this.sets=[]};k.prototype.initFromNode=function(a,b,e,c){this.contents=[]};q.prototype.initFromNode=function(a,b,e,c){b=null;e&&"begin"in e.attributes&&(b=V(a.tickRate,a.effectiveFrameRate,e.attributes.begin.value),null===b&&P(c,"Malformed begin value "+e.attributes.begin.value+
" (using 0)"));var f=null;e&&"dur"in e.attributes&&(f=V(a.tickRate,a.effectiveFrameRate,e.attributes.dur.value),null===f&&P(c,"Malformed dur value "+e.attributes.dur.value+" (ignoring)"));var d=null;e&&"end"in e.attributes&&(d=V(a.tickRate,a.effectiveFrameRate,e.attributes.end.value),null===d&&P(c,"Malformed end value (ignoring)"));this.explicit_begin=b;this.explicit_end=d;this.explicit_dur=f;(a=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?c="seq":
(C(c,"Illegal value of timeContainer (assuming 'par')"),c="par"):c="par";this.timeContainer=c};I.prototype.initFromNode=function(a,b,c,f){e.prototype.initFromNode.call(this,a,null,b,f);q.prototype.initFromNode.call(this,a,null,b,f);y.prototype.initFromNode.call(this,a,null,b,f);G.prototype.initFromNode.call(this,a,null,b,f);k.prototype.initFromNode.call(this,a,null,b,f);this.lang=c};N.prototype.initFromNode=function(a,b,c,f,d){e.prototype.initFromNode.call(this,a,b,c,d);q.prototype.initFromNode.call(this,
a,b,c,d);y.prototype.initFromNode.call(this,a,b,c,d);G.prototype.initFromNode.call(this,a,b,c,d);k.prototype.initFromNode.call(this,a,b,c,d);this.lang=f};S.prototype.initFromNode=function(a,b,c,f,d){e.prototype.initFromNode.call(this,a,b,c,d);q.prototype.initFromNode.call(this,a,b,c,d);y.prototype.initFromNode.call(this,a,b,c,d);G.prototype.initFromNode.call(this,a,b,c,d);k.prototype.initFromNode.call(this,a,b,c,d);this.lang=f};H.prototype.initFromNode=function(a,b,c,f,d,g){e.prototype.initFromNode.call(this,
a,b,c,g);q.prototype.initFromNode.call(this,a,b,c,g);y.prototype.initFromNode.call(this,a,b,c,g);G.prototype.initFromNode.call(this,a,b,c,g);k.prototype.initFromNode.call(this,a,b,c,g);this.space=d;this.lang=f};B.prototype.initFromText=function(a,b,e,c,f,d){q.prototype.initFromNode.call(this,a,b,null,d);this.text=e;this.space=f;this.lang=c};Q.prototype.initFromNode=function(a,b,e,c,f){G.prototype.initFromNode.call(this,a,b,e,f);q.prototype.initFromNode.call(this,a,b,e,f);this.lang=c};L.prototype.createDefaultRegion=
function(a,b){var c=new L;c.id="";e.prototype.initFromNode.call(c,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",
value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",
isSelfClosing:!0},b);c.sets=[];q.call(c,0,Number.POSITIVE_INFINITY,null);this.lang=a.xmllang;return c};L.prototype.initFromNode=function(a,b,e,c){F.prototype.initFromNode.call(this,a,null,b,c);q.prototype.initFromNode.call(this,a,null,b,c);y.prototype.initFromNode.call(this,a,null,b,c);this.styleAttrs=K(b,c);this.styleRefs=p(b);this.lang=e};M.prototype.initFromNode=function(a,b,e,c){q.prototype.initFromNode.call(this,a,b,e,c);a=K(e,c);this.value=this.qname=null;for(var f in a)if(a.hasOwnProperty(f)){if(this.qname){C(c,
"More than one style specified on set");break}this.qname=f;this.value=a[f]}}})("undefined"===typeof n?this.imscDoc={}:n,"undefined"===typeof sax?c("sax"):sax,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33,sax:24}],28:[function(c,v,n){(function(c,g,a,n){function h(a){var b={};a=Object.entries(a);for(var e in a)if(a.hasOwnProperty(e)){var c=
n.parseColor(a[e][0]),d=n.parseColor(a[e][1]);c&&d&&(b[c.toString()]=d)}return b}function t(e,c,k,g){if("region"===k.kind){var h=document.createElement("div");h.style.position="absolute"}else if("body"===k.kind)h=document.createElement("div");else if("div"===k.kind)h=document.createElement("div");else if("image"===k.kind){if(h=document.createElement("img"),null!==e.imgResolver&&null!==k.src){var q=e.imgResolver(k.src,h);q&&(h.src=q);h.height=e.regionH;h.width=e.regionW}}else if("p"===k.kind)h=document.createElement("p");
else if("span"===k.kind)if("container"===k.styleAttrs[a.byName.ruby.qname])h=document.createElement("ruby"),e.ruby=!0;else if("base"===k.styleAttrs[a.byName.ruby.qname])h=document.createElement("rb");else if("text"===k.styleAttrs[a.byName.ruby.qname])h=document.createElement("rt");else if("baseContainer"===k.styleAttrs[a.byName.ruby.qname])h=document.createElement("rbc");else if("textContainer"===k.styleAttrs[a.byName.ruby.qname])h=document.createElement("rtc");else{if("delimiter"===k.styleAttrs[a.byName.ruby.qname])return;
h=document.createElement("span")}else"br"===k.kind&&(h=document.createElement("br"));if(h){!k.lang||"region"!==k.kind&&k.lang===g.lang||(h.lang=k.lang);c.appendChild(h);h.style.margin="0";if("region"===k.kind)if(c=k.styleAttrs[a.byName.writingMode.qname],"lrtb"===c||"lr"===c)e.ipd="lr",e.bpd="tb";else if("rltb"===c||"rl"===c)e.ipd="rl",e.bpd="tb";else if("tblr"===c)e.ipd="tb",e.bpd="lr";else{if("tbrl"===c||"tb"===c)e.ipd="tb",e.bpd="rl"}else"p"===k.kind&&"tb"===e.bpd&&(e.ipd="ltr"===k.styleAttrs[a.byName.direction.qname]?
"lr":"rl");for(var r in v)v.hasOwnProperty(r)&&(c=v[r],g=k.styleAttrs[c.qname],void 0!==g&&null!==c.map&&c.map(e,h,k,g));r=h;(c=k.styleAttrs[a.byName.linePadding.qname])&&!c.isZero()&&(g=c.multiply(c.toUsedLength(e.w,e.h),e.options.sizeAdjust),0<g&&(g=Math.ceil(g)+"px","tb"===e.bpd?(r.style.paddingLeft=g,r.style.paddingRight=g):(r.style.paddingTop=g,r.style.paddingBottom=g),e.removePaddingElement=r,e.lp=c));(c=k.styleAttrs[a.byName.multiRowAlign.qname])&&"auto"!==c&&(r=document.createElement("span"),
r.style.display="inline-block",r.style.textAlign=c,h.appendChild(r),e.mra=c);(c=k.styleAttrs[a.byName.rubyReserve.qname])&&"none"!==c[0]&&(e.rubyReserve=c);k.styleAttrs[a.byName.fillLineGap.qname]&&(e.flg=!0);if("span"===k.kind&&k.text)if((c=k.styleAttrs[a.byName.textEmphasis.qname])&&"none"!==c.style&&(e.textEmphasis=!0),a.byName.textCombine.qname in k.styleAttrs&&"all"===k.styleAttrs[a.byName.textCombine.qname])h.textContent=k.text,c&&A(e,h,k,c);else for(g="",q=0;q<k.text.length;q++){g+=k.text.charAt(q);
var l=k.text.charCodeAt(q);if(55296>l||56319<l||q===k.text.length-1)l=document.createElement("span"),l.textContent=g,c&&A(e,l,k,c),h.appendChild(l),g="",l._isd_element=k}for(var n in k.contents)k.contents.hasOwnProperty(n)&&t(e,r,k.contents[n],k);n=[];if("p"===k.kind){d(e,r,n,null);if(e.rubyReserve){for(c=0;c<n.length;c++){g=document.createElement("ruby");q=document.createElement("rb");q.textContent="\u200b";g.appendChild(q);var y=e.rubyReserve[1].toUsedLength(e.w,e.h)+"px";"both"===e.rubyReserve[0]||
"outside"===e.rubyReserve[0]&&1==n.length?(q=document.createElement("rtc"),q.style[z]=D?"after":"under",q.textContent="\u200b",q.style.fontSize=y,l=document.createElement("rtc"),l.style[z]=D?"before":"over",l.textContent="\u200b",l.style.fontSize=y,g.appendChild(q),g.appendChild(l)):(q=document.createElement("rtc"),q.textContent="\u200b",q.style.fontSize=y,q.style[z]="after"===e.rubyReserve[0]||"outside"===e.rubyReserve[0]&&0<c?D?"after":"tb"===e.bpd||"rl"===e.bpd?"under":"over":D?"before":"tb"===
e.bpd||"rl"===e.bpd?"over":"under",g.appendChild(q));q=null;for(l=0;l<n[c].rbc.length;l++)if("ruby"===n[c].rbc[l].localName){q=n[c].rbc[l];for(l=0;l<q.style.length;l++)g.style.setProperty(q.style.item(l),q.style.getPropertyValue(q.style.item(l)));break}q=q||n[c].elements[0].node;q.parentElement.insertBefore(g,q)}e.rubyReserve=null}if(e.ruby||e.rubyReserve){for(c=0;c<n.length;c++)for(g=0;g<n[c].rbc.length;g++)n[c].rbc[g].style[z]||(n[c].rbc[g].style[z]=D?0===c?"before":"after":"tb"===e.bpd?0===c?"over":
"under":"rl"===e.bpd?0===c?"over":"under":0===c?"under":"over");e.ruby=null}if(e.textEmphasis){for(c=0;c<n.length;c++)for(g=0;g<n[c].te.length;g++)n[c].te[g].style[G]&&"none"!==n[c].te[g].style[G]||(n[c].te[g].style[G]="tb"===e.bpd?0===c?"left over":"left under":"rl"===e.bpd?0===c?"right under":"left under":0===c?"left under":"right under");e.textEmphasis=null}if(e.mra){for(c=0;c<n.length-1;c++)q=n[c].elements.length,0!==q&&!1===n[c].br&&(g=document.createElement("br"),q=n[c].elements[q-1].node,q.parentElement.insertBefore(g,
q.nextSibling));e.mra=null}if(e.lp){c=e.lp.multiply(e.lp.toUsedLength(e.w,e.h),e.options.sizeAdjust);for(g=0;g<n.length;g++)if(q=Math.ceil(c)+"px",l="-"+Math.ceil(c)+"px",0!==n[g].elements.length){y=n[g].elements[n[g].start_elem];var x=n[g].elements[n[g].end_elem];if(y===x&&(elementBoundingRect=y.node.getBoundingClientRect(),0==elementBoundingRect.width||0==elementBoundingRect.height))continue;"lr"===e.ipd?(y.node.marginLeft=l,y.node.style.paddingLeft=q):"rl"===e.ipd?(y.node.style.paddingRight=q,
y.node.style.marginRight=l):"tb"===e.ipd&&(y.node.style.paddingTop=q,y.node.style.marginTop=l);"lr"===e.ipd?(x.node.style.paddingRight=q,x.node.style.marginRight=l):"rl"===e.ipd?(x.node.style.paddingLeft=q,x.node.style.marginLeft=l):"tb"===e.ipd&&(x.node.style.paddingBottom=q,x.node.style.marginBottom=l)}"tb"===e.bpd?(e.removePaddingElement.style.paddingLeft=0,e.removePaddingElement.style.paddingRight=0):(e.removePaddingElement.style.paddingTop=0,e.removePaddingElement.style.paddingBottom=0);e.lp=
null}for(c=0;c<n.length;c++)for(g=n[c],q=1;q<g.elements.length;){l=g.elements[q-1].node;y=g.elements[q].node;if("SPAN"===l.tagName&&"SPAN"===y.tagName&&l._isd_element===y._isd_element){l.textContent+=y.textContent;for(x=0;x<y.style.length;x++){var E=y.style[x];if(0<=E.indexOf("border")||0<=E.indexOf("padding"))l.style[E]=y.style[E]}y.parentElement.removeChild(y);l=!0}else l=!1;l?g.elements.splice(q,1):q++}c=[];for(l=0;l<n.length;l++)for(y=0;y<n[l].elements.length;y++)if(g=n[l].elements[y].node,q=
b(g,c,!1))g.style.backgroundColor=q;for(g=0;g<c.length;g++)c[g].style.backgroundColor="";if(e.flg){g=m(r.getBoundingClientRect(),e);c=g.before;g=g.after;q=Math.sign(g-c);for(l=0;l<=n.length;l++){y=0===l?Math.round(c):l===n.length?Math.round(g):Math.round((n[l-1].after+n[l].before)/2);if(0<l&&n[l-1])for(E=0;E<n[l-1].elements.length;E++){var f=n[l-1].elements[E];x=q*(y-f.after)+"px";"lr"===e.bpd?f.node.style.paddingRight=x:"rl"===e.bpd?f.node.style.paddingLeft=x:"tb"===e.bpd&&(f.node.style.paddingBottom=
x)}if(l<n.length)for(E=0;E<n[l].elements.length;E++)f=n[l].elements[E],x=q*(f.before-y)+"px","lr"===e.bpd?f.node.style.paddingLeft=x:"rl"===e.bpd?f.node.style.paddingRight=x:"tb"===e.bpd&&(f.node.style.paddingTop=x)}e.flg=null}}"region"===k.kind&&"tb"===e.bpd&&e.enableRollUp&&0<k.contents.length&&"after"===k.styleAttrs[a.byName.displayAlign.qname]&&(d(e,r,n,null),k=new w(""===k.id?"_":k.id,n),e.currentISDState[k.id]=k,e.previousISDState&&k.id in e.previousISDState&&0<e.previousISDState[k.id].plist.length&&
1<k.plist.length&&k.plist[k.plist.length-2].text===e.previousISDState[k.id].plist[e.previousISDState[k.id].plist.length-1].text&&(e=h.firstElementChild,k=k.plist[k.plist.length-1].after-k.plist[k.plist.length-1].before,e.style.bottom="-"+k+"px",e.style.transition="transform 0.4s",e.style.position="relative",e.style.transform="translateY(-"+k+"px)"))}else if(e=e.errorHandler,k="Error processing ISD element kind: "+k.kind,e&&e.error&&e.error(k))throw k;}function b(a,c,d){if(a.style.backgroundColor)return d&&
!c.includes(a)&&c.push(a),a.style.backgroundColor;if("SPAN"===a.parentElement.nodeName)return b(a.parentElement,c,!0)}function w(a,b){this.id=a;this.plist=b}function m(a,b){var c={before:null,after:null,start:null,end:null};"tb"===b.bpd?(c.before=a.top,c.after=a.bottom,"lr"===b.ipd?(c.start=a.left,c.end=a.right):(c.start=a.right,c.end=a.left)):"lr"===b.bpd?(c.before=a.left,c.after=a.right,c.start=a.top,c.end=a.bottom):"rl"===b.bpd&&(c.before=a.right,c.after=a.left,c.start=a.top,c.end=a.bottom);return c}
function d(a,b,c,g){if("rt"!==b.localName&&"rtc"!==b.localName)if(g=b.style.backgroundColor||g,0===b.childElementCount)if("span"===b.localName||"rb"===b.localName){var e=b.getBoundingClientRect();a=m(e,a);if(!(e=0===c.length)){e=a.before;var k=a.after,h=c[c.length-1].before,q=c[c.length-1].after;e=!(k<q&&e>h||q<=k&&h>=e)}e?c.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(e=Math.sign(a.after-a.before),k=Math.sign(a.end-
a.start),0>e*(a.before-c[c.length-1].before)&&(c[c.length-1].before=a.before),0<e*(a.after-c[c.length-1].after)&&(c[c.length-1].after=a.after),0>k*(a.start-c[c.length-1].start)&&(c[c.length-1].start=a.start,c[c.length-1].start_elem=c[c.length-1].elements.length),0<k*(a.end-c[c.length-1].end)&&(c[c.length-1].end=a.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=b.textContent;c[c.length-1].elements.push({node:b,bgcolor:g,before:a.before,after:a.after})}else"br"===b.localName&&
0!==c.length&&(c[c.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(d(a,b,c,g),"ruby"===b.localName||"rtc"===b.localName?0<c.length&&c[c.length-1].rbc.push(b):"span"===b.localName&&b.style[F]&&"none"!==b.style[F]&&0<c.length&&c[c.length-1].te.push(b)),b=b.nextSibling}function A(a,b,c,d){"none"!==d.style&&(b.style[F]="auto"===d.style?"filled":d.style+" "+d.symbol,"before"===d.position||"after"===d.position)&&(b.style[G]="tb"===a.bpd?"before"===d.position?"left over":"left under":
"rl"===a.bpd?"before"===d.position?"right under":"left under":"before"===d.position?"left under":"right under")}function r(a,b){this.qname=a;this.map=b}c.render=function(a,b,c,d,g,m,w,l,r,n){d=d||b.clientHeight;var e=g||b.clientWidth;null!==a.aspectRatio&&(g=d*a.aspectRatio,g>e?d=Math.round(e/a.aspectRatio):e=g);g=document.createElement("div");g.style.position="relative";g.style.width=e+"px";g.style.height=d+"px";g.style.margin="auto";g.style.top=0;g.style.bottom=0;g.style.left=0;g.style.right=0;
g.style.zIndex=0;c={h:d,w:e,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:m||!1,isd:a,errorHandler:w,previousISDState:l,enableRollUp:r||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},n)||{}};c.options.colorAdjust&&(c.options.colorAdjust=h(c.options.colorAdjust));m=["region","body","div","p","span"];for(var k in m)m.hasOwnProperty(k)&&(w=m[k]+"BackgroundColorAdjust",c.options[w]&&(c.options[w]=
h(c.options[w])));b.appendChild(g);for(var f in a.contents)a.contents.hasOwnProperty(f)&&t(c,g,a.contents[f],a);return c.currentISDState};var v=[new r("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,c,d){(c=(c=a.options[c.kind+"BackgroundColorAdjust"])&&c[d.toString()])&&(d=c);c=d[3];0!==c&&(void 0!=a.options.backgroundOpacityScale&&(c*=a.options.backgroundOpacityScale),b.style.backgroundColor="rgba("+d[0].toString()+","+d[1].toString()+","+d[2].toString()+","+(c/255).toString()+
")")}),new r("http://www.w3.org/ns/ttml#styling color",function(a,b,c,d){c=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=a[d.toString()])&&(d=a);b.style.color="rgba("+d[0].toString()+","+d[1].toString()+","+d[2].toString()+","+(c*d[3]/255).toString()+")"}),new r("http://www.w3.org/ns/ttml#styling direction",function(a,b,c,d){b.style.direction=d}),new r("http://www.w3.org/ns/ttml#styling display",function(a,b,c,d){}),new r("http://www.w3.org/ns/ttml#styling displayAlign",function(a,
b,c,d){b.style.display="flex";b.style.flexDirection="column";"before"===d?b.style.justifyContent="flex-start":"center"===d?b.style.justifyContent="center":"after"===d&&(b.style.justifyContent="flex-end")}),new r("http://www.w3.org/ns/ttml#styling extent",function(a,b,c,d){a.regionH=d.h.toUsedLength(a.w,a.h);a.regionW=d.w.toUsedLength(a.w,a.h);var e=d=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])d=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),e=c[1].toUsedLength(a.w,a.h)+
c[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-d+"px";b.style.width=a.regionW-e+"px"}),new r("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,c,d){c=[];a.options.fontFamily&&(d=a.options.fontFamily.split(","));for(var e in d)d[e].hasOwnProperty(e)&&(d[e]=d[e].trim(),"monospaceSerif"===d[e]?(c.push("Courier New"),c.push('"Liberation Mono"'),c.push("Courier"),c.push("monospace")):"proportionalSansSerif"===d[e]||"default"===d[e]?(c.push("Arial"),c.push("Helvetica"),c.push('"Liberation Sans"'),
c.push("sans-serif")):"monospace"===d[e]?c.push("monospace"):"sansSerif"===d[e]?c.push("sans-serif"):"serif"===d[e]?c.push("serif"):"monospaceSansSerif"===d[e]?(c.push("Consolas"),c.push("monospace")):"proportionalSerif"===d[e]?c.push("serif"):c.push(d[e]));if(0<c.length){a=[c[0]];for(d=1;d<c.length;d++)-1==a.indexOf(c[d])&&a.push(c[d]);c=a}b.style.fontFamily=c.join(",")}),new r("http://www.w3.org/ns/ttml#styling shear",function(a,b,c,d){0!==d&&(c=-.9*d,b.style.transform="tb"===a.bpd?"skewX("+c+"deg)":
"skewY("+c+"deg)")}),new r("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,c,d){b.style.fontSize=d.multiply(d.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new r("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,c,d){b.style.fontStyle=d}),new r("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,c,d){b.style.fontWeight=d}),new r("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,c,d){b.style.lineHeight="normal"===d?"normal":d.multiply(d.multiply(d.toUsedLength(a.w,
a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new r("http://www.w3.org/ns/ttml#styling opacity",function(a,b,c,d){c=d;void 0!=a.options.regionOpacityScale&&(c*=a.options.regionOpacityScale);b.style.opacity=c}),new r("http://www.w3.org/ns/ttml#styling origin",function(a,b,c,d){b.style.top=d.h.toUsedLength(a.w,a.h)+"px";b.style.left=d.w.toUsedLength(a.w,a.h)+"px"}),new r("http://www.w3.org/ns/ttml#styling overflow",function(a,b,c,d){b.style.overflow=d}),new r("http://www.w3.org/ns/ttml#styling padding",
function(a,b,c,d){c=[];c[0]=d[0].toUsedLength(a.w,a.h)+"px";c[1]=d[3].toUsedLength(a.w,a.h)+"px";c[2]=d[2].toUsedLength(a.w,a.h)+"px";c[3]=d[1].toUsedLength(a.w,a.h)+"px";b.style.padding=c.join(" ")}),new r("http://www.w3.org/ns/ttml#styling position",function(a,b,c,d){b.style.top=d.h.toUsedLength(a.w,a.h)+"px";b.style.left=d.w.toUsedLength(a.w,a.h)+"px"}),new r("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,c,d){b.style.rubyAlign="spaceAround"===d?"space-around":"center"}),new r("http://www.w3.org/ns/ttml#styling rubyPosition",
function(a,b,c,d){if("before"===d||"after"===d)b.parentElement.style[z]=D?d:"tb"===a.bpd?"before"===d?"over":"under":"rl"===a.bpd?"before"===d?"over":"under":"before"===d?"under":"over"}),new r("http://www.w3.org/ns/ttml#styling showBackground",null),new r("http://www.w3.org/ns/ttml#styling textAlign",function(a,b,c,d){b.style.textAlign="start"===d?"rl"===a.ipd?"right":"left":"end"===d?"rl"===a.ipd?"left":"right":d}),new r("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,c,d){b.style.textDecoration=
d.join(" ").replace("lineThrough","line-through")}),new r("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,c,d){}),new r("http://www.w3.org/ns/ttml#styling textShadow",function(b,c,d,g){d=d.styleAttrs[a.byName.textOutline.qname];var e=b.options.textOutline;if(e)if("none"===e)d=e;else{var h={};e=e.split(" ");if(0!==e.length&&2>=e.length){var k=n.parseColor(e[0]);h.color=k;null!==k&&e.shift();1===e.length&&(e=n.parseLength(e[0]))&&(h.thickness=e,d=h)}}if("none"===g&&"none"===d)c.style.textShadow=
"";else{h=[];"none"!==d&&(d="rgba("+d.color[0].toString()+","+d.color[1].toString()+","+d.color[2].toString()+","+(d.color[3]/255).toString()+")",h.push("1px 1px 1px "+d),h.push("-1px 1px 1px "+d),h.push("1px -1px 1px "+d),h.push("-1px -1px 1px "+d));if("none"!==g)for(var m in g)g.hasOwnProperty(m)&&h.push(g[m].x_off.toUsedLength(b.w,b.h)+"px "+g[m].y_off.toUsedLength(b.w,b.h)+"px "+g[m].b_radius.toUsedLength(b.w,b.h)+"px rgba("+g[m].color[0].toString()+","+g[m].color[1].toString()+","+g[m].color[2].toString()+
","+(g[m].color[3]/255).toString()+")");c.style.textShadow=h.join(",")}}),new r("http://www.w3.org/ns/ttml#styling textCombine",function(a,b,c,d){b.style.textCombineUpright=d}),new r("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,c,d){}),new r("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,c,d){b.style.unicodeBidi="bidiOverride"===d?"bidi-override":d}),new r("http://www.w3.org/ns/ttml#styling visibility",function(a,b,c,d){b.style.visibility=d}),new r("http://www.w3.org/ns/ttml#styling wrapOption",
function(a,b,c,d){b.style.whiteSpace="wrap"===d?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new r("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,c,d){if("lrtb"===d||"lr"===d)b.style.writingMode="horizontal-tb";else if("rltb"===d||"rl"===d)b.style.writingMode="horizontal-tb";else if("tblr"===d)b.style.writingMode="vertical-lr";else if("tbrl"===d||"tb"===d)b.style.writingMode="vertical-rl"}),new r("http://www.w3.org/ns/ttml#styling zIndex",function(a,
b,c,d){b.style.zIndex=d}),new r("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,c,d){a.displayForcedOnlyMode&&!1===d&&(b.style.visibility="hidden")})],x;for(x in v)v.hasOwnProperty(x);var D="webkitRubyPosition"in window.getComputedStyle(document.documentElement),z=D?"webkitRubyPosition":"rubyPosition",F="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",G="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?
"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof n?this.imscHTML={}:n,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33}],29:[function(c,v,n){(function(c,g,a,n){function h(c,g,m,l,v,A,G,e,y){if(g<G.begin||g>=G.end)return null;A="regionID"in G&&""!==G.regionID?G.regionID:A;if(null!==v&&A!==m.id&&(!("contents"in G)||"contents"in
G&&0===G.contents.length||""!==A))return null;var k=new d(G);for(r in G.sets)!G.sets.hasOwnProperty(r)||g<G.sets[r].begin||g>=G.sets[r].end||(k.styleAttrs[G.sets[r].qname]=G.sets[r].value);var r={};for(var z in k.styleAttrs)if(k.styleAttrs.hasOwnProperty(z)&&(r[z]=!0,"region"===k.kind&&z===a.byName.writingMode.qname&&!(a.byName.direction.qname in k.styleAttrs))){var D=k.styleAttrs[z];if("lrtb"===D||"lr"===D)k.styleAttrs[a.byName.direction.qname]="ltr";else if("rltb"===D||"rl"===D)k.styleAttrs[a.byName.direction.qname]=
"rtl"}if(null!==v)for(var E in a.all)if(a.all.hasOwnProperty(E))if(z=a.all[E],z.qname===a.byName.textDecoration.qname){D=v.styleAttrs[z.qname];var H=k.styleAttrs[z.qname],B=[];void 0===H?B=D:-1===H.indexOf("none")?((-1===H.indexOf("noUnderline")&&-1!==D.indexOf("underline")||-1!==H.indexOf("underline"))&&B.push("underline"),(-1===H.indexOf("noLineThrough")&&-1!==D.indexOf("lineThrough")||-1!==H.indexOf("lineThrough"))&&B.push("lineThrough"),(-1===H.indexOf("noOverline")&&-1!==D.indexOf("overline")||
-1!==H.indexOf("overline"))&&B.push("overline")):B.push("none");k.styleAttrs[z.qname]=B}else z.qname!==a.byName.fontSize.qname||z.qname in k.styleAttrs||"span"!==k.kind||"textContainer"!==k.styleAttrs[a.byName.ruby.qname]?z.qname!==a.byName.fontSize.qname||z.qname in k.styleAttrs||"span"!==k.kind||"text"!==k.styleAttrs[a.byName.ruby.qname]?z.inherit&&z.qname in v.styleAttrs&&!(z.qname in k.styleAttrs)&&(k.styleAttrs[z.qname]=v.styleAttrs[z.qname]):(D=v.styleAttrs[a.byName.fontSize.qname],k.styleAttrs[z.qname]=
"textContainer"===v.styleAttrs[a.byName.ruby.qname]?D:new n.ComputedLength(.5*D.rw,.5*D.rh)):(D=v.styleAttrs[a.byName.fontSize.qname],k.styleAttrs[z.qname]=new n.ComputedLength(.5*D.rw,.5*D.rh));for(var F in a.all)if(a.all.hasOwnProperty(F)&&(E=a.all[F],!(E.qname in k.styleAttrs||E.qname===a.byName.position.qname&&a.byName.origin.qname in k.styleAttrs||E.qname===a.byName.origin.qname&&a.byName.position.qname in k.styleAttrs)&&(z=c.head.styling.initials[E.qname]||E.initial,null!==z&&("region"===k.kind||
!1===E.inherit&&null!==z))))if(z=E.parse(z),null!==z)k.styleAttrs[E.qname]=z,r[E.qname]=!0;else if(E="Invalid initial value for '"+E.qname+"' on element '"+k.kind,e&&e.error&&e.error(E))throw E;for(var J in a.all)if(a.all.hasOwnProperty(J)&&(F=a.all[J],F.qname in r&&null!==F.compute))if(E=F.compute(c,v,k,k.styleAttrs[F.qname],y),null!==E)k.styleAttrs[F.qname]=E;else if(k.styleAttrs[F.qname]=F.compute(c,v,k,F.parse(F.initial),y),F="Style '"+F.qname+"' on element '"+k.kind+"' cannot be computed",e&&
e.error&&e.error(F))throw F;if("none"===k.styleAttrs[a.byName.display.qname])return null;if(null===v)var M=null===l?[]:[l];else"contents"in G&&(M=G.contents);for(var f in M)M.hasOwnProperty(f)&&(v=h(c,g,m,l,k,A,M[f],e,y),null!==v&&k.contents.push(v.element));for(var p in k.styleAttrs)k.styleAttrs.hasOwnProperty(p)&&(c=!1,"span"===k.kind&&(g=k.styleAttrs[a.byName.ruby.qname],(c=("container"===g||"textContainer"===g||"baseContainer"===g)&&-1!==x.indexOf(p))||(c="container"!==g&&p===a.byName.rubyAlign.qname),
c||(c=!("textContainer"===g||"text"===g)&&p===a.byName.rubyPosition.qname)),c||(c=-1===a.byQName[p].applies.indexOf(k.kind)),c&&delete k.styleAttrs[p]);p=k.styleAttrs[a.byName.ruby.qname];if("p"===k.kind||"span"===k.kind&&("textContainer"===p||"text"===p))p=[],b(k,p),t(p),w(k);return"div"===k.kind&&a.byName.backgroundImage.qname in k.styleAttrs||"br"===k.kind||"image"===k.kind||"contents"in k&&0<k.contents.length||"span"===k.kind&&null!==k.text||"region"===k.kind&&"always"===k.styleAttrs[a.byName.showBackground.qname]?
{region_id:A,element:k}:null}function t(a){function b(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function c(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var d,g=0;g<a.length;)if(d=a[g],"br"===d.kind||"preserve"===d.space)g++;else{var h=d.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(h)&&(0===g||b(a[g-1]))&&(h=h.substring(1));d.text=h;0===h.length?a.splice(g,1):g++}for(g=0;g<a.length;g++)d=a[g],"br"===d.kind||"preserve"===d.space?g++:/[ ]$/.test(d.text)&&(g===a.length-
1||c(a[g+1]))&&(d.text=d.text.slice(0,-1))}function b(c,d){for(var g in c.contents)if(c.contents.hasOwnProperty(g)){var h=c.contents[g],m=h.styleAttrs[a.byName.ruby.qname];if("span"!==h.kind||"textContainer"!==m&&"text"!==m)"contents"in h?b(h,d):("span"===h.kind&&0!==h.text.length||"br"===h.kind)&&d.push(h)}}function w(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)w(a.contents[b])&&a.contents.splice(b,1);return 0===a.contents.length}}
function m(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=a.lang}function d(a){this.kind=a.kind||"region";this.lang=a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)a.styleAttrs.hasOwnProperty(b)&&(this.styleAttrs[b]=a.styleAttrs[b]);"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}c.generateISD=function(b,c,d){function g(a,
b){function c(b){return!(a<b.begin||a>=b.end)}if(b.contents){var d={},h;for(h in b)b.hasOwnProperty(h)&&(d[h]=b[h]);d.contents=[];b.contents.filter(c).forEach(function(b){b=g(a,b);b.regionID&&(e[b.regionID]=!0);null!==b&&d.contents.push(b)});return d}return b}var w=new m(b),l={},n={},e={};n=b.head.styling.initials[a.byName.showBackground.qname];var r=b.head.styling.initials[a.byName.backgroundColor.qname];for(x in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(x)){var k=b.head.layout.regions[x],
q=k.styleAttrs[a.byName.showBackground.qname]||n,t=k.styleAttrs[a.byName.backgroundColor.qname]||r;e[k.id]=("always"===q||void 0===q)&&void 0!==t&&!(c<k.begin||c>=k.end)}b.body&&b.body.regionID&&(e[b.body.regionID]=!0);n=null!==b.body?g(c,b.body):null;void 0!==e[""]&&(e[""]=!0);for(var v in e)if(e[v]){var x=h(b,c,b.head.layout.regions[v],n,null,"",b.head.layout.regions[v],d,l);null!==x&&w.contents.push(x.element)}return w};var x=[a.byName.color.qname,a.byName.textCombine.qname,a.byName.textDecoration.qname,
a.byName.textEmphasis.qname,a.byName.textOutline.qname,a.byName.textShadow.qname]})("undefined"===typeof n?this.imscISD={}:n,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33}],30:[function(c,v,n){n.generateISD=c("./isd").generateISD;n.fromXML=c("./doc").fromXML;n.renderHTML=c("./html").render},{"./doc":27,"./html":28,"./isd":29}],31:[function(c,
v,n){c="undefined"===typeof n?this.imscNames={}:n;c.ns_tt="http://www.w3.org/ns/ttml";c.ns_tts="http://www.w3.org/ns/ttml#styling";c.ns_ttp="http://www.w3.org/ns/ttml#parameter";c.ns_xml="http://www.w3.org/XML/1998/namespace";c.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";c.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";c.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";c.ns_ebutts="urn:ebu:tt:style";c.ttaf_map={"http://www.w3.org/2006/10/ttaf1":c.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":c.ns_tts,
"http://www.w3.org/2006/10/ttaf1#parameter":c.ns_ttp}},{}],32:[function(c,v,n){(function(c,g,a){function h(a,c,g,d,h,l,n,t){this.name=c;this.ns=a;this.qname=a+" "+c;this.inherit=h;this.animatable=l;this.initial=g;this.applies=d;this.parse=n;this.compute=t}c.all=[new h(g.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new h(g.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new h(g.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},
null),new h(g.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new h(g.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new h(g.ns_tts,"extent","auto",["tt","region"],!1,!0,function(b){if("auto"===b)return b;var c=b.split(" ");if(2!==c.length)return null;b=a.parseLength(c[0]);return(c=a.parseLength(c[1]))&&b?{h:c,w:b}:null},function(b,c,g,d,h){if("auto"===d)c=new a.ComputedLength(0,1);else if(c=a.toComputedLength(d.h.value,d.h.unit,
null,b.dimensions.h,null,b.pxLength.h),null===c)return null;if("auto"===d)b=new a.ComputedLength(1,0);else if(b=a.toComputedLength(d.w.value,d.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:c,w:b}}),new h(g.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(a){a=a.split(",");for(var b=[],c=0;c<a.length;c++)"'"!==a[c].charAt(0)&&'"'!==a[c].charAt(0)?"default"===a[c]?b.push("monospaceSerif"):b.push(a[c]):b.push(a[c]);return b},null),new h(g.ns_tts,"shear","0%",["p"],
!0,!0,a.parseLength,function(a,c,g,d){if("%"===d.unit)a=100<Math.abs(d.value)?100*Math.sign(d.value):d.value;else return null;return a}),new h(g.ns_tts,"fontSize","1c",["span","p"],!0,!0,a.parseLength,function(b,g,h,d,l){return a.toComputedLength(d.value,d.unit,null!==g?g.styleAttrs[c.byName.fontSize.qname]:b.cellLength.h,null!==g?g.styleAttrs[c.byName.fontSize.qname]:b.cellLength.h,b.cellLength.h,b.pxLength.h)}),new h(g.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new h(g.ns_tts,
"fontWeight","normal",["span","p"],!0,!0,function(a){return a},null),new h(g.ns_tts,"lineHeight","normal",["p"],!0,!0,function(b){return"normal"===b?b:a.parseLength(b)},function(b,g,h,d,l){if("normal"===d)b=d;else if(b=a.toComputedLength(d.value,d.unit,h.styleAttrs[c.byName.fontSize.qname],h.styleAttrs[c.byName.fontSize.qname],b.cellLength.h,b.pxLength.h),null===b)return null;return b}),new h(g.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new h(g.ns_tts,"origin","auto",["region"],!1,!0,function(b){if("auto"===
b)return b;var c=b.split(" ");if(2!==c.length)return null;b=a.parseLength(c[0]);return(c=a.parseLength(c[1]))&&b?{h:c,w:b}:null},function(b,c,g,d,h){if("auto"===d)c=new a.ComputedLength(0,0);else if(c=a.toComputedLength(d.h.value,d.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===c)return null;if("auto"===d)b=new a.ComputedLength(0,0);else if(b=a.toComputedLength(d.w.value,d.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:c,w:b}}),new h(g.ns_tts,"overflow","hidden",
["region"],!1,!0,function(a){return a},null),new h(g.ns_tts,"padding","0px",["region"],!1,!0,function(b){b=b.split(" ");if(4<b.length)return null;for(var c=[],g=0;g<b.length;g++){var d=a.parseLength(b[g]);if(!d)return null;c.push(d)}return c},function(b,g,h,d,l){if(1===d.length)g=[d[0],d[0],d[0],d[0]];else if(2===d.length)g=[d[0],d[1],d[0],d[1]];else if(3===d.length)g=[d[0],d[1],d[2],d[1]];else if(4===d.length)g=[d[0],d[1],d[2],d[3]];else return null;d=h.styleAttrs[c.byName.writingMode.qname];if("lrtb"===
d||"lr"===d)g=[g[0],g[3],g[2],g[1]];else if("rltb"===d||"rl"===d)g=[g[0],g[1],g[2],g[3]];else if("tblr"===d)g=[g[3],g[0],g[1],g[2]];else if("tbrl"===d||"tb"===d)g=[g[3],g[2],g[1],g[0]];else return null;d=[];for(l=0;l<g.length;l++)if(0===g[l].value)d[l]=new a.ComputedLength(0,0);else if(d[l]=a.toComputedLength(g[l].value,g[l].unit,h.styleAttrs[c.byName.fontSize.qname],"0"===l||"2"===l?h.styleAttrs[c.byName.extent.qname].h:h.styleAttrs[c.byName.extent.qname].w,"0"===l||"2"===l?b.cellLength.h:b.cellLength.w,
"0"===l||"2"===l?b.pxLength.h:b.pxLength.w),null===d[l])return null;return d}),new h(g.ns_tts,"position","top left",["region"],!1,!0,function(b){return a.parsePosition(b)},function(b,g,h,d){g=a.toComputedLength(d.v.offset.value,d.v.offset.unit,null,new a.ComputedLength(-h.styleAttrs[c.byName.extent.qname].h.rw,b.dimensions.h.rh-h.styleAttrs[c.byName.extent.qname].h.rh),null,b.pxLength.h);if(null===g)return null;"bottom"===d.v.edge&&(g=new a.ComputedLength(-g.rw-h.styleAttrs[c.byName.extent.qname].h.rw,
b.dimensions.h.rh-g.rh-h.styleAttrs[c.byName.extent.qname].h.rh));var m=a.toComputedLength(d.h.offset.value,d.h.offset.unit,null,new a.ComputedLength(b.dimensions.w.rw-h.styleAttrs[c.byName.extent.qname].w.rw,-h.styleAttrs[c.byName.extent.qname].w.rh),null,b.pxLength.w);if(null===g)return null;"right"===d.h.edge&&(m=new a.ComputedLength(b.dimensions.w.rw-m.rw-h.styleAttrs[c.byName.extent.qname].w.rw,-m.rh-h.styleAttrs[c.byName.extent.qname].w.rh));return{h:g,w:m}}),new h(g.ns_tts,"ruby","none",["span"],
!1,!0,function(a){return a},null),new h(g.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new h(g.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new h(g.ns_tts,"rubyReserve","none",["p"],!0,!0,function(b){var c=b.split(" ");b=[null,null];if(0===c.length||2<c.length||"none"!==c[0]&&"both"!==c[0]&&"after"!==c[0]&&"before"!==c[0]&&"outside"!==c[0])return null;b[0]=c[0];if(2===c.length&&"none"!==c[0])if(c=a.parseLength(c[1]))b[1]=
c;else return null;return b},function(b,g,h,d,l){if("none"===d[0])return d;b=null===d[1]?new a.ComputedLength(.5*h.styleAttrs[c.byName.fontSize.qname].rw,.5*h.styleAttrs[c.byName.fontSize.qname].rh):a.toComputedLength(d[1].value,d[1].unit,h.styleAttrs[c.byName.fontSize.qname],h.styleAttrs[c.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===b?null:[d[0],b]}),new h(g.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new h(g.ns_tts,"textAlign","start",
["p"],!0,!0,function(a){return a},function(a,c,g,d,h){return"left"===d?"start":"right"===d?"end":d}),new h(g.ns_tts,"textCombine","none",["span"],!0,!0,function(a){return"none"===a||"all"===a?a:null},null),new h(g.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new h(g.ns_tts,"textEmphasis","none",["span"],!0,!0,function(b){b=b.split(" ");for(var c={style:null,symbol:null,color:null,position:null},g=0;g<b.length;g++)if("none"===b[g]||"auto"===b[g])c.style=b[g];
else if("filled"===b[g]||"open"===b[g])c.style=b[g];else if("circle"===b[g]||"dot"===b[g]||"sesame"===b[g])c.symbol=b[g];else if("current"===b[g])c.color=b[g];else if("outside"===b[g]||"before"===b[g]||"after"===b[g])c.position=b[g];else if(c.color=a.parseColor(b[g]),null===c.color)return null;null==c.style&&null==c.symbol?c.style="auto":(c.symbol=c.symbol||"circle",c.style=c.style||"filled");c.position=c.position||"outside";c.color=c.color||"current";return c},null),new h(g.ns_tts,"textOutline",
"none",["span"],!0,!0,function(b){if("none"===b)return b;var c={};b=b.split(" ");if(0===b.length||2<b.length)return null;var g=a.parseColor(b[0]);c.color=g;null!==g&&b.shift();if(1!==b.length)return null;b=a.parseLength(b[0]);if(!b)return null;c.thickness=b;return c},function(b,g,h,d,l){if("none"===d)return d;g={};g.color=null===d.color?h.styleAttrs[c.byName.color.qname]:d.color;g.thickness=a.toComputedLength(d.thickness.value,d.thickness.unit,h.styleAttrs[c.byName.fontSize.qname],h.styleAttrs[c.byName.fontSize.qname],
b.cellLength.h,b.pxLength.h);return null===g.thickness?null:g}),new h(g.ns_tts,"textShadow","none",["span"],!0,!0,a.parseTextShadow,function(b,g,h,d){if("none"===d)return d;g=[];for(var l in d)if(l.hasOwnProperty(d)){var m={};m.x_off=a.toComputedLength(d[l][0].value,d[l][0].unit,null,h.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.w);if(null===m.x_off)return null;m.y_off=a.toComputedLength(d[l][1].value,d[l][1].unit,null,h.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.h);if(null===m.y_off)return null;
if(null===d[l][2])m.b_radius=0;else if(m.b_radius=a.toComputedLength(d[l][2].value,d[l][2].unit,null,h.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.h),null===m.b_radius)return null;m.color=null===d[l][3]?h.styleAttrs[c.byName.color.qname]:d[l][3];g.push(m)}return g}),new h(g.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new h(g.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new h(g.ns_tts,"wrapOption","wrap",
["span"],!0,!0,function(a){return a},null),new h(g.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new h(g.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new h(g.ns_ebutts,"linePadding","0c",["p"],!0,!1,a.parseLength,function(b,c,g,d,h){return a.toComputedLength(d.value,d.unit,null,null,b.cellLength.w,null)}),new h(g.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new h(g.ns_smpte,
"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new h(g.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new h(g.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];c.byQName={};for(var l in c.all)c.all.hasOwnProperty(l)&&(c.byQName[c.all[l].qname]=c.all[l]);c.byName={};for(var n in c.all)c.all.hasOwnProperty(n)&&(c.byName[c.all[n].name]=c.all[n])})("undefined"===typeof n?this.imscStyles=
{}:n,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./utils":33}],33:[function(c,v,n){(function(c){var g=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,a=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,h=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,
0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};c.parseColor=function(b){var c,m=null,d=l[b.toLowerCase()];void 0!==d?m=d:null!==(c=g.exec(b))?m=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),void 0!==c[4]?parseInt(c[4],16):255]:null!==(c=a.exec(b))?m=[parseInt(c[1]),parseInt(c[2]),
parseInt(c[3]),255]:null!==(c=h.exec(b))&&(m=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])]);return m};var n=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;c.parseLength=function(a){var b,c=null;null!==(b=n.exec(a))&&(c={value:parseFloat(b[1]),unit:b[2]});return c};c.parseTextShadow=function(a){a=a.split(",");for(var b=[],g=0;g<a.length;g++){var d=a[g].split(" ");if(1===d.length&&"none"===d[0])return"none";if(1<d.length&&5>d.length){var h=[null,null,null,null],l=c.parseLength(d.shift());
if(null===l)return null;h[0]=l;l=c.parseLength(d.shift());if(null===l)return null;h[1]=l;if(0!==d.length&&(l=c.parseLength(d[0]),null!==l&&(h[2]=l,d.shift()),0!==d.length)){d=c.parseColor(d[0]);if(null===d)return null;h[3]=d}b.push(h)}}return b};c.parsePosition=function(a){a=a.split(" ");var b=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var g in a)if(a.hasOwnProperty(g)&&!b(a[g])){var d=c.parseLength(a[g]);if(null===d)return null;
a[g]=d}g={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(d=0;d<a.length;){var h=a[d++];if(b(h)){var l={value:0,unit:"%"};2!==a.length&&d<a.length&&!b(a[d])&&(l=a[d++]);"right"===h?(g.h.edge=h,g.h.offset=l):"bottom"===h?(g.v.edge=h,g.v.offset=l):"left"===h?g.h.offset=l:"top"===h&&(g.v.offset=l)}else if(1===a.length||2===a.length)1===d?g.h.offset=h:g.v.offset=h;else return null}return g};c.ComputedLength=function(a,c){this.rw=a;this.rh=c};c.ComputedLength.prototype.toUsedLength=
function(a,c){return a*this.rw+c*this.rh};c.ComputedLength.prototype.multiply=function(a,c){return c?a*c:a};c.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};c.toComputedLength=function(a,g,h,d,l,n){return"%"===g&&d?new c.ComputedLength(d.rw*a/100,d.rh*a/100):"em"===g&&h?new c.ComputedLength(h.rw*a,h.rh*a):"c"===g&&l?new c.ComputedLength(a*l.rw,a*l.rh):"px"===g&&n?new c.ComputedLength(a*n.rw,a*n.rh):"rh"===g?new c.ComputedLength(0,a/100):"rw"===g?new c.ComputedLength(a/
100,0):null}})("undefined"===typeof n?this.imscUtils={}:n)},{}]},{},[30])(30)});
