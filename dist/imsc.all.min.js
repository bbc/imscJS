/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,u,m){c!=Array.prototype&&c!=Object.prototype&&(c[u]=m.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,u,m,q){if(u){m=$jscomp.global;c=c.split(".");for(q=0;q<c.length-1;q++){var g=c[q];g in m||(m[g]={});m=m[g]}c=c[c.length-1];q=m[c];u=u(q);u!=q&&null!=u&&$jscomp.defineProperty(m,c,{configurable:!0,writable:!0,value:u})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,m,q){var g=this.length||0;0>m&&(m=Math.max(0,g+m));if(null==q||q>g)q=g;q=Number(q);0>q&&(q=Math.max(0,g+q));for(m=Number(m||0);m<q;m++)this[m]=c;return this}},"es6","es3");
$jscomp.polyfill("Number.isNaN",function(c){return c?c:function(c){return"number"===typeof c&&isNaN(c)}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(u){return $jscomp.SYMBOL_PREFIX+(u||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var u=0;return $jscomp.iteratorPrototype(function(){return u<c.length?{done:!1,value:c[u++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,u){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var m=0,q={next:function(){if(m<c.length){var g=m++;return{value:u(g,c[g]),done:!1}}q.next=function(){return{done:!0,value:void 0}};return q.next()}};q[Symbol.iterator]=function(){return q};return q};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var u=c[Symbol.iterator];return u?u.call(c):$jscomp.arrayIterator(c)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function u(){this.batch_=null}function m(a){return a instanceof g?a:new g(function(e,g){e(a)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;u.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};u.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var q=$jscomp.global.setTimeout;u.prototype.asyncExecuteFunction=function(a){q(a,
0)};u.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var e=0;e<a.length;++e){var g=a[e];a[e]=null;try{g()}catch(b){this.asyncThrow_(b)}}}this.batch_=null};u.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var g=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{a(e.resolve,e.reject)}catch(x){e.reject(x)}};g.prototype.createResolveAndReject_=
function(){function a(b){return function(a){g||(g=!0,b.call(e,a))}}var e=this,g=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};g.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof g)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};g.prototype.resolveToNonPromiseObj_=function(a){var e=
void 0;try{e=a.then}catch(x){this.reject_(x);return}"function"==typeof e?this.settleSameAsThenable_(e,a):this.fulfill_(a)};g.prototype.reject_=function(a){this.settle_(2,a)};g.prototype.fulfill_=function(a){this.settle_(1,a)};g.prototype.settle_=function(a,e){if(0!=this.state_)throw Error("Cannot settle("+a+", "+e+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=e;this.executeOnSettledCallbacks_()};g.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var g=
0;g<this.onSettledCallbacks_.length;++g)a.asyncExecute(this.onSettledCallbacks_[g]);this.onSettledCallbacks_=null}};var a=new u;g.prototype.settleSameAsPromise_=function(a){var e=this.createResolveAndReject_();a.callWhenSettled_(e.resolve,e.reject)};g.prototype.settleSameAsThenable_=function(a,e){var g=this.createResolveAndReject_();try{a.call(e,g.resolve,g.reject)}catch(b){g.reject(b)}};g.prototype.then=function(a,e){function c(a,r){return"function"==typeof a?function(k){try{b(a(k))}catch(C){p(C)}}:
r}var b,p,r=new g(function(a,r){b=a;p=r});this.callWhenSettled_(c(a,b),c(e,p));return r};g.prototype.catch=function(a){return this.then(void 0,a)};g.prototype.callWhenSettled_=function(g,e){function c(){switch(b.state_){case 1:g(b.result_);break;case 2:e(b.result_);break;default:throw Error("Unexpected state: "+b.state_);}}var b=this;null==this.onSettledCallbacks_?a.asyncExecute(c):this.onSettledCallbacks_.push(c)};g.resolve=m;g.reject=function(a){return new g(function(e,g){g(a)})};g.race=function(a){return new g(function(e,
g){for(var b=$jscomp.makeIterator(a),p=b.next();!p.done;p=b.next())m(p.value).callWhenSettled_(e,g)})};g.all=function(a){var e=$jscomp.makeIterator(a),c=e.next();return c.done?m([]):new g(function(a,p){function b(b){return function(r){k[b]=r;g--;0==g&&a(k)}}var k=[],g=0;do k.push(void 0),g++,m(c.value).callWhenSettled_(b(k.length-1),p),c=e.next();while(!c.done)})};return g},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},u={};try{return u.__proto__=c,u.a}catch(m){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,u){c.__proto__=u;if(c.__proto__!==u)throw new TypeError(c+" is not extensible");return c}:null;$jscomp.polyfill("Object.setPrototypeOf",function(c){return c||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(c){return c?c:function(c){for(var m="",q=0;q<arguments.length;q++){var g=Number(arguments[q]);if(0>g||1114111<g||g!==Math.floor(g))throw new RangeError("invalid_code_point "+g);65535>=g?m+=String.fromCharCode(g):(g-=65536,m+=String.fromCharCode(g>>>10&1023|55296),m+=String.fromCharCode(g&1023|56320))}return m}},"es6","es3");$jscomp.owns=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,u){for(var m=1;m<arguments.length;m++){var q=arguments[m];if(q)for(var g in q)$jscomp.owns(q,g)&&(c[g]=q[g])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(c){return c?c:function(c){var m=[],q;for(q in c)$jscomp.owns(c,q)&&m.push([q,c[q]]);return m}},"es8","es3");
$jscomp.polyfill("Object.is",function(c){return c?c:function(c,m){return c===m?0!==c||1/c===1/m:c!==c&&m!==m}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,m){var q=this;q instanceof String&&(q=String(q));var g=q.length;m=m||0;for(0>m&&(m=Math.max(m+g,0));m<g;m++){var a=q[m];if(a===c||Object.is(a,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,u,m){if(null==c)throw new TypeError("The 'this' value for String.prototype."+m+" must not be null or undefined");if(u instanceof RegExp)throw new TypeError("First argument to String.prototype."+m+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,m){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,m||0)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(c){return c?c:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=c()})(function(){return function(){function c(u,m,q){function g(e,x){if(!m[e]){if(!u[e]){var b="function"==typeof require&&require;if(!x&&b)return b(e,!0);if(a)return a(e,!0);x=Error("Cannot find module '"+e+"'");throw x.code="MODULE_NOT_FOUND",x;}x=
m[e]={exports:{}};u[e][0].call(x.exports,function(a){return g(u[e][1][a]||a)},x,x.exports,c,u,m,q)}return m[e].exports}for(var a="function"==typeof require&&require,w=0;w<q.length;w++)g(q[w]);return g}return c}()({1:[function(c,u,m){function q(a){var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=b);return[a,a===b?0:4-a%4]}function g(e,b,p){for(var r=[],k=b;k<p;k+=3)b=(e[k]<<16&16711680)+(e[k+1]<<8&65280)+(e[k+2]&255),r.push(a[b>>18&63]+
a[b>>12&63]+a[b>>6&63]+a[b&63]);return r.join("")}m.byteLength=function(a){a=q(a);var b=a[1];return 3*(a[0]+b)/4-b};m.toByteArray=function(a){var b=q(a);var p=b[0];b=b[1];var r=new e(3*(p+b)/4-b),k=0,c=0<b?p-4:p,g;for(g=0;g<c;g+=4)p=w[a.charCodeAt(g)]<<18|w[a.charCodeAt(g+1)]<<12|w[a.charCodeAt(g+2)]<<6|w[a.charCodeAt(g+3)],r[k++]=p>>16&255,r[k++]=p>>8&255,r[k++]=p&255;2===b&&(p=w[a.charCodeAt(g)]<<2|w[a.charCodeAt(g+1)]>>4,r[k++]=p&255);1===b&&(p=w[a.charCodeAt(g)]<<10|w[a.charCodeAt(g+1)]<<4|w[a.charCodeAt(g+
2)]>>2,r[k++]=p>>8&255,r[k++]=p&255);return r};m.fromByteArray=function(e){for(var b=e.length,p=b%3,r=[],k=0,c=b-p;k<c;k+=16383)r.push(g(e,k,k+16383>c?c:k+16383));1===p?(e=e[b-1],r.push(a[e>>2]+a[e<<4&63]+"==")):2===p&&(e=(e[b-2]<<8)+e[b-1],r.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return r.join("")};var a=[],w=[],e="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)a[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],w["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=
c;w[45]=62;w[95]=63},{}],2:[function(c,u,m){},{}],3:[function(c,u,m){(function(q){(function(){function g(f){if(f>M)throw new RangeError('The value "'+f+'" is invalid for option "size"');f=new Uint8Array(f);f.__proto__=a.prototype;return f}function a(f,d,a){if("number"===typeof f){if("string"===typeof d)throw new TypeError('The "string" argument must be of type string. Received type number');return x(f)}return q(f,d,a)}function q(f,d,J){if("string"===typeof f){var n=d;if("string"!==typeof n||""===
n)n="utf8";if(!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);d=k(f,n)|0;J=g(d);f=J.write(f,n);f!==d&&(J=J.slice(0,f));return J}if(ArrayBuffer.isView(f))return b(f);if(null==f)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(u(f,ArrayBuffer)||f&&u(f.buffer,ArrayBuffer)){if(0>d||f.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<d+(J||0))throw new RangeError('"length" is outside of buffer bounds');
f=void 0===d&&void 0===J?new Uint8Array(f):void 0===J?new Uint8Array(f,d):new Uint8Array(f,d,J);f.__proto__=a.prototype;return f}if("number"===typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');n=f.valueOf&&f.valueOf();if(null!=n&&n!==f)return a.from(n,d,J);if(n=p(f))return n;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof f[Symbol.toPrimitive])return a.from(f[Symbol.toPrimitive]("string"),d,J);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof f);}function e(f){if("number"!==typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function x(f){e(f);return g(0>f?0:r(f)|0)}function b(f){for(var d=0>f.length?0:r(f.length)|0,a=g(d),n=0;n<d;n+=1)a[n]=f[n]&255;return a}function p(f){if(a.isBuffer(f)){var d=r(f.length)|0,J=g(d);if(0===J.length)return J;f.copy(J,0,0,d);return J}if(void 0!==f.length)return(d="number"!==typeof f.length)||(d=f.length,
d=d!==d),d?g(0):b(f);if("Buffer"===f.type&&Array.isArray(f.data))return b(f.data)}function r(f){if(f>=M)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+M.toString(16)+" bytes");return f|0}function k(f,d){if(a.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||u(f,ArrayBuffer))return f.byteLength;if("string"!==typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var b=f.length,n=2<arguments.length&&
!0===arguments[2];if(!n&&0===b)return 0;for(var l=!1;;)switch(d){case "ascii":case "latin1":case "binary":return b;case "utf8":case "utf-8":return B(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*b;case "hex":return b>>>1;case "base64":return H.toByteArray(h(f)).length;default:if(l)return n?-1:B(f).length;d=(""+d).toLowerCase();l=!0}}function y(f,d,a){var n=!1;if(void 0===d||0>d)d=0;if(d>this.length)return"";if(void 0===a||a>this.length)a=this.length;if(0>=a)return"";a>>>=
0;d>>>=0;if(a<=d)return"";for(f||(f="utf8");;)switch(f){case "hex":f=d;d=a;a=this.length;if(!f||0>f)f=0;if(!d||0>d||d>a)d=a;n="";for(a=f;a<d;++a)f=n,n=this[a],n=16>n?"0"+n.toString(16):n.toString(16),n=f+n;return n;case "utf8":case "utf-8":return D(this,d,a);case "ascii":f="";for(a=Math.min(this.length,a);d<a;++d)f+=String.fromCharCode(this[d]&127);return f;case "latin1":case "binary":f="";for(a=Math.min(this.length,a);d<a;++d)f+=String.fromCharCode(this[d]);return f;case "base64":return d=0===d&&
a===this.length?H.fromByteArray(this):H.fromByteArray(this.slice(d,a)),d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.slice(d,a);a="";for(f=0;f<d.length;f+=2)a+=String.fromCharCode(d[f]+256*d[f+1]);return a;default:if(n)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase();n=!0}}function t(f,d,a){var n=f[d];f[d]=f[a];f[a]=n}function C(f,d,b,n,l){if(0===f.length)return-1;"string"===typeof b?(n=b,b=0):2147483647<b?b=2147483647:-2147483648>b&&(b=-2147483648);b=+b;b!==b&&
(b=l?0:f.length-1);0>b&&(b=f.length+b);if(b>=f.length){if(l)return-1;b=f.length-1}else if(0>b)if(l)b=0;else return-1;"string"===typeof d&&(d=a.from(d,n));if(a.isBuffer(d))return 0===d.length?-1:F(f,d,b,n,l);if("number"===typeof d)return d&=255,"function"===typeof Uint8Array.prototype.indexOf?l?Uint8Array.prototype.indexOf.call(f,d,b):Uint8Array.prototype.lastIndexOf.call(f,d,b):F(f,[d],b,n,l);throw new TypeError("val must be string, number or Buffer");}function F(f,d,a,n,b){function l(d,f){return 1===
k?d[f]:d.readUInt16BE(f*k)}var k=1,h=f.length,e=d.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>f.length||2>d.length)return-1;k=2;h/=2;e/=2;a/=2}if(b)for(n=-1;a<h;a++)if(l(f,a)===l(d,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===e)return n*k}else-1!==n&&(a-=a-n),n=-1;else for(a+e>h&&(a=h-e);0<=a;a--){h=!0;for(n=0;n<e;n++)if(l(f,a+n)!==l(d,n)){h=!1;break}if(h)return a}return-1}function D(f,d,a){a=Math.min(f.length,a);for(var n=[];d<a;){var b=
f[d],l=null,k=239<b?4:223<b?3:191<b?2:1;if(d+k<=a)switch(k){case 1:128>b&&(l=b);break;case 2:var h=f[d+1];128===(h&192)&&(b=(b&31)<<6|h&63,127<b&&(l=b));break;case 3:h=f[d+1];var e=f[d+2];128===(h&192)&&128===(e&192)&&(b=(b&15)<<12|(h&63)<<6|e&63,2047<b&&(55296>b||57343<b)&&(l=b));break;case 4:h=f[d+1];e=f[d+2];var r=f[d+3];128===(h&192)&&128===(e&192)&&128===(r&192)&&(b=(b&15)<<18|(h&63)<<12|(e&63)<<6|r&63,65535<b&&1114112>b&&(l=b))}null===l?(l=65533,k=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),
l=56320|l&1023);n.push(l);d+=k}f=n.length;if(f<=I)n=String.fromCharCode.apply(String,n);else{a="";for(d=0;d<f;)a+=String.fromCharCode.apply(String,n.slice(d,d+=I));n=a}return n}function z(f,d,a){if(0!==f%1||0>f)throw new RangeError("offset is not uint");if(f+d>a)throw new RangeError("Trying to access beyond buffer length");}function E(f,d,b,n,l,k){if(!a.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>l||d<k)throw new RangeError('"value" argument is out of bounds');
if(b+n>f.length)throw new RangeError("Index out of range");}function G(f,d,a,n,b,l){if(a+n>f.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function l(f,d,a,n,b){d=+d;a>>>=0;b||G(f,d,a,4,3.4028234663852886E38,-3.4028234663852886E38);A.write(f,d,a,n,23,4);return a+4}function v(f,d,a,n,b){d=+d;a>>>=0;b||G(f,d,a,8,1.7976931348623157E308,-1.7976931348623157E308);A.write(f,d,a,n,52,8);return a+8}function h(f){f=f.split("=")[0];f=f.trim().replace(L,
"");if(2>f.length)return"";for(;0!==f.length%4;)f+="=";return f}function B(f,d){d=d||Infinity;for(var a,n=f.length,b=null,l=[],k=0;k<n;++k){a=f.charCodeAt(k);if(55295<a&&57344>a){if(!b){if(56319<a){-1<(d-=3)&&l.push(239,191,189);continue}else if(k+1===n){-1<(d-=3)&&l.push(239,191,189);continue}b=a;continue}if(56320>a){-1<(d-=3)&&l.push(239,191,189);b=a;continue}a=(b-55296<<10|a-56320)+65536}else b&&-1<(d-=3)&&l.push(239,191,189);b=null;if(128>a){if(0>--d)break;l.push(a)}else if(2048>a){if(0>(d-=2))break;
l.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(d-=3))break;l.push(a>>12|224,a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(d-=4))break;l.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return l}function N(f){for(var d=[],a=0;a<f.length;++a)d.push(f.charCodeAt(a)&255);return d}function K(f,d,a,n){for(var b=0;b<n&&!(b+a>=d.length||b>=f.length);++b)d[b+a]=f[b];return b}function u(f,d){return f instanceof d||null!=f&&null!=f.constructor&&null!=f.constructor.name&&
f.constructor.name===d.name}var H=c("base64-js"),A=c("ieee754");m.Buffer=a;m.SlowBuffer=function(f){+f!=f&&(f=0);return a.alloc(+f)};m.INSPECT_MAX_BYTES=50;var M=2147483647;m.kMaxLength=M;a.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1);f.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===f.foo()}catch(d){return!1}}();a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}});Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});a.poolSize=8192;a.from=function(f,d,a){return q(f,d,a)};a.prototype.__proto__=Uint8Array.prototype;
a.__proto__=Uint8Array;a.alloc=function(f,d,a){e(f);f=0>=f?g(f):void 0!==d?"string"===typeof a?g(f).fill(d,a):g(f).fill(d):g(f);return f};a.allocUnsafe=function(f){return x(f)};a.allocUnsafeSlow=function(f){return x(f)};a.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==a.prototype};a.compare=function(f,d){u(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength));u(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength));if(!a.isBuffer(f)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(f===d)return 0;for(var b=f.length,n=d.length,l=0,k=Math.min(b,n);l<k;++l)if(f[l]!==d[l]){b=f[l];n=d[l];break}return b<n?-1:n<b?1:0};a.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};a.concat=function(f,d){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return a.alloc(0);
var b;if(void 0===d)for(b=d=0;b<f.length;++b)d+=f[b].length;d=a.allocUnsafe(d);var n=0;for(b=0;b<f.length;++b){var l=f[b];u(l,Uint8Array)&&(l=a.from(l));if(!a.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(d,n);n+=l.length}return d};a.byteLength=k;a.prototype._isBuffer=!0;a.prototype.swap16=function(){var f=this.length;if(0!==f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<f;d+=2)t(this,d,d+1);return this};a.prototype.swap32=
function(){var f=this.length;if(0!==f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<f;d+=4)t(this,d,d+3),t(this,d+1,d+2);return this};a.prototype.swap64=function(){var f=this.length;if(0!==f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<f;d+=8)t(this,d,d+7),t(this,d+1,d+6),t(this,d+2,d+5),t(this,d+3,d+4);return this};a.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?D(this,0,f):y.apply(this,
arguments)};a.prototype.toLocaleString=a.prototype.toString;a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:0===a.compare(this,f)};a.prototype.inspect=function(){var f=m.INSPECT_MAX_BYTES;var d=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim();this.length>f&&(d+=" ... ");return"<Buffer "+d+">"};a.prototype.compare=function(f,d,b,n,l){u(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength));if(!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof f);void 0===d&&(d=0);void 0===b&&(b=f?f.length:0);void 0===n&&(n=0);void 0===l&&(l=this.length);if(0>d||b>f.length||0>n||l>this.length)throw new RangeError("out of range index");if(n>=l&&d>=b)return 0;if(n>=l)return-1;if(d>=b)return 1;d>>>=0;b>>>=0;n>>>=0;l>>>=0;if(this===f)return 0;var k=l-n,h=b-d,e=Math.min(k,h);n=this.slice(n,l);f=f.slice(d,b);for(d=0;d<e;++d)if(n[d]!==f[d]){k=n[d];h=f[d];break}return k<h?-1:h<k?1:0};a.prototype.includes=function(f,d,a){return-1!==this.indexOf(f,d,a)};a.prototype.indexOf=
function(f,d,a){return C(this,f,d,a,!0)};a.prototype.lastIndexOf=function(f,d,a){return C(this,f,d,a,!1)};a.prototype.write=function(f,d,a,n){if(void 0===d)n="utf8",a=this.length,d=0;else if(void 0===a&&"string"===typeof d)n=d,a=this.length,d=0;else if(isFinite(d))d>>>=0,isFinite(a)?(a>>>=0,void 0===n&&(n="utf8")):(n=a,a=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var b=this.length-d;if(void 0===a||a>b)a=b;if(0<f.length&&(0>a||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");
n||(n="utf8");for(b=!1;;)switch(n){case "hex":a:{d=Number(d)||0;n=this.length-d;a?(a=Number(a),a>n&&(a=n)):a=n;n=f.length;a>n/2&&(a=n/2);for(n=0;n<a;++n){b=parseInt(f.substr(2*n,2),16);if(b!==b){f=n;break a}this[d+n]=b}f=n}return f;case "utf8":case "utf-8":return K(B(f,this.length-d),this,d,a);case "ascii":return K(N(f),this,d,a);case "latin1":case "binary":return K(N(f),this,d,a);case "base64":return K(H.toByteArray(h(f)),this,d,a);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":n=f;b=this.length-
d;for(var l=[],k=0;k<n.length&&!(0>(b-=2));++k){var e=n.charCodeAt(k);f=e>>8;e%=256;l.push(e);l.push(f)}return K(l,this,d,a);default:if(b)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase();b=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;a.prototype.slice=function(f,d){var b=this.length;f=~~f;d=void 0===d?b:~~d;0>f?(f+=b,0>f&&(f=0)):f>b&&(f=b);0>d?(d+=b,0>d&&(d=0)):d>b&&(d=b);d<f&&(d=f);f=this.subarray(f,d);f.__proto__=
a.prototype;return f};a.prototype.readUIntLE=function(f,d,a){f>>>=0;d>>>=0;a||z(f,d,this.length);a=this[f];for(var b=1,l=0;++l<d&&(b*=256);)a+=this[f+l]*b;return a};a.prototype.readUIntBE=function(f,d,a){f>>>=0;d>>>=0;a||z(f,d,this.length);a=this[f+--d];for(var b=1;0<d&&(b*=256);)a+=this[f+--d]*b;return a};a.prototype.readUInt8=function(f,d){f>>>=0;d||z(f,1,this.length);return this[f]};a.prototype.readUInt16LE=function(f,d){f>>>=0;d||z(f,2,this.length);return this[f]|this[f+1]<<8};a.prototype.readUInt16BE=
function(f,d){f>>>=0;d||z(f,2,this.length);return this[f]<<8|this[f+1]};a.prototype.readUInt32LE=function(f,d){f>>>=0;d||z(f,4,this.length);return(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};a.prototype.readUInt32BE=function(f,d){f>>>=0;d||z(f,4,this.length);return 16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};a.prototype.readIntLE=function(f,d,a){f>>>=0;d>>>=0;a||z(f,d,this.length);a=this[f];for(var b=1,l=0;++l<d&&(b*=256);)a+=this[f+l]*b;a>=128*b&&(a-=Math.pow(2,8*d));return a};
a.prototype.readIntBE=function(f,d,a){f>>>=0;d>>>=0;a||z(f,d,this.length);a=d;for(var b=1,l=this[f+--a];0<a&&(b*=256);)l+=this[f+--a]*b;l>=128*b&&(l-=Math.pow(2,8*d));return l};a.prototype.readInt8=function(f,d){f>>>=0;d||z(f,1,this.length);return this[f]&128?-1*(255-this[f]+1):this[f]};a.prototype.readInt16LE=function(f,d){f>>>=0;d||z(f,2,this.length);f=this[f]|this[f+1]<<8;return f&32768?f|4294901760:f};a.prototype.readInt16BE=function(f,d){f>>>=0;d||z(f,2,this.length);f=this[f+1]|this[f]<<8;return f&
32768?f|4294901760:f};a.prototype.readInt32LE=function(f,d){f>>>=0;d||z(f,4,this.length);return this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};a.prototype.readInt32BE=function(f,d){f>>>=0;d||z(f,4,this.length);return this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};a.prototype.readFloatLE=function(f,d){f>>>=0;d||z(f,4,this.length);return A.read(this,f,!0,23,4)};a.prototype.readFloatBE=function(f,d){f>>>=0;d||z(f,4,this.length);return A.read(this,f,!1,23,4)};a.prototype.readDoubleLE=function(f,
d){f>>>=0;d||z(f,8,this.length);return A.read(this,f,!0,52,8)};a.prototype.readDoubleBE=function(f,d){f>>>=0;d||z(f,8,this.length);return A.read(this,f,!1,52,8)};a.prototype.writeUIntLE=function(f,d,a,b){f=+f;d>>>=0;a>>>=0;b||E(this,f,d,a,Math.pow(2,8*a)-1,0);b=1;var n=0;for(this[d]=f&255;++n<a&&(b*=256);)this[d+n]=f/b&255;return d+a};a.prototype.writeUIntBE=function(f,d,a,b){f=+f;d>>>=0;a>>>=0;b||E(this,f,d,a,Math.pow(2,8*a)-1,0);b=a-1;var n=1;for(this[d+b]=f&255;0<=--b&&(n*=256);)this[d+b]=f/n&
255;return d+a};a.prototype.writeUInt8=function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,1,255,0);this[d]=f&255;return d+1};a.prototype.writeUInt16LE=function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,2,65535,0);this[d]=f&255;this[d+1]=f>>>8;return d+2};a.prototype.writeUInt16BE=function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,2,65535,0);this[d]=f>>>8;this[d+1]=f&255;return d+2};a.prototype.writeUInt32LE=function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,4,4294967295,0);this[d+3]=f>>>24;this[d+2]=f>>>16;this[d+1]=f>>>8;this[d]=f&
255;return d+4};a.prototype.writeUInt32BE=function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,4,4294967295,0);this[d]=f>>>24;this[d+1]=f>>>16;this[d+2]=f>>>8;this[d+3]=f&255;return d+4};a.prototype.writeIntLE=function(f,d,a,b){f=+f;d>>>=0;b||(b=Math.pow(2,8*a-1),E(this,f,d,a,b-1,-b));b=0;var n=1,l=0;for(this[d]=f&255;++b<a&&(n*=256);)0>f&&0===l&&0!==this[d+b-1]&&(l=1),this[d+b]=(f/n>>0)-l&255;return d+a};a.prototype.writeIntBE=function(f,d,a,b){f=+f;d>>>=0;b||(b=Math.pow(2,8*a-1),E(this,f,d,a,b-1,-b));b=a-
1;var n=1,l=0;for(this[d+b]=f&255;0<=--b&&(n*=256);)0>f&&0===l&&0!==this[d+b+1]&&(l=1),this[d+b]=(f/n>>0)-l&255;return d+a};a.prototype.writeInt8=function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,1,127,-128);0>f&&(f=255+f+1);this[d]=f&255;return d+1};a.prototype.writeInt16LE=function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,2,32767,-32768);this[d]=f&255;this[d+1]=f>>>8;return d+2};a.prototype.writeInt16BE=function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,2,32767,-32768);this[d]=f>>>8;this[d+1]=f&255;return d+2};a.prototype.writeInt32LE=
function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,4,2147483647,-2147483648);this[d]=f&255;this[d+1]=f>>>8;this[d+2]=f>>>16;this[d+3]=f>>>24;return d+4};a.prototype.writeInt32BE=function(f,d,a){f=+f;d>>>=0;a||E(this,f,d,4,2147483647,-2147483648);0>f&&(f=4294967295+f+1);this[d]=f>>>24;this[d+1]=f>>>16;this[d+2]=f>>>8;this[d+3]=f&255;return d+4};a.prototype.writeFloatLE=function(f,d,a){return l(this,f,d,!0,a)};a.prototype.writeFloatBE=function(a,d,b){return l(this,a,d,!1,b)};a.prototype.writeDoubleLE=function(a,
d,b){return v(this,a,d,!0,b)};a.prototype.writeDoubleBE=function(a,d,b){return v(this,a,d,!1,b)};a.prototype.copy=function(f,d,b,n){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");b||(b=0);n||0===n||(n=this.length);d>=f.length&&(d=f.length);d||(d=0);0<n&&n<b&&(n=b);if(n===b||0===f.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>b||b>=this.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("sourceEnd out of bounds");
n>this.length&&(n=this.length);f.length-d<n-b&&(n=f.length-d+b);var l=n-b;if(this===f&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(d,b,n);else if(this===f&&b<d&&d<n)for(n=l-1;0<=n;--n)f[n+d]=this[n+b];else Uint8Array.prototype.set.call(f,this.subarray(b,n),d);return l};a.prototype.fill=function(f,d,b,n){if("string"===typeof f){"string"===typeof d?(n=d,d=0,b=this.length):"string"===typeof b&&(n=b,b=this.length);if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");
if("string"===typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===f.length){var l=f.charCodeAt(0);if("utf8"===n&&128>l||"latin1"===n)f=l}}else"number"===typeof f&&(f&=255);if(0>d||this.length<d||this.length<b)throw new RangeError("Out of range index");if(b<=d)return this;d>>>=0;b=void 0===b?this.length:b>>>0;f||(f=0);if("number"===typeof f)for(n=d;n<b;++n)this[n]=f;else{l=a.isBuffer(f)?f:a.from(f,n);var k=l.length;if(0===k)throw new TypeError('The value "'+f+'" is invalid for argument "value"');
for(n=0;n<b-d;++n)this[n+d]=l[n%k]}return this};var L=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,c("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:20}],4:[function(c,u,m){function q(){q.init.call(this)}function g(a){if("function"!==typeof a)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a);}function a(a,b,k,e){g(k);var l=a._events;if(void 0===l)l=a._events=Object.create(null),a._eventsCount=0;else{void 0!==l.newListener&&(a.emit("newListener",b,
k.listener?k.listener:k),l=a._events);var r=l[b]}void 0===r?(l[b]=k,++a._eventsCount):("function"===typeof r?r=l[b]=e?[k,r]:[r,k]:e?r.unshift(k):r.push(k),k=void 0===a._maxListeners?q.defaultMaxListeners:a._maxListeners,0<k&&r.length>k&&!r.warned&&(r.warned=!0,k=Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit"),k.name="MaxListenersExceededWarning",k.emitter=a,k.type=b,k.count=r.length,console&&console.warn&&
console.warn(k)));return a}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function e(a,b,k){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:k};b=w.bind(a);b.listener=k;return a.wrapFn=b}function x(a,b,k){a=a._events;if(void 0===a)return[];b=a[b];if(void 0===b)return[];if("function"===typeof b)return k?[b.listener||b]:[b];if(k)for(k=Array(b.length),
a=0;a<k.length;++a)k[a]=b[a].listener||b[a];else k=p(b,b.length);return k}function b(a){var b=this._events;if(void 0!==b){a=b[a];if("function"===typeof a)return 1;if(void 0!==a)return a.length}return 0}function p(a,b){for(var k=Array(b),e=0;e<b;++e)k[e]=a[e];return k}function r(a,b,e){"function"===typeof a.on&&k(a,"error",b,e)}function k(a,b,k,e){if("function"===typeof a.on)if(e.once)a.once(b,k);else a.on(b,k);else if("function"===typeof a.addEventListener)a.addEventListener(b,function h(r){e.once&&
a.removeEventListener(b,h);k(r)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a);}var y=(c="object"===typeof Reflect?Reflect:null)&&"function"===typeof c.apply?c.apply:function(a,b,k){return Function.prototype.apply.call(a,b,k)};var t=c&&"function"===typeof c.ownKeys?c.ownKeys:Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.getOwnPropertyNames(a)};
var C=Number.isNaN||function(a){return a!==a};u.exports=q;u.exports.once=function(a,b){return new Promise(function(e,c){function l(l){a.removeListener(b,g);c(l)}function g(){"function"===typeof a.removeListener&&a.removeListener("error",l);e([].slice.call(arguments))}k(a,b,g,{once:!0});"error"!==b&&r(a,l,{once:!0})})};q.EventEmitter=q;q.prototype._events=void 0;q.prototype._eventsCount=0;q.prototype._maxListeners=void 0;var F=10;Object.defineProperty(q,"defaultMaxListeners",{enumerable:!0,get:function(){return F},
set:function(a){if("number"!==typeof a||0>a||C(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");F=a}});q.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};q.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||C(a))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
a+".");this._maxListeners=a;return this};q.prototype.getMaxListeners=function(){return void 0===this._maxListeners?q.defaultMaxListeners:this._maxListeners};q.prototype.emit=function(a){for(var b=[],k=1;k<arguments.length;k++)b.push(arguments[k]);k="error"===a;var e=this._events;if(void 0!==e)k=k&&void 0===e.error;else if(!k)return!1;if(k){var l;0<b.length&&(l=b[0]);if(l instanceof Error)throw l;b=Error("Unhandled error."+(l?" ("+l.message+")":""));b.context=l;throw b;}k=e[a];if(void 0===k)return!1;
if("function"===typeof k)y(k,this,b);else for(l=k.length,e=p(k,l),k=0;k<l;++k)y(e[k],this,b);return!0};q.prototype.addListener=function(b,k){return a(this,b,k,!1)};q.prototype.on=q.prototype.addListener;q.prototype.prependListener=function(b,k){return a(this,b,k,!0)};q.prototype.once=function(a,b){g(b);this.on(a,e(this,a,b));return this};q.prototype.prependOnceListener=function(a,b){g(b);this.prependListener(a,e(this,a,b));return this};q.prototype.removeListener=function(a,b){var k;g(b);var e=this._events;
if(void 0===e)return this;var l=e[a];if(void 0===l)return this;if(l===b||l.listener===b)0===--this._eventsCount?this._events=Object.create(null):(delete e[a],e.removeListener&&this.emit("removeListener",a,l.listener||b));else if("function"!==typeof l){var r=-1;for(k=l.length-1;0<=k;k--)if(l[k]===b||l[k].listener===b){var h=l[k].listener;r=k;break}if(0>r)return this;if(0===r)l.shift();else{for(;r+1<l.length;r++)l[r]=l[r+1];l.pop()}1===l.length&&(e[a]=l[0]);void 0!==e.removeListener&&this.emit("removeListener",
a,h||b)}return this};q.prototype.off=q.prototype.removeListener;q.prototype.removeAllListeners=function(a){var b=this._events;if(void 0===b)return this;if(void 0===b.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==b[a]&&(0===--this._eventsCount?this._events=Object.create(null):delete b[a]),this;if(0===arguments.length){var k=Object.keys(b);for(b=0;b<k.length;++b){var e=k[b];"removeListener"!==e&&this.removeAllListeners(e)}this.removeAllListeners("removeListener");
this._events=Object.create(null);this._eventsCount=0;return this}k=b[a];if("function"===typeof k)this.removeListener(a,k);else if(void 0!==k)for(b=k.length-1;0<=b;b--)this.removeListener(a,k[b]);return this};q.prototype.listeners=function(a){return x(this,a,!0)};q.prototype.rawListeners=function(a){return x(this,a,!1)};q.listenerCount=function(a,k){return"function"===typeof a.listenerCount?a.listenerCount(k):b.call(a,k)};q.prototype.listenerCount=b;q.prototype.eventNames=function(){return 0<this._eventsCount?
t(this._events):[]}},{}],5:[function(c,u,m){function q(){g.call(this)}u.exports=q;var g=c("events").EventEmitter;c("inherits")(q,g);q.Readable=c("readable-stream/lib/_stream_readable.js");q.Writable=c("readable-stream/lib/_stream_writable.js");q.Duplex=c("readable-stream/lib/_stream_duplex.js");q.Transform=c("readable-stream/lib/_stream_transform.js");q.PassThrough=c("readable-stream/lib/_stream_passthrough.js");q.finished=c("readable-stream/lib/internal/streams/end-of-stream.js");q.pipeline=c("readable-stream/lib/internal/streams/pipeline.js");
q.Stream=q;q.prototype.pipe=function(a,c){function e(b){a.writable&&!1===a.write(b)&&y.pause&&y.pause()}function q(){y.readable&&y.resume&&y.resume()}function b(){t||(t=!0,a.end())}function p(){t||(t=!0,"function"===typeof a.destroy&&a.destroy())}function r(a){k();if(0===g.listenerCount(this,"error"))throw a;}function k(){y.removeListener("data",e);a.removeListener("drain",q);y.removeListener("end",b);y.removeListener("close",p);y.removeListener("error",r);a.removeListener("error",r);y.removeListener("end",
k);y.removeListener("close",k);a.removeListener("close",k)}var y=this;y.on("data",e);a.on("drain",q);a._isStdio||c&&!1===c.end||(y.on("end",b),y.on("close",p));var t=!1;y.on("error",r);a.on("error",r);y.on("end",k);y.on("close",k);a.on("close",k);a.emit("pipe",y);return a}},{events:4,inherits:21,"readable-stream/lib/_stream_duplex.js":7,"readable-stream/lib/_stream_passthrough.js":8,"readable-stream/lib/_stream_readable.js":9,"readable-stream/lib/_stream_transform.js":10,"readable-stream/lib/_stream_writable.js":11,
"readable-stream/lib/internal/streams/end-of-stream.js":15,"readable-stream/lib/internal/streams/pipeline.js":17}],6:[function(c,u,m){function q(a,c){a.prototype=Object.create(c.prototype);a.prototype.constructor=a;a.__proto__=c}function g(a,c,b){b||(b=Error);var e=function(a){function b(b,k,e){return a.call(this,"string"===typeof c?c:c(b,k,e))||this}q(b,a);return b}(b);e.prototype.name=b.name;e.prototype.code=a;w[a]=e}function a(a,c){if(Array.isArray(a)){var b=a.length;a=a.map(function(a){return String(a)});
return 2<b?"one of ".concat(c," ").concat(a.slice(0,b-1).join(", "),", or ")+a[b-1]:2===b?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}return"of ".concat(c," ").concat(String(a))}var w={};g("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(e,c,b){var g;if(g="string"===typeof c)g="not "===c.substr(0,4);g?(g="must not be",c=c.replace(/^not /,"")):g="must be";var r=void 0;
if(void 0===r||r>e.length)r=e.length;" argument"===e.substring(r-9,r)?e="The ".concat(e," ").concat(g," ").concat(a(c,"type")):(r=void 0,"number"!==typeof r&&(r=0),r=r+1>e.length?!1:-1!==e.indexOf(".",r),r=r?"property":"argument",e='The "'.concat(e,'" ').concat(r," ").concat(g," ").concat(a(c,"type")));return e+=". Received type ".concat(typeof b)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"});
g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK","Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT",
"stream.unshift() after end event");u.exports.codes=w},{}],7:[function(c,u,m){(function(q){(function(){function g(k){if(!(this instanceof g))return new g(k);x.call(this,k);b.call(this,k);this.allowHalfOpen=!0;k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||q.nextTick(w,this)}function w(a){a.end()}var e=Object.keys||function(a){var b=[],k;for(k in a)b.push(k);return b};
u.exports=g;var x=c("./_stream_readable"),b=c("./_stream_writable");c("inherits")(g,x);e=e(b.prototype);for(var p=0;p<e.length;p++){var r=e[p];g.prototype[r]||(g.prototype[r]=b.prototype[r])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}})}).call(this)}).call(this,c("_process"))},{"./_stream_readable":9,
"./_stream_writable":11,_process:22,inherits:21}],8:[function(c,u,m){function q(a){if(!(this instanceof q))return new q(a);g.call(this,a)}u.exports=q;var g=c("./_stream_transform");c("inherits")(q,g);q.prototype._transform=function(a,c,e){e(null,a)}},{"./_stream_transform":10,inherits:21}],9:[function(c,u,m){(function(q,g){(function(){function a(a,b,d){if("function"===typeof a.prependListener)return a.prependListener(b,d);if(a._events&&a._events[b])Array.isArray(a._events[b])?a._events[b].unshift(d):
a._events[b]=[d,a._events[b]];else a.on(b,d)}function w(a,b,d){B=B||c("./_stream_duplex");a=a||{};"boolean"!==typeof d&&(d=b instanceof B);this.objectMode=!!a.objectMode;d&&(this.objectMode=this.objectMode||!!a.readableObjectMode);this.highWaterMark=I(this,a,"readableHighWaterMark",d);this.buffer=new M;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=
!1;this.paused=!0;this.emitClose=!1!==a.emitClose;this.autoDestroy=!!a.autoDestroy;this.destroyed=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(S||(S=c("string_decoder/").StringDecoder),this.decoder=new S(a.encoding),this.encoding=a.encoding)}function e(a){B=B||c("./_stream_duplex");if(!(this instanceof e))return new e(a);this._readableState=new w(a,this,this instanceof B);this.readable=!0;a&&("function"===typeof a.read&&
(this._read=a.read),"function"===typeof a.destroy&&(this._destroy=a.destroy));N.call(this)}function x(a,l,h,e,c){A("readableAddChunk",l);var g=a._readableState;if(null===l)g.reading=!1,A("onEofChunk"),g.ended||(g.decoder&&(l=g.decoder.end())&&l.length&&(g.buffer.push(l),g.length+=g.objectMode?1:l.length),g.ended=!0,g.sync?r(a):(g.needReadable=!1,g.emittedReadable||(g.emittedReadable=!0,k(a))));else{if(!c){c=l;var p;K.isBuffer(c)||c instanceof P||"string"===typeof c||void 0===c||g.objectMode||(p=new f("chunk",
["string","Buffer","Uint8Array"],c));var v=p}if(v)T(a,v);else if(g.objectMode||l&&0<l.length)if("string"===typeof l||g.objectMode||Object.getPrototypeOf(l)===K.prototype||(l=K.from(l)),e)g.endEmitted?T(a,new n):b(a,g,l,!0);else if(g.ended)T(a,new d);else{if(g.destroyed)return!1;g.reading=!1;g.decoder&&!h?(l=g.decoder.write(l),g.objectMode||0!==l.length?b(a,g,l,!1):y(a,g)):b(a,g,l,!1)}else e||(g.reading=!1,y(a,g))}return!g.ended&&(g.length<g.highWaterMark||0===g.length)}function b(a,b,d,f){b.flowing&&
0===b.length&&!b.sync?(b.awaitDrain=0,a.emit("data",d)):(b.length+=b.objectMode?1:d.length,f?b.buffer.unshift(d):b.buffer.push(d),b.needReadable&&r(a));y(a,b)}function p(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var d=a;1073741824<=d?d=1073741824:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++);b.highWaterMark=d}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}
function r(a){var b=a._readableState;A("emitReadable",b.needReadable,b.emittedReadable);b.needReadable=!1;b.emittedReadable||(A("emitReadable",b.flowing),b.emittedReadable=!0,q.nextTick(k,a))}function k(a){var b=a._readableState;A("emitReadable_",b.destroyed,b.length,b.ended);b.destroyed||!b.length&&!b.ended||(a.emit("readable"),b.emittedReadable=!1);b.needReadable=!b.flowing&&!b.ended&&b.length<=b.highWaterMark;E(a)}function y(a,b){b.readingMore||(b.readingMore=!0,q.nextTick(t,a,b))}function t(a,
b){for(;!b.reading&&!b.ended&&(b.length<b.highWaterMark||b.flowing&&0===b.length);){var d=b.length;A("maybeReadMore read 0");a.read(0);if(d===b.length)break}b.readingMore=!1}function m(a){return function(){var b=a._readableState;A("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,E(a))}}function F(a){var b=a._readableState;b.readableListening=0<a.listenerCount("readable");b.resumeScheduled&&!b.paused?b.flowing=!0:0<a.listenerCount("data")&&
a.resume()}function D(a){A("readable nexttick read 0");a.read(0)}function z(a,b){A("resume",b.reading);b.reading||a.read(0);b.resumeScheduled=!1;a.emit("resume");E(a);b.flowing&&!b.reading&&a.read(0)}function E(a){var b=a._readableState;for(A("flow",b.flowing);b.flowing&&null!==a.read(););}function G(a,b){if(0===b.length)return null;b.objectMode?a=b.buffer.shift():!a||a>=b.length?(a=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.first():b.buffer.concat(b.length),b.buffer.clear()):a=b.buffer.consume(a,
b.decoder);return a}function l(a){var b=a._readableState;A("endReadable",b.endEmitted);b.endEmitted||(b.ended=!0,q.nextTick(v,b,a))}function v(a,b){A("endReadableNT",a.endEmitted,a.length);a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"),a.autoDestroy&&(a=b._writableState,(!a||a.autoDestroy&&a.finished)&&b.destroy()))}function h(a,b){for(var d=0,f=a.length;d<f;d++)if(a[d]===b)return d;return-1}u.exports=e;var B;e.ReadableState=w;c("events");var N=c("./internal/streams/stream"),
K=c("buffer").Buffer,P=g.Uint8Array||function(){},H=c("util");var A=H&&H.debuglog?H.debuglog("stream"):function(){};var M=c("./internal/streams/buffer_list");H=c("./internal/streams/destroy");var I=c("./internal/streams/state").getHighWaterMark,L=c("../errors").codes,f=L.ERR_INVALID_ARG_TYPE,d=L.ERR_STREAM_PUSH_AFTER_EOF,J=L.ERR_METHOD_NOT_IMPLEMENTED,n=L.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,U,W;c("inherits")(e,N);var T=H.errorOrDestroy,V=["error","close","destroy","pause","resume"];Object.defineProperty(e.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}});e.prototype.destroy=H.destroy;e.prototype._undestroy=H.undestroy;e.prototype._destroy=function(a,b){b(a)};e.prototype.push=function(a,b){var d=this._readableState;if(d.objectMode)var f=!0;else"string"===typeof a&&(b=b||d.defaultEncoding,b!==d.encoding&&(a=K.from(a,b),b=""),f=!0);return x(this,a,b,!1,f)};e.prototype.unshift=
function(a){return x(this,a,null,!0,!1)};e.prototype.isPaused=function(){return!1===this._readableState.flowing};e.prototype.setEncoding=function(a){S||(S=c("string_decoder/").StringDecoder);a=new S(a);this._readableState.decoder=a;this._readableState.encoding=this._readableState.decoder.encoding;for(var b=this._readableState.buffer.head,d="";null!==b;)d+=a.write(b.data),b=b.next;this._readableState.buffer.clear();""!==d&&this._readableState.buffer.push(d);this._readableState.length=d.length;return this};
e.prototype.read=function(a){A("read",a);a=parseInt(a,10);var b=this._readableState,d=a;0!==a&&(b.emittedReadable=!1);if(0===a&&b.needReadable&&((0!==b.highWaterMark?b.length>=b.highWaterMark:0<b.length)||b.ended))return A("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?l(this):r(this),null;a=p(a,b);if(0===a&&b.ended)return 0===b.length&&l(this),null;var f=b.needReadable;A("need readable",f);if(0===b.length||b.length-a<b.highWaterMark)f=!0,A("length less than watermark",f);b.ended||b.reading?
A("reading or ended",!1):f&&(A("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=p(d,b)));f=0<a?G(a,b):null;null===f?(b.needReadable=b.length<=b.highWaterMark,a=0):(b.length-=a,b.awaitDrain=0);0===b.length&&(b.ended||(b.needReadable=!0),d!==a&&b.ended&&l(this));null!==f&&this.emit("data",f);return f};e.prototype._read=function(a){T(this,new J("_read()"))};e.prototype.pipe=function(b,d){function f(a,d){A("onunpipe");a===r&&d&&!1===
d.hasUnpiped&&(d.hasUnpiped=!0,A("cleanup"),b.removeListener("close",e),b.removeListener("finish",g),b.removeListener("drain",v),b.removeListener("error",k),b.removeListener("unpipe",f),r.removeListener("end",n),r.removeListener("end",c),r.removeListener("data",l),B=!0,!p.awaitDrain||b._writableState&&!b._writableState.needDrain||v())}function n(){A("onend");b.end()}function l(a){A("ondata");a=b.write(a);A("dest.write",a);!1===a&&((1===p.pipesCount&&p.pipes===b||1<p.pipesCount&&-1!==h(p.pipes,b))&&
!B&&(A("false write response, pause",p.awaitDrain),p.awaitDrain++),r.pause())}function k(a){A("onerror",a);c();b.removeListener("error",k);0===b.listeners("error").length&&T(b,a)}function e(){b.removeListener("finish",g);c()}function g(){A("onfinish");b.removeListener("close",e);c()}function c(){A("unpipe");r.unpipe(b)}var r=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=b;break;case 1:p.pipes=[p.pipes,b];break;default:p.pipes.push(b)}p.pipesCount+=1;A("pipe count=%d opts=%j",p.pipesCount,
d);d=d&&!1===d.end||b===q.stdout||b===q.stderr?c:n;if(p.endEmitted)q.nextTick(d);else r.once("end",d);b.on("unpipe",f);var v=m(r);b.on("drain",v);var B=!1;r.on("data",l);a(b,"error",k);b.once("close",e);b.once("finish",g);b.emit("pipe",r);p.flowing||(A("pipe resume"),r.resume());return b};e.prototype.unpipe=function(a){var b=this._readableState,d={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=
!1;a&&a.emit("unpipe",this,d);return this}if(!a){a=b.pipes;d=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<d;b++)a[b].emit("unpipe",this,{hasUnpiped:!1});return this}var f=h(b.pipes,a);if(-1===f)return this;b.pipes.splice(f,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this,d);return this};e.prototype.on=function(a,b){b=N.prototype.on.call(this,a,b);var d=this._readableState;"data"===a?(d.readableListening=0<this.listenerCount("readable"),!1!==d.flowing&&
this.resume()):"readable"!==a||d.endEmitted||d.readableListening||(d.readableListening=d.needReadable=!0,d.flowing=!1,d.emittedReadable=!1,A("on readable",d.length,d.reading),d.length?r(this):d.reading||q.nextTick(D,this));return b};e.prototype.addListener=e.prototype.on;e.prototype.removeListener=function(a,b){b=N.prototype.removeListener.call(this,a,b);"readable"===a&&q.nextTick(F,this);return b};e.prototype.removeAllListeners=function(a){var b=N.prototype.removeAllListeners.apply(this,arguments);
"readable"!==a&&void 0!==a||q.nextTick(F,this);return b};e.prototype.resume=function(){var a=this._readableState;a.flowing||(A("resume"),a.flowing=!a.readableListening,a.resumeScheduled||(a.resumeScheduled=!0,q.nextTick(z,this,a)));a.paused=!1;return this};e.prototype.pause=function(){A("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(A("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};e.prototype.wrap=function(a){var b=
this,d=this._readableState,f=!1;a.on("end",function(){A("wrapped end");if(d.decoder&&!d.ended){var a=d.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(n){A("wrapped data");d.decoder&&(n=d.decoder.write(n));d.objectMode&&(null===n||void 0===n)||!(d.objectMode||n&&n.length)||b.push(n)||(f=!0,a.pause())});for(var n in a)void 0===this[n]&&"function"===typeof a[n]&&(this[n]=function(b){return function(){return a[b].apply(a,arguments)}}(n));for(n=0;n<V.length;n++)a.on(V[n],this.emit.bind(this,
V[n]));this._read=function(b){A("wrapped _read",b);f&&(f=!1,a.resume())};return this};"function"===typeof Symbol&&(e.prototype[Symbol.asyncIterator]=function(){void 0===U&&(U=c("./internal/streams/async_iterator"));return U(this)});Object.defineProperty(e.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(e.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});
Object.defineProperty(e.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}});e._fromList=G;Object.defineProperty(e.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(e.from=function(a,b){void 0===W&&(W=c("./internal/streams/from"));return W(e,a,b)})}).call(this)}).call(this,c("_process"),"undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/async_iterator":12,"./internal/streams/buffer_list":13,"./internal/streams/destroy":14,"./internal/streams/from":16,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,events:4,inherits:21,"string_decoder/":25,util:2}],10:[function(c,u,m){function q(a,b){var k=this._transformState;k.transforming=!1;var e=k.writecb;if(null===e)return this.emit("error",
new x);k.writechunk=null;k.writecb=null;null!=b&&this.push(b);e(a);a=this._readableState;a.reading=!1;(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function g(b){if(!(this instanceof g))return new g(b);r.call(this,b);this._transformState={afterTransform:q.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;b&&("function"===typeof b.transform&&(this._transform=b.transform),
"function"===typeof b.flush&&(this._flush=b.flush));this.on("prefinish",a)}function a(){var a=this;"function"!==typeof this._flush||this._readableState.destroyed?w(this,null,null):this._flush(function(b,k){w(a,b,k)})}function w(a,e,g){if(e)return a.emit("error",e);null!=g&&a.push(g);if(a._writableState.length)throw new p;if(a._transformState.transforming)throw new b;return a.push(null)}u.exports=g;u=c("../errors").codes;var e=u.ERR_METHOD_NOT_IMPLEMENTED,x=u.ERR_MULTIPLE_CALLBACK,b=u.ERR_TRANSFORM_ALREADY_TRANSFORMING,
p=u.ERR_TRANSFORM_WITH_LENGTH_0,r=c("./_stream_duplex");c("inherits")(g,r);g.prototype.push=function(a,b){this._transformState.needTransform=!1;return r.prototype.push.call(this,a,b)};g.prototype._transform=function(a,b,g){g(new e("_transform()"))};g.prototype._write=function(a,b,e){var k=this._transformState;k.writecb=e;k.writechunk=a;k.writeencoding=b;k.transforming||(a=this._readableState,(k.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};g.prototype._read=
function(a){a=this._transformState;null===a.writechunk||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))};g.prototype._destroy=function(a,b){r.prototype._destroy.call(this,a,function(a){b(a)})}},{"../errors":6,"./_stream_duplex":7,inherits:21}],11:[function(c,u,m){(function(q,g){(function(){function a(a){var b=this;this.entry=this.next=null;this.finish=function(){var d=b.entry;for(b.entry=null;d;){var f=d.callback;a.pendingcb--;f(void 0);
d=d.next}a.corkedRequestsFree.next=b}}function w(){}function e(b,d,h){m=m||c("./_stream_duplex");b=b||{};"boolean"!==typeof h&&(h=d instanceof m);this.objectMode=!!b.objectMode;h&&(this.objectMode=this.objectMode||!!b.writableObjectMode);this.highWaterMark=l(this,b,"writableHighWaterMark",h);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==b.decodeStrings;this.defaultEncoding=b.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=
0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var b=d._writableState,f=b.sync,n=b.writecb;if("function"!==typeof n)throw new N;b.writing=!1;b.writecb=null;b.length-=b.writelen;b.writelen=0;a?(--b.pendingcb,f?(q.nextTick(n,a),q.nextTick(t,d,b),d._writableState.errorEmitted=!0,I(d,a)):(n(a),d._writableState.errorEmitted=!0,I(d,a),t(d,b))):((a=k(b)||d.destroyed)||b.corked||b.bufferProcessing||!b.bufferedRequest||r(d,b),f?q.nextTick(p,d,b,a,n):p(d,b,a,n))};this.writecb=null;this.writelen=
0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==b.emitClose;this.autoDestroy=!!b.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new a(this)}function x(a){m=m||c("./_stream_duplex");var b=this instanceof m;if(!b&&!L.call(x,this))return new x(a);this._writableState=new e(a,this,b);this.writable=!0;a&&("function"===typeof a.write&&(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev),
"function"===typeof a.destroy&&(this._destroy=a.destroy),"function"===typeof a.final&&(this._final=a.final));D.call(this)}function b(a,b,l,n,k,h,e){b.writelen=n;b.writecb=e;b.writing=!0;b.sync=!0;if(b.destroyed)b.onwrite(new P("write"));else l?a._writev(k,b.onwrite):a._write(k,h,b.onwrite);b.sync=!1}function p(a,b,l,n){!l&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;n();t(a,b)}function r(f,d){d.bufferProcessing=!0;var l=d.bufferedRequest;if(f._writev&&l&&l.next){var n=
Array(d.bufferedRequestCount),k=d.corkedRequestsFree;k.entry=l;for(var h=0,e=!0;l;)n[h]=l,l.isBuf||(e=!1),l=l.next,h+=1;n.allBuffers=e;b(f,d,!0,d.length,n,"",k.finish);d.pendingcb++;d.lastBufferedRequest=null;k.next?(d.corkedRequestsFree=k.next,k.next=null):d.corkedRequestsFree=new a(d);d.bufferedRequestCount=0}else{for(;l&&(n=l.chunk,b(f,d,!1,d.objectMode?1:n.length,n,l.encoding,l.callback),l=l.next,d.bufferedRequestCount--,!d.writing););null===l&&(d.lastBufferedRequest=null)}d.bufferedRequest=l;
d.bufferProcessing=!1}function k(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function y(a,b){a._final(function(d){b.pendingcb--;d&&I(a,d);b.prefinished=!0;a.emit("prefinish");t(a,b)})}function t(a,b){var d=k(b);d&&(b.prefinished||b.finalCalled||("function"!==typeof a._final||b.destroyed?(b.prefinished=!0,a.emit("prefinish")):(b.pendingcb++,b.finalCalled=!0,q.nextTick(y,a,b))),0===b.pendingcb&&(b.finished=!0,a.emit("finish"),b.autoDestroy&&(b=a._readableState,
(!b||b.autoDestroy&&b.endEmitted)&&a.destroy())));return d}u.exports=x;var m;x.WritableState=e;var F={deprecate:c("util-deprecate")},D=c("./internal/streams/stream"),z=c("buffer").Buffer,E=g.Uint8Array||function(){},G=c("./internal/streams/destroy"),l=c("./internal/streams/state").getHighWaterMark,v=c("../errors").codes,h=v.ERR_INVALID_ARG_TYPE,B=v.ERR_METHOD_NOT_IMPLEMENTED,N=v.ERR_MULTIPLE_CALLBACK,K=v.ERR_STREAM_CANNOT_PIPE,P=v.ERR_STREAM_DESTROYED,H=v.ERR_STREAM_NULL_VALUES,A=v.ERR_STREAM_WRITE_AFTER_END,
M=v.ERR_UNKNOWN_ENCODING,I=G.errorOrDestroy;c("inherits")(x,D);e.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(e.prototype,"buffer",{get:F.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(f){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var L=Function.prototype[Symbol.hasInstance];
Object.defineProperty(x,Symbol.hasInstance,{value:function(a){return L.call(this,a)?!0:this!==x?!1:a&&a._writableState instanceof e}})}else L=function(a){return a instanceof this};x.prototype.pipe=function(){I(this,new K)};x.prototype.write=function(a,d,l){var f=this._writableState,k=!1,e;if(e=!f.objectMode)e=a,e=z.isBuffer(e)||e instanceof E;e&&!z.isBuffer(a)&&(a=z.from(a));"function"===typeof d&&(l=d,d=null);e?d="buffer":d||(d=f.defaultEncoding);"function"!==typeof l&&(l=w);if(f.ending)f=l,l=new A,
I(this,l),q.nextTick(f,l);else{var g;if(!(g=e)){g=a;var r=l,c;null===g?c=new H:"string"===typeof g||f.objectMode||(c=new h("chunk",["string","Buffer"],g));c?(I(this,c),q.nextTick(r,c),g=!1):g=!0}g&&(f.pendingcb++,k=e,k||(c=a,f.objectMode||!1===f.decodeStrings||"string"!==typeof c||(c=z.from(c,d)),a!==c&&(k=!0,d="buffer",a=c)),e=f.objectMode?1:a.length,f.length+=e,c=f.length<f.highWaterMark,c||(f.needDrain=!0),f.writing||f.corked?(e=f.lastBufferedRequest,f.lastBufferedRequest={chunk:a,encoding:d,isBuf:k,
callback:l,next:null},e?e.next=f.lastBufferedRequest:f.bufferedRequest=f.lastBufferedRequest,f.bufferedRequestCount+=1):b(this,f,!1,e,a,d,l),k=c)}return k};x.prototype.cork=function(){this._writableState.corked++};x.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.bufferProcessing||!a.bufferedRequest||r(this,a))};x.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new M(a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});x.prototype._write=function(a,b,l){l(new B("_write()"))};x.prototype._writev=null;x.prototype.end=function(a,b,l){var d=this._writableState;
"function"===typeof a?(l=a,b=a=null):"function"===typeof b&&(l=b,b=null);null!==a&&void 0!==a&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());if(!d.ending){a=l;d.ending=!0;t(this,d);if(a)if(d.finished)q.nextTick(a);else this.once("finish",a);d.ended=!0;this.writable=!1}return this};Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?
!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});x.prototype.destroy=G.destroy;x.prototype._undestroy=G.undestroy;x.prototype._destroy=function(a,b){b(a)}}).call(this)}).call(this,c("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":6,"./_stream_duplex":7,"./internal/streams/destroy":14,"./internal/streams/state":18,"./internal/streams/stream":19,_process:22,buffer:3,
inherits:21,"util-deprecate":26}],12:[function(c,u,m){(function(q){(function(){function g(a,b,k){b in a?Object.defineProperty(a,b,{value:k,enumerable:!0,configurable:!0,writable:!0}):a[b]=k;return a}function a(a,b){return{value:a,done:b}}function w(b){var l=b[r];if(null!==l){var e=b[D].read();null!==e&&(b[m]=null,b[r]=null,b[k]=null,l(a(e,!1)))}}function e(a){q.nextTick(w,a)}function x(b,l){return function(k,e){b.then(function(){if(l[t])k(a(void 0,!0));else l[F](k,e)},e)}}var b,p=c("./end-of-stream"),
r=Symbol("lastResolve"),k=Symbol("lastReject"),y=Symbol("error"),t=Symbol("ended"),m=Symbol("lastPromise"),F=Symbol("handlePromise"),D=Symbol("stream"),z=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((b={get stream(){return this[D]},next:function(){var b=this,l=this[y];if(null!==l)return Promise.reject(l);if(this[t])return Promise.resolve(a(void 0,!0));if(this[D].destroyed)return new Promise(function(l,k){q.nextTick(function(){b[y]?k(b[y]):l(a(void 0,!0))})});if(l=this[m])l=new Promise(x(l,
this));else{l=this[D].read();if(null!==l)return Promise.resolve(a(l,!1));l=new Promise(this[F])}return this[m]=l}},g(b,Symbol.asyncIterator,function(){return this}),g(b,"return",function(){var b=this;return new Promise(function(l,k){b[D].destroy(null,function(b){b?k(b):l(a(void 0,!0))})})}),b),z);u.exports=function(b){var l,c=Object.create(E,(l={},g(l,D,{value:b,writable:!0}),g(l,r,{value:null,writable:!0}),g(l,k,{value:null,writable:!0}),g(l,y,{value:null,writable:!0}),g(l,t,{value:b._readableState.endEmitted,
writable:!0}),g(l,F,{value:function(b,l){var e=c[D].read();e?(c[m]=null,c[r]=null,c[k]=null,b(a(e,!1))):(c[r]=b,c[k]=l)},writable:!0}),l));c[m]=null;p(b,function(b){if(b&&"ERR_STREAM_PREMATURE_CLOSE"!==b.code){var l=c[k];null!==l&&(c[m]=null,c[r]=null,c[k]=null,l(b));c[y]=b}else b=c[r],null!==b&&(c[m]=null,c[r]=null,c[k]=null,b(a(void 0,!0))),c[t]=!0});b.on("readable",e.bind(null,c));return c}}).call(this)}).call(this,c("_process"))},{"./end-of-stream":15,_process:22}],13:[function(c,u,m){function q(a,
b){var k=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));k.push.apply(k,e)}return k}function g(a){for(var b=1;b<arguments.length;b++){var k=null!=arguments[b]?arguments[b]:{};b%2?q(Object(k),!0).forEach(function(b){var e=k[b];b in a?Object.defineProperty(a,b,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[b]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,
Object.getOwnPropertyDescriptors(k)):q(Object(k)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(k,b))})}return a}function a(a,b){for(var k=0;k<b.length;k++){var e=b[k];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}function w(b,e,k){e&&a(b.prototype,e);k&&a(b,k);return b}var e=c("buffer").Buffer,x=c("util").inspect,b=x&&x.custom||"inspect";u.exports=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}w(a,[{key:"push",value:function(a){a={data:a,next:null};0<this.length?this.tail.next=a:this.head=a;this.tail=a;++this.length}},{key:"unshift",value:function(a){a={data:a,next:this.head};0===this.length&&(this.tail=a);this.head=a;++this.length}},{key:"shift",value:function(){if(0!==this.length){var a=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return a}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=
0}},{key:"join",value:function(a){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=a+b.data;return e}},{key:"concat",value:function(a){if(0===this.length)return e.alloc(0);a=e.allocUnsafe(a>>>0);for(var b=this.head,c=0;b;)e.prototype.copy.call(b.data,a,c),c+=b.data.length,b=b.next;return a}},{key:"consume",value:function(a,b){a<this.head.data.length?(b=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):b=a===this.head.data.length?this.shift():b?this._getString(a):
this._getBuffer(a);return b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var b=this.head,e=1,c=b.data;for(a-=c.length;b=b.next;){var g=b.data,r=a>g.length?g.length:a;c=r===g.length?c+g:c+g.slice(0,a);a-=r;if(0===a){r===g.length?(++e,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=g.slice(r));break}++e}this.length-=e;return c}},{key:"_getBuffer",value:function(a){var b=e.allocUnsafe(a),c=this.head,g=1;c.data.copy(b);for(a-=c.data.length;c=
c.next;){var r=c.data,p=a>r.length?r.length:a;r.copy(b,b.length-a,0,p);a-=p;if(0===a){p===r.length?(++g,this.head=c.next?c.next:this.tail=null):(this.head=c,c.data=r.slice(p));break}++g}this.length-=g;return b}},{key:b,value:function(a,b){return x(this,g({},b,{depth:0,customInspect:!1}))}}]);return a}()},{buffer:3,util:2}],14:[function(c,u,m){(function(c){(function(){function g(e,c){q(e,c);a(e)}function a(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||
a.emit("close")}function q(a,c){a.emit("error",c)}u.exports={destroy:function(e,w){var b=this,p=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||p)return w?w(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(q,this,e)):c.nextTick(q,this,e)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(e||null,function(e){!w&&
e?b._writableState?b._writableState.errorEmitted?c.nextTick(a,b):(b._writableState.errorEmitted=!0,c.nextTick(g,b,e)):c.nextTick(g,b,e):w?(c.nextTick(a,b),w(e)):c.nextTick(a,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=
!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,c){var b=a._readableState,e=a._writableState;b&&b.autoDestroy||e&&e.autoDestroy?a.destroy(c):a.emit("error",c)}}}).call(this)}).call(this,c("_process"))},{_process:22}],15:[function(c,u,m){function q(a){var e=!1;return function(){if(!e){e=!0;for(var b=arguments.length,c=Array(b),g=0;g<b;g++)c[g]=arguments[g];a.apply(this,c)}}}function g(){}function a(e,c,b){if("function"===
typeof c)return a(e,null,c);c||(c={});b=q(b||g);var p=c.readable||!1!==c.readable&&e.readable,r=c.writable||!1!==c.writable&&e.writable,k=function(){e.writable||t()},m=e._writableState&&e._writableState.finished,t=function(){r=!1;m=!0;p||b.call(e)},x=e._readableState&&e._readableState.endEmitted,F=function(){p=!1;x=!0;r||b.call(e)},D=function(a){b.call(e,a)},z=function(){var a;if(p&&!x)return e._readableState&&e._readableState.ended||(a=new w),b.call(e,a);if(r&&!m)return e._writableState&&e._writableState.ended||
(a=new w),b.call(e,a)},u=function(){e.req.on("finish",t)};if(e.setHeader&&"function"===typeof e.abort)if(e.on("complete",t),e.on("abort",z),e.req)u();else e.on("request",u);else r&&!e._writableState&&(e.on("end",k),e.on("close",k));e.on("end",F);e.on("finish",t);if(!1!==c.error)e.on("error",D);e.on("close",z);return function(){e.removeListener("complete",t);e.removeListener("abort",z);e.removeListener("request",u);e.req&&e.req.removeListener("finish",t);e.removeListener("end",k);e.removeListener("close",
k);e.removeListener("finish",t);e.removeListener("end",F);e.removeListener("error",D);e.removeListener("close",z)}}var w=c("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;u.exports=a},{"../../../errors":6}],16:[function(c,u,m){u.exports=function(){throw Error("Readable.from is not available in the browser");}},{}],17:[function(c,u,m){function q(a){var b=!1;return function(){b||(b=!0,a.apply(void 0,arguments))}}function g(a){if(a)throw a;}function a(a,b,e,g){g=q(g);var k=!1;a.on("close",function(){k=
!0});void 0===x&&(x=c("./end-of-stream"));x(a,{readable:b,writable:e},function(a){if(a)return g(a);k=!0;g()});var r=!1;return function(b){if(!k&&!r){r=!0;if(a.setHeader&&"function"===typeof a.abort)return a.abort();if("function"===typeof a.destroy)return a.destroy();g(b||new p("pipe"))}}}function w(a){a()}function e(a,b){return a.pipe(b)}var x;m=c("../../../errors").codes;var b=m.ERR_MISSING_ARGS,p=m.ERR_STREAM_DESTROYED;u.exports=function(){for(var c=arguments.length,k=Array(c),p=0;p<c;p++)k[p]=
arguments[p];var q=k.length?"function"!==typeof k[k.length-1]?g:k.pop():g;Array.isArray(k[0])&&(k=k[0]);if(2>k.length)throw new b("streams");var m,F=k.map(function(b,c){var e=c<k.length-1;return a(b,e,0<c,function(a){m||(m=a);a&&F.forEach(w);e||(F.forEach(w),q(m))})});return k.reduce(e)}},{"../../../errors":6,"./end-of-stream":15}],18:[function(c,u,m){var q=c("../../../errors").codes.ERR_INVALID_OPT_VALUE;u.exports={getHighWaterMark:function(c,a,w,e){a=null!=a.highWaterMark?a.highWaterMark:e?a[w]:
null;if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||0>a)throw new q(e?w:"highWaterMark",a);return Math.floor(a)}return c.objectMode?16:16384}}},{"../../../errors":6}],19:[function(c,u,m){u.exports=c("events").EventEmitter},{events:4}],20:[function(c,u,m){m.read=function(c,g,a,w,e){var q=8*e-w-1;var b=(1<<q)-1,p=b>>1,r=-7;e=a?e-1:0;var k=a?-1:1,m=c[g+e];e+=k;a=m&(1<<-r)-1;m>>=-r;for(r+=q;0<r;a=256*a+c[g+e],e+=k,r-=8);q=a&(1<<-r)-1;a>>=-r;for(r+=w;0<r;q=256*q+c[g+e],e+=k,r-=8);if(0===a)a=1-p;else{if(a===
b)return q?NaN:Infinity*(m?-1:1);q+=Math.pow(2,w);a-=p}return(m?-1:1)*q*Math.pow(2,a-w)};m.write=function(c,g,a,w,e,m){var b,p=8*m-e-1,r=(1<<p)-1,k=r>>1,q=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;m=w?0:m-1;var t=w?1:-1,u=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,w=r):(w=Math.floor(Math.log(g)/Math.LN2),1>g*(b=Math.pow(2,-w))&&(w--,b*=2),g=1<=w+k?g+q/b:g+q*Math.pow(2,1-k),2<=g*b&&(w++,b/=2),w+k>=r?(g=0,w=r):1<=w+k?(g=(g*b-1)*Math.pow(2,e),w+=k):(g=g*Math.pow(2,k-1)*
Math.pow(2,e),w=0));for(;8<=e;c[a+m]=g&255,m+=t,g/=256,e-=8);w=w<<e|g;for(p+=e;0<p;c[a+m]=w&255,m+=t,w/=256,p-=8);c[a+m-t]|=128*u}},{}],21:[function(c,u,m){u.exports="function"===typeof Object.create?function(c,g){g&&(c.super_=g,c.prototype=Object.create(g.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:function(c,g){if(g){c.super_=g;var a=function(){};a.prototype=g.prototype;c.prototype=new a;c.prototype.constructor=c}}},{}],22:[function(c,u,m){function q(){throw Error("setTimeout has not been defined");
}function g(){throw Error("clearTimeout has not been defined");}function a(a){if(r===setTimeout)return setTimeout(a,0);if((r===q||!r)&&setTimeout)return r=setTimeout,setTimeout(a,0);try{return r(a,0)}catch(z){try{return r.call(null,a,0)}catch(E){return r.call(this,a,0)}}}function w(a){if(k===clearTimeout)return clearTimeout(a);if((k===g||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(z){try{return k.call(null,a)}catch(E){return k.call(this,a)}}}function e(){t&&C&&(t=
!1,C.length?y=C.concat(y):F=-1,y.length&&x())}function x(){if(!t){var b=a(e);t=!0;for(var c=y.length;c;){C=y;for(y=[];++F<c;)C&&C[F].run();F=-1;c=y.length}C=null;t=!1;w(b)}}function b(a,b){this.fun=a;this.array=b}function p(){}c=u.exports={};try{var r="function"===typeof setTimeout?setTimeout:q}catch(D){r=q}try{var k="function"===typeof clearTimeout?clearTimeout:g}catch(D){k=g}var y=[],t=!1,C,F=-1;c.nextTick=function(c){var k=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)k[e-
1]=arguments[e];y.push(new b(c,k));1!==y.length||t||a(x)};b.prototype.run=function(){this.fun.apply(null,this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=p;c.addListener=p;c.once=p;c.off=p;c.removeListener=p;c.removeAllListeners=p;c.emit=p;c.prependListener=p;c.prependOnceListener=p;c.listeners=function(a){return[]};c.binding=function(a){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(a){throw Error("process.chdir is not supported");
};c.umask=function(){return 0}},{}],23:[function(c,u,m){function q(a,c){for(var b in a)c[b]=a[b]}function g(a,c,b){return w(a,c,b)}var a=c("buffer"),w=a.Buffer;w.from&&w.alloc&&w.allocUnsafe&&w.allocUnsafeSlow?u.exports=a:(q(a,m),m.Buffer=g);g.prototype=Object.create(w.prototype);q(w,g);g.from=function(a,c,b){if("number"===typeof a)throw new TypeError("Argument must not be a number");return w(a,c,b)};g.alloc=function(a,c,b){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=
w(a);void 0!==c?"string"===typeof b?a.fill(c,b):a.fill(c):a.fill(0);return a};g.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return w(a)};g.allocUnsafeSlow=function(c){if("number"!==typeof c)throw new TypeError("Argument must be a number");return a.SlowBuffer(c)}},{buffer:3}],24:[function(c,u,m){(function(q){(function(){(function(g){function a(b,f){if(!(this instanceof a))return new a(b,f);for(var l=0,c=v.length;l<c;l++)this[v[l]]="";this.q=this.c=
"";this.bufferCheckPosition=g.MAX_BUFFER_LENGTH;this.opt=f||{};this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!b;this.noscript=!(!b&&!this.opt.noscript);this.state=d.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(g.XML_ENTITIES):Object.create(g.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=
Object.create(A));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=0;this.onready&&this.onready(void 0)}function m(b,d){if(!(this instanceof m))return new m(b,d);h.apply(this);this._parser=new a(b,d);this.readable=this.writable=!0;var f=this;this._parser.onend=function(){f.emit("end")};this._parser.onerror=function(a){f.emit("error",a);f._parser.error=null};this._decoder=null;B.forEach(function(a){Object.defineProperty(f,"on"+a,{get:function(){return f._parser["on"+
a]},set:function(b){if(!b)return f.removeAllListeners(a),f._parser["on"+a]=b;f.on(a,b)},enumerable:!0,configurable:!1})})}function e(a){return" "===a||"\n"===a||"\r"===a||"\t"===a}function u(a){return'"'===a||"'"===a}function b(a,b,d){a.textNode&&p(a);a[b]&&a[b](d)}function p(a){a.textNode=r(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function r(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function k(a,b){p(a);a.trackPosition&&(b+="\nLine: "+
a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=Error(b);a.error=b;a.onerror&&a.onerror(b);return a}function y(b){b.sawRoot&&!b.closedRoot&&t(b,"Unclosed root tag");b.state!==d.BEGIN&&b.state!==d.BEGIN_WHITESPACE&&b.state!==d.TEXT&&k(b,"Unexpected end");p(b);b.c="";b.closed=!0;b.onend&&b.onend(void 0);a.call(b,b.strict,b.opt);return b}function t(b,d){if("object"!==typeof b||!(b instanceof a))throw Error("bad call to strictFail");b.strict&&k(b,d)}function C(a,b){var d=0>a.indexOf(":")?["",a]:a.split(":"),
f=d[0];d=d[1];b&&"xmlns"===a&&(f="xmlns",d="");return{prefix:f,local:d}}function F(a){a.strict||(a.attribName=a.attribName[a.looseCase]());if(-1===a.attribList.indexOf(a.attribName)&&!a.tag.attributes.hasOwnProperty(a.attribName))if(a.opt.xmlns){var d=C(a.attribName,!0),f=d.local;if("xmlns"===d.prefix)if("xml"===f&&a.attribValue!==P)t(a,"xml: prefix must be bound to "+P+"\nActual: "+a.attribValue);else if("xmlns"===f&&a.attribValue!==H)t(a,"xmlns: prefix must be bound to "+H+"\nActual: "+a.attribValue);
else{d=a.tag;var l=a.tags[a.tags.length-1]||a;d.ns===l.ns&&(d.ns=Object.create(l.ns));d.ns[f]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,b(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function D(a,f){if(a.opt.xmlns){var l=a.tag,c=C(a.tagName);l.prefix=c.prefix;l.local=c.local;l.uri=l.ns[c.prefix]||"";l.prefix&&!l.uri&&(t(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),l.uri=c.prefix);
c=a.tags[a.tags.length-1]||a;l.ns&&c.ns!==l.ns&&Object.keys(l.ns).forEach(function(d){b(a,"onopennamespace",{prefix:d,uri:l.ns[d]})});c=0;for(var k=a.attribList.length;c<k;c++){var e=a.attribList[c],g=e[0],h=e[1],n=C(g,!0);e=n.prefix;var p=""===e?"":l.ns[e]||"";h={name:g,value:h,prefix:e,local:n.local,uri:p};e&&"xmlns"!==e&&!p&&(t(a,"Unbound namespace prefix: "+JSON.stringify(e)),h.uri=e);a.tag.attributes[g]=h;b(a,"onattribute",h)}a.attribList.length=0}a.tag.isSelfClosing=!!f;a.sawRoot=!0;a.tags.push(a.tag);
b(a,"onopentag",a.tag);f||(a.noscript||"script"!==a.tagName.toLowerCase()?a.state=d.TEXT:a.state=d.SCRIPT,a.tag=null,a.tagName="");a.attribName=a.attribValue="";a.attribList.length=0}function z(a){if(a.tagName){if(a.script){if("script"!==a.tagName){a.script+="</"+a.tagName+">";a.tagName="";a.state=d.SCRIPT;return}b(a,"onscript",a.script);a.script=""}var f=a.tags.length,l=a.tagName;a.strict||(l=l[a.looseCase]());for(var c=l;f--;)if(a.tags[f].name!==c)t(a,"Unexpected close tag");else break;if(0>f)t(a,
"Unmatched closing tag: "+a.tagName),a.textNode+="</"+a.tagName+">";else{a.tagName=l;for(l=a.tags.length;l-- >f;){var k=a.tag=a.tags.pop();a.tagName=a.tag.name;b(a,"onclosetag",a.tagName);for(var e in k.ns);c=a.tags[a.tags.length-1]||a;a.opt.xmlns&&k.ns!==c.ns&&Object.keys(k.ns).forEach(function(d){b(a,"onclosenamespace",{prefix:d,uri:k.ns[d]})})}0===f&&(a.closedRoot=!0);a.tagName=a.attribValue=a.attribName="";a.attribList.length=0}}else t(a,"Weird empty close tag."),a.textNode+="</>";a.state=d.TEXT}
function E(a){var b=a.entity,d=b.toLowerCase(),f="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[d])return a.ENTITIES[d];b=d;if("#"===b.charAt(0))if("x"===b.charAt(1)){b=b.slice(2);var l=parseInt(b,16);f=l.toString(16)}else b=b.slice(1),l=parseInt(b,10),f=l.toString(10);b=b.replace(/^0+/,"");return isNaN(l)||f.toLowerCase()!==b?(t(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(l)}function G(a,b){"<"===b?(a.state=d.OPEN_WAKA,a.startTagPosition=a.position):e(b)||(t(a,"Non-whitespace before first tag."),
a.textNode=b,a.state=d.TEXT)}function l(a,b){var d="";b<a.length&&(d=a.charAt(b));return d}g.parser=function(b,d){return new a(b,d)};g.SAXParser=a;g.SAXStream=m;g.createStream=function(a,b){return new m(a,b)};g.MAX_BUFFER_LENGTH=65536;var v="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");g.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});Object.keys||(Object.keys=function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(d);return b});a.prototype={end:function(){y(this)},write:function(a){if(this.error)throw this.error;if(this.closed)return k(this,"Cannot write after close. Assign an onready handler.");if(null===a)return y(this);"object"===typeof a&&(a=a.toString());for(var c=0,h;;){this.c=h=l(a,c++);if(!h)break;this.trackPosition&&(this.position++,
"\n"===h?(this.line++,this.column=0):this.column++);switch(this.state){case d.BEGIN:this.state=d.BEGIN_WHITESPACE;if("\ufeff"===h)continue;G(this,h);continue;case d.BEGIN_WHITESPACE:G(this,h);continue;case d.TEXT:if(this.sawRoot&&!this.closedRoot){for(var n=c-1;h&&"<"!==h&&"&"!==h;)(h=l(a,c++))&&this.trackPosition&&(this.position++,"\n"===h?(this.line++,this.column=0):this.column++);this.textNode+=a.substring(n,c-1)}"<"!==h||this.sawRoot&&this.closedRoot&&!this.strict?(e(h)||this.sawRoot&&!this.closedRoot||
t(this,"Text data outside of root node."),"&"===h?this.state=d.TEXT_ENTITY:this.textNode+=h):(this.state=d.OPEN_WAKA,this.startTagPosition=this.position);continue;case d.SCRIPT:"<"===h?this.state=d.SCRIPT_ENDING:this.script+=h;continue;case d.SCRIPT_ENDING:"/"===h?this.state=d.CLOSE_TAG:(this.script+="<"+h,this.state=d.SCRIPT);continue;case d.OPEN_WAKA:"!"===h?(this.state=d.SGML_DECL,this.sgmlDecl=""):e(h)||(M.test(h)?(this.state=d.OPEN_TAG,this.tagName=h):"/"===h?(this.state=d.CLOSE_TAG,this.tagName=
""):"?"===h?(this.state=d.PROC_INST,this.procInstName=this.procInstBody=""):(t(this,"Unencoded <"),this.startTagPosition+1<this.position&&(h=Array(this.position-this.startTagPosition).join(" ")+h),this.textNode+="<"+h,this.state=d.TEXT));continue;case d.SGML_DECL:(this.sgmlDecl+h).toUpperCase()===N?(b(this,"onopencdata"),this.state=d.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+h?(this.state=d.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+h).toUpperCase()===K?(this.state=d.DOCTYPE,
(this.doctype||this.sawRoot)&&t(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===h?(b(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=d.TEXT):(u(h)&&(this.state=d.SGML_DECL_QUOTED),this.sgmlDecl+=h);continue;case d.SGML_DECL_QUOTED:h===this.q&&(this.state=d.SGML_DECL,this.q="");this.sgmlDecl+=h;continue;case d.DOCTYPE:">"===h?(this.state=d.TEXT,b(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=h,"["===h?this.state=d.DOCTYPE_DTD:
u(h)&&(this.state=d.DOCTYPE_QUOTED,this.q=h));continue;case d.DOCTYPE_QUOTED:this.doctype+=h;h===this.q&&(this.q="",this.state=d.DOCTYPE);continue;case d.DOCTYPE_DTD:this.doctype+=h;"]"===h?this.state=d.DOCTYPE:u(h)&&(this.state=d.DOCTYPE_DTD_QUOTED,this.q=h);continue;case d.DOCTYPE_DTD_QUOTED:this.doctype+=h;h===this.q&&(this.state=d.DOCTYPE_DTD,this.q="");continue;case d.COMMENT:"-"===h?this.state=d.COMMENT_ENDING:this.comment+=h;continue;case d.COMMENT_ENDING:"-"===h?(this.state=d.COMMENT_ENDED,
(this.comment=r(this.opt,this.comment))&&b(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+h,this.state=d.COMMENT);continue;case d.COMMENT_ENDED:">"!==h?(t(this,"Malformed comment"),this.comment+="--"+h,this.state=d.COMMENT):this.state=d.TEXT;continue;case d.CDATA:"]"===h?this.state=d.CDATA_ENDING:this.cdata+=h;continue;case d.CDATA_ENDING:"]"===h?this.state=d.CDATA_ENDING_2:(this.cdata+="]"+h,this.state=d.CDATA);continue;case d.CDATA_ENDING_2:">"===h?(this.cdata&&b(this,"oncdata",
this.cdata),b(this,"onclosecdata"),this.cdata="",this.state=d.TEXT):"]"===h?this.cdata+="]":(this.cdata+="]]"+h,this.state=d.CDATA);continue;case d.PROC_INST:"?"===h?this.state=d.PROC_INST_ENDING:e(h)?this.state=d.PROC_INST_BODY:this.procInstName+=h;continue;case d.PROC_INST_BODY:if(!this.procInstBody&&e(h))continue;else"?"===h?this.state=d.PROC_INST_ENDING:this.procInstBody+=h;continue;case d.PROC_INST_ENDING:">"===h?(b(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=d.TEXT):(this.procInstBody+="?"+h,this.state=d.PROC_INST_BODY);continue;case d.OPEN_TAG:if(I.test(h))this.tagName+=h;else{this.strict||(this.tagName=this.tagName[this.looseCase]());n=this.tags[this.tags.length-1]||this;var B=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(B.ns=n.ns);this.attribList.length=0;b(this,"onopentagstart",B);">"===h?D(this):"/"===h?this.state=d.OPEN_TAG_SLASH:(e(h)||t(this,"Invalid character in tag name"),this.state=
d.ATTRIB)}continue;case d.OPEN_TAG_SLASH:">"===h?(D(this,!0),z(this)):(t(this,"Forward-slash in opening tag not followed by >"),this.state=d.ATTRIB);continue;case d.ATTRIB:if(e(h))continue;else">"===h?D(this):"/"===h?this.state=d.OPEN_TAG_SLASH:M.test(h)?(this.attribName=h,this.attribValue="",this.state=d.ATTRIB_NAME):t(this,"Invalid attribute name");continue;case d.ATTRIB_NAME:"="===h?this.state=d.ATTRIB_VALUE:">"===h?(t(this,"Attribute without value"),this.attribValue=this.attribName,F(this),D(this)):
e(h)?this.state=d.ATTRIB_NAME_SAW_WHITE:I.test(h)?this.attribName+=h:t(this,"Invalid attribute name");continue;case d.ATTRIB_NAME_SAW_WHITE:if("="===h)this.state=d.ATTRIB_VALUE;else if(e(h))continue;else t(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",b(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===h?D(this):M.test(h)?(this.attribName=h,this.state=d.ATTRIB_NAME):(t(this,"Invalid attribute name"),this.state=d.ATTRIB);continue;
case d.ATTRIB_VALUE:if(e(h))continue;else u(h)?(this.q=h,this.state=d.ATTRIB_VALUE_QUOTED):(t(this,"Unquoted attribute value"),this.state=d.ATTRIB_VALUE_UNQUOTED,this.attribValue=h);continue;case d.ATTRIB_VALUE_QUOTED:if(h!==this.q){"&"===h?this.state=d.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=h;continue}F(this);this.q="";this.state=d.ATTRIB_VALUE_CLOSED;continue;case d.ATTRIB_VALUE_CLOSED:e(h)?this.state=d.ATTRIB:">"===h?D(this):"/"===h?this.state=d.OPEN_TAG_SLASH:M.test(h)?(t(this,"No whitespace between attributes"),
this.attribName=h,this.attribValue="",this.state=d.ATTRIB_NAME):t(this,"Invalid attribute name");continue;case d.ATTRIB_VALUE_UNQUOTED:if(">"!==h&&!e(h)){"&"===h?this.state=d.ATTRIB_VALUE_ENTITY_U:this.attribValue+=h;continue}F(this);">"===h?D(this):this.state=d.ATTRIB;continue;case d.CLOSE_TAG:if(this.tagName)">"===h?z(this):I.test(h)?this.tagName+=h:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=d.SCRIPT):(e(h)||t(this,"Invalid tagname in closing tag"),this.state=d.CLOSE_TAG_SAW_WHITE);
else if(e(h))continue;else M.test(h)?this.tagName=h:this.script?(this.script+="</"+h,this.state=d.SCRIPT):t(this,"Invalid tagname in closing tag.");continue;case d.CLOSE_TAG_SAW_WHITE:if(e(h))continue;">"===h?z(this):t(this,"Invalid characters in closing tag");continue;case d.TEXT_ENTITY:case d.ATTRIB_VALUE_ENTITY_Q:case d.ATTRIB_VALUE_ENTITY_U:switch(this.state){case d.TEXT_ENTITY:var q=d.TEXT;var m="textNode";break;case d.ATTRIB_VALUE_ENTITY_Q:q=d.ATTRIB_VALUE_QUOTED;m="attribValue";break;case d.ATTRIB_VALUE_ENTITY_U:q=
d.ATTRIB_VALUE_UNQUOTED,m="attribValue"}";"===h?(this[m]+=E(this),this.entity="",this.state=q):(this.entity.length?f:L).test(h)?this.entity+=h:(t(this,"Invalid character in entity name"),this[m]+="&"+this.entity+h,this.entity="",this.state=q);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){a=Math.max(g.MAX_BUFFER_LENGTH,10);h=c=0;for(q=v.length;h<q;h++){m=this[v[h]].length;if(m>a)switch(v[h]){case "textNode":p(this);break;case "cdata":b(this,
"oncdata",this.cdata);this.cdata="";break;case "script":b(this,"onscript",this.script);this.script="";break;default:k(this,"Max buffer length exceeded: "+v[h])}c=Math.max(c,m)}this.bufferCheckPosition=g.MAX_BUFFER_LENGTH-c+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){p(this);""!==this.cdata&&(b(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(b(this,"onscript",this.script),this.script="")}};try{var h=
c("stream").Stream}catch(n){h=function(){}}var B=g.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});m.prototype=Object.create(h.prototype,{constructor:{value:m}});m.prototype.write=function(a){"function"===typeof q&&"function"===typeof q.isBuffer&&q.isBuffer(a)&&(this._decoder||(this._decoder=new (c("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());this.emit("data",a);return!0};m.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};m.prototype.on=function(a,b){var d=this;d._parser["on"+a]||-1===B.indexOf(a)||(d._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a);d.emit.apply(d,b)});return h.prototype.on.call(d,a,b)};var N="[CDATA[",K="DOCTYPE",P="http://www.w3.org/XML/1998/namespace",H="http://www.w3.org/2000/xmlns/",A={xml:P,xmlns:H},M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,L=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,
d=0;g.STATE={BEGIN:d++,BEGIN_WHITESPACE:d++,TEXT:d++,TEXT_ENTITY:d++,OPEN_WAKA:d++,SGML_DECL:d++,SGML_DECL_QUOTED:d++,DOCTYPE:d++,DOCTYPE_QUOTED:d++,DOCTYPE_DTD:d++,DOCTYPE_DTD_QUOTED:d++,COMMENT_STARTING:d++,COMMENT:d++,COMMENT_ENDING:d++,COMMENT_ENDED:d++,CDATA:d++,CDATA_ENDING:d++,CDATA_ENDING_2:d++,PROC_INST:d++,PROC_INST_BODY:d++,PROC_INST_ENDING:d++,OPEN_TAG:d++,OPEN_TAG_SLASH:d++,ATTRIB:d++,ATTRIB_NAME:d++,ATTRIB_NAME_SAW_WHITE:d++,ATTRIB_VALUE:d++,ATTRIB_VALUE_QUOTED:d++,ATTRIB_VALUE_CLOSED:d++,
ATTRIB_VALUE_UNQUOTED:d++,ATTRIB_VALUE_ENTITY_Q:d++,ATTRIB_VALUE_ENTITY_U:d++,CLOSE_TAG:d++,CLOSE_TAG_SAW_WHITE:d++,SCRIPT:d++,SCRIPT_ENDING:d++};g.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};g.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,
THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,
laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,
Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,
lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,
ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(g.ENTITIES).forEach(function(a){var b=g.ENTITIES[a];b="number"===typeof b?String.fromCharCode(b):b;g.ENTITIES[a]=b});for(var J in g.STATE)g.STATE[g.STATE[J]]=J;d=g.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,b=Math.floor,d=function(){var d=[],f=-1,
l=arguments.length;if(!l)return"";for(var h="";++f<l;){var c=Number(arguments[f]);if(!isFinite(c)||0>c||1114111<c||b(c)!==c)throw RangeError("Invalid code point: "+c);if(65535>=c)d.push(c);else{c-=65536;var k=(c>>10)+55296;c=c%1024+56320;d.push(k,c)}if(f+1===l||16384<d.length)h+=a.apply(null,d),d.length=0}return h};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()})("undefined"===typeof m?this.sax={}:m)}).call(this)}).call(this,
c("buffer").Buffer)},{buffer:3,stream:5,string_decoder:25}],25:[function(c,u,m){function q(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;default:if(b)return;a=(""+a).toLowerCase();b=!0}}function g(a){var c=q(a);if("string"!==typeof c&&(t.isEncoding===C||!C(a)))throw Error("Unknown encoding: "+a);this.encoding=
c||a;switch(this.encoding){case "utf16le":this.text=x;this.end=b;a=4;break;case "utf8":this.fillLast=e;a=4;break;case "base64":this.text=p;this.end=r;a=3;break;default:this.write=k;this.end=y;return}this.lastTotal=this.lastNeed=0;this.lastChar=t.allocUnsafe(a)}function a(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===a>>6?-1:-2}function w(b,c,k){var e=c.length-1;if(e<k)return 0;var g=a(c[e]);if(0<=g)return 0<g&&(b.lastNeed=g-1),g;if(--e<k||-2===g)return 0;g=a(c[e]);if(0<=g)return 0<g&&
(b.lastNeed=g-2),g;if(--e<k||-2===g)return 0;g=a(c[e]);return 0<=g?(0<g&&(2===g?g=0:b.lastNeed=g-3),g):0}function e(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,
0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function x(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function b(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",
0,this.lastTotal-this.lastNeed):a}function p(a,b){var c=(a.length-b)%3;if(0===c)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-c)}function r(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function k(a){return a.toString(this.encoding)}function y(a){return a&&a.length?this.write(a):
""}var t=c("safe-buffer").Buffer,C=t.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};m.StringDecoder=g;g.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):
b||""};g.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};g.prototype.text=function(a,b){var c=w(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",b,c)};g.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":23}],26:[function(c,u,m){(function(c){(function(){function g(a){try{if(!c.localStorage)return!1}catch(w){return!1}a=c.localStorage[a];return null==a?!1:"true"===String(a).toLowerCase()}u.exports=function(a,c){if(g("noDeprecation"))return a;var e=!1;return function(){if(!e){if(g("throwDeprecation"))throw Error(c);g("traceDeprecation")?console.trace(c):console.warn(c);e=!0}return a.apply(this,arguments)}}}).call(this)}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],27:[function(c,u,m){(function(c,g,a,m,e){function q(a,b){var d=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!d&&b&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=b);else if(d&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],a.contents)for(var f=0;f<a.contents.length;f++)q(a.contents[f],
d||b)}function b(a){if("contents"in a){var d="styleAttrs"in a?a.styleAttrs[m.byName.ruby.qname]:null;d="span"===a.kind&&("container"===d||"textContainer"===d||"baseContainer"===d);for(var f=a.contents.length-1;0<=f;f--)!d||"styleAttrs"in a.contents[f]&&m.byName.ruby.qname in a.contents[f].styleAttrs?b(a.contents[f]):delete a.contents[f]}}function p(a,b,d,f){var l=f&&"seq"===f.timeContainer,c=0;f&&(c=l&&d?d.end:f.begin);b.begin=b.explicit_begin?b.explicit_begin+c:c;d=b.begin;f=null;for(var h in b.sets)b.sets.hasOwnProperty(h)&&
(p(a,b.sets[h],f,b),d="seq"===b.timeContainer?b.sets[h].end:Math.max(d,b.sets[h].end),f=b.sets[h]);if("contents"in b)for(var k in b.contents)b.contents.hasOwnProperty(k)&&(p(a,b.contents[k],f,b),d="seq"===b.timeContainer?b.contents[k].end:Math.max(d,b.contents[k].end),f=b.contents[k]);else d=l?b.begin:Number.POSITIVE_INFINITY;b.end=null!==b.explicit_end&&null!==b.explicit_dur?Math.min(b.begin+b.explicit_dur,c+b.explicit_end):null===b.explicit_end&&null!==b.explicit_dur?b.begin+b.explicit_dur:null!==
b.explicit_end&&null===b.explicit_dur?c+b.explicit_end:d;delete b.explicit_begin;delete b.explicit_dur;delete b.explicit_end;a._registerEvent(b)}function r(a){this.node=a}function k(){this.events=[];this.head=new w;this.body=null}function w(){this.styling=new t;this.layout=new D}function t(){this.styles={};this.initials={}}function u(){this.styleRefs=this.styleAttrs=this.id=null}function F(){this.styleAttrs=null}function D(){this.regions={}}function z(a,b){this.kind="image";this.src=a;this.type=b}
function E(a){this.id=a}function G(a){this.regionID=a}function l(a){this.styleAttrs=a}function v(a){this.sets=a}function h(a){this.contents=a}function B(a,b,d){this.explicit_begin=a;this.explicit_end=b;this.explicit_dur=d}function N(){this.kind="body"}function K(){this.kind="div"}function P(){this.kind="p"}function H(){this.kind="span"}function A(){this.kind="span"}function M(){this.kind="br"}function I(){}function L(){}function f(a){var b=null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(b=a.value||
null);return b}function d(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function J(a,b){var d={};if(null!==a)for(var f in a.attributes)if(a.attributes.hasOwnProperty(f)){var l=a.attributes[f].uri+" "+a.attributes[f].local,c=m.byQName[l];if(void 0!==c){var h=c.parse(a.attributes[f].value);null!==h?(d[l]=h,c===m.byName.zIndex&&R(b,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Q(b,"Cannot parse styling attribute "+l+" --\x3e "+a.attributes[f].value)}}return d}
function n(a,b,d){for(var f in a.attributes)if(a.attributes.hasOwnProperty(f)&&a.attributes[f].uri===b&&a.attributes[f].local===d)return a.attributes[f].value;return null}function S(b,d){b=n(b,a.ns_tts,"extent");if(null===b)return null;var f=b.split(" ");if(2!==f.length)return R(d,"Malformed extent (ignoring)"),null;b=e.parseLength(f[0]);f=e.parseLength(f[1]);return f&&b?{h:f,w:b}:(R(d,"Malformed extent values (ignoring)"),null)}function U(a,b,d){var f=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,l=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,
c=/^(\d+(?:\.\d+)?)t$/,h=/^(\d+(?:\.\d+)?)ms$/,k=/^(\d+(?:\.\d+)?)s$/,e=/^(\d+(?:\.\d+)?)h$/,g=/^(\d+(?:\.\d+)?)m$/,p,r=null;null!==(p=/^(\d+(?:\.\d+)?)f$/.exec(d))?null!==b&&(r=parseFloat(p[1])/b):null!==(p=c.exec(d))?null!==a&&(r=parseFloat(p[1])/a):null!==(p=h.exec(d))?r=parseFloat(p[1])/1E3:null!==(p=k.exec(d))?r=parseFloat(p[1]):null!==(p=e.exec(d))?r=3600*parseFloat(p[1]):null!==(p=g.exec(d))?r=60*parseFloat(p[1]):null!==(p=f.exec(d))?r=3600*parseInt(p[1])+60*parseInt(p[2])+parseFloat(p[3]):
null!==(p=l.exec(d))&&null!==b&&(r=3600*parseInt(p[1])+60*parseInt(p[2])+parseInt(p[3])+(null===p[4]?0:parseInt(p[4])/b));return r}function W(a,b,d){for(;0<b.styleRefs.length;){var f=b.styleRefs.pop();f in a.styles?(W(a,a.styles[f],d),V(a.styles[f].styleAttrs,b.styleAttrs)):Q(d,"Non-existant style id referenced")}}function T(a,b,d,f){for(var l=b.length-1;0<=l;l--){var c=b[l];c in a.styles?V(a.styles[c].styleAttrs,d):Q(f,"Non-existant style id referenced")}}function V(a,b){for(var d in a)!a.hasOwnProperty(d)||
d in b||(b[d]=a[d])}function R(a,b){if(a&&a.warn&&a.warn(b))throw b;}function Q(a,b){if(a&&a.error&&a.error(b))throw b;}function O(a,b){a&&a.fatal&&a.fatal(b);throw b;}function X(a,b){for(var d=0,f=a.length-1,l;d<=f;){l=Math.floor((d+f)/2);var c=a[l];if(c<b)d=l+1;else if(c>b)f=l-1;else return{found:!0,index:l}}return{found:!1,index:d}}c.fromXML=function(d,f,l){var c=g.parser(!0,{xmlns:!0}),h=[],e=[],B=[],n=0,v=null;c.onclosetag=function(b){if(h[0]instanceof I)null!==v.head&&null!==v.head.styling&&
T(v.head.styling,h[0].styleRefs,h[0].styleAttrs,f),delete h[0].styleRefs;else if(h[0]instanceof t)for(var d in h[0].styles)h[0].styles.hasOwnProperty(d)&&W(h[0],h[0].styles[d],f);else if(h[0]instanceof P||h[0]instanceof H){if(1<h[0].contents.length){b=[h[0].contents[0]];for(d=1;d<h[0].contents.length;d++)h[0].contents[d]instanceof A&&b[b.length-1]instanceof A?b[b.length-1].text+=h[0].contents[d].text:b.push(h[0].contents[d]);h[0].contents=b}h[0]instanceof H&&1===h[0].contents.length&&h[0].contents[0]instanceof
A&&(h[0].text=h[0].contents[0].text,delete h[0].contents)}else if(h[0]instanceof r)if(h[0].node.uri===a.ns_tt&&"metadata"===h[0].node.local)n--;else if(0<n&&l&&"onCloseTag"in l)l.onCloseTag();B.shift();e.shift();h.shift()};c.ontext=function(a){if(void 0!==h[0])if(h[0]instanceof H||h[0]instanceof P){if(h[0]instanceof H){var b=h[0].styleAttrs[m.byName.ruby.qname];if("container"===b||"textContainer"===b||"baseContainer"===b)return}b=new A;b.initFromText(v,h[0],a,e[0],B[0],f);h[0].contents.push(b)}else if(h[0]instanceof
r&&0<n&&l&&"onText"in l)l.onText(a)};c.onopentag=function(b){function d(b){a.ttaf_map[b.uri]&&(b.uri=a.ttaf_map[b.uri])}var c=b.attributes["xml:space"];c?B.unshift(c.value):0===B.length?B.unshift("default"):B.unshift(B[0]);(c=b.attributes["xml:lang"])?e.unshift(c.value):0===e.length?e.unshift(""):e.unshift(e[0]);d(b);if(b.attributes)for(var g in b.attributes)b.attributes.hasOwnProperty(g)&&d(b.attributes[g]);if(b.uri===a.ns_tt)if("tt"===b.local)null!==v&&O(f,"Two <tt> elements at ("+this.line+","+
this.column+")"),v=new k,v.initFromNode(b,e[0],f),h.unshift(v);else if("head"===b.local)h[0]instanceof k||O(f,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),h.unshift(v.head);else if("styling"===b.local)h[0]instanceof w||O(f,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),h.unshift(v.head.styling);else if("style"===b.local)if(h[0]instanceof t){var p=new u;p.initFromNode(b,f);p.id?v.head.styling.styles[p.id]=p:Q(f,"<style> element missing @id attribute");
h.unshift(p)}else h[0]instanceof I?(p=new u,p.initFromNode(b,f),V(p.styleAttrs,h[0].styleAttrs),h.unshift(p)):O(f,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===b.local)if(h[0]instanceof t){g=new F;g.initFromNode(b,f);for(p in g.styleAttrs)g.styleAttrs.hasOwnProperty(p)&&(v.head.styling.initials[p]=g.styleAttrs[p]);h.unshift(g)}else O(f,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===
b.local)h[0]instanceof w||O(f,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),h.unshift(v.head.layout);else if("region"===b.local)h[0]instanceof D||O(f,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),p=new I,p.initFromNode(v,b,e[0],f),!p.id||p.id in v.head.layout.regions?Q(f,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):v.head.layout.regions[p.id]=p,h.unshift(p);else if("body"===b.local)h[0]instanceof
k||O(f,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==v.body&&O(f,"Second <body> element at "+this.line+","+this.column+")"),p=new N,p.initFromNode(v,b,e[0],f),v.body=p,h.unshift(p);else if("div"===b.local){h[0]instanceof K||h[0]instanceof N||O(f,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");p=new K;p.initFromNode(v,h[0],b,e[0],f);if(g=p.styleAttrs[m.byName.backgroundImage.qname])p.contents.push(new z(g)),delete p.styleAttrs[m.byName.backgroundImage.qname];
h[0].contents.push(p);h.unshift(p)}else"image"===b.local?(h[0]instanceof K||O(f,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),p=new z,p.initFromNode(v,h[0],b,e[0],f),h[0].contents.push(p),h.unshift(p)):"p"===b.local?(h[0]instanceof K||O(f,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),p=new P,p.initFromNode(v,h[0],b,e[0],f),h[0].contents.push(p),h.unshift(p)):"span"===b.local?(h[0]instanceof H||h[0]instanceof P||O(f,"Parent of <span> element is not <span> or <p> at "+
this.line+","+this.column+")"),p=new H,p.initFromNode(v,h[0],b,e[0],B[0],f),h[0].contents.push(p),h.unshift(p)):"br"===b.local?(h[0]instanceof H||h[0]instanceof P||O(f,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),p=new M,p.initFromNode(v,h[0],b,e[0],f),h[0].contents.push(p),h.unshift(p)):"set"===b.local?(h[0]instanceof H||h[0]instanceof P||h[0]instanceof K||h[0]instanceof N||h[0]instanceof I||h[0]instanceof M||O(f,"Parent of <set> element is not a content element or a region at "+
this.line+","+this.column+")"),p=new L,p.initFromNode(v,h[0],b,f),h[0].sets.push(p),h.unshift(p)):h.unshift(new r(b));else h.unshift(new r(b));if(h[0]instanceof r)if(b.uri===a.ns_tt&&"metadata"===b.local)n++;else if(0<n&&l&&"onOpenTag"in l){p=[];for(var q in b.attributes)b.attributes.hasOwnProperty(q)&&(p[b.attributes[q].uri+" "+b.attributes[q].local]={uri:b.attributes[q].uri,local:b.attributes[q].local,value:b.attributes[q].value});l.onOpenTag(b.uri,b.local,p)}};c.write(d).close();delete v.head.styling.styles;
d=!1;for(var y in v.head.layout.regions)if(v.head.layout.regions.hasOwnProperty(y)){d=!0;break}d||(y=I.prototype.createDefaultRegion(v,f),v.head.layout.regions[y.id]=y);for(var Y in v.head.layout.regions)v.head.layout.regions.hasOwnProperty(Y)&&p(v,v.head.layout.regions[Y],null,null);v.body&&p(v,v.body,null,null);v.body&&b(v.body);v.body&&q(v.body);return v};k.prototype.initFromNode=function(b,d,f){var h=n(b,a.ns_ttp,"cellResolution"),l=15;var c=32;null!==h&&(h=/(\d+) (\d+)/.exec(h),null!==h?(c=parseInt(h[1]),
l=parseInt(h[2])):R(f,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new e.ComputedLength(0,1/l),w:new e.ComputedLength(1/c,0)};l=n(b,a.ns_ttp,"frameRate");h=30;null!==l&&(c=/(\d+)/.exec(l),null!==c?h=parseInt(c[1]):R(f,"Malformed frame rate attribute (using initial value instead)"));c=n(b,a.ns_ttp,"frameRateMultiplier");var k=1;null!==c&&(c=/(\d+) (\d+)/.exec(c),null!==c?k=parseInt(c[1])/parseInt(c[2]):R(f,"Malformed frame rate multiplier attribute (using initial value instead)"));
h*=k;k=1;c=n(b,a.ns_ttp,"tickRate");null===c?null!==l&&(k=h):(c=/(\d+)/.exec(c),null!==c?k=parseInt(c[1]):R(f,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=h;this.tickRate=k;c=n(b,a.ns_ittp,"aspectRatio");null===c&&(c=n(b,a.ns_ttp,"displayAspectRatio"));l=null;null!==c&&(h=/(\d+)\s+(\d+)/.exec(c),null!==h?(c=parseInt(h[1]),h=parseInt(h[2]),0!==c&&0!==h?l=c/h:Q(f,"Illegal aspectRatio values (ignoring)")):Q(f,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=
l;l=n(b,a.ns_ttp,"timeBase");null!==l&&"media"!==l&&O(f,"Unsupported time base");b=S(b,f);null===b?this.pxLength={h:null,w:null}:("px"===b.h.unit&&"px"===b.w.unit||O(f,"Extent on TT must be in px or absent"),this.pxLength={h:new e.ComputedLength(0,1/b.h.value),w:new e.ComputedLength(1/b.w.value,0)});this.dimensions={h:new e.ComputedLength(0,1),w:new e.ComputedLength(1,0)};this.lang=d};k.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var b=X(this.events,a.begin);b.found||this.events.splice(b.index,
0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(b=X(this.events,a.end),b.found||this.events.splice(b.index,0,a.end))}};k.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};k.prototype.getMediaTimeEvents=function(){return this.events};u.prototype.initFromNode=function(a,b){this.id=f(a);this.styleAttrs=J(a,b);this.styleRefs=d(a)};F.prototype.initFromNode=function(b,d){this.styleAttrs={};for(var f in b.attributes)!b.attributes.hasOwnProperty(f)||b.attributes[f].uri!==
a.ns_itts&&b.attributes[f].uri!==a.ns_ebutts&&b.attributes[f].uri!==a.ns_tts||(this.styleAttrs[b.attributes[f].uri+" "+b.attributes[f].local]=b.attributes[f].value)};z.prototype.initFromNode=function(a,b,d,f,h){(this.src="src"in d.attributes?d.attributes.src.value:null)||Q(h,"Invalid image@src attribute");(this.type="type"in d.attributes?d.attributes.type.value:null)||Q(h,"Invalid image@type attribute");l.prototype.initFromNode.call(this,a,b,d,h);B.prototype.initFromNode.call(this,a,b,d,h);v.prototype.initFromNode.call(this,
a,b,d,h);G.prototype.initFromNode.call(this,a,b,d,h);this.lang=f};E.prototype.initFromNode=function(a,b,d,h){this.id=f(d)};G.prototype.initFromNode=function(a,b,d,f){this.regionID=d&&"region"in d.attributes?d.attributes.region.value:""};l.prototype.initFromNode=function(a,b,f,h){this.styleAttrs=J(f,h);null!==a.head&&null!==a.head.styling&&T(a.head.styling,d(f),this.styleAttrs,h)};v.prototype.initFromNode=function(a,b,d,f){this.sets=[]};h.prototype.initFromNode=function(a,b,d,f){this.contents=[]};
B.prototype.initFromNode=function(a,b,d,f){b=null;d&&"begin"in d.attributes&&(b=U(a.tickRate,a.effectiveFrameRate,d.attributes.begin.value),null===b&&R(f,"Malformed begin value "+d.attributes.begin.value+" (using 0)"));var h=null;d&&"dur"in d.attributes&&(h=U(a.tickRate,a.effectiveFrameRate,d.attributes.dur.value),null===h&&R(f,"Malformed dur value "+d.attributes.dur.value+" (ignoring)"));var c=null;d&&"end"in d.attributes&&(c=U(a.tickRate,a.effectiveFrameRate,d.attributes.end.value),null===c&&R(f,
"Malformed end value (ignoring)"));this.explicit_begin=b;this.explicit_end=c;this.explicit_dur=h;(a=d&&"timeContainer"in d.attributes?d.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?f="seq":(Q(f,"Illegal value of timeContainer (assuming 'par')"),f="par"):f="par";this.timeContainer=f};N.prototype.initFromNode=function(a,b,d,f){l.prototype.initFromNode.call(this,a,null,b,f);B.prototype.initFromNode.call(this,a,null,b,f);v.prototype.initFromNode.call(this,a,null,b,f);G.prototype.initFromNode.call(this,
a,null,b,f);h.prototype.initFromNode.call(this,a,null,b,f);this.lang=d};K.prototype.initFromNode=function(a,b,d,f,c){l.prototype.initFromNode.call(this,a,b,d,c);B.prototype.initFromNode.call(this,a,b,d,c);v.prototype.initFromNode.call(this,a,b,d,c);G.prototype.initFromNode.call(this,a,b,d,c);h.prototype.initFromNode.call(this,a,b,d,c);this.lang=f};P.prototype.initFromNode=function(a,b,d,f,c){l.prototype.initFromNode.call(this,a,b,d,c);B.prototype.initFromNode.call(this,a,b,d,c);v.prototype.initFromNode.call(this,
a,b,d,c);G.prototype.initFromNode.call(this,a,b,d,c);h.prototype.initFromNode.call(this,a,b,d,c);this.lang=f};H.prototype.initFromNode=function(a,b,d,f,c,k){l.prototype.initFromNode.call(this,a,b,d,k);B.prototype.initFromNode.call(this,a,b,d,k);v.prototype.initFromNode.call(this,a,b,d,k);G.prototype.initFromNode.call(this,a,b,d,k);h.prototype.initFromNode.call(this,a,b,d,k);this.space=c;this.lang=f};A.prototype.initFromText=function(a,b,d,f,h,c){B.prototype.initFromNode.call(this,a,b,null,c);this.text=
d;this.space=h;this.lang=f};M.prototype.initFromNode=function(a,b,d,f,h){G.prototype.initFromNode.call(this,a,b,d,h);B.prototype.initFromNode.call(this,a,b,d,h);this.lang=f};I.prototype.createDefaultRegion=function(a,b){var d=new I;d.id="";l.prototype.initFromNode.call(d,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",
uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",
ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},b);d.sets=[];B.call(d,0,Number.POSITIVE_INFINITY,null);this.lang=a.xmllang;return d};I.prototype.initFromNode=function(a,b,f,h){E.prototype.initFromNode.call(this,a,null,b,h);B.prototype.initFromNode.call(this,a,null,b,h);v.prototype.initFromNode.call(this,a,null,b,h);this.styleAttrs=J(b,h);this.styleRefs=
d(b);this.lang=f};L.prototype.initFromNode=function(a,b,d,f){B.prototype.initFromNode.call(this,a,b,d,f);a=J(d,f);this.value=this.qname=null;for(var h in a)if(a.hasOwnProperty(h)){if(this.qname){Q(f,"More than one style specified on set");break}this.qname=h;this.value=a[h]}}})("undefined"===typeof m?this.imscDoc={}:m,"undefined"===typeof sax?c("sax"):sax,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):
imscUtils)},{"./names":31,"./styles":32,"./utils":33,sax:24}],28:[function(c,u,m){(function(c,g,a,m){function e(a){var b={};a=Object.entries(a);for(var h in a)if(a.hasOwnProperty(h)){var c=m.parseColor(a[h][0]),l=m.parseColor(a[h][1]);c&&l&&(b[c.toString()]=l)}return b}function q(c,e,h,g){if("region"===h.kind){var l=document.createElement("div");l.style.position="absolute"}else if("body"===h.kind)l=document.createElement("div");else if("div"===h.kind)l=document.createElement("div");else if("image"===
h.kind){if(l=document.createElement("img"),null!==c.imgResolver&&null!==h.src){var t=c.imgResolver(h.src,l);t&&(l.src=t);l.height=c.regionH;l.width=c.regionW}}else if("p"===h.kind)l=document.createElement("p");else if("span"===h.kind)if("container"===h.styleAttrs[a.byName.ruby.qname])l=document.createElement("ruby"),c.ruby=!0;else if("base"===h.styleAttrs[a.byName.ruby.qname])l=document.createElement("rb");else if("text"===h.styleAttrs[a.byName.ruby.qname])l=document.createElement("rt");else if("baseContainer"===
h.styleAttrs[a.byName.ruby.qname])l=document.createElement("rbc");else if("textContainer"===h.styleAttrs[a.byName.ruby.qname])l=document.createElement("rtc");else{if("delimiter"===h.styleAttrs[a.byName.ruby.qname])return;l=document.createElement("span")}else"br"===h.kind&&(l=document.createElement("br"));if(l){!h.lang||"region"!==h.kind&&h.lang===g.lang||(l.lang=h.lang);e.appendChild(l);l.style.margin="0";if("region"===h.kind)if(e=h.styleAttrs[a.byName.writingMode.qname],"lrtb"===e||"lr"===e)c.ipd=
"lr",c.bpd="tb";else if("rltb"===e||"rl"===e)c.ipd="rl",c.bpd="tb";else if("tblr"===e)c.ipd="tb",c.bpd="lr";else{if("tbrl"===e||"tb"===e)c.ipd="tb",c.bpd="rl"}else"p"===h.kind&&"tb"===c.bpd&&(c.ipd="ltr"===h.styleAttrs[a.byName.direction.qname]?"lr":"rl");for(var B in u)u.hasOwnProperty(B)&&(e=u[B],g=h.styleAttrs[e.qname],void 0!==g&&null!==e.map&&e.map(c,l,h,g));B=l;(e=h.styleAttrs[a.byName.linePadding.qname])&&!e.isZero()&&(g=e.multiply(e.toUsedLength(c.w,c.h),c.options.sizeAdjust),0<g&&(g=Math.ceil(g)+
"px","tb"===c.bpd?(B.style.paddingLeft=g,B.style.paddingRight=g):(B.style.paddingTop=g,B.style.paddingBottom=g),c.lp=e));(e=h.styleAttrs[a.byName.multiRowAlign.qname])&&"auto"!==e&&(B=document.createElement("span"),B.style.display="inline-block",B.style.textAlign=e,l.appendChild(B),c.mra=e);(e=h.styleAttrs[a.byName.rubyReserve.qname])&&"none"!==e[0]&&(c.rubyReserve=e);h.styleAttrs[a.byName.fillLineGap.qname]&&(c.flg=!0);if("span"===h.kind&&h.text)if((e=h.styleAttrs[a.byName.textEmphasis.qname])&&
"none"!==e.style&&(c.textEmphasis=!0),a.byName.textCombine.qname in h.styleAttrs&&"all"===h.styleAttrs[a.byName.textCombine.qname])l.textContent=h.text,e&&w(c,l,h,e);else for(g="",t=0;t<h.text.length;t++){g+=h.text.charAt(t);var m=h.text.charCodeAt(t);if(55296>m||56319<m||t===h.text.length-1)m=document.createElement("span"),m.textContent=g,e&&w(c,m,h,e),l.appendChild(m),g="",m._isd_element=h}for(var v in h.contents)h.contents.hasOwnProperty(v)&&q(c,B,h.contents[v],h);v=[];if("p"===h.kind){k(c,B,v,
null);if(c.rubyReserve){for(e=0;e<v.length;e++){g=document.createElement("ruby");t=document.createElement("rb");t.textContent="\u200b";g.appendChild(t);var y=c.rubyReserve[1].toUsedLength(c.w,c.h)+"px";"both"===c.rubyReserve[0]||"outside"===c.rubyReserve[0]&&1==v.length?(t=document.createElement("rtc"),t.style[z]=D?"after":"under",t.textContent="\u200b",t.style.fontSize=y,m=document.createElement("rtc"),m.style[z]=D?"before":"over",m.textContent="\u200b",m.style.fontSize=y,g.appendChild(t),g.appendChild(m)):
(t=document.createElement("rtc"),t.textContent="\u200b",t.style.fontSize=y,t.style[z]="after"===c.rubyReserve[0]||"outside"===c.rubyReserve[0]&&0<e?D?"after":"tb"===c.bpd||"rl"===c.bpd?"under":"over":D?"before":"tb"===c.bpd||"rl"===c.bpd?"over":"under",g.appendChild(t));t=null;for(m=0;m<v[e].rbc.length;m++)if("ruby"===v[e].rbc[m].localName){t=v[e].rbc[m];for(m=0;m<t.style.length;m++)g.style.setProperty(t.style.item(m),t.style.getPropertyValue(t.style.item(m)));break}t=t||v[e].elements[0].node;t.parentElement.insertBefore(g,
t)}c.rubyReserve=null}if(c.ruby||c.rubyReserve){for(e=0;e<v.length;e++)for(g=0;g<v[e].rbc.length;g++)v[e].rbc[g].style[z]||(v[e].rbc[g].style[z]=D?0===e?"before":"after":"tb"===c.bpd?0===e?"over":"under":"rl"===c.bpd?0===e?"over":"under":0===e?"under":"over");c.ruby=null}if(c.textEmphasis){for(e=0;e<v.length;e++)for(g=0;g<v[e].te.length;g++)v[e].te[g].style[G]&&"none"!==v[e].te[g].style[G]||(v[e].te[g].style[G]="tb"===c.bpd?0===e?"left over":"left under":"rl"===c.bpd?0===e?"right under":"left under":
0===e?"left under":"right under");c.textEmphasis=null}if(c.mra){for(e=0;e<v.length-1;e++)t=v[e].elements.length,0!==t&&!1===v[e].br&&(g=document.createElement("br"),t=v[e].elements[t-1].node,t.parentElement.insertBefore(g,t.nextSibling));c.mra=null}if(c.lp){e=c.lp.multiply(c.lp.toUsedLength(c.w,c.h),c.options.sizeAdjust);for(g=0;g<v.length;g++)if(t=Math.ceil(e)+"px",m="-"+Math.ceil(e)+"px",0!==v[g].elements.length){y=v[g].elements[v[g].start_elem];var x=v[g].elements[v[g].end_elem];if(y===x&&(elementBoundingRect=
y.node.getBoundingClientRect(),0==elementBoundingRect.width||0==elementBoundingRect.height))continue;"lr"===c.ipd?(y.node.style.marginLeft=m,y.node.style.paddingLeft=t):"rl"===c.ipd?(y.node.style.paddingRight=t,y.node.style.marginRight=m):"tb"===c.ipd&&(y.node.style.paddingTop=t,y.node.style.marginTop=m);"lr"===c.ipd?(x.node.style.paddingRight=t,x.node.style.marginRight=m):"rl"===c.ipd?(x.node.style.paddingLeft=t,x.node.style.marginLeft=m):"tb"===c.ipd&&(x.node.style.paddingBottom=t,x.node.style.marginBottom=
m)}c.lp=null}for(e=0;e<v.length;e++)for(g=v[e],t=1;t<g.elements.length;){m=g.elements[t-1].node;y=g.elements[t].node;if("SPAN"===m.tagName&&"SPAN"===y.tagName&&m._isd_element===y._isd_element){m.textContent+=y.textContent;for(x=0;x<y.style.length;x++){var C=y.style[x];if(0<=C.indexOf("border")||0<=C.indexOf("padding")||0<=C.indexOf("margin"))m.style[C]=y.style[C]}y.parentElement.removeChild(y);m=!0}else m=!1;m?g.elements.splice(t,1):t++}e=[];for(m=0;m<v.length;m++)for(y=0;y<v[m].elements.length;y++)if(g=
v[m].elements[y].node,t=b(g,e,!1))g.style.backgroundColor=t;for(g=0;g<e.length;g++)e[g].style.backgroundColor="";if(c.flg){g=r(B.getBoundingClientRect(),c);e=g.before;g=g.after;t=Math.sign(g-e);for(m=0;m<=v.length;m++){y=0===m?Math.round(e):m===v.length?Math.round(g):Math.round((v[m-1].after+v[m].before)/2);if(0<m&&v[m-1])for(C=0;C<v[m-1].elements.length;C++){var f=v[m-1].elements[C];x=t*(y-f.after)+"px";"lr"===c.bpd?f.node.style.paddingRight=x:"rl"===c.bpd?f.node.style.paddingLeft=x:"tb"===c.bpd&&
(f.node.style.paddingBottom=x)}if(m<v.length)for(C=0;C<v[m].elements.length;C++)f=v[m].elements[C],x=t*(f.before-y)+"px","lr"===c.bpd?f.node.style.paddingLeft=x:"rl"===c.bpd?f.node.style.paddingRight=x:"tb"===c.bpd&&(f.node.style.paddingTop=x)}c.flg=null}}"region"===h.kind&&"tb"===c.bpd&&c.enableRollUp&&0<h.contents.length&&"after"===h.styleAttrs[a.byName.displayAlign.qname]&&(k(c,B,v,null),h=new p(""===h.id?"_":h.id,v),c.currentISDState[h.id]=h,c.previousISDState&&h.id in c.previousISDState&&0<c.previousISDState[h.id].plist.length&&
1<h.plist.length&&h.plist[h.plist.length-2].text===c.previousISDState[h.id].plist[c.previousISDState[h.id].plist.length-1].text&&(c=l.firstElementChild,h=h.plist[h.plist.length-1].after-h.plist[h.plist.length-1].before,c.style.bottom="-"+h+"px",c.style.transition="transform 0.4s",c.style.position="relative",c.style.transform="translateY(-"+h+"px)"))}else if(c=c.errorHandler,h="Error processing ISD element kind: "+h.kind,c&&c.error&&c.error(h))throw h;}function b(a,c,h){if(a.style.backgroundColor)return h&&
!c.includes(a)&&c.push(a),a.style.backgroundColor;if("SPAN"===a.parentElement.nodeName)return b(a.parentElement,c,!0)}function p(a,b){this.id=a;this.plist=b}function r(a,b){var c={before:null,after:null,start:null,end:null};"tb"===b.bpd?(c.before=a.top,c.after=a.bottom,"lr"===b.ipd?(c.start=a.left,c.end=a.right):(c.start=a.right,c.end=a.left)):"lr"===b.bpd?(c.before=a.left,c.after=a.right,c.start=a.top,c.end=a.bottom):"rl"===b.bpd&&(c.before=a.right,c.after=a.left,c.start=a.top,c.end=a.bottom);return c}
function k(a,b,c,e){if("rt"!==b.localName&&"rtc"!==b.localName)if(e=b.style.backgroundColor||e,0===b.childElementCount)if("span"===b.localName||"rb"===b.localName){var h=b.getBoundingClientRect();a=r(h,a);if(!(h=0===c.length)){h=a.before;var l=a.after,g=c[c.length-1].before,p=c[c.length-1].after;h=!(l<p&&h>g||p<=l&&g>=h)}h?c.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(h=Math.sign(a.after-a.before),l=Math.sign(a.end-
a.start),0>h*(a.before-c[c.length-1].before)&&(c[c.length-1].before=a.before),0<h*(a.after-c[c.length-1].after)&&(c[c.length-1].after=a.after),0>l*(a.start-c[c.length-1].start)&&(c[c.length-1].start=a.start,c[c.length-1].start_elem=c[c.length-1].elements.length),0<l*(a.end-c[c.length-1].end)&&(c[c.length-1].end=a.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=b.textContent;c[c.length-1].elements.push({node:b,bgcolor:e,before:a.before,after:a.after})}else"br"===b.localName&&
0!==c.length&&(c[c.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(k(a,b,c,e),"ruby"===b.localName||"rtc"===b.localName?0<c.length&&c[c.length-1].rbc.push(b):"span"===b.localName&&b.style[E]&&"none"!==b.style[E]&&0<c.length&&c[c.length-1].te.push(b)),b=b.nextSibling}function w(a,b,c,e){"none"!==e.style&&(b.style[E]="auto"===e.style?"filled":e.style+" "+e.symbol,"before"===e.position||"after"===e.position)&&(b.style[G]="tb"===a.bpd?"before"===e.position?"left over":"left under":
"rl"===a.bpd?"before"===e.position?"right under":"left under":"before"===e.position?"left under":"right under")}function t(a,b){this.qname=a;this.map=b}c.render=function(a,b,c,g,k,p,r,t,m,y){g=g||b.clientHeight;var h=k||b.clientWidth;null!==a.aspectRatio&&(k=g*a.aspectRatio,k>h?g=Math.round(h/a.aspectRatio):h=k);k=document.createElement("div");k.style.position="relative";k.style.width=h+"px";k.style.height=g+"px";k.style.margin="auto";k.style.top=0;k.style.bottom=0;k.style.left=0;k.style.right=0;
k.style.zIndex=0;c={h:g,w:h,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:p||!1,isd:a,errorHandler:r,previousISDState:t,enableRollUp:m||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},y)||{}};c.options.colorAdjust&&(c.options.colorAdjust=e(c.options.colorAdjust));p=["region","body","div","p","span"];for(var l in p)p.hasOwnProperty(l)&&(r=p[l]+"BackgroundColorAdjust",c.options[r]&&(c.options[r]=
e(c.options[r])));b.appendChild(k);for(var f in a.contents)a.contents.hasOwnProperty(f)&&q(c,k,a.contents[f],a);return c.currentISDState};var u=[new t("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,c,e){(c=(c=a.options[c.kind+"BackgroundColorAdjust"])&&c[e.toString()])&&(e=c);c=e[3];0!==c&&(void 0!=a.options.backgroundOpacityScale&&(c*=a.options.backgroundOpacityScale),b.style.backgroundColor="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(c/255).toString()+
")")}),new t("http://www.w3.org/ns/ttml#styling color",function(a,b,c,e){c=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=a[e.toString()])&&(e=a);b.style.color="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(c*e[3]/255).toString()+")"}),new t("http://www.w3.org/ns/ttml#styling direction",function(a,b,c,e){b.style.direction=e}),new t("http://www.w3.org/ns/ttml#styling display",function(a,b,c,e){}),new t("http://www.w3.org/ns/ttml#styling displayAlign",function(a,
b,c,e){b.style.display="flex";b.style.flexDirection="column";"before"===e?b.style.justifyContent="flex-start":"center"===e?b.style.justifyContent="center":"after"===e&&(b.style.justifyContent="flex-end")}),new t("http://www.w3.org/ns/ttml#styling extent",function(a,b,c,e){a.regionH=e.h.toUsedLength(a.w,a.h);a.regionW=e.w.toUsedLength(a.w,a.h);var h=e=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])e=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),h=c[1].toUsedLength(a.w,a.h)+
c[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-e+"px";b.style.width=a.regionW-h+"px"}),new t("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,c,e){c=[];a.options.fontFamily&&(e=a.options.fontFamily.split(","));for(var h in e)e[h].hasOwnProperty(h)&&(e[h]=e[h].trim(),"monospaceSerif"===e[h]?(c.push("Courier New"),c.push('"Liberation Mono"'),c.push("Courier"),c.push("monospace")):"proportionalSansSerif"===e[h]||"default"===e[h]?(c.push("Arial"),c.push("Helvetica"),c.push('"Liberation Sans"'),
c.push("sans-serif")):"monospace"===e[h]?c.push("monospace"):"sansSerif"===e[h]?c.push("sans-serif"):"serif"===e[h]?c.push("serif"):"monospaceSansSerif"===e[h]?(c.push("Consolas"),c.push("monospace")):"proportionalSerif"===e[h]?c.push("serif"):c.push(e[h]));if(0<c.length){a=[c[0]];for(e=1;e<c.length;e++)-1==a.indexOf(c[e])&&a.push(c[e]);c=a}b.style.fontFamily=c.join(",")}),new t("http://www.w3.org/ns/ttml#styling shear",function(a,b,c,e){0!==e&&(c=-.9*e,b.style.transform="tb"===a.bpd?"skewX("+c+"deg)":
"skewY("+c+"deg)")}),new t("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,c,e){b.style.fontSize=e.multiply(e.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new t("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,c,e){b.style.fontStyle=e}),new t("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,c,e){b.style.fontWeight=e}),new t("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,c,e){b.style.lineHeight="normal"===e?"normal":e.multiply(e.multiply(e.toUsedLength(a.w,
a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new t("http://www.w3.org/ns/ttml#styling opacity",function(a,b,c,e){c=e;void 0!=a.options.regionOpacityScale&&(c*=a.options.regionOpacityScale);b.style.opacity=c}),new t("http://www.w3.org/ns/ttml#styling origin",function(a,b,c,e){b.style.top=e.h.toUsedLength(a.w,a.h)+"px";b.style.left=e.w.toUsedLength(a.w,a.h)+"px"}),new t("http://www.w3.org/ns/ttml#styling overflow",function(a,b,c,e){b.style.overflow=e}),new t("http://www.w3.org/ns/ttml#styling padding",
function(a,b,c,e){c=[];c[0]=e[0].toUsedLength(a.w,a.h)+"px";c[1]=e[3].toUsedLength(a.w,a.h)+"px";c[2]=e[2].toUsedLength(a.w,a.h)+"px";c[3]=e[1].toUsedLength(a.w,a.h)+"px";b.style.padding=c.join(" ")}),new t("http://www.w3.org/ns/ttml#styling position",function(a,b,c,e){b.style.top=e.h.toUsedLength(a.w,a.h)+"px";b.style.left=e.w.toUsedLength(a.w,a.h)+"px"}),new t("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,c,e){b.style.rubyAlign="spaceAround"===e?"space-around":"center"}),new t("http://www.w3.org/ns/ttml#styling rubyPosition",
function(a,b,c,e){if("before"===e||"after"===e)b.parentElement.style[z]=D?e:"tb"===a.bpd?"before"===e?"over":"under":"rl"===a.bpd?"before"===e?"over":"under":"before"===e?"under":"over"}),new t("http://www.w3.org/ns/ttml#styling showBackground",null),new t("http://www.w3.org/ns/ttml#styling textAlign",function(a,b,c,e){b.style.textAlign="start"===e?"rl"===a.ipd?"right":"left":"end"===e?"rl"===a.ipd?"left":"right":e}),new t("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,c,e){b.style.textDecoration=
e.join(" ").replace("lineThrough","line-through")}),new t("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,c,e){}),new t("http://www.w3.org/ns/ttml#styling textShadow",function(b,c,e,g){e=e.styleAttrs[a.byName.textOutline.qname];var h=b.options.textOutline;if(h)if("none"===h)e=h;else{var k={};h=h.split(" ");if(0!==h.length&&2>=h.length){var l=m.parseColor(h[0]);k.color=l;null!==l&&h.shift();1===h.length&&(h=m.parseLength(h[0]))&&(k.thickness=h,e=k)}}if("none"===g&&"none"===e)c.style.textShadow=
"";else{k=[];"none"!==e&&(e="rgba("+e.color[0].toString()+","+e.color[1].toString()+","+e.color[2].toString()+","+(e.color[3]/255).toString()+")",k.push("1px 1px 1px "+e),k.push("-1px 1px 1px "+e),k.push("1px -1px 1px "+e),k.push("-1px -1px 1px "+e));if("none"!==g)for(var p in g)g.hasOwnProperty(p)&&k.push(g[p].x_off.toUsedLength(b.w,b.h)+"px "+g[p].y_off.toUsedLength(b.w,b.h)+"px "+g[p].b_radius.toUsedLength(b.w,b.h)+"px rgba("+g[p].color[0].toString()+","+g[p].color[1].toString()+","+g[p].color[2].toString()+
","+(g[p].color[3]/255).toString()+")");c.style.textShadow=k.join(",")}}),new t("http://www.w3.org/ns/ttml#styling textCombine",function(a,b,c,e){b.style.textCombineUpright=e}),new t("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,c,e){}),new t("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,c,e){b.style.unicodeBidi="bidiOverride"===e?"bidi-override":e}),new t("http://www.w3.org/ns/ttml#styling visibility",function(a,b,c,e){b.style.visibility=e}),new t("http://www.w3.org/ns/ttml#styling wrapOption",
function(a,b,c,e){b.style.whiteSpace="wrap"===e?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new t("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,c,e){if("lrtb"===e||"lr"===e)b.style.writingMode="horizontal-tb";else if("rltb"===e||"rl"===e)b.style.writingMode="horizontal-tb";else if("tblr"===e)b.style.writingMode="vertical-lr";else if("tbrl"===e||"tb"===e)b.style.writingMode="vertical-rl"}),new t("http://www.w3.org/ns/ttml#styling zIndex",function(a,
b,c,e){b.style.zIndex=e}),new t("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,c,e){a.displayForcedOnlyMode&&!1===e&&(b.style.visibility="hidden")})],F;for(F in u)u.hasOwnProperty(F);var D="webkitRubyPosition"in window.getComputedStyle(document.documentElement),z=D?"webkitRubyPosition":"rubyPosition",E="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",G="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?
"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof m?this.imscHTML={}:m,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33}],29:[function(c,u,m){(function(c,g,a,m){function e(c,g,r,w,u,x,G,l,v){if(g<G.begin||g>=G.end)return null;x="regionID"in G&&""!==G.regionID?G.regionID:x;if(null!==u&&x!==r.id&&(!("contents"in G)||"contents"in
G&&0===G.contents.length||""!==x))return null;var h=new k(G);for(t in G.sets)!G.sets.hasOwnProperty(t)||g<G.sets[t].begin||g>=G.sets[t].end||(h.styleAttrs[G.sets[t].qname]=G.sets[t].value);var t={};for(var z in h.styleAttrs)if(h.styleAttrs.hasOwnProperty(z)&&(t[z]=!0,"region"===h.kind&&z===a.byName.writingMode.qname&&!(a.byName.direction.qname in h.styleAttrs))){var D=h.styleAttrs[z];if("lrtb"===D||"lr"===D)h.styleAttrs[a.byName.direction.qname]="ltr";else if("rltb"===D||"rl"===D)h.styleAttrs[a.byName.direction.qname]=
"rtl"}if(null!==u)for(var C in a.all)if(a.all.hasOwnProperty(C))if(z=a.all[C],z.qname===a.byName.textDecoration.qname){D=u.styleAttrs[z.qname];var F=h.styleAttrs[z.qname],A=[];void 0===F?A=D:-1===F.indexOf("none")?((-1===F.indexOf("noUnderline")&&-1!==D.indexOf("underline")||-1!==F.indexOf("underline"))&&A.push("underline"),(-1===F.indexOf("noLineThrough")&&-1!==D.indexOf("lineThrough")||-1!==F.indexOf("lineThrough"))&&A.push("lineThrough"),(-1===F.indexOf("noOverline")&&-1!==D.indexOf("overline")||
-1!==F.indexOf("overline"))&&A.push("overline")):A.push("none");h.styleAttrs[z.qname]=A}else z.qname!==a.byName.fontSize.qname||z.qname in h.styleAttrs||"span"!==h.kind||"textContainer"!==h.styleAttrs[a.byName.ruby.qname]?z.qname!==a.byName.fontSize.qname||z.qname in h.styleAttrs||"span"!==h.kind||"text"!==h.styleAttrs[a.byName.ruby.qname]?z.inherit&&z.qname in u.styleAttrs&&!(z.qname in h.styleAttrs)&&(h.styleAttrs[z.qname]=u.styleAttrs[z.qname]):(D=u.styleAttrs[a.byName.fontSize.qname],h.styleAttrs[z.qname]=
"textContainer"===u.styleAttrs[a.byName.ruby.qname]?D:new m.ComputedLength(.5*D.rw,.5*D.rh)):(D=u.styleAttrs[a.byName.fontSize.qname],h.styleAttrs[z.qname]=new m.ComputedLength(.5*D.rw,.5*D.rh));for(var E in a.all)if(a.all.hasOwnProperty(E)&&(C=a.all[E],!(C.qname in h.styleAttrs||C.qname===a.byName.position.qname&&a.byName.origin.qname in h.styleAttrs||C.qname===a.byName.origin.qname&&a.byName.position.qname in h.styleAttrs)&&(z=c.head.styling.initials[C.qname]||C.initial,null!==z&&("region"===h.kind||
!1===C.inherit&&null!==z))))if(z=C.parse(z),null!==z)h.styleAttrs[C.qname]=z,t[C.qname]=!0;else if(C="Invalid initial value for '"+C.qname+"' on element '"+h.kind,l&&l.error&&l.error(C))throw C;for(var I in a.all)if(a.all.hasOwnProperty(I)&&(E=a.all[I],E.qname in t&&null!==E.compute))if(C=E.compute(c,u,h,h.styleAttrs[E.qname],v),null!==C)h.styleAttrs[E.qname]=C;else if(h.styleAttrs[E.qname]=E.compute(c,u,h,E.parse(E.initial),v),E="Style '"+E.qname+"' on element '"+h.kind+"' cannot be computed",l&&
l.error&&l.error(E))throw E;if("none"===h.styleAttrs[a.byName.display.qname])return null;if(null===u)var L=null===w?[]:[w];else"contents"in G&&(L=G.contents);for(var f in L)L.hasOwnProperty(f)&&(u=e(c,g,r,w,h,x,L[f],l,v),null!==u&&h.contents.push(u.element));for(var d in h.styleAttrs)h.styleAttrs.hasOwnProperty(d)&&(c=!1,"span"===h.kind&&(g=h.styleAttrs[a.byName.ruby.qname],(c=("container"===g||"textContainer"===g||"baseContainer"===g)&&-1!==y.indexOf(d))||(c="container"!==g&&d===a.byName.rubyAlign.qname),
c||(c=!("textContainer"===g||"text"===g)&&d===a.byName.rubyPosition.qname)),c||(c=-1===a.byQName[d].applies.indexOf(h.kind)),c&&delete h.styleAttrs[d]);d=h.styleAttrs[a.byName.ruby.qname];if("p"===h.kind||"span"===h.kind&&("textContainer"===d||"text"===d))d=[],b(h,d),q(d),p(h);return"div"===h.kind&&a.byName.backgroundImage.qname in h.styleAttrs||"br"===h.kind||"image"===h.kind||"contents"in h&&0<h.contents.length||"span"===h.kind&&null!==h.text||"region"===h.kind&&"always"===h.styleAttrs[a.byName.showBackground.qname]?
{region_id:x,element:h}:null}function q(a){function b(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function c(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var e,g=0;g<a.length;)if(e=a[g],"br"===e.kind||"preserve"===e.space)g++;else{var k=e.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(k)&&(0===g||b(a[g-1]))&&(k=k.substring(1));e.text=k;0===k.length?a.splice(g,1):g++}for(g=0;g<a.length;g++)e=a[g],"br"===e.kind||"preserve"===e.space?g++:/[ ]$/.test(e.text)&&(g===a.length-
1||c(a[g+1]))&&(e.text=e.text.slice(0,-1))}function b(c,e){for(var g in c.contents)if(c.contents.hasOwnProperty(g)){var k=c.contents[g],p=k.styleAttrs[a.byName.ruby.qname];if("span"!==k.kind||"textContainer"!==p&&"text"!==p)"contents"in k?b(k,e):("span"===k.kind&&0!==k.text.length||"br"===k.kind)&&e.push(k)}}function p(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)p(a.contents[b])&&a.contents.splice(b,1);return 0===a.contents.length}}
function r(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=a.lang}function k(a){this.kind=a.kind||"region";this.lang=a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)a.styleAttrs.hasOwnProperty(b)&&(this.styleAttrs[b]=a.styleAttrs[b]);"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}c.generateISD=function(b,c,g){function k(a,
b){function c(b){return!(a<b.begin||a>=b.end)}if(b.contents){var e={},g;for(g in b)b.hasOwnProperty(g)&&(e[g]=b[g]);e.contents=[];b.contents.filter(c).forEach(function(b){b=k(a,b);b.regionID&&(l[b.regionID]=!0);null!==b&&e.contents.push(b)});return e}return b}var p=new r(b),m={},q={},l={};q=b.head.styling.initials[a.byName.showBackground.qname];var t=b.head.styling.initials[a.byName.backgroundColor.qname];for(x in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(x)){var h=b.head.layout.regions[x],
y=h.styleAttrs[a.byName.showBackground.qname]||q,u=h.styleAttrs[a.byName.backgroundColor.qname]||t;l[h.id]=("always"===y||void 0===y)&&void 0!==u&&!(c<h.begin||c>=h.end)}b.body&&b.body.regionID&&(l[b.body.regionID]=!0);q=null!==b.body?k(c,b.body):null;void 0!==l[""]&&(l[""]=!0);for(var w in l)if(l[w]){var x=e(b,c,b.head.layout.regions[w],q,null,"",b.head.layout.regions[w],g,m);null!==x&&p.contents.push(x.element)}return p};var y=[a.byName.color.qname,a.byName.textCombine.qname,a.byName.textDecoration.qname,
a.byName.textEmphasis.qname,a.byName.textOutline.qname,a.byName.textShadow.qname]})("undefined"===typeof m?this.imscISD={}:m,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./styles":32,"./utils":33}],30:[function(c,u,m){m.generateISD=c("./isd").generateISD;m.fromXML=c("./doc").fromXML;m.renderHTML=c("./html").render},{"./doc":27,"./html":28,"./isd":29}],31:[function(c,
u,m){c="undefined"===typeof m?this.imscNames={}:m;c.ns_tt="http://www.w3.org/ns/ttml";c.ns_tts="http://www.w3.org/ns/ttml#styling";c.ns_ttp="http://www.w3.org/ns/ttml#parameter";c.ns_xml="http://www.w3.org/XML/1998/namespace";c.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";c.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";c.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";c.ns_ebutts="urn:ebu:tt:style";c.ttaf_map={"http://www.w3.org/2006/10/ttaf1":c.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":c.ns_tts,
"http://www.w3.org/2006/10/ttaf1#parameter":c.ns_ttp}},{}],32:[function(c,u,m){(function(c,g,a){function m(a,c,e,g,m,q,u,w){this.name=c;this.ns=a;this.qname=a+" "+c;this.inherit=m;this.animatable=q;this.initial=e;this.applies=g;this.parse=u;this.compute=w}c.all=[new m(g.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new m(g.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new m(g.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},
null),new m(g.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new m(g.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"extent","auto",["tt","region"],!1,!0,function(b){if("auto"===b)return b;var c=b.split(" ");if(2!==c.length)return null;b=a.parseLength(c[0]);return(c=a.parseLength(c[1]))&&b?{h:c,w:b}:null},function(b,c,e,g,m){if("auto"===g)c=new a.ComputedLength(0,1);else if(c=a.toComputedLength(g.h.value,g.h.unit,
null,b.dimensions.h,null,b.pxLength.h),null===c)return null;if("auto"===g)b=new a.ComputedLength(1,0);else if(b=a.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:c,w:b}}),new m(g.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(a){a=a.split(",");for(var b=[],c=0;c<a.length;c++)"'"!==a[c].charAt(0)&&'"'!==a[c].charAt(0)?"default"===a[c]?b.push("monospaceSerif"):b.push(a[c]):b.push(a[c]);return b},null),new m(g.ns_tts,"shear","0%",["p"],
!0,!0,a.parseLength,function(a,c,e,g){if("%"===g.unit)a=100<Math.abs(g.value)?100*Math.sign(g.value):g.value;else return null;return a}),new m(g.ns_tts,"fontSize","1c",["span","p"],!0,!0,a.parseLength,function(b,e,g,k,m){return a.toComputedLength(k.value,k.unit,null!==e?e.styleAttrs[c.byName.fontSize.qname]:b.cellLength.h,null!==e?e.styleAttrs[c.byName.fontSize.qname]:b.cellLength.h,b.cellLength.h,b.pxLength.h)}),new m(g.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new m(g.ns_tts,
"fontWeight","normal",["span","p"],!0,!0,function(a){return a},null),new m(g.ns_tts,"lineHeight","normal",["p"],!0,!0,function(b){return"normal"===b?b:a.parseLength(b)},function(b,e,g,k,m){if("normal"===k)b=k;else if(b=a.toComputedLength(k.value,k.unit,g.styleAttrs[c.byName.fontSize.qname],g.styleAttrs[c.byName.fontSize.qname],b.cellLength.h,b.pxLength.h),null===b)return null;return b}),new m(g.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new m(g.ns_tts,"origin","auto",["region"],!1,!0,function(b){if("auto"===
b)return b;var c=b.split(" ");if(2!==c.length)return null;b=a.parseLength(c[0]);return(c=a.parseLength(c[1]))&&b?{h:c,w:b}:null},function(b,c,e,g,m){if("auto"===g)c=new a.ComputedLength(0,0);else if(c=a.toComputedLength(g.h.value,g.h.unit,null,b.dimensions.h,null,b.pxLength.h),null===c)return null;if("auto"===g)b=new a.ComputedLength(0,0);else if(b=a.toComputedLength(g.w.value,g.w.unit,null,b.dimensions.w,null,b.pxLength.w),null===b)return null;return{h:c,w:b}}),new m(g.ns_tts,"overflow","hidden",
["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"padding","0px",["region"],!1,!0,function(b){b=b.split(" ");if(4<b.length)return null;for(var c=[],e=0;e<b.length;e++){var g=a.parseLength(b[e]);if(!g)return null;c.push(g)}return c},function(b,e,g,k,m){if(1===k.length)e=[k[0],k[0],k[0],k[0]];else if(2===k.length)e=[k[0],k[1],k[0],k[1]];else if(3===k.length)e=[k[0],k[1],k[2],k[1]];else if(4===k.length)e=[k[0],k[1],k[2],k[3]];else return null;k=g.styleAttrs[c.byName.writingMode.qname];if("lrtb"===
k||"lr"===k)e=[e[0],e[3],e[2],e[1]];else if("rltb"===k||"rl"===k)e=[e[0],e[1],e[2],e[3]];else if("tblr"===k)e=[e[3],e[0],e[1],e[2]];else if("tbrl"===k||"tb"===k)e=[e[3],e[2],e[1],e[0]];else return null;k=[];for(m=0;m<e.length;m++)if(0===e[m].value)k[m]=new a.ComputedLength(0,0);else if(k[m]=a.toComputedLength(e[m].value,e[m].unit,g.styleAttrs[c.byName.fontSize.qname],"0"===m||"2"===m?g.styleAttrs[c.byName.extent.qname].h:g.styleAttrs[c.byName.extent.qname].w,"0"===m||"2"===m?b.cellLength.h:b.cellLength.w,
"0"===m||"2"===m?b.pxLength.h:b.pxLength.w),null===k[m])return null;return k}),new m(g.ns_tts,"position","top left",["region"],!1,!0,function(b){return a.parsePosition(b)},function(b,e,g,k){e=a.toComputedLength(k.v.offset.value,k.v.offset.unit,null,new a.ComputedLength(-g.styleAttrs[c.byName.extent.qname].h.rw,b.dimensions.h.rh-g.styleAttrs[c.byName.extent.qname].h.rh),null,b.pxLength.h);if(null===e)return null;"bottom"===k.v.edge&&(e=new a.ComputedLength(-e.rw-g.styleAttrs[c.byName.extent.qname].h.rw,
b.dimensions.h.rh-e.rh-g.styleAttrs[c.byName.extent.qname].h.rh));var m=a.toComputedLength(k.h.offset.value,k.h.offset.unit,null,new a.ComputedLength(b.dimensions.w.rw-g.styleAttrs[c.byName.extent.qname].w.rw,-g.styleAttrs[c.byName.extent.qname].w.rh),null,b.pxLength.w);if(null===e)return null;"right"===k.h.edge&&(m=new a.ComputedLength(b.dimensions.w.rw-m.rw-g.styleAttrs[c.byName.extent.qname].w.rw,-m.rh-g.styleAttrs[c.byName.extent.qname].w.rh));return{h:e,w:m}}),new m(g.ns_tts,"ruby","none",["span"],
!1,!0,function(a){return a},null),new m(g.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new m(g.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new m(g.ns_tts,"rubyReserve","none",["p"],!0,!0,function(b){var c=b.split(" ");b=[null,null];if(0===c.length||2<c.length||"none"!==c[0]&&"both"!==c[0]&&"after"!==c[0]&&"before"!==c[0]&&"outside"!==c[0])return null;b[0]=c[0];if(2===c.length&&"none"!==c[0])if(c=a.parseLength(c[1]))b[1]=
c;else return null;return b},function(b,e,g,k,m){if("none"===k[0])return k;b=null===k[1]?new a.ComputedLength(.5*g.styleAttrs[c.byName.fontSize.qname].rw,.5*g.styleAttrs[c.byName.fontSize.qname].rh):a.toComputedLength(k[1].value,k[1].unit,g.styleAttrs[c.byName.fontSize.qname],g.styleAttrs[c.byName.fontSize.qname],b.cellLength.h,b.pxLength.h);return null===b?null:[k[0],b]}),new m(g.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"textAlign","start",
["p"],!0,!0,function(a){return a},function(a,c,e,g,m){return"left"===g?"start":"right"===g?"end":g}),new m(g.ns_tts,"textCombine","none",["span"],!0,!0,function(a){return"none"===a||"all"===a?a:null},null),new m(g.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new m(g.ns_tts,"textEmphasis","none",["span"],!0,!0,function(b){b=b.split(" ");for(var c={style:null,symbol:null,color:null,position:null},e=0;e<b.length;e++)if("none"===b[e]||"auto"===b[e])c.style=b[e];
else if("filled"===b[e]||"open"===b[e])c.style=b[e];else if("circle"===b[e]||"dot"===b[e]||"sesame"===b[e])c.symbol=b[e];else if("current"===b[e])c.color=b[e];else if("outside"===b[e]||"before"===b[e]||"after"===b[e])c.position=b[e];else if(c.color=a.parseColor(b[e]),null===c.color)return null;null==c.style&&null==c.symbol?c.style="auto":(c.symbol=c.symbol||"circle",c.style=c.style||"filled");c.position=c.position||"outside";c.color=c.color||"current";return c},null),new m(g.ns_tts,"textOutline",
"none",["span"],!0,!0,function(b){if("none"===b)return b;var c={};b=b.split(" ");if(0===b.length||2<b.length)return null;var e=a.parseColor(b[0]);c.color=e;null!==e&&b.shift();if(1!==b.length)return null;b=a.parseLength(b[0]);if(!b)return null;c.thickness=b;return c},function(b,e,g,k,m){if("none"===k)return k;e={};e.color=null===k.color?g.styleAttrs[c.byName.color.qname]:k.color;e.thickness=a.toComputedLength(k.thickness.value,k.thickness.unit,g.styleAttrs[c.byName.fontSize.qname],g.styleAttrs[c.byName.fontSize.qname],
b.cellLength.h,b.pxLength.h);return null===e.thickness?null:e}),new m(g.ns_tts,"textShadow","none",["span"],!0,!0,a.parseTextShadow,function(b,e,g,k){if("none"===k)return k;e=[];for(var m in k)if(m.hasOwnProperty(k)){var p={};p.x_off=a.toComputedLength(k[m][0].value,k[m][0].unit,null,g.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.w);if(null===p.x_off)return null;p.y_off=a.toComputedLength(k[m][1].value,k[m][1].unit,null,g.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.h);if(null===p.y_off)return null;
if(null===k[m][2])p.b_radius=0;else if(p.b_radius=a.toComputedLength(k[m][2].value,k[m][2].unit,null,g.styleAttrs[c.byName.fontSize.qname],null,b.pxLength.h),null===p.b_radius)return null;p.color=null===k[m][3]?g.styleAttrs[c.byName.color.qname]:k[m][3];e.push(p)}return e}),new m(g.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new m(g.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new m(g.ns_tts,"wrapOption","wrap",
["span"],!0,!0,function(a){return a},null),new m(g.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new m(g.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new m(g.ns_ebutts,"linePadding","0c",["p"],!0,!1,a.parseLength,function(b,c,e,g,m){return a.toComputedLength(g.value,g.unit,null,null,b.cellLength.w,null)}),new m(g.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new m(g.ns_smpte,
"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new m(g.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new m(g.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];c.byQName={};for(var e in c.all)c.all.hasOwnProperty(e)&&(c.byQName[c.all[e].qname]=c.all[e]);c.byName={};for(var q in c.all)c.all.hasOwnProperty(q)&&(c.byName[c.all[q].name]=c.all[q])})("undefined"===typeof m?this.imscStyles=
{}:m,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":31,"./utils":33}],33:[function(c,u,m){(function(c){var g=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,a=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,m=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,e={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,
0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};c.parseColor=function(b){var c,r=null,k=e[b.toLowerCase()];void 0!==k?r=k:null!==(c=g.exec(b))?r=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),void 0!==c[4]?parseInt(c[4],16):255]:null!==(c=a.exec(b))?r=[parseInt(c[1]),parseInt(c[2]),
parseInt(c[3]),255]:null!==(c=m.exec(b))&&(r=[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])]);return r};var q=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;c.parseLength=function(a){var b,c=null;null!==(b=q.exec(a))&&(c={value:parseFloat(b[1]),unit:b[2]});return c};c.parseTextShadow=function(a){a=a.split(",");for(var b=[],e=0;e<a.length;e++){var g=a[e].split(" ");if(1===g.length&&"none"===g[0])return"none";if(1<g.length&&5>g.length){var m=[null,null,null,null],q=c.parseLength(g.shift());
if(null===q)return null;m[0]=q;q=c.parseLength(g.shift());if(null===q)return null;m[1]=q;if(0!==g.length&&(q=c.parseLength(g[0]),null!==q&&(m[2]=q,g.shift()),0!==g.length)){g=c.parseColor(g[0]);if(null===g)return null;m[3]=g}b.push(m)}}return b};c.parsePosition=function(a){a=a.split(" ");var b=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var e in a)if(a.hasOwnProperty(e)&&!b(a[e])){var g=c.parseLength(a[e]);if(null===g)return null;
a[e]=g}e={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(g=0;g<a.length;){var m=a[g++];if(b(m)){var q={value:0,unit:"%"};2!==a.length&&g<a.length&&!b(a[g])&&(q=a[g++]);"right"===m?(e.h.edge=m,e.h.offset=q):"bottom"===m?(e.v.edge=m,e.v.offset=q):"left"===m?e.h.offset=q:"top"===m&&(e.v.offset=q)}else if(1===a.length||2===a.length)1===g?e.h.offset=m:e.v.offset=m;else return null}return e};c.ComputedLength=function(a,c){this.rw=a;this.rh=c};c.ComputedLength.prototype.toUsedLength=
function(a,c){return a*this.rw+c*this.rh};c.ComputedLength.prototype.multiply=function(a,c){return c?a*c:a};c.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};c.toComputedLength=function(a,e,g,k,m,q){return"%"===e&&k?new c.ComputedLength(k.rw*a/100,k.rh*a/100):"em"===e&&g?new c.ComputedLength(g.rw*a,g.rh*a):"c"===e&&m?new c.ComputedLength(a*m.rw,a*m.rh):"px"===e&&q?new c.ComputedLength(a*q.rw,a*q.rh):"rh"===e?new c.ComputedLength(0,a/100):"rw"===e?new c.ComputedLength(a/
100,0):null}})("undefined"===typeof m?this.imscUtils={}:m)},{}]},{},[30])(30)});
