/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
 safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource>  http://mths.be/fromcodepoint v0.1.0 by @mathias */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,n,h){c!=Array.prototype&&c!=Object.prototype&&(c[n]=h.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,n,h,b){if(n){h=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var e=c[b];e in h||(h[e]={});h=h[e]}c=c[c.length-1];b=h[c];n=n(b);n!=b&&null!=n&&$jscomp.defineProperty(h,c,{configurable:!0,writable:!0,value:n})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,h,b){var e=this.length||0;0>h&&(h=Math.max(0,e+h));if(null==b||b>e)b=e;b=Number(b);0>b&&(b=Math.max(0,e+b));for(h=Number(h||0);h<b;h++)this[h]=c;return this}},"es6","es3");
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(n){return $jscomp.SYMBOL_PREFIX+(n||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(c){var n=0;return $jscomp.iteratorPrototype(function(){return n<c.length?{done:!1,value:c[n++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,n){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var h=0,b={next:function(){if(h<c.length){var e=h++;return{value:n(e,c[e]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(c){return c?c:function(){return[]}},"es6","es5");
$jscomp.polyfill("Reflect.ownKeys",function(c){return c?c:function(c){var h=[],b=Object.getOwnPropertyNames(c);c=Object.getOwnPropertySymbols(c);for(var e=0;e<b.length;e++)("jscomp_symbol_"==b[e].substring(0,14)?c:h).push(b[e]);return h.concat(c)}},"es6","es5");
$jscomp.polyfill("String.fromCodePoint",function(c){return c?c:function(c){for(var h="",b=0;b<arguments.length;b++){var e=Number(arguments[b]);if(0>e||1114111<e||e!==Math.floor(e))throw new RangeError("invalid_code_point "+e);65535>=e?h+=String.fromCharCode(e):(e-=65536,h+=String.fromCharCode(e>>>10&1023|55296),h+=String.fromCharCode(e&1023|56320))}return h}},"es6","es3");$jscomp.owns=function(c,n){return Object.prototype.hasOwnProperty.call(c,n)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,n){for(var h=1;h<arguments.length;h++){var b=arguments[h];if(b)for(var e in b)$jscomp.owns(b,e)&&(c[e]=b[e])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.entries",function(c){return c?c:function(c){var h=[],b;for(b in c)$jscomp.owns(c,b)&&h.push([b,c[b]]);return h}},"es8","es3");
$jscomp.polyfill("Object.is",function(c){return c?c:function(c,h){return c===h?0!==c||1/c===1/h:c!==c&&h!==h}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,h){var b=this;b instanceof String&&(b=String(b));var e=b.length;h=h||0;for(0>h&&(h=Math.max(h+e,0));h<e;h++){var l=b[h];if(l===c||Object.is(l,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,n,h){if(null==c)throw new TypeError("The 'this' value for String.prototype."+h+" must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,h){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,h||0)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(c){return c?c:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}},"es6","es3");
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).imsc=c()})(function(){return function(){function c(n,h,b){function e(u,z){if(!h[u]){if(!n[u]){var a="function"==typeof require&&require;if(!z&&a)return a(u,!0);if(l)return l(u,!0);z=Error("Cannot find module '"+u+"'");throw z.code="MODULE_NOT_FOUND",z;}z=
h[u]={exports:{}};n[u][0].call(z.exports,function(a){return e(n[u][1][a]||a)},z,z.exports,c,n,h,b)}return h[u].exports}for(var l="function"==typeof require&&require,u=0;u<b.length;u++)e(b[u]);return e}return c}()({1:[function(c,n,h){function b(b){var a=b.length;if(0<a%4)throw Error("Invalid string. Length must be a multiple of 4");b=b.indexOf("=");-1===b&&(b=a);return[b,b===a?0:4-b%4]}function e(b,a,c){for(var e=[],x=a;x<c;x+=3)a=(b[x]<<16&16711680)+(b[x+1]<<8&65280)+(b[x+2]&255),e.push(l[a>>18&63]+
l[a>>12&63]+l[a>>6&63]+l[a&63]);return e.join("")}h.byteLength=function(c){c=b(c);var a=c[1];return 3*(c[0]+a)/4-a};h.toByteArray=function(c){var a=b(c);var e=a[0];a=a[1];var l=new A(3*(e+a)/4-a),v=0,h=0<a?e-4:e,p;for(p=0;p<h;p+=4)e=u[c.charCodeAt(p)]<<18|u[c.charCodeAt(p+1)]<<12|u[c.charCodeAt(p+2)]<<6|u[c.charCodeAt(p+3)],l[v++]=e>>16&255,l[v++]=e>>8&255,l[v++]=e&255;2===a&&(e=u[c.charCodeAt(p)]<<2|u[c.charCodeAt(p+1)]>>4,l[v++]=e&255);1===a&&(e=u[c.charCodeAt(p)]<<10|u[c.charCodeAt(p+1)]<<4|u[c.charCodeAt(p+
2)]>>2,l[v++]=e>>8&255,l[v++]=e&255);return l};h.fromByteArray=function(b){for(var a=b.length,c=a%3,w=[],v=0,u=a-c;v<u;v+=16383)w.push(e(b,v,v+16383>u?u:v+16383));1===c?(b=b[a-1],w.push(l[b>>2]+l[b<<4&63]+"==")):2===c&&(b=(b[a-2]<<8)+b[a-1],w.push(l[b>>10]+l[b>>4&63]+l[b<<2&63]+"="));return w.join("")};var l=[],u=[],A="undefined"!==typeof Uint8Array?Uint8Array:Array;for(c=0;64>c;++c)l[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c],u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(c)]=
c;u[45]=62;u[95]=63},{}],2:[function(c,n,h){},{}],3:[function(c,n,h){(function(b){function e(k){if(2147483647<k)throw new RangeError('The value "'+k+'" is invalid for option "size"');k=new Uint8Array(k);k.__proto__=b.prototype;return k}function b(k,r,g){if("number"===typeof k){if("string"===typeof r)throw new TypeError('The "string" argument must be of type string. Received type number');return A(k)}return l(k,r,g)}function l(k,r,g){if("string"===typeof k){var f=r;if("string"!==typeof f||""===f)f=
"utf8";if(!b.isEncoding(f))throw new TypeError("Unknown encoding: "+f);r=w(k,f)|0;g=e(r);k=g.write(k,f);k!==r&&(g=g.slice(0,k));return g}if(ArrayBuffer.isView(k))return z(k);if(null==k)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(J(k,ArrayBuffer)||k&&J(k.buffer,ArrayBuffer)){if(0>r||k.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<r+(g||0))throw new RangeError('"length" is outside of buffer bounds');
k=void 0===r&&void 0===g?new Uint8Array(k):void 0===g?new Uint8Array(k,r):new Uint8Array(k,r,g);k.__proto__=b.prototype;return k}if("number"===typeof k)throw new TypeError('The "value" argument must not be of type number. Received type number');f=k.valueOf&&k.valueOf();if(null!=f&&f!==k)return b.from(f,r,g);if(f=a(k))return f;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof k[Symbol.toPrimitive])return b.from(k[Symbol.toPrimitive]("string"),r,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof k);}function u(k){if("number"!==typeof k)throw new TypeError('"size" argument must be of type number');if(0>k)throw new RangeError('The value "'+k+'" is invalid for option "size"');}function A(k){u(k);return e(0>k?0:x(k)|0)}function z(k){for(var r=0>k.length?0:x(k.length)|0,g=e(r),f=0;f<r;f+=1)g[f]=k[f]&255;return g}function a(k){if(b.isBuffer(k)){var r=x(k.length)|0,g=e(r);if(0===g.length)return g;k.copy(g,0,0,r);return g}if(void 0!==k.length)return(r="number"!==typeof k.length)||(r=k.length,
r=r!==r),r?e(0):z(k);if("Buffer"===k.type&&Array.isArray(k.data))return z(k.data)}function x(k){if(2147483647<=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return k|0}function w(k,r){if(b.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||J(k,ArrayBuffer))return k.byteLength;if("string"!==typeof k)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);var g=
k.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===g)return 0;for(var a=!1;;)switch(r){case "ascii":case "latin1":case "binary":return g;case "utf8":case "utf-8":return d(k).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*g;case "hex":return g>>>1;case "base64":return L.toByteArray(t(k)).length;default:if(a)return f?-1:d(k).length;r=(""+r).toLowerCase();a=!0}}function v(k,r,g){var f=!1;if(void 0===r||0>r)r=0;if(r>this.length)return"";if(void 0===g||g>this.length)g=
this.length;if(0>=g)return"";g>>>=0;r>>>=0;if(g<=r)return"";for(k||(k="utf8");;)switch(k){case "hex":k=r;r=g;g=this.length;if(!k||0>k)k=0;if(!r||0>r||r>g)r=g;f="";for(g=k;g<r;++g)k=f,f=this[g],f=16>f?"0"+f.toString(16):f.toString(16),f=k+f;return f;case "utf8":case "utf-8":return F(this,r,g);case "ascii":k="";for(g=Math.min(this.length,g);r<g;++r)k+=String.fromCharCode(this[r]&127);return k;case "latin1":case "binary":k="";for(g=Math.min(this.length,g);r<g;++r)k+=String.fromCharCode(this[r]);return k;
case "base64":return r=0===r&&g===this.length?L.fromByteArray(this):L.fromByteArray(this.slice(r,g)),r;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":r=this.slice(r,g);g="";for(k=0;k<r.length;k+=2)g+=String.fromCharCode(r[k]+256*r[k+1]);return g;default:if(f)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase();f=!0}}function D(k,r,g){var f=k[r];k[r]=k[g];k[g]=f}function p(k,r,g,f,a){if(0===k.length)return-1;"string"===typeof g?(f=g,g=0):2147483647<g?g=2147483647:-2147483648>
g&&(g=-2147483648);g=+g;g!==g&&(g=a?0:k.length-1);0>g&&(g=k.length+g);if(g>=k.length){if(a)return-1;g=k.length-1}else if(0>g)if(a)g=0;else return-1;"string"===typeof r&&(r=b.from(r,f));if(b.isBuffer(r))return 0===r.length?-1:n(k,r,g,f,a);if("number"===typeof r)return r&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(k,r,g):Uint8Array.prototype.lastIndexOf.call(k,r,g):n(k,[r],g,f,a);throw new TypeError("val must be string, number or Buffer");}function n(k,
r,g,f,a){function b(f,k){return 1===d?f[k]:f.readUInt16BE(k*d)}var d=1,q=k.length,m=r.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>k.length||2>r.length)return-1;d=2;q/=2;m/=2;g/=2}if(a)for(f=-1;g<q;g++)if(b(k,g)===b(r,-1===f?0:g-f)){if(-1===f&&(f=g),g-f+1===m)return f*d}else-1!==f&&(g-=g-f),f=-1;else for(g+m>q&&(g=q-m);0<=g;g--){q=!0;for(f=0;f<m;f++)if(b(k,g+f)!==b(r,f)){q=!1;break}if(q)return g}return-1}function F(k,r,g){g=Math.min(k.length,
g);for(var f=[];r<g;){var a=k[r],b=null,d=239<a?4:223<a?3:191<a?2:1;if(r+d<=g)switch(d){case 1:128>a&&(b=a);break;case 2:var q=k[r+1];128===(q&192)&&(a=(a&31)<<6|q&63,127<a&&(b=a));break;case 3:q=k[r+1];var m=k[r+2];128===(q&192)&&128===(m&192)&&(a=(a&15)<<12|(q&63)<<6|m&63,2047<a&&(55296>a||57343<a)&&(b=a));break;case 4:q=k[r+1];m=k[r+2];var c=k[r+3];128===(q&192)&&128===(m&192)&&128===(c&192)&&(a=(a&15)<<18|(q&63)<<12|(m&63)<<6|c&63,65535<a&&1114112>a&&(b=a))}null===b?(b=65533,d=1):65535<b&&(b-=
65536,f.push(b>>>10&1023|55296),b=56320|b&1023);f.push(b);r+=d}k=f.length;if(k<=E)f=String.fromCharCode.apply(String,f);else{g="";for(r=0;r<k;)g+=String.fromCharCode.apply(String,f.slice(r,r+=E));f=g}return f}function y(k,a,g){if(0!==k%1||0>k)throw new RangeError("offset is not uint");if(k+a>g)throw new RangeError("Trying to access beyond buffer length");}function B(k,a,g,f,d,q){if(!b.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>d||a<q)throw new RangeError('"value" argument is out of bounds');
if(g+f>k.length)throw new RangeError("Index out of range");}function K(k,a,g,f,b,d){if(g+f>k.length)throw new RangeError("Index out of range");if(0>g)throw new RangeError("Index out of range");}function G(k,a,g,f,b){a=+a;g>>>=0;b||K(k,a,g,4,3.4028234663852886E38,-3.4028234663852886E38);H.write(k,a,g,f,23,4);return g+4}function m(k,a,g,f,b){a=+a;g>>>=0;b||K(k,a,g,8,1.7976931348623157E308,-1.7976931348623157E308);H.write(k,a,g,f,52,8);return g+8}function t(k){k=k.split("=")[0];k=k.trim().replace(N,
"");if(2>k.length)return"";for(;0!==k.length%4;)k+="=";return k}function d(k,a){a=a||Infinity;for(var g,f=k.length,r=null,b=[],d=0;d<f;++d){g=k.charCodeAt(d);if(55295<g&&57344>g){if(!r){if(56319<g){-1<(a-=3)&&b.push(239,191,189);continue}else if(d+1===f){-1<(a-=3)&&b.push(239,191,189);continue}r=g;continue}if(56320>g){-1<(a-=3)&&b.push(239,191,189);r=g;continue}g=(r-55296<<10|g-56320)+65536}else r&&-1<(a-=3)&&b.push(239,191,189);r=null;if(128>g){if(0>--a)break;b.push(g)}else if(2048>g){if(0>(a-=2))break;
b.push(g>>6|192,g&63|128)}else if(65536>g){if(0>(a-=3))break;b.push(g>>12|224,g>>6&63|128,g&63|128)}else if(1114112>g){if(0>(a-=4))break;b.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw Error("Invalid code point");}return b}function q(k){for(var a=[],g=0;g<k.length;++g)a.push(k.charCodeAt(g)&255);return a}function I(k,a,g,f){for(var r=0;r<f&&!(r+g>=a.length||r>=k.length);++r)a[r+g]=k[r];return r}function J(k,a){return k instanceof a||null!=k&&null!=k.constructor&&null!=k.constructor.name&&
k.constructor.name===a.name}var L=c("base64-js"),H=c("ieee754");h.Buffer=b;h.SlowBuffer=function(k){+k!=k&&(k=0);return b.alloc(+k)};h.INSPECT_MAX_BYTES=50;h.kMaxLength=2147483647;b.TYPED_ARRAY_SUPPORT=function(){try{var k=new Uint8Array(1);k.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===k.foo()}catch(r){return!1}}();b.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});b.poolSize=8192;b.from=function(k,a,g){return l(k,a,g)};b.prototype.__proto__=Uint8Array.prototype;
b.__proto__=Uint8Array;b.alloc=function(k,a,g){u(k);k=0>=k?e(k):void 0!==a?"string"===typeof g?e(k).fill(a,g):e(k).fill(a):e(k);return k};b.allocUnsafe=function(k){return A(k)};b.allocUnsafeSlow=function(k){return A(k)};b.isBuffer=function(k){return null!=k&&!0===k._isBuffer&&k!==b.prototype};b.compare=function(k,a){J(k,Uint8Array)&&(k=b.from(k,k.offset,k.byteLength));J(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength));if(!b.isBuffer(k)||!b.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(k===a)return 0;for(var g=k.length,f=a.length,r=0,d=Math.min(g,f);r<d;++r)if(k[r]!==a[r]){g=k[r];f=a[r];break}return g<f?-1:f<g?1:0};b.isEncoding=function(k){switch(String(k).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(k,a){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(0===k.length)return b.alloc(0);
var g;if(void 0===a)for(g=a=0;g<k.length;++g)a+=k[g].length;a=b.allocUnsafe(a);var f=0;for(g=0;g<k.length;++g){var r=k[g];J(r,Uint8Array)&&(r=b.from(r));if(!b.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(a,f);f+=r.length}return a};b.byteLength=w;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var k=this.length;if(0!==k%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<k;a+=2)D(this,a,a+1);return this};b.prototype.swap32=
function(){var k=this.length;if(0!==k%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<k;a+=4)D(this,a,a+3),D(this,a+1,a+2);return this};b.prototype.swap64=function(){var k=this.length;if(0!==k%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<k;a+=8)D(this,a,a+7),D(this,a+1,a+6),D(this,a+2,a+5),D(this,a+3,a+4);return this};b.prototype.toString=function(){var k=this.length;return 0===k?"":0===arguments.length?F(this,0,k):v.apply(this,
arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(k){if(!b.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:0===b.compare(this,k)};b.prototype.inspect=function(){var k=h.INSPECT_MAX_BYTES;var a=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim();this.length>k&&(a+=" ... ");return"<Buffer "+a+">"};b.prototype.compare=function(k,a,g,f,d){J(k,Uint8Array)&&(k=b.from(k,k.offset,k.byteLength));if(!b.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof k);void 0===a&&(a=0);void 0===g&&(g=k?k.length:0);void 0===f&&(f=0);void 0===d&&(d=this.length);if(0>a||g>k.length||0>f||d>this.length)throw new RangeError("out of range index");if(f>=d&&a>=g)return 0;if(f>=d)return-1;if(a>=g)return 1;a>>>=0;g>>>=0;f>>>=0;d>>>=0;if(this===k)return 0;var q=d-f,r=g-a,m=Math.min(q,r);f=this.slice(f,d);k=k.slice(a,g);for(a=0;a<m;++a)if(f[a]!==k[a]){q=f[a];r=k[a];break}return q<r?-1:r<q?1:0};b.prototype.includes=function(k,a,g){return-1!==this.indexOf(k,a,g)};b.prototype.indexOf=
function(k,a,g){return p(this,k,a,g,!0)};b.prototype.lastIndexOf=function(k,a,g){return p(this,k,a,g,!1)};b.prototype.write=function(k,a,g,f){if(void 0===a)f="utf8",g=this.length,a=0;else if(void 0===g&&"string"===typeof a)f=a,g=this.length,a=0;else if(isFinite(a))a>>>=0,isFinite(g)?(g>>>=0,void 0===f&&(f="utf8")):(f=g,g=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var b=this.length-a;if(void 0===g||g>b)g=b;if(0<k.length&&(0>g||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");
f||(f="utf8");for(b=!1;;)switch(f){case "hex":a:{a=Number(a)||0;f=this.length-a;g?(g=Number(g),g>f&&(g=f)):g=f;f=k.length;g>f/2&&(g=f/2);for(f=0;f<g;++f){b=parseInt(k.substr(2*f,2),16);if(b!==b){k=f;break a}this[a+f]=b}k=f}return k;case "utf8":case "utf-8":return I(d(k,this.length-a),this,a,g);case "ascii":return I(q(k),this,a,g);case "latin1":case "binary":return I(q(k),this,a,g);case "base64":return I(L.toByteArray(t(k)),this,a,g);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":f=k;b=this.length-
a;for(var m=[],r=0;r<f.length&&!(0>(b-=2));++r){var c=f.charCodeAt(r);k=c>>8;c%=256;m.push(c);m.push(k)}return I(m,this,a,g);default:if(b)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase();b=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;b.prototype.slice=function(k,a){var g=this.length;k=~~k;a=void 0===a?g:~~a;0>k?(k+=g,0>k&&(k=0)):k>g&&(k=g);0>a?(a+=g,0>a&&(a=0)):a>g&&(a=g);a<k&&(a=k);k=this.subarray(k,a);k.__proto__=
b.prototype;return k};b.prototype.readUIntLE=function(a,b,g){a>>>=0;b>>>=0;g||y(a,b,this.length);g=this[a];for(var f=1,k=0;++k<b&&(f*=256);)g+=this[a+k]*f;return g};b.prototype.readUIntBE=function(a,b,g){a>>>=0;b>>>=0;g||y(a,b,this.length);g=this[a+--b];for(var f=1;0<b&&(f*=256);)g+=this[a+--b]*f;return g};b.prototype.readUInt8=function(a,b){a>>>=0;b||y(a,1,this.length);return this[a]};b.prototype.readUInt16LE=function(a,b){a>>>=0;b||y(a,2,this.length);return this[a]|this[a+1]<<8};b.prototype.readUInt16BE=
function(a,b){a>>>=0;b||y(a,2,this.length);return this[a]<<8|this[a+1]};b.prototype.readUInt32LE=function(a,b){a>>>=0;b||y(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};b.prototype.readUInt32BE=function(a,b){a>>>=0;b||y(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};b.prototype.readIntLE=function(a,b,g){a>>>=0;b>>>=0;g||y(a,b,this.length);g=this[a];for(var f=1,k=0;++k<b&&(f*=256);)g+=this[a+k]*f;g>=128*f&&(g-=Math.pow(2,8*b));return g};
b.prototype.readIntBE=function(a,b,g){a>>>=0;b>>>=0;g||y(a,b,this.length);g=b;for(var f=1,k=this[a+--g];0<g&&(f*=256);)k+=this[a+--g]*f;k>=128*f&&(k-=Math.pow(2,8*b));return k};b.prototype.readInt8=function(a,b){a>>>=0;b||y(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};b.prototype.readInt16LE=function(a,b){a>>>=0;b||y(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};b.prototype.readInt16BE=function(a,b){a>>>=0;b||y(a,2,this.length);a=this[a+1]|this[a]<<8;return a&
32768?a|4294901760:a};b.prototype.readInt32LE=function(a,b){a>>>=0;b||y(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};b.prototype.readInt32BE=function(a,b){a>>>=0;b||y(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};b.prototype.readFloatLE=function(a,b){a>>>=0;b||y(a,4,this.length);return H.read(this,a,!0,23,4)};b.prototype.readFloatBE=function(a,b){a>>>=0;b||y(a,4,this.length);return H.read(this,a,!1,23,4)};b.prototype.readDoubleLE=function(a,
b){a>>>=0;b||y(a,8,this.length);return H.read(this,a,!0,52,8)};b.prototype.readDoubleBE=function(a,b){a>>>=0;b||y(a,8,this.length);return H.read(this,a,!1,52,8)};b.prototype.writeUIntLE=function(a,b,g,f){a=+a;b>>>=0;g>>>=0;f||B(this,a,b,g,Math.pow(2,8*g)-1,0);f=1;var k=0;for(this[b]=a&255;++k<g&&(f*=256);)this[b+k]=a/f&255;return b+g};b.prototype.writeUIntBE=function(a,b,g,f){a=+a;b>>>=0;g>>>=0;f||B(this,a,b,g,Math.pow(2,8*g)-1,0);f=g-1;var k=1;for(this[b+f]=a&255;0<=--f&&(k*=256);)this[b+f]=a/k&
255;return b+g};b.prototype.writeUInt8=function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,1,255,0);this[b]=a&255;return b+1};b.prototype.writeUInt16LE=function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,2,65535,0);this[b]=a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeUInt16BE=function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,2,65535,0);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeUInt32LE=function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,4,4294967295,0);this[b+3]=a>>>24;this[b+2]=a>>>16;this[b+1]=a>>>8;this[b]=a&
255;return b+4};b.prototype.writeUInt32BE=function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,4,4294967295,0);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeIntLE=function(a,b,g,f){a=+a;b>>>=0;f||(f=Math.pow(2,8*g-1),B(this,a,b,g,f-1,-f));f=0;var k=1,d=0;for(this[b]=a&255;++f<g&&(k*=256);)0>a&&0===d&&0!==this[b+f-1]&&(d=1),this[b+f]=(a/k>>0)-d&255;return b+g};b.prototype.writeIntBE=function(a,b,g,f){a=+a;b>>>=0;f||(f=Math.pow(2,8*g-1),B(this,a,b,g,f-1,-f));f=g-
1;var k=1,d=0;for(this[b+f]=a&255;0<=--f&&(k*=256);)0>a&&0===d&&0!==this[b+f+1]&&(d=1),this[b+f]=(a/k>>0)-d&255;return b+g};b.prototype.writeInt8=function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,1,127,-128);0>a&&(a=255+a+1);this[b]=a&255;return b+1};b.prototype.writeInt16LE=function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,2,32767,-32768);this[b]=a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeInt16BE=function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,2,32767,-32768);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeInt32LE=
function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,4,2147483647,-2147483648);this[b]=a&255;this[b+1]=a>>>8;this[b+2]=a>>>16;this[b+3]=a>>>24;return b+4};b.prototype.writeInt32BE=function(a,b,g){a=+a;b>>>=0;g||B(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeFloatLE=function(a,b,g){return G(this,a,b,!0,g)};b.prototype.writeFloatBE=function(a,b,g){return G(this,a,b,!1,g)};b.prototype.writeDoubleLE=function(a,
b,g){return m(this,a,b,!0,g)};b.prototype.writeDoubleBE=function(a,b,g){return m(this,a,b,!1,g)};b.prototype.copy=function(a,d,g,f){if(!b.isBuffer(a))throw new TypeError("argument should be a Buffer");g||(g=0);f||0===f||(f=this.length);d>=a.length&&(d=a.length);d||(d=0);0<f&&f<g&&(f=g);if(f===g||0===a.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>g||g>=this.length)throw new RangeError("Index out of range");if(0>f)throw new RangeError("sourceEnd out of bounds");
f>this.length&&(f=this.length);a.length-d<f-g&&(f=a.length-d+g);var k=f-g;if(this===a&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(d,g,f);else if(this===a&&g<d&&d<f)for(f=k-1;0<=f;--f)a[f+d]=this[f+g];else Uint8Array.prototype.set.call(a,this.subarray(g,f),d);return k};b.prototype.fill=function(a,d,g,f){if("string"===typeof a){"string"===typeof d?(f=d,d=0,g=this.length):"string"===typeof g&&(f=g,g=this.length);if(void 0!==f&&"string"!==typeof f)throw new TypeError("encoding must be a string");
if("string"===typeof f&&!b.isEncoding(f))throw new TypeError("Unknown encoding: "+f);if(1===a.length){var k=a.charCodeAt(0);if("utf8"===f&&128>k||"latin1"===f)a=k}}else"number"===typeof a&&(a&=255);if(0>d||this.length<d||this.length<g)throw new RangeError("Out of range index");if(g<=d)return this;d>>>=0;g=void 0===g?this.length:g>>>0;a||(a=0);if("number"===typeof a)for(f=d;f<g;++f)this[f]=a;else{k=b.isBuffer(a)?a:b.from(a,f);var q=k.length;if(0===q)throw new TypeError('The value "'+a+'" is invalid for argument "value"');
for(f=0;f<g-d;++f)this[f+d]=k[f%q]}return this};var N=/[^+/0-9A-Za-z-_]/g}).call(this,c("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:6}],4:[function(c,n,h){(function(b){h.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};h.isBoolean=function(b){return"boolean"===typeof b};h.isNull=function(b){return null===b};h.isNullOrUndefined=function(b){return null==b};h.isNumber=function(b){return"number"===typeof b};h.isString=function(b){return"string"===
typeof b};h.isSymbol=function(b){return"symbol"===typeof b};h.isUndefined=function(b){return void 0===b};h.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};h.isObject=function(b){return"object"===typeof b&&null!==b};h.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};h.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};h.isFunction=function(b){return"function"===typeof b};h.isPrimitive=function(b){return null===
b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};h.isBuffer=b.isBuffer}).call(this,{isBuffer:c("../../is-buffer/index.js")})},{"../../is-buffer/index.js":8}],5:[function(c,n,h){function b(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=D(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function e(a,c,l,m){var t;if("function"!==typeof l)throw new TypeError('"listener" argument must be a function');
if(t=a._events){t.newListener&&(a.emit("newListener",c,l.listener?l.listener:l),t=a._events);var d=t[c]}else t=a._events=D(null),a._eventsCount=0;d?("function"===typeof d?d=t[c]=m?[l,d]:[d,l]:m?d.unshift(l):d.push(l),d.warned||(l=void 0===a._maxListeners?b.defaultMaxListeners:a._maxListeners)&&0<l&&d.length>l&&(d.warned=!0,l=Error("Possible EventEmitter memory leak detected. "+d.length+' "'+String(c)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),l.name="MaxListenersExceededWarning",
l.emitter=a,l.type=c,l.count=d.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message))):(t[c]=l,++a._eventsCount);return a}function l(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],
arguments[1],arguments[2]);default:for(var a=Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];this.listener.apply(this.target,a)}}function u(a,b,c){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:c};b=C.call(l,a);b.listener=c;return a.wrapFn=b}function A(b,c,l){b=b._events;if(!b)return[];c=b[c];if(!c)return[];if("function"===typeof c)return l?[c.listener||c]:[c];if(l)for(l=Array(c.length),b=0;b<l.length;++b)l[b]=c[b].listener||c[b];else l=a(c,c.length);return l}function z(a){var b=
this._events;if(b){a=b[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function a(a,b){for(var c=Array(b),m=0;m<b;++m)c[m]=a[m];return c}function x(a){var b=function(){};b.prototype=a;return new b}function w(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return c}function v(a){var b=this;return function(){return b.apply(a,arguments)}}var D=Object.create||x,p=Object.keys||w,C=Function.prototype.bind||v;n.exports=b;b.EventEmitter=b;b.prototype._events=
void 0;b.prototype._maxListeners=void 0;var F=10;try{c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0});var y=0===c.x}catch(B){y=!1}y?Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return F},set:function(a){if("number"!==typeof a||0>a||a!==a)throw new TypeError('"defaultMaxListeners" must be a positive number');F=a}}):b.defaultMaxListeners=F;b.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');
this._maxListeners=a;return this};b.prototype.getMaxListeners=function(){return void 0===this._maxListeners?b.defaultMaxListeners:this._maxListeners};b.prototype.emit=function(b){var c,l,m;var t="error"===b;if(m=this._events)t=t&&null==m.error;else if(!t)return!1;if(t){1<arguments.length&&(c=arguments[1]);if(c instanceof Error)throw c;m=Error('Unhandled "error" event. ('+c+")");m.context=c;throw m;}c=m[b];if(!c)return!1;m="function"===typeof c;var d=arguments.length;switch(d){case 1:if(m)c.call(this);
else for(m=c.length,c=a(c,m),t=0;t<m;++t)c[t].call(this);break;case 2:t=arguments[1];if(m)c.call(this,t);else for(m=c.length,c=a(c,m),d=0;d<m;++d)c[d].call(this,t);break;case 3:t=arguments[1];d=arguments[2];if(m)c.call(this,t,d);else for(m=c.length,c=a(c,m),l=0;l<m;++l)c[l].call(this,t,d);break;case 4:t=arguments[1];d=arguments[2];l=arguments[3];if(m)c.call(this,t,d,l);else{m=c.length;c=a(c,m);for(var q=0;q<m;++q)c[q].call(this,t,d,l)}break;default:t=Array(d-1);for(l=1;l<d;l++)t[l-1]=arguments[l];
if(m)c.apply(this,t);else for(m=c.length,c=a(c,m),d=0;d<m;++d)c[d].apply(this,t)}return!0};b.prototype.addListener=function(a,b){return e(this,a,b,!1)};b.prototype.on=b.prototype.addListener;b.prototype.prependListener=function(a,b){return e(this,a,b,!0)};b.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,u(this,a,b));return this};b.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');
this.prependListener(a,u(this,a,b));return this};b.prototype.removeListener=function(a,b){var c;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');var m=this._events;if(!m)return this;var l=m[a];if(!l)return this;if(l===b||l.listener===b)0===--this._eventsCount?this._events=D(null):(delete m[a],m.removeListener&&this.emit("removeListener",a,l.listener||b));else if("function"!==typeof l){var d=-1;for(c=l.length-1;0<=c;c--)if(l[c]===b||l[c].listener===b){var q=l[c].listener;
d=c;break}if(0>d)return this;if(0===d)l.shift();else{c=d+1;for(var e=l.length;c<e;d+=1,c+=1)l[d]=l[c];l.pop()}1===l.length&&(m[a]=l[0]);m.removeListener&&this.emit("removeListener",a,q||b)}return this};b.prototype.removeAllListeners=function(a){var b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=D(null),this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=D(null):delete b[a]),this;if(0===arguments.length){var c=p(b);for(b=0;b<c.length;++b){var m=
c[b];"removeListener"!==m&&this.removeAllListeners(m)}this.removeAllListeners("removeListener");this._events=D(null);this._eventsCount=0;return this}c=b[a];if("function"===typeof c)this.removeListener(a,c);else if(c)for(b=c.length-1;0<=b;b--)this.removeListener(a,c[b]);return this};b.prototype.listeners=function(a){return A(this,a,!0)};b.prototype.rawListeners=function(a){return A(this,a,!1)};b.listenerCount=function(a,b){return"function"===typeof a.listenerCount?a.listenerCount(b):z.call(a,b)};b.prototype.listenerCount=
z;b.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],6:[function(c,n,h){h.read=function(b,c,l,u,A){var e=8*A-u-1;var a=(1<<e)-1,x=a>>1,w=-7;A=l?A-1:0;var v=l?-1:1,h=b[c+A];A+=v;l=h&(1<<-w)-1;h>>=-w;for(w+=e;0<w;l=256*l+b[c+A],A+=v,w-=8);e=l&(1<<-w)-1;l>>=-w;for(w+=u;0<w;e=256*e+b[c+A],A+=v,w-=8);if(0===l)l=1-x;else{if(l===a)return e?NaN:Infinity*(h?-1:1);e+=Math.pow(2,u);l-=x}return(h?-1:1)*e*Math.pow(2,l-u)};h.write=function(b,c,l,u,h,z){var a,x=8*
z-h-1,e=(1<<x)-1,v=e>>1,A=23===h?Math.pow(2,-24)-Math.pow(2,-77):0;z=u?0:z-1;var p=u?1:-1,n=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,u=e):(u=Math.floor(Math.log(c)/Math.LN2),1>c*(a=Math.pow(2,-u))&&(u--,a*=2),c=1<=u+v?c+A/a:c+A*Math.pow(2,1-v),2<=c*a&&(u++,a/=2),u+v>=e?(c=0,u=e):1<=u+v?(c=(c*a-1)*Math.pow(2,h),u+=v):(c=c*Math.pow(2,v-1)*Math.pow(2,h),u=0));for(;8<=h;b[l+z]=c&255,z+=p,c/=256,h-=8);u=u<<h|c;for(x+=h;0<x;b[l+z]=u&255,z+=p,u/=256,x-=8);b[l+z-p]|=128*
n}},{}],7:[function(c,n,h){n.exports="function"===typeof Object.create?function(b,c){c&&(b.super_=c,b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:function(b,c){if(c){b.super_=c;var l=function(){};l.prototype=c.prototype;b.prototype=new l;b.prototype.constructor=b}}},{}],8:[function(c,n,h){function b(b){return!!b.constructor&&"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)}n.exports=function(c){return null!=c&&(b(c)||
"function"===typeof c.readFloatLE&&"function"===typeof c.slice&&b(c.slice(0,0))||!!c._isBuffer)}},{}],9:[function(c,n,h){var b={}.toString;n.exports=Array.isArray||function(c){return"[object Array]"==b.call(c)}},{}],10:[function(c,n,h){(function(b){function c(c,e,h,z){if("function"!==typeof c)throw new TypeError('"callback" argument must be a function');var a=arguments.length;switch(a){case 0:case 1:return b.nextTick(c);case 2:return b.nextTick(function(){c.call(null,e)});case 3:return b.nextTick(function(){c.call(null,
e,h)});case 4:return b.nextTick(function(){c.call(null,e,h,z)});default:var l=Array(a-1);for(a=0;a<l.length;)l[a++]=arguments[a];return b.nextTick(function(){c.apply(null,l)})}}"undefined"===typeof b||!b.version||0===b.version.indexOf("v0.")||0===b.version.indexOf("v1.")&&0!==b.version.indexOf("v1.8.")?n.exports={nextTick:c}:n.exports=b}).call(this,c("_process"))},{_process:11}],11:[function(c,n,h){function b(){throw Error("setTimeout has not been defined");}function e(){throw Error("clearTimeout has not been defined");
}function l(a){if(w===setTimeout)return setTimeout(a,0);if((w===b||!w)&&setTimeout)return w=setTimeout,setTimeout(a,0);try{return w(a,0)}catch(B){try{return w.call(null,a,0)}catch(K){return w.call(this,a,0)}}}function u(a){if(v===clearTimeout)return clearTimeout(a);if((v===e||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(a);try{return v(a)}catch(B){try{return v.call(null,a)}catch(K){return v.call(this,a)}}}function A(){p&&C&&(p=!1,C.length?D=C.concat(D):F=-1,D.length&&z())}function z(){if(!p){var a=
l(A);p=!0;for(var b=D.length;b;){C=D;for(D=[];++F<b;)C&&C[F].run();F=-1;b=D.length}C=null;p=!1;u(a)}}function a(a,b){this.fun=a;this.array=b}function x(){}c=n.exports={};try{var w="function"===typeof setTimeout?setTimeout:b}catch(y){w=b}try{var v="function"===typeof clearTimeout?clearTimeout:e}catch(y){v=e}var D=[],p=!1,C,F=-1;c.nextTick=function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)c[x-1]=arguments[x];D.push(new a(b,c));1!==D.length||p||l(z)};
a.prototype.run=function(){this.fun.apply(null,this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=x;c.addListener=x;c.once=x;c.off=x;c.removeListener=x;c.removeAllListeners=x;c.emit=x;c.prependListener=x;c.prependOnceListener=x;c.listeners=function(a){return[]};c.binding=function(a){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(a){throw Error("process.chdir is not supported");};c.umask=function(){return 0}},
{}],12:[function(c,n,h){n.exports=c("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":13}],13:[function(c,n,h){function b(a){if(!(this instanceof b))return new b(a);A.call(this,a);z.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",e)}function e(){this.allowHalfOpen||this._writableState.ended||u.nextTick(l,this)}function l(a){a.end()}var u=c("process-nextick-args");
h=Object.keys||function(a){var b=[],c;for(c in a)b.push(c);return b};n.exports=b;n=Object.create(c("core-util-is"));n.inherits=c("inherits");var A=c("./_stream_readable"),z=c("./_stream_writable");n.inherits(b,A);c=h(z.prototype);for(n=0;n<c.length;n++)h=c[n],b.prototype[h]||(b.prototype[h]=z.prototype[h]);Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0===
this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});b.prototype._destroy=function(a,b){this.push(null);this.end();u.nextTick(b,a)}},{"./_stream_readable":15,"./_stream_writable":17,"core-util-is":4,inherits:7,"process-nextick-args":10}],14:[function(c,n,h){function b(c){if(!(this instanceof b))return new b(c);
e.call(this,c)}n.exports=b;var e=c("./_stream_transform");n=Object.create(c("core-util-is"));n.inherits=c("inherits");n.inherits(b,e);b.prototype._transform=function(b,c,e){e(null,b)}},{"./_stream_transform":16,"core-util-is":4,inherits:7}],15:[function(c,n,h){(function(b,e){function l(a,b,c){if("function"===typeof a.prependListener)return a.prependListener(b,c);if(a._events&&a._events[b])d(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]];else a.on(b,c)}function u(a,b){q=q||c("./_stream_duplex");
a=a||{};b=b instanceof q;this.objectMode=!!a.objectMode;b&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var f=a.highWaterMark,g=a.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=f||0===f?f:b&&(g||0===g)?g:d;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new N;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.destroyed=this.resumeScheduled=this.readableListening=this.emittedReadable=
this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(k||(k=c("string_decoder/").StringDecoder),this.decoder=new k(a.encoding),this.encoding=a.encoding)}function h(a){q=q||c("./_stream_duplex");if(!(this instanceof h))return new h(a);this._readableState=new u(a,this);this.readable=!0;a&&("function"===typeof a.read&&(this._read=a.read),"function"===typeof a.destroy&&(this._destroy=a.destroy));I.call(this)}
function z(b,f,c,d,k){var g=b._readableState;if(null===f)g.reading=!1,g.ended||(g.decoder&&(f=g.decoder.end())&&f.length&&(g.buffer.push(f),g.length+=g.objectMode?1:f.length),g.ended=!0,w(b));else{if(!k){k=f;var q;J.isBuffer(k)||k instanceof L||"string"===typeof k||void 0===k||g.objectMode||(q=new TypeError("Invalid non-string/buffer chunk"));var m=q}m?b.emit("error",m):g.objectMode||f&&0<f.length?("string"===typeof f||g.objectMode||Object.getPrototypeOf(f)===J.prototype||(f=J.from(f)),d?g.endEmitted?
b.emit("error",Error("stream.unshift() after end event")):a(b,g,f,!0):g.ended?b.emit("error",Error("stream.push() after EOF")):(g.reading=!1,g.decoder&&!c?(f=g.decoder.write(f),g.objectMode||0!==f.length?a(b,g,f,!1):g.readingMore||(g.readingMore=!0,t.nextTick(D,b,g))):a(b,g,f,!1))):d||(g.reading=!1)}return!g.ended&&(g.needReadable||g.length<g.highWaterMark||0===g.length)}function a(a,b,c,d){b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):
b.buffer.push(c),b.needReadable&&w(a));b.readingMore||(b.readingMore=!0,t.nextTick(D,a,b))}function x(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var f=a;8388608<=f?f=8388608:(f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++);b.highWaterMark=f}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}function w(a){var b=a._readableState;b.needReadable=!1;b.emittedReadable||
(E("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?t.nextTick(v,a):v(a))}function v(a){E("emit readable");a.emit("readable");y(a)}function D(a,b){for(var f=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(E("maybeReadMore read 0"),a.read(0),f!==b.length);)f=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;E("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,y(a))}}function C(a){E("readable nexttick read 0");
a.read(0)}function F(a,b){b.reading||(E("resume read 0"),a.read(0));b.resumeScheduled=!1;b.awaitDrain=0;a.emit("resume");y(a);b.flowing&&!b.reading&&a.read(0)}function y(a){var b=a._readableState;for(E("flow",b.flowing);b.flowing&&null!==a.read(););}function B(a,b){if(0===b.length)return null;if(b.objectMode)var f=b.buffer.shift();else if(!a||a>=b.length)f=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear();else{f=b.buffer;b=b.decoder;if(a<
f.head.data.length)b=f.head.data.slice(0,a),f.head.data=f.head.data.slice(a);else{if(a===f.head.data.length)f=f.shift();else if(b){b=f.head;var g=1,c=b.data;for(a-=c.length;b=b.next;){var d=b.data,k=a>d.length?d.length:a;c=k===d.length?c+d:c+d.slice(0,a);a-=k;if(0===a){k===d.length?(++g,f.head=b.next?b.next:f.tail=null):(f.head=b,b.data=d.slice(k));break}++g}f.length-=g;f=c}else{b=J.allocUnsafe(a);g=f.head;c=1;g.data.copy(b);for(a-=g.data.length;g=g.next;){d=g.data;k=a>d.length?d.length:a;d.copy(b,
b.length-a,0,k);a-=k;if(0===a){k===d.length?(++c,f.head=g.next?g.next:f.tail=null):(f.head=g,g.data=d.slice(k));break}++c}f.length-=c;f=b}b=f}f=b}return f}function K(a){var b=a._readableState;if(0<b.length)throw Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,t.nextTick(G,b,a))}function G(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function m(a,b){for(var f=0,g=a.length;f<g;f++)if(a[f]===b)return f;return-1}var t=c("process-nextick-args");
n.exports=h;var d=c("isarray"),q;h.ReadableState=u;c("events");var I=c("./internal/streams/stream"),J=c("safe-buffer").Buffer,L=e.Uint8Array||function(){};e=Object.create(c("core-util-is"));e.inherits=c("inherits");var H=c("util"),E=void 0;E=H&&H.debuglog?H.debuglog("stream"):function(){};var N=c("./internal/streams/BufferList");H=c("./internal/streams/destroy");var k;e.inherits(h,I);var r=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0===
this._readableState?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}});h.prototype.destroy=H.destroy;h.prototype._undestroy=H.undestroy;h.prototype._destroy=function(a,b){this.push(null);b(a)};h.prototype.push=function(a,b){var f=this._readableState;if(f.objectMode)var g=!0;else"string"===typeof a&&(b=b||f.defaultEncoding,b!==f.encoding&&(a=J.from(a,b),b=""),g=!0);return z(this,a,b,!1,g)};h.prototype.unshift=function(a){return z(this,a,null,
!0,!1)};h.prototype.isPaused=function(){return!1===this._readableState.flowing};h.prototype.setEncoding=function(a){k||(k=c("string_decoder/").StringDecoder);this._readableState.decoder=new k(a);this._readableState.encoding=a;return this};h.prototype.read=function(a){E("read",a);a=parseInt(a,10);var b=this._readableState,c=a;0!==a&&(b.emittedReadable=!1);if(0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return E("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?K(this):w(this),
null;a=x(a,b);if(0===a&&b.ended)return 0===b.length&&K(this),null;var g=b.needReadable;E("need readable",g);if(0===b.length||b.length-a<b.highWaterMark)g=!0,E("length less than watermark",g);b.ended||b.reading?E("reading or ended",!1):g&&(E("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=x(c,b)));g=0<a?B(a,b):null;null===g?(b.needReadable=!0,a=0):b.length-=a;0===b.length&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&K(this));
null!==g&&this.emit("data",g);return g};h.prototype._read=function(a){this.emit("error",Error("_read() is not implemented"))};h.prototype.pipe=function(a,f){function c(b,f){E("onunpipe");b===I&&f&&!1===f.hasUnpiped&&(f.hasUnpiped=!0,E("cleanup"),a.removeListener("close",q),a.removeListener("finish",x),a.removeListener("drain",h),a.removeListener("error",k),a.removeListener("unpipe",c),I.removeListener("end",g),I.removeListener("end",e),I.removeListener("data",d),u=!0,!v.awaitDrain||a._writableState&&
!a._writableState.needDrain||h())}function g(){E("onend");a.end()}function d(b){E("ondata");R=!1;!1!==a.write(b)||R||((1===v.pipesCount&&v.pipes===a||1<v.pipesCount&&-1!==m(v.pipes,a))&&!u&&(E("false write response, pause",I._readableState.awaitDrain),I._readableState.awaitDrain++,R=!0),I.pause())}function k(b){E("onerror",b);e();a.removeListener("error",k);0===a.listeners("error").length&&a.emit("error",b)}function q(){a.removeListener("finish",x);e()}function x(){E("onfinish");a.removeListener("close",
q);e()}function e(){E("unpipe");I.unpipe(a)}var I=this,v=this._readableState;switch(v.pipesCount){case 0:v.pipes=a;break;case 1:v.pipes=[v.pipes,a];break;default:v.pipes.push(a)}v.pipesCount+=1;E("pipe count=%d opts=%j",v.pipesCount,f);f=f&&!1===f.end||a===b.stdout||a===b.stderr?e:g;if(v.endEmitted)t.nextTick(f);else I.once("end",f);a.on("unpipe",c);var h=p(I);a.on("drain",h);var u=!1,R=!1;I.on("data",d);l(a,"error",k);a.once("close",q);a.once("finish",x);a.emit("pipe",I);v.flowing||(E("pipe resume"),
I.resume());return a};h.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this,c);return this}if(!a){a=b.pipes;var d=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<d;b++)a[b].emit("unpipe",this,c);return this}d=m(b.pipes,a);if(-1===d)return this;b.pipes.splice(d,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=
b.pipes[0]);a.emit("unpipe",this,c);return this};h.prototype.on=function(a,b){b=I.prototype.on.call(this,a,b);"data"===a?!1!==this._readableState.flowing&&this.resume():"readable"===a&&(a=this._readableState,a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&w(this):t.nextTick(C,this)));return b};h.prototype.addListener=h.prototype.on;h.prototype.resume=function(){var a=this._readableState;a.flowing||(E("resume"),a.flowing=!0,a.resumeScheduled||
(a.resumeScheduled=!0,t.nextTick(F,this,a)));return this};h.prototype.pause=function(){E("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};h.prototype.wrap=function(a){var b=this,c=this._readableState,d=!1;a.on("end",function(){E("wrapped end");if(c.decoder&&!c.ended){var a=c.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(f){E("wrapped data");c.decoder&&(f=c.decoder.write(f));
c.objectMode&&(null===f||void 0===f)||!(c.objectMode||f&&f.length)||b.push(f)||(d=!0,a.pause())});for(var g in a)void 0===this[g]&&"function"===typeof a[g]&&(this[g]=function(b){return function(){return a[b].apply(a,arguments)}}(g));for(g=0;g<r.length;g++)a.on(r[g],this.emit.bind(this,r[g]));this._read=function(b){E("wrapped _read",b);d&&(d=!1,a.resume())};return this};Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});
h._fromList=B}).call(this,c("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./_stream_duplex":13,"./internal/streams/BufferList":18,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,events:5,inherits:7,isarray:9,"process-nextick-args":10,"safe-buffer":21,"string_decoder/":22,util:2}],16:[function(c,n,h){function b(b,a){var c=this._transformState;c.transforming=!1;var l=c.writecb;if(!l)return this.emit("error",
Error("write callback called multiple times"));c.writechunk=null;c.writecb=null;null!=a&&this.push(a);l(b);b=this._readableState;b.reading=!1;(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function e(c){if(!(this instanceof e))return new e(c);A.call(this,c);this._transformState={afterTransform:b.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;c&&("function"===typeof c.transform&&
(this._transform=c.transform),"function"===typeof c.flush&&(this._flush=c.flush));this.on("prefinish",l)}function l(){var b=this;"function"===typeof this._flush?this._flush(function(a,c){u(b,a,c)}):u(this,null,null)}function u(b,a,c){if(a)return b.emit("error",a);null!=c&&b.push(c);if(b._writableState.length)throw Error("Calling transform done when ws.length != 0");if(b._transformState.transforming)throw Error("Calling transform done when still transforming");return b.push(null)}n.exports=e;var A=
c("./_stream_duplex");n=Object.create(c("core-util-is"));n.inherits=c("inherits");n.inherits(e,A);e.prototype.push=function(b,a){this._transformState.needTransform=!1;return A.prototype.push.call(this,b,a)};e.prototype._transform=function(b,a,c){throw Error("_transform() is not implemented");};e.prototype._write=function(b,a,c){var l=this._transformState;l.writecb=c;l.writechunk=b;l.writeencoding=a;l.transforming||(b=this._readableState,(l.needTransform||b.needReadable||b.length<b.highWaterMark)&&
this._read(b.highWaterMark))};e.prototype._read=function(b){b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0};e.prototype._destroy=function(b,a){var c=this;A.prototype._destroy.call(this,b,function(b){a(b);c.emit("close")})}},{"./_stream_duplex":13,"core-util-is":4,inherits:7}],17:[function(c,n,h){(function(b,e,l){function h(a){var b=this;this.entry=this.next=null;this.finish=
function(){var c=b.entry;for(b.entry=null;c;){var d=c.callback;a.pendingcb--;d(void 0);c=c.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}function A(){}function z(a,b){B=B||c("./_stream_duplex");a=a||{};var d=b instanceof B;this.objectMode=!!a.objectMode;d&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var q=a.highWaterMark,m=a.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=q||0===q?q:d&&(m||0===m)?m:l;this.highWaterMark=Math.floor(this.highWaterMark);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var c=b._writableState,d=c.sync,g=c.writecb;c.writing=!1;c.writecb=null;c.length-=c.writelen;c.writelen=0;a?(--c.pendingcb,d?(F.nextTick(g,a),F.nextTick(C,b,c),b._writableState.errorEmitted=!0,b.emit("error",a)):(g(a),b._writableState.errorEmitted=
!0,b.emit("error",a),C(b,c))):((a=D(c))||c.corked||c.bufferProcessing||!c.bufferedRequest||v(b,c),d?y(w,b,c,a,g):w(b,c,a,g))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new h(this)}function a(b){B=B||c("./_stream_duplex");if(!(d.call(a,this)||this instanceof B))return new a(b);this._writableState=new z(b,this);this.writable=!0;b&&("function"===typeof b.write&&
(this._write=b.write),"function"===typeof b.writev&&(this._writev=b.writev),"function"===typeof b.destroy&&(this._destroy=b.destroy),"function"===typeof b.final&&(this._final=b.final));G.call(this)}function x(a,b,c,d,m,l,t){b.writelen=d;b.writecb=t;b.writing=!0;b.sync=!0;c?a._writev(m,b.onwrite):a._write(m,l,b.onwrite);b.sync=!1}function w(a,b,c,d){!c&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;d();C(a,b)}function v(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;
if(a._writev&&c&&c.next){var d=Array(b.bufferedRequestCount),m=b.corkedRequestsFree;m.entry=c;for(var q=0,l=!0;c;)d[q]=c,c.isBuf||(l=!1),c=c.next,q+=1;d.allBuffers=l;x(a,b,!0,b.length,d,"",m.finish);b.pendingcb++;b.lastBufferedRequest=null;m.next?(b.corkedRequestsFree=m.next,m.next=null):b.corkedRequestsFree=new h(b);b.bufferedRequestCount=0}else{for(;c&&(d=c.chunk,x(a,b,!1,b.objectMode?1:d.length,d,c.encoding,c.callback),c=c.next,b.bufferedRequestCount--,!b.writing););null===c&&(b.lastBufferedRequest=
null)}b.bufferedRequest=c;b.bufferProcessing=!1}function D(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function p(a,b){a._final(function(c){b.pendingcb--;c&&a.emit("error",c);b.prefinished=!0;a.emit("prefinish");C(a,b)})}function C(a,b){var c=D(b);c&&(b.prefinished||b.finalCalled||("function"===typeof a._final?(b.pendingcb++,b.finalCalled=!0,F.nextTick(p,a,b)):(b.prefinished=!0,a.emit("prefinish"))),0===b.pendingcb&&(b.finished=!0,a.emit("finish")));return c}
var F=c("process-nextick-args");n.exports=a;var y=!b.browser&&-1<["v0.10","v0.9."].indexOf(b.version.slice(0,5))?l:F.nextTick,B;a.WritableState=z;b=Object.create(c("core-util-is"));b.inherits=c("inherits");var K={deprecate:c("util-deprecate")},G=c("./internal/streams/stream"),m=c("safe-buffer").Buffer,t=e.Uint8Array||function(){};e=c("./internal/streams/destroy");b.inherits(a,G);z.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(z.prototype,
"buffer",{get:K.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(q){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var d=Function.prototype[Symbol.hasInstance];Object.defineProperty(a,Symbol.hasInstance,{value:function(b){return d.call(this,b)?!0:this!==a?!1:b&&b._writableState instanceof z}})}else d=function(a){return a instanceof this};
a.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};a.prototype.write=function(a,b,c){var d=this._writableState,l=!1,q;if(q=!d.objectMode)q=a,q=m.isBuffer(q)||q instanceof t;q&&!m.isBuffer(a)&&(a=m.from(a));"function"===typeof b&&(c=b,b=null);q?b="buffer":b||(b=d.defaultEncoding);"function"!==typeof c&&(c=A);if(d.ended)d=c,c=Error("write after end"),this.emit("error",c),F.nextTick(d,c);else{var v;if(!(v=q)){v=a;var k=c,e=!0,g=!1;null===v?g=new TypeError("May not write null values to stream"):
"string"===typeof v||void 0===v||d.objectMode||(g=new TypeError("Invalid non-string/buffer chunk"));g&&(this.emit("error",g),F.nextTick(k,g),e=!1);v=e}v&&(d.pendingcb++,l=q,l||(q=a,d.objectMode||!1===d.decodeStrings||"string"!==typeof q||(q=m.from(q,b)),a!==q&&(l=!0,b="buffer",a=q)),v=d.objectMode?1:a.length,d.length+=v,q=d.length<d.highWaterMark,q||(d.needDrain=!0),d.writing||d.corked?(v=d.lastBufferedRequest,d.lastBufferedRequest={chunk:a,encoding:b,isBuf:l,callback:c,next:null},v?v.next=d.lastBufferedRequest:
d.bufferedRequest=d.lastBufferedRequest,d.bufferedRequestCount+=1):x(this,d,!1,v,a,b,c),l=q)}return l};a.prototype.cork=function(){this._writableState.corked++};a.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||v(this,a))};a.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});a.prototype._write=function(a,b,c){c(Error("_write() is not implemented"))};a.prototype._writev=null;a.prototype.end=function(a,b,c){var d=this._writableState;"function"===typeof a?(c=a,b=a=null):"function"===typeof b&&(c=b,b=null);null!==a&&void 0!==a&&
this.write(a,b);d.corked&&(d.corked=1,this.uncork());if(!d.ending&&!d.finished){a=c;d.ending=!0;C(this,d);if(a)if(d.finished)F.nextTick(a);else this.once("finish",a);d.ended=!0;this.writable=!1}};Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}});a.prototype.destroy=e.destroy;a.prototype._undestroy=e.undestroy;a.prototype._destroy=function(a,b){this.end();
b(a)}}).call(this,c("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},c("timers").setImmediate)},{"./_stream_duplex":13,"./internal/streams/destroy":19,"./internal/streams/stream":20,_process:11,"core-util-is":4,inherits:7,"process-nextick-args":10,"safe-buffer":21,timers:31,"util-deprecate":32}],18:[function(c,n,h){var b=c("safe-buffer").Buffer,e=c("util");n.exports=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.tail=this.head=null;this.length=0}c.prototype.push=function(b){b={data:b,next:null};0<this.length?this.tail.next=b:this.head=b;this.tail=b;++this.length};c.prototype.unshift=function(b){b={data:b,next:this.head};0===this.length&&(this.tail=b);this.head=b;++this.length};c.prototype.shift=function(){if(0!==this.length){var b=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return b}};c.prototype.clear=function(){this.head=this.tail=null;this.length=0};c.prototype.join=
function(b){if(0===this.length)return"";for(var c=this.head,l=""+c.data;c=c.next;)l+=b+c.data;return l};c.prototype.concat=function(c){if(0===this.length)return b.alloc(0);if(1===this.length)return this.head.data;c=b.allocUnsafe(c>>>0);for(var l=this.head,e=0;l;)l.data.copy(c,e),e+=l.data.length,l=l.next;return c};return c}();e&&e.inspect&&e.inspect.custom&&(n.exports.prototype[e.inspect.custom]=function(){var b=e.inspect({length:this.length});return this.constructor.name+" "+b})},{"safe-buffer":21,
util:2}],19:[function(c,n,h){function b(b,c){b.emit("error",c)}var e=c("process-nextick-args");n.exports={destroy:function(c,h){var l=this,u=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||u)return h?h(c):!c||this._writableState&&this._writableState.errorEmitted||e.nextTick(b,this,c),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(c||null,function(a){!h&&a?(e.nextTick(b,
l,a),l._writableState&&(l._writableState.errorEmitted=!0)):h&&h(a)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":10}],20:[function(c,n,h){n.exports=c("events").EventEmitter},
{events:5}],21:[function(c,n,h){function b(b,c){for(var a in b)c[a]=b[a]}function e(b,c,a){return u(b,c,a)}var l=c("buffer"),u=l.Buffer;u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?n.exports=l:(b(l,h),h.Buffer=e);b(u,e);e.from=function(b,c,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");return u(b,c,a)};e.alloc=function(b,c,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=u(b);void 0!==c?"string"===typeof a?b.fill(c,a):b.fill(c):b.fill(0);
return b};e.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return u(b)};e.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return l.SlowBuffer(b)}},{buffer:3}],22:[function(c,n,h){function b(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;
default:if(b)return;a=(""+a).toLowerCase();b=!0}}function e(c){var l=b(c);if("string"!==typeof l&&(p.isEncoding===C||!C(c)))throw Error("Unknown encoding: "+c);this.encoding=l||c;switch(this.encoding){case "utf16le":this.text=z;this.end=a;c=4;break;case "utf8":this.fillLast=A;c=4;break;case "base64":this.text=x;this.end=w;c=3;break;default:this.write=v;this.end=D;return}this.lastTotal=this.lastNeed=0;this.lastChar=p.allocUnsafe(c)}function l(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===
a>>6?-1:-2}function u(a,b,c){var v=b.length-1;if(v<c)return 0;var e=l(b[v]);if(0<=e)return 0<e&&(a.lastNeed=e-1),e;if(--v<c||-2===e)return 0;e=l(b[v]);if(0<=e)return 0<e&&(a.lastNeed=e-2),e;if(--v<c||-2===e)return 0;e=l(b[v]);return 0<=e?(0<e&&(2===e?e=0:a.lastNeed=e-3),e):0}function A(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&
128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function z(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,
-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function a(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):a}function x(a,b){var c=(a.length-b)%3;if(0===c)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-
c)}function w(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function v(a){return a.toString(this.encoding)}function D(a){return a&&a.length?this.write(a):""}var p=c("safe-buffer").Buffer,C=p.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};h.StringDecoder=
e;e.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};e.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};e.prototype.text=function(a,b){var c=u(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",
b,c)};e.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length}},{"safe-buffer":21}],23:[function(c,n,h){n.exports=c("./readable").PassThrough},{"./readable":24}],24:[function(c,n,h){h=n.exports=c("./lib/_stream_readable.js");h.Stream=h;h.Readable=h;h.Writable=c("./lib/_stream_writable.js");
h.Duplex=c("./lib/_stream_duplex.js");h.Transform=c("./lib/_stream_transform.js");h.PassThrough=c("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":13,"./lib/_stream_passthrough.js":14,"./lib/_stream_readable.js":15,"./lib/_stream_transform.js":16,"./lib/_stream_writable.js":17}],25:[function(c,n,h){n.exports=c("./readable").Transform},{"./readable":24}],26:[function(c,n,h){n.exports=c("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":17}],27:[function(c,n,h){function b(b,c){for(var a in b)c[a]=
b[a]}function e(b,c,a){return u(b,c,a)}var l=c("buffer"),u=l.Buffer;u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?n.exports=l:(b(l,h),h.Buffer=e);e.prototype=Object.create(u.prototype);b(u,e);e.from=function(b,c,a){if("number"===typeof b)throw new TypeError("Argument must not be a number");return u(b,c,a)};e.alloc=function(b,c,a){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=u(b);void 0!==c?"string"===typeof a?b.fill(c,a):b.fill(c):b.fill(0);return b};e.allocUnsafe=
function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return u(b)};e.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return l.SlowBuffer(b)}},{buffer:3}],28:[function(c,n,h){(function(b){(function(e){function l(a,b){if(!(this instanceof l))return new l(a,b);for(var c=0,d=t.length;c<d;c++)this[t[c]]="";this.q=this.c="";this.bufferCheckPosition=e.MAX_BUFFER_LENGTH;this.opt=b||{};this.opt.lowercase=this.opt.lowercase||
this.opt.lowercasetags;this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase";this.tags=[];this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.strict=!!a;this.noscript=!(!a&&!this.opt.noscript);this.state=f.BEGIN;this.ENTITIES=(this.strictEntities=this.opt.strictEntities)?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES);this.attribList=[];this.opt.xmlns&&(this.ns=Object.create(E));if(this.trackPosition=!1!==this.opt.position)this.position=this.line=this.column=
0;this.onready&&this.onready(void 0)}function h(a,b){if(!(this instanceof h))return new h(a,b);d.apply(this);this._parser=new l(a,b);this.readable=this.writable=!0;var c=this;this._parser.onend=function(){c.emit("end")};this._parser.onerror=function(a){c.emit("error",a);c._parser.error=null};this._decoder=null;q.forEach(function(a){Object.defineProperty(c,"on"+a,{get:function(){return c._parser["on"+a]},set:function(b){if(!b)return c.removeAllListeners(a),c._parser["on"+a]=b;c.on(a,b)},enumerable:!0,
configurable:!1})})}function n(a){return" "===a||"\n"===a||"\r"===a||"\t"===a}function z(a){return'"'===a||"'"===a}function a(a,b,c){a.textNode&&x(a);a[b]&&a[b](c)}function x(a){a.textNode=w(a.opt,a.textNode);a.textNode&&a.ontext&&a.ontext(a.textNode);a.textNode=""}function w(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function v(a,b){x(a);a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=Error(b);a.error=b;a.onerror&&a.onerror(b);return a}
function D(a){a.sawRoot&&!a.closedRoot&&p(a,"Unclosed root tag");a.state!==f.BEGIN&&a.state!==f.BEGIN_WHITESPACE&&a.state!==f.TEXT&&v(a,"Unexpected end");x(a);a.c="";a.closed=!0;a.onend&&a.onend(void 0);l.call(a,a.strict,a.opt);return a}function p(a,b){if("object"!==typeof a||!(a instanceof l))throw Error("bad call to strictFail");a.strict&&v(a,b)}function C(a,b){var c=0>a.indexOf(":")?["",a]:a.split(":"),d=c[0];c=c[1];b&&"xmlns"===a&&(d="xmlns",c="");return{prefix:d,local:c}}function F(b){b.strict||
(b.attribName=b.attribName[b.looseCase]());if(-1===b.attribList.indexOf(b.attribName)&&!b.tag.attributes.hasOwnProperty(b.attribName))if(b.opt.xmlns){var c=C(b.attribName,!0),d=c.local;if("xmlns"===c.prefix)if("xml"===d&&b.attribValue!==L)p(b,"xml: prefix must be bound to "+L+"\nActual: "+b.attribValue);else if("xmlns"===d&&b.attribValue!==H)p(b,"xmlns: prefix must be bound to "+H+"\nActual: "+b.attribValue);else{c=b.tag;var f=b.tags[b.tags.length-1]||b;c.ns===f.ns&&(c.ns=Object.create(f.ns));c.ns[d]=
b.attribValue}b.attribList.push([b.attribName,b.attribValue])}else b.tag.attributes[b.attribName]=b.attribValue,a(b,"onattribute",{name:b.attribName,value:b.attribValue});b.attribName=b.attribValue=""}function y(b,c){if(b.opt.xmlns){var d=b.tag,g=C(b.tagName);d.prefix=g.prefix;d.local=g.local;d.uri=d.ns[g.prefix]||"";d.prefix&&!d.uri&&(p(b,"Unbound namespace prefix: "+JSON.stringify(b.tagName)),d.uri=g.prefix);g=b.tags[b.tags.length-1]||b;d.ns&&g.ns!==d.ns&&Object.keys(d.ns).forEach(function(c){a(b,
"onopennamespace",{prefix:c,uri:d.ns[c]})});g=0;for(var k=b.attribList.length;g<k;g++){var m=b.attribList[g],l=m[0],q=m[1],t=C(l,!0);m=t.prefix;var e=""===m?"":d.ns[m]||"";q={name:l,value:q,prefix:m,local:t.local,uri:e};m&&"xmlns"!==m&&!e&&(p(b,"Unbound namespace prefix: "+JSON.stringify(m)),q.uri=m);b.tag.attributes[l]=q;a(b,"onattribute",q)}b.attribList.length=0}b.tag.isSelfClosing=!!c;b.sawRoot=!0;b.tags.push(b.tag);a(b,"onopentag",b.tag);c||(b.noscript||"script"!==b.tagName.toLowerCase()?b.state=
f.TEXT:b.state=f.SCRIPT,b.tag=null,b.tagName="");b.attribName=b.attribValue="";b.attribList.length=0}function B(b){if(b.tagName){if(b.script){if("script"!==b.tagName){b.script+="</"+b.tagName+">";b.tagName="";b.state=f.SCRIPT;return}a(b,"onscript",b.script);b.script=""}var c=b.tags.length,d=b.tagName;b.strict||(d=d[b.looseCase]());for(var g=d;c--;)if(b.tags[c].name!==g)p(b,"Unexpected close tag");else break;if(0>c)p(b,"Unmatched closing tag: "+b.tagName),b.textNode+="</"+b.tagName+">";else{b.tagName=
d;for(d=b.tags.length;d-- >c;){var k=b.tag=b.tags.pop();b.tagName=b.tag.name;a(b,"onclosetag",b.tagName);for(var m in k.ns);g=b.tags[b.tags.length-1]||b;b.opt.xmlns&&k.ns!==g.ns&&Object.keys(k.ns).forEach(function(c){a(b,"onclosenamespace",{prefix:c,uri:k.ns[c]})})}0===c&&(b.closedRoot=!0);b.tagName=b.attribValue=b.attribName="";b.attribList.length=0}}else p(b,"Weird empty close tag."),b.textNode+="</>";b.state=f.TEXT}function K(a){var b=a.entity,c=b.toLowerCase(),d="";if(a.ENTITIES[b])return a.ENTITIES[b];
if(a.ENTITIES[c])return a.ENTITIES[c];b=c;if("#"===b.charAt(0))if("x"===b.charAt(1)){b=b.slice(2);var f=parseInt(b,16);d=f.toString(16)}else b=b.slice(1),f=parseInt(b,10),d=f.toString(10);b=b.replace(/^0+/,"");return isNaN(f)||d.toLowerCase()!==b?(p(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(f)}function G(a,b){"<"===b?(a.state=f.OPEN_WAKA,a.startTagPosition=a.position):n(b)||(p(a,"Non-whitespace before first tag."),a.textNode=b,a.state=f.TEXT)}function m(a,b){var c="";b<
a.length&&(c=a.charAt(b));return c}e.parser=function(a,b){return new l(a,b)};e.SAXParser=l;e.SAXStream=h;e.createStream=function(a,b){return new h(a,b)};e.MAX_BUFFER_LENGTH=65536;var t="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" ");e.EVENTS="text processinginstruction sgmldeclaration doctype comment opentagstart attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" ");
Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});Object.keys||(Object.keys=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b});l.prototype={end:function(){D(this)},write:function(b){if(this.error)throw this.error;if(this.closed)return v(this,"Cannot write after close. Assign an onready handler.");if(null===b)return D(this);"object"===typeof b&&(b=b.toString());for(var c=0,d;;){this.c=d=m(b,c++);if(!d)break;this.trackPosition&&(this.position++,
"\n"===d?(this.line++,this.column=0):this.column++);switch(this.state){case f.BEGIN:this.state=f.BEGIN_WHITESPACE;if("\ufeff"===d)continue;G(this,d);continue;case f.BEGIN_WHITESPACE:G(this,d);continue;case f.TEXT:if(this.sawRoot&&!this.closedRoot){for(var l=c-1;d&&"<"!==d&&"&"!==d;)(d=m(b,c++))&&this.trackPosition&&(this.position++,"\n"===d?(this.line++,this.column=0):this.column++);this.textNode+=b.substring(l,c-1)}"<"!==d||this.sawRoot&&this.closedRoot&&!this.strict?(n(d)||this.sawRoot&&!this.closedRoot||
p(this,"Text data outside of root node."),"&"===d?this.state=f.TEXT_ENTITY:this.textNode+=d):(this.state=f.OPEN_WAKA,this.startTagPosition=this.position);continue;case f.SCRIPT:"<"===d?this.state=f.SCRIPT_ENDING:this.script+=d;continue;case f.SCRIPT_ENDING:"/"===d?this.state=f.CLOSE_TAG:(this.script+="<"+d,this.state=f.SCRIPT);continue;case f.OPEN_WAKA:"!"===d?(this.state=f.SGML_DECL,this.sgmlDecl=""):n(d)||(N.test(d)?(this.state=f.OPEN_TAG,this.tagName=d):"/"===d?(this.state=f.CLOSE_TAG,this.tagName=
""):"?"===d?(this.state=f.PROC_INST,this.procInstName=this.procInstBody=""):(p(this,"Unencoded <"),this.startTagPosition+1<this.position&&(d=Array(this.position-this.startTagPosition).join(" ")+d),this.textNode+="<"+d,this.state=f.TEXT));continue;case f.SGML_DECL:(this.sgmlDecl+d).toUpperCase()===I?(a(this,"onopencdata"),this.state=f.CDATA,this.cdata=this.sgmlDecl=""):"--"===this.sgmlDecl+d?(this.state=f.COMMENT,this.sgmlDecl=this.comment=""):(this.sgmlDecl+d).toUpperCase()===J?(this.state=f.DOCTYPE,
(this.doctype||this.sawRoot)&&p(this,"Inappropriately located doctype declaration"),this.sgmlDecl=this.doctype=""):">"===d?(a(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=f.TEXT):(z(d)&&(this.state=f.SGML_DECL_QUOTED),this.sgmlDecl+=d);continue;case f.SGML_DECL_QUOTED:d===this.q&&(this.state=f.SGML_DECL,this.q="");this.sgmlDecl+=d;continue;case f.DOCTYPE:">"===d?(this.state=f.TEXT,a(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=d,"["===d?this.state=f.DOCTYPE_DTD:
z(d)&&(this.state=f.DOCTYPE_QUOTED,this.q=d));continue;case f.DOCTYPE_QUOTED:this.doctype+=d;d===this.q&&(this.q="",this.state=f.DOCTYPE);continue;case f.DOCTYPE_DTD:this.doctype+=d;"]"===d?this.state=f.DOCTYPE:z(d)&&(this.state=f.DOCTYPE_DTD_QUOTED,this.q=d);continue;case f.DOCTYPE_DTD_QUOTED:this.doctype+=d;d===this.q&&(this.state=f.DOCTYPE_DTD,this.q="");continue;case f.COMMENT:"-"===d?this.state=f.COMMENT_ENDING:this.comment+=d;continue;case f.COMMENT_ENDING:"-"===d?(this.state=f.COMMENT_ENDED,
(this.comment=w(this.opt,this.comment))&&a(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+d,this.state=f.COMMENT);continue;case f.COMMENT_ENDED:">"!==d?(p(this,"Malformed comment"),this.comment+="--"+d,this.state=f.COMMENT):this.state=f.TEXT;continue;case f.CDATA:"]"===d?this.state=f.CDATA_ENDING:this.cdata+=d;continue;case f.CDATA_ENDING:"]"===d?this.state=f.CDATA_ENDING_2:(this.cdata+="]"+d,this.state=f.CDATA);continue;case f.CDATA_ENDING_2:">"===d?(this.cdata&&a(this,"oncdata",
this.cdata),a(this,"onclosecdata"),this.cdata="",this.state=f.TEXT):"]"===d?this.cdata+="]":(this.cdata+="]]"+d,this.state=f.CDATA);continue;case f.PROC_INST:"?"===d?this.state=f.PROC_INST_ENDING:n(d)?this.state=f.PROC_INST_BODY:this.procInstName+=d;continue;case f.PROC_INST_BODY:if(!this.procInstBody&&n(d))continue;else"?"===d?this.state=f.PROC_INST_ENDING:this.procInstBody+=d;continue;case f.PROC_INST_ENDING:">"===d?(a(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),
this.procInstName=this.procInstBody="",this.state=f.TEXT):(this.procInstBody+="?"+d,this.state=f.PROC_INST_BODY);continue;case f.OPEN_TAG:if(k.test(d))this.tagName+=d;else{this.strict||(this.tagName=this.tagName[this.looseCase]());l=this.tags[this.tags.length-1]||this;var q=this.tag={name:this.tagName,attributes:{}};this.opt.xmlns&&(q.ns=l.ns);this.attribList.length=0;a(this,"onopentagstart",q);">"===d?y(this):"/"===d?this.state=f.OPEN_TAG_SLASH:(n(d)||p(this,"Invalid character in tag name"),this.state=
f.ATTRIB)}continue;case f.OPEN_TAG_SLASH:">"===d?(y(this,!0),B(this)):(p(this,"Forward-slash in opening tag not followed by >"),this.state=f.ATTRIB);continue;case f.ATTRIB:if(n(d))continue;else">"===d?y(this):"/"===d?this.state=f.OPEN_TAG_SLASH:N.test(d)?(this.attribName=d,this.attribValue="",this.state=f.ATTRIB_NAME):p(this,"Invalid attribute name");continue;case f.ATTRIB_NAME:"="===d?this.state=f.ATTRIB_VALUE:">"===d?(p(this,"Attribute without value"),this.attribValue=this.attribName,F(this),y(this)):
n(d)?this.state=f.ATTRIB_NAME_SAW_WHITE:k.test(d)?this.attribName+=d:p(this,"Invalid attribute name");continue;case f.ATTRIB_NAME_SAW_WHITE:if("="===d)this.state=f.ATTRIB_VALUE;else if(n(d))continue;else p(this,"Attribute without value"),this.attribValue=this.tag.attributes[this.attribName]="",a(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===d?y(this):N.test(d)?(this.attribName=d,this.state=f.ATTRIB_NAME):(p(this,"Invalid attribute name"),this.state=f.ATTRIB);continue;
case f.ATTRIB_VALUE:if(n(d))continue;else z(d)?(this.q=d,this.state=f.ATTRIB_VALUE_QUOTED):(p(this,"Unquoted attribute value"),this.state=f.ATTRIB_VALUE_UNQUOTED,this.attribValue=d);continue;case f.ATTRIB_VALUE_QUOTED:if(d!==this.q){"&"===d?this.state=f.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=d;continue}F(this);this.q="";this.state=f.ATTRIB_VALUE_CLOSED;continue;case f.ATTRIB_VALUE_CLOSED:n(d)?this.state=f.ATTRIB:">"===d?y(this):"/"===d?this.state=f.OPEN_TAG_SLASH:N.test(d)?(p(this,"No whitespace between attributes"),
this.attribName=d,this.attribValue="",this.state=f.ATTRIB_NAME):p(this,"Invalid attribute name");continue;case f.ATTRIB_VALUE_UNQUOTED:if(">"!==d&&!n(d)){"&"===d?this.state=f.ATTRIB_VALUE_ENTITY_U:this.attribValue+=d;continue}F(this);">"===d?y(this):this.state=f.ATTRIB;continue;case f.CLOSE_TAG:if(this.tagName)">"===d?B(this):k.test(d)?this.tagName+=d:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=f.SCRIPT):(n(d)||p(this,"Invalid tagname in closing tag"),this.state=f.CLOSE_TAG_SAW_WHITE);
else if(n(d))continue;else N.test(d)?this.tagName=d:this.script?(this.script+="</"+d,this.state=f.SCRIPT):p(this,"Invalid tagname in closing tag.");continue;case f.CLOSE_TAG_SAW_WHITE:if(n(d))continue;">"===d?B(this):p(this,"Invalid characters in closing tag");continue;case f.TEXT_ENTITY:case f.ATTRIB_VALUE_ENTITY_Q:case f.ATTRIB_VALUE_ENTITY_U:switch(this.state){case f.TEXT_ENTITY:var h=f.TEXT;var u="textNode";break;case f.ATTRIB_VALUE_ENTITY_Q:h=f.ATTRIB_VALUE_QUOTED;u="attribValue";break;case f.ATTRIB_VALUE_ENTITY_U:h=
f.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===d?(this[u]+=K(this),this.entity="",this.state=h):(this.entity.length?g:r).test(d)?this.entity+=d:(p(this,"Invalid character in entity name"),this[u]+="&"+this.entity+d,this.entity="",this.state=h);continue;default:throw Error(this,"Unknown state: "+this.state);}}if(this.position>=this.bufferCheckPosition){b=Math.max(e.MAX_BUFFER_LENGTH,10);d=c=0;for(h=t.length;d<h;d++){u=this[t[d]].length;if(u>b)switch(t[d]){case "textNode":x(this);break;case "cdata":a(this,
"oncdata",this.cdata);this.cdata="";break;case "script":a(this,"onscript",this.script);this.script="";break;default:v(this,"Max buffer length exceeded: "+t[d])}c=Math.max(c,u)}this.bufferCheckPosition=e.MAX_BUFFER_LENGTH-c+this.position}return this},resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){x(this);""!==this.cdata&&(a(this,"oncdata",this.cdata),this.cdata="");""!==this.script&&(a(this,"onscript",this.script),this.script="")}};try{var d=
c("stream").Stream}catch(Q){d=function(){}}var q=e.EVENTS.filter(function(a){return"error"!==a&&"end"!==a});h.prototype=Object.create(d.prototype,{constructor:{value:h}});h.prototype.write=function(a){"function"===typeof b&&"function"===typeof b.isBuffer&&b.isBuffer(a)&&(this._decoder||(this._decoder=new (c("string_decoder").StringDecoder)("utf8")),a=this._decoder.write(a));this._parser.write(a.toString());this.emit("data",a);return!0};h.prototype.end=function(a){a&&a.length&&this.write(a);this._parser.end();
return!0};h.prototype.on=function(a,b){var c=this;c._parser["on"+a]||-1===q.indexOf(a)||(c._parser["on"+a]=function(){var b=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a);c.emit.apply(c,b)});return d.prototype.on.call(c,a,b)};var I="[CDATA[",J="DOCTYPE",L="http://www.w3.org/XML/1998/namespace",H="http://www.w3.org/2000/xmlns/",E={xml:L,xmlns:H},N=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
k=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,r=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,
f=0;e.STATE={BEGIN:f++,BEGIN_WHITESPACE:f++,TEXT:f++,TEXT_ENTITY:f++,OPEN_WAKA:f++,SGML_DECL:f++,SGML_DECL_QUOTED:f++,DOCTYPE:f++,DOCTYPE_QUOTED:f++,DOCTYPE_DTD:f++,DOCTYPE_DTD_QUOTED:f++,COMMENT_STARTING:f++,COMMENT:f++,COMMENT_ENDING:f++,COMMENT_ENDED:f++,CDATA:f++,CDATA_ENDING:f++,CDATA_ENDING_2:f++,PROC_INST:f++,PROC_INST_BODY:f++,PROC_INST_ENDING:f++,OPEN_TAG:f++,OPEN_TAG_SLASH:f++,ATTRIB:f++,ATTRIB_NAME:f++,ATTRIB_NAME_SAW_WHITE:f++,ATTRIB_VALUE:f++,ATTRIB_VALUE_QUOTED:f++,ATTRIB_VALUE_CLOSED:f++,
ATTRIB_VALUE_UNQUOTED:f++,ATTRIB_VALUE_ENTITY_Q:f++,ATTRIB_VALUE_ENTITY_U:f++,CLOSE_TAG:f++,CLOSE_TAG_SAW_WHITE:f++,SCRIPT:f++,SCRIPT_ENDING:f++};e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,
THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,
laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,
Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,
lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,
ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(e.ENTITIES).forEach(function(a){var b=e.ENTITIES[a];b="number"===typeof b?String.fromCharCode(b):b;e.ENTITIES[a]=b});for(var S in e.STATE)e.STATE[e.STATE[S]]=S;f=e.STATE;String.fromCodePoint||function(){var a=String.fromCharCode,b=Math.floor,c=function(){var c=[],d=-1,
f=arguments.length;if(!f)return"";for(var g="";++d<f;){var k=Number(arguments[d]);if(!isFinite(k)||0>k||1114111<k||b(k)!==k)throw RangeError("Invalid code point: "+k);if(65535>=k)c.push(k);else{k-=65536;var m=(k>>10)+55296;k=k%1024+56320;c.push(m,k)}if(d+1===f||16384<c.length)g+=a.apply(null,c),c.length=0}return g};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:c,configurable:!0,writable:!0}):String.fromCodePoint=c}()})("undefined"===typeof h?this.sax={}:h)}).call(this,
c("buffer").Buffer)},{buffer:3,stream:29,string_decoder:30}],29:[function(c,n,h){function b(){e.call(this)}n.exports=b;var e=c("events").EventEmitter;c("inherits")(b,e);b.Readable=c("readable-stream/readable.js");b.Writable=c("readable-stream/writable.js");b.Duplex=c("readable-stream/duplex.js");b.Transform=c("readable-stream/transform.js");b.PassThrough=c("readable-stream/passthrough.js");b.Stream=b;b.prototype.pipe=function(b,c){function l(a){b.writable&&!1===b.write(a)&&u.pause&&u.pause()}function h(){u.readable&&
u.resume&&u.resume()}function a(){p||(p=!0,b.end())}function x(){p||(p=!0,"function"===typeof b.destroy&&b.destroy())}function w(a){v();if(0===e.listenerCount(this,"error"))throw a;}function v(){u.removeListener("data",l);b.removeListener("drain",h);u.removeListener("end",a);u.removeListener("close",x);u.removeListener("error",w);b.removeListener("error",w);u.removeListener("end",v);u.removeListener("close",v);b.removeListener("close",v)}var u=this;u.on("data",l);b.on("drain",h);b._isStdio||c&&!1===
c.end||(u.on("end",a),u.on("close",x));var p=!1;u.on("error",w);b.on("error",w);u.on("end",v);u.on("close",v);b.on("close",v);b.emit("pipe",u);return b}},{events:5,inherits:7,"readable-stream/duplex.js":12,"readable-stream/passthrough.js":23,"readable-stream/readable.js":24,"readable-stream/transform.js":25,"readable-stream/writable.js":26}],30:[function(c,n,h){arguments[4][22][0].apply(h,arguments)},{dup:22,"safe-buffer":27}],31:[function(c,n,h){(function(b,e){function l(a,b){this._id=a;this._clearFn=
b}var u=c("process/browser.js").nextTick,n=Function.prototype.apply,z=Array.prototype.slice,a={},x=0;h.setTimeout=function(){return new l(n.call(setTimeout,window,arguments),clearTimeout)};h.setInterval=function(){return new l(n.call(setInterval,window,arguments),clearInterval)};h.clearTimeout=h.clearInterval=function(a){a.close()};l.prototype.unref=l.prototype.ref=function(){};l.prototype.close=function(){this._clearFn.call(window,this._id)};h.enroll=function(a,b){clearTimeout(a._idleTimeoutId);
a._idleTimeout=b};h.unenroll=function(a){clearTimeout(a._idleTimeoutId);a._idleTimeout=-1};h._unrefActive=h.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;0<=b&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))};h.setImmediate="function"===typeof b?b:function(b){var c=x++,l=2>arguments.length?!1:z.call(arguments,1);a[c]=!0;u(function(){a[c]&&(l?b.apply(null,l):b.call(null),h.clearImmediate(c))});return c};h.clearImmediate="function"===typeof e?e:function(b){delete a[b]}}).call(this,
c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":11,timers:31}],32:[function(c,n,h){(function(b){function c(c){try{if(!b.localStorage)return!1}catch(u){return!1}c=b.localStorage[c];return null==c?!1:"true"===String(c).toLowerCase()}n.exports=function(b,e){if(c("noDeprecation"))return b;var l=!1;return function(){if(!l){if(c("throwDeprecation"))throw Error(e);c("traceDeprecation")?console.trace(e):console.warn(e);l=!0}return b.apply(this,arguments)}}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],33:[function(c,n,h){(function(b,c,l,h,n){function e(a,b){var c=a.styleAttrs&&a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"];if("span"===a.kind)!c&&b&&(a.styleAttrs||(a.styleAttrs={}),a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"]=b);else if(c&&delete a.styleAttrs["http://www.w3.org/ns/ttml#styling backgroundColor"],a.contents)for(var d=0;d<a.contents.length;d++)e(a.contents[d],
c||b)}function a(b){if("contents"in b){var c="styleAttrs"in b?b.styleAttrs[h.byName.ruby.qname]:null;c="span"===b.kind&&("container"===c||"textContainer"===c||"baseContainer"===c);for(var d=b.contents.length-1;0<=d;d--)!c||"styleAttrs"in b.contents[d]&&h.byName.ruby.qname in b.contents[d].styleAttrs?a(b.contents[d]):delete b.contents[d]}}function x(a,b,c,d){var f=d&&"seq"===d.timeContainer,g=0;d&&(g=f&&c?c.end:d.begin);b.begin=b.explicit_begin?b.explicit_begin+g:g;c=b.begin;d=null;for(var k in b.sets)b.sets.hasOwnProperty(k)&&
(x(a,b.sets[k],d,b),c="seq"===b.timeContainer?b.sets[k].end:Math.max(c,b.sets[k].end),d=b.sets[k]);if("contents"in b)for(var m in b.contents)b.contents.hasOwnProperty(m)&&(x(a,b.contents[m],d,b),c="seq"===b.timeContainer?b.contents[m].end:Math.max(c,b.contents[m].end),d=b.contents[m]);else c=f?b.begin:Number.POSITIVE_INFINITY;b.end=null!==b.explicit_end&&null!==b.explicit_dur?Math.min(b.begin+b.explicit_dur,g+b.explicit_end):null===b.explicit_end&&null!==b.explicit_dur?b.begin+b.explicit_dur:null!==
b.explicit_end&&null===b.explicit_dur?g+b.explicit_end:c;delete b.explicit_begin;delete b.explicit_dur;delete b.explicit_end;a._registerEvent(b)}function u(a){this.node=a}function v(){this.events=[];this.head=new D;this.body=null}function D(){this.styling=new p;this.layout=new y}function p(){this.styles={};this.initials={}}function C(){this.styleRefs=this.styleAttrs=this.id=null}function A(){this.styleAttrs=null}function y(){this.regions={}}function B(a,b){this.kind="image";this.src=a;this.type=b}
function K(a){this.id=a}function G(a){this.regionID=a}function m(a){this.styleAttrs=a}function t(a){this.sets=a}function d(a){this.contents=a}function q(a,b,c){this.explicit_begin=a;this.explicit_end=b;this.explicit_dur=c}function I(){this.kind="body"}function J(){this.kind="div"}function L(){this.kind="p"}function H(){this.kind="span"}function E(){this.kind="span"}function N(){this.kind="br"}function k(){}function r(){}function g(a){var b=null;a&&(a=a.attributes["xml:id"]||a.attributes.id)&&(b=a.value||
null);return b}function f(a){return a&&"style"in a.attributes?a.attributes.style.value.split(" "):[]}function S(a,b){var c={};if(null!==a)for(var d in a.attributes)if(a.attributes.hasOwnProperty(d)){var f=a.attributes[d].uri+" "+a.attributes[d].local,g=h.byQName[f];if(void 0!==g){var k=g.parse(a.attributes[d].value);null!==k?(c[f]=k,g===h.byName.zIndex&&P(b,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):O(b,"Cannot parse styling attribute "+f+" --\x3e "+a.attributes[d].value)}}return c}
function Q(a,b,c){for(var d in a.attributes)if(a.attributes.hasOwnProperty(d)&&a.attributes[d].uri===b&&a.attributes[d].local===c)return a.attributes[d].value;return null}function Z(a,b){a=Q(a,l.ns_tts,"extent");if(null===a)return null;var c=a.split(" ");if(2!==c.length)return P(b,"Malformed extent (ignoring)"),null;a=n.parseLength(c[0]);c=n.parseLength(c[1]);return c&&a?{h:c,w:a}:(P(b,"Malformed extent values (ignoring)"),null)}function U(a,b,c){var d=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,f=/^(\d{2,}):(\d\d):(\d\d):(\d{2,})$/,
g=/^(\d+(?:\.\d+)?)t$/,k=/^(\d+(?:\.\d+)?)ms$/,m=/^(\d+(?:\.\d+)?)s$/,l=/^(\d+(?:\.\d+)?)h$/,q=/^(\d+(?:\.\d+)?)m$/,t,e=null;null!==(t=/^(\d+(?:\.\d+)?)f$/.exec(c))?null!==b&&(e=parseFloat(t[1])/b):null!==(t=g.exec(c))?null!==a&&(e=parseFloat(t[1])/a):null!==(t=k.exec(c))?e=parseFloat(t[1])/1E3:null!==(t=m.exec(c))?e=parseFloat(t[1]):null!==(t=l.exec(c))?e=3600*parseFloat(t[1]):null!==(t=q.exec(c))?e=60*parseFloat(t[1]):null!==(t=d.exec(c))?e=3600*parseInt(t[1])+60*parseInt(t[2])+parseFloat(t[3]):
null!==(t=f.exec(c))&&null!==b&&(e=3600*parseInt(t[1])+60*parseInt(t[2])+parseInt(t[3])+(null===t[4]?0:parseInt(t[4])/b));return e}function W(a,b,c){for(;0<b.styleRefs.length;){var d=b.styleRefs.pop();d in a.styles?(W(a,a.styles[d],c),T(a.styles[d].styleAttrs,b.styleAttrs)):O(c,"Non-existant style id referenced")}}function V(a,b,c,d){for(var f=b.length-1;0<=f;f--){var g=b[f];g in a.styles?T(a.styles[g].styleAttrs,c):O(d,"Non-existant style id referenced")}}function T(a,b){for(var c in a)!a.hasOwnProperty(c)||
c in b||(b[c]=a[c])}function P(a,b){if(a&&a.warn&&a.warn(b))throw b;}function O(a,b){if(a&&a.error&&a.error(b))throw b;}function M(a,b){a&&a.fatal&&a.fatal(b);throw b;}function Y(a,b){for(var c=0,d=a.length-1,f;c<=d;){f=Math.floor((c+d)/2);var g=a[f];if(g<b)c=f+1;else if(g>b)d=f-1;else return{found:!0,index:f}}return{found:!1,index:c}}b.fromXML=function(b,d,f){var g=c.parser(!0,{xmlns:!0}),m=[],q=[],t=[],w=0,n=null;g.onclosetag=function(a){if(m[0]instanceof k)null!==n.head&&null!==n.head.styling&&
V(n.head.styling,m[0].styleRefs,m[0].styleAttrs,d),delete m[0].styleRefs;else if(m[0]instanceof p)for(var b in m[0].styles)m[0].styles.hasOwnProperty(b)&&W(m[0],m[0].styles[b],d);else if(m[0]instanceof L||m[0]instanceof H){if(1<m[0].contents.length){a=[m[0].contents[0]];for(b=1;b<m[0].contents.length;b++)m[0].contents[b]instanceof E&&a[a.length-1]instanceof E?a[a.length-1].text+=m[0].contents[b].text:a.push(m[0].contents[b]);m[0].contents=a}m[0]instanceof H&&1===m[0].contents.length&&m[0].contents[0]instanceof
E&&(m[0].text=m[0].contents[0].text,delete m[0].contents)}else if(m[0]instanceof u)if(m[0].node.uri===l.ns_tt&&"metadata"===m[0].node.local)w--;else if(0<w&&f&&"onCloseTag"in f)f.onCloseTag();t.shift();q.shift();m.shift()};g.ontext=function(a){if(void 0!==m[0])if(m[0]instanceof H||m[0]instanceof L){if(m[0]instanceof H){var b=m[0].styleAttrs[h.byName.ruby.qname];if("container"===b||"textContainer"===b||"baseContainer"===b)return}b=new E;b.initFromText(n,m[0],a,q[0],t[0],d);m[0].contents.push(b)}else if(m[0]instanceof
u&&0<w&&f&&"onText"in f)f.onText(a)};g.onopentag=function(a){function b(a){l.ttaf_map[a.uri]&&(a.uri=l.ttaf_map[a.uri])}var c=a.attributes["xml:space"];c?t.unshift(c.value):0===t.length?t.unshift("default"):t.unshift(t[0]);(c=a.attributes["xml:lang"])?q.unshift(c.value):0===q.length?q.unshift(""):q.unshift(q[0]);b(a);if(a.attributes)for(var g in a.attributes)a.attributes.hasOwnProperty(g)&&b(a.attributes[g]);if(a.uri===l.ns_tt)if("tt"===a.local)null!==n&&M(d,"Two <tt> elements at ("+this.line+","+
this.column+")"),n=new v,n.initFromNode(a,q[0],d),m.unshift(n);else if("head"===a.local)m[0]instanceof v||M(d,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),m.unshift(n.head);else if("styling"===a.local)m[0]instanceof D||M(d,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),m.unshift(n.head.styling);else if("style"===a.local)if(m[0]instanceof p){var e=new C;e.initFromNode(a,d);e.id?n.head.styling.styles[e.id]=e:O(d,"<style> element missing @id attribute");
m.unshift(e)}else m[0]instanceof k?(e=new C,e.initFromNode(a,d),T(e.styleAttrs,m[0].styleAttrs),m.unshift(e)):M(d,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===a.local)if(m[0]instanceof p){g=new A;g.initFromNode(a,d);for(e in g.styleAttrs)g.styleAttrs.hasOwnProperty(e)&&(n.head.styling.initials[e]=g.styleAttrs[e]);m.unshift(g)}else M(d,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else if("layout"===
a.local)m[0]instanceof D||M(d,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),m.unshift(n.head.layout);else if("region"===a.local)m[0]instanceof y||M(d,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),e=new k,e.initFromNode(n,a,q[0],d),!e.id||e.id in n.head.layout.regions?O(d,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):n.head.layout.regions[e.id]=e,m.unshift(e);else if("body"===a.local)m[0]instanceof
v||M(d,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==n.body&&M(d,"Second <body> element at "+this.line+","+this.column+")"),e=new I,e.initFromNode(n,a,q[0],d),n.body=e,m.unshift(e);else if("div"===a.local){m[0]instanceof J||m[0]instanceof I||M(d,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");e=new J;e.initFromNode(n,m[0],a,q[0],d);if(g=e.styleAttrs[h.byName.backgroundImage.qname])e.contents.push(new B(g)),delete e.styleAttrs[h.byName.backgroundImage.qname];
m[0].contents.push(e);m.unshift(e)}else"image"===a.local?(m[0]instanceof J||M(d,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),e=new B,e.initFromNode(n,m[0],a,q[0],d),m[0].contents.push(e),m.unshift(e)):"p"===a.local?(m[0]instanceof J||M(d,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),e=new L,e.initFromNode(n,m[0],a,q[0],d),m[0].contents.push(e),m.unshift(e)):"span"===a.local?(m[0]instanceof H||m[0]instanceof L||M(d,"Parent of <span> element is not <span> or <p> at "+
this.line+","+this.column+")"),e=new H,e.initFromNode(n,m[0],a,q[0],t[0],d),m[0].contents.push(e),m.unshift(e)):"br"===a.local?(m[0]instanceof H||m[0]instanceof L||M(d,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),e=new N,e.initFromNode(n,m[0],a,q[0],d),m[0].contents.push(e),m.unshift(e)):"set"===a.local?(m[0]instanceof H||m[0]instanceof L||m[0]instanceof J||m[0]instanceof I||m[0]instanceof k||m[0]instanceof N||M(d,"Parent of <set> element is not a content element or a region at "+
this.line+","+this.column+")"),e=new r,e.initFromNode(n,m[0],a,d),m[0].sets.push(e),m.unshift(e)):m.unshift(new u(a));else m.unshift(new u(a));if(m[0]instanceof u)if(a.uri===l.ns_tt&&"metadata"===a.local)w++;else if(0<w&&f&&"onOpenTag"in f){e=[];for(var x in a.attributes)a.attributes.hasOwnProperty(x)&&(e[a.attributes[x].uri+" "+a.attributes[x].local]={uri:a.attributes[x].uri,local:a.attributes[x].local,value:a.attributes[x].value});f.onOpenTag(a.uri,a.local,e)}};g.write(b).close();delete n.head.styling.styles;
b=!1;for(var R in n.head.layout.regions)if(n.head.layout.regions.hasOwnProperty(R)){b=!0;break}b||(R=k.prototype.createDefaultRegion(n,d),n.head.layout.regions[R.id]=R);for(var X in n.head.layout.regions)n.head.layout.regions.hasOwnProperty(X)&&x(n,n.head.layout.regions[X],null,null);n.body&&x(n,n.body,null,null);n.body&&a(n.body);n.body&&e(n.body);return n};v.prototype.initFromNode=function(a,b,c){var d=Q(a,l.ns_ttp,"cellResolution"),f=15;var m=32;null!==d&&(d=/(\d+) (\d+)/.exec(d),null!==d?(m=parseInt(d[1]),
f=parseInt(d[2])):P(c,"Malformed cellResolution value (using initial value instead)"));this.cellLength={h:new n.ComputedLength(0,1/f),w:new n.ComputedLength(1/m,0)};f=Q(a,l.ns_ttp,"frameRate");d=30;null!==f&&(m=/(\d+)/.exec(f),null!==m?d=parseInt(m[1]):P(c,"Malformed frame rate attribute (using initial value instead)"));m=Q(a,l.ns_ttp,"frameRateMultiplier");var g=1;null!==m&&(m=/(\d+) (\d+)/.exec(m),null!==m?g=parseInt(m[1])/parseInt(m[2]):P(c,"Malformed frame rate multiplier attribute (using initial value instead)"));
d*=g;g=1;m=Q(a,l.ns_ttp,"tickRate");null===m?null!==f&&(g=d):(m=/(\d+)/.exec(m),null!==m?g=parseInt(m[1]):P(c,"Malformed tick rate attribute (using initial value instead)"));this.effectiveFrameRate=d;this.tickRate=g;m=Q(a,l.ns_ittp,"aspectRatio");null===m&&(m=Q(a,l.ns_ttp,"displayAspectRatio"));f=null;null!==m&&(d=/(\d+)\s+(\d+)/.exec(m),null!==d?(m=parseInt(d[1]),d=parseInt(d[2]),0!==m&&0!==d?f=m/d:O(c,"Illegal aspectRatio values (ignoring)")):O(c,"Malformed aspectRatio attribute (ignoring)"));this.aspectRatio=
f;f=Q(a,l.ns_ttp,"timeBase");null!==f&&"media"!==f&&M(c,"Unsupported time base");a=Z(a,c);null===a?this.pxLength={h:null,w:null}:("px"===a.h.unit&&"px"===a.w.unit||M(c,"Extent on TT must be in px or absent"),this.pxLength={h:new n.ComputedLength(0,1/a.h.value),w:new n.ComputedLength(1/a.w.value,0)});this.dimensions={h:new n.ComputedLength(0,1),w:new n.ComputedLength(1,0)};this.lang=b};v.prototype._registerEvent=function(a){if(!(a.end<=a.begin)){var b=Y(this.events,a.begin);b.found||this.events.splice(b.index,
0,a.begin);a.end!==Number.POSITIVE_INFINITY&&(b=Y(this.events,a.end),b.found||this.events.splice(b.index,0,a.end))}};v.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]};v.prototype.getMediaTimeEvents=function(){return this.events};C.prototype.initFromNode=function(a,b){this.id=g(a);this.styleAttrs=S(a,b);this.styleRefs=f(a)};A.prototype.initFromNode=function(a,b){this.styleAttrs={};for(var c in a.attributes)!a.attributes.hasOwnProperty(c)||a.attributes[c].uri!==
l.ns_itts&&a.attributes[c].uri!==l.ns_ebutts&&a.attributes[c].uri!==l.ns_tts||(this.styleAttrs[a.attributes[c].uri+" "+a.attributes[c].local]=a.attributes[c].value)};B.prototype.initFromNode=function(a,b,c,d,f){(this.src="src"in c.attributes?c.attributes.src.value:null)||O(f,"Invalid image@src attribute");(this.type="type"in c.attributes?c.attributes.type.value:null)||O(f,"Invalid image@type attribute");m.prototype.initFromNode.call(this,a,b,c,f);q.prototype.initFromNode.call(this,a,b,c,f);t.prototype.initFromNode.call(this,
a,b,c,f);G.prototype.initFromNode.call(this,a,b,c,f);this.lang=d};K.prototype.initFromNode=function(a,b,c,d){this.id=g(c)};G.prototype.initFromNode=function(a,b,c,d){this.regionID=c&&"region"in c.attributes?c.attributes.region.value:""};m.prototype.initFromNode=function(a,b,c,d){this.styleAttrs=S(c,d);null!==a.head&&null!==a.head.styling&&V(a.head.styling,f(c),this.styleAttrs,d)};t.prototype.initFromNode=function(a,b,c,d){this.sets=[]};d.prototype.initFromNode=function(a,b,c,d){this.contents=[]};
q.prototype.initFromNode=function(a,b,c,d){b=null;c&&"begin"in c.attributes&&(b=U(a.tickRate,a.effectiveFrameRate,c.attributes.begin.value),null===b&&P(d,"Malformed begin value "+c.attributes.begin.value+" (using 0)"));var f=null;c&&"dur"in c.attributes&&(f=U(a.tickRate,a.effectiveFrameRate,c.attributes.dur.value),null===f&&P(d,"Malformed dur value "+c.attributes.dur.value+" (ignoring)"));var m=null;c&&"end"in c.attributes&&(m=U(a.tickRate,a.effectiveFrameRate,c.attributes.end.value),null===m&&P(d,
"Malformed end value (ignoring)"));this.explicit_begin=b;this.explicit_end=m;this.explicit_dur=f;(a=c&&"timeContainer"in c.attributes?c.attributes.timeContainer.value:null)&&"par"!==a?"seq"===a?d="seq":(O(d,"Illegal value of timeContainer (assuming 'par')"),d="par"):d="par";this.timeContainer=d};I.prototype.initFromNode=function(a,b,c,f){m.prototype.initFromNode.call(this,a,null,b,f);q.prototype.initFromNode.call(this,a,null,b,f);t.prototype.initFromNode.call(this,a,null,b,f);G.prototype.initFromNode.call(this,
a,null,b,f);d.prototype.initFromNode.call(this,a,null,b,f);this.lang=c};J.prototype.initFromNode=function(a,b,c,f,g){m.prototype.initFromNode.call(this,a,b,c,g);q.prototype.initFromNode.call(this,a,b,c,g);t.prototype.initFromNode.call(this,a,b,c,g);G.prototype.initFromNode.call(this,a,b,c,g);d.prototype.initFromNode.call(this,a,b,c,g);this.lang=f};L.prototype.initFromNode=function(a,b,c,f,g){m.prototype.initFromNode.call(this,a,b,c,g);q.prototype.initFromNode.call(this,a,b,c,g);t.prototype.initFromNode.call(this,
a,b,c,g);G.prototype.initFromNode.call(this,a,b,c,g);d.prototype.initFromNode.call(this,a,b,c,g);this.lang=f};H.prototype.initFromNode=function(a,b,c,f,g,k){m.prototype.initFromNode.call(this,a,b,c,k);q.prototype.initFromNode.call(this,a,b,c,k);t.prototype.initFromNode.call(this,a,b,c,k);G.prototype.initFromNode.call(this,a,b,c,k);d.prototype.initFromNode.call(this,a,b,c,k);this.space=g;this.lang=f};E.prototype.initFromText=function(a,b,c,d,f,m){q.prototype.initFromNode.call(this,a,b,null,m);this.text=
c;this.space=f;this.lang=d};N.prototype.initFromNode=function(a,b,c,d,f){G.prototype.initFromNode.call(this,a,b,c,f);q.prototype.initFromNode.call(this,a,b,c,f);this.lang=d};k.prototype.createDefaultRegion=function(a,b){var c=new k;c.id="";m.prototype.initFromNode.call(c,a,null,{name:"region",attributes:{"tts:displayAlign":{name:"tts:displayAlign",value:"after",prefix:"tts",local:"displayAlign",uri:"http://www.w3.org/ns/ttml#styling"},"tts:extent":{name:"tts:extent",value:"80% 20%",prefix:"tts",local:"extent",
uri:"http://www.w3.org/ns/ttml#styling"},"tts:origin":{name:"tts:origin",value:"10% 70%",prefix:"tts",local:"origin",uri:"http://www.w3.org/ns/ttml#styling"},"tts:overflow":{name:"tts:overflow",value:"visible",prefix:"tts",local:"overflow",uri:"http://www.w3.org/ns/ttml#styling"}},ns:{"":"http://www.w3.org/ns/ttml",ebuttm:"urn:ebu:tt:metadata",ebutts:"urn:ebu:tt:style",ittp:"http://www.w3.org/ns/ttml/profile/imsc1#parameter",itts:"http://www.w3.org/ns/ttml/profile/imsc1#styling",ttm:"http://www.w3.org/ns/ttml#metadata",
ttp:"http://www.w3.org/ns/ttml#parameter",tts:"http://www.w3.org/ns/ttml#styling",xml:"http://www.w3.org/XML/1998/namespace"},prefix:"",local:"region",uri:"http://www.w3.org/ns/ttml",isSelfClosing:!0},b);c.sets=[];q.call(c,0,Number.POSITIVE_INFINITY,null);this.lang=a.xmllang;return c};k.prototype.initFromNode=function(a,b,c,d){K.prototype.initFromNode.call(this,a,null,b,d);q.prototype.initFromNode.call(this,a,null,b,d);t.prototype.initFromNode.call(this,a,null,b,d);this.styleAttrs=S(b,d);this.styleRefs=
f(b);this.lang=c};r.prototype.initFromNode=function(a,b,c,d){q.prototype.initFromNode.call(this,a,b,c,d);a=S(c,d);this.value=this.qname=null;for(var f in a)if(a.hasOwnProperty(f)){if(this.qname){O(d,"More than one style specified on set");break}this.qname=f;this.value=a[f]}}})("undefined"===typeof h?this.imscDoc={}:h,"undefined"===typeof sax?c("sax"):sax,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):
imscUtils)},{"./names":37,"./styles":38,"./utils":39,sax:28}],34:[function(c,n,h){(function(b,c,l,h){function e(a){var b={};a=Object.entries(a);for(var c in a)if(a.hasOwnProperty(c)){var m=h.parseColor(a[c][0]),l=h.parseColor(a[c][1]);m&&l&&(b[m.toString()]=l)}return b}function u(b,c,d,q){if("region"===d.kind){var m=document.createElement("div");m.style.position="absolute"}else if("body"===d.kind)m=document.createElement("div");else if("div"===d.kind)m=document.createElement("div");else if("image"===
d.kind){if(m=document.createElement("img"),null!==b.imgResolver&&null!==d.src){var e=b.imgResolver(d.src,m);e&&(m.src=e);m.height=b.regionH;m.width=b.regionW}}else if("p"===d.kind)m=document.createElement("p");else if("span"===d.kind)if("container"===d.styleAttrs[l.byName.ruby.qname])m=document.createElement("ruby"),b.ruby=!0;else if("base"===d.styleAttrs[l.byName.ruby.qname])m=document.createElement("rb");else if("text"===d.styleAttrs[l.byName.ruby.qname])m=document.createElement("rt");else if("baseContainer"===
d.styleAttrs[l.byName.ruby.qname])m=document.createElement("rbc");else if("textContainer"===d.styleAttrs[l.byName.ruby.qname])m=document.createElement("rtc");else{if("delimiter"===d.styleAttrs[l.byName.ruby.qname])return;m=document.createElement("span")}else"br"===d.kind&&(m=document.createElement("br"));if(m){!d.lang||"region"!==d.kind&&d.lang===q.lang||(m.lang=d.lang);c.appendChild(m);m.style.margin="0";if("region"===d.kind)if(c=d.styleAttrs[l.byName.writingMode.qname],"lrtb"===c||"lr"===c)b.ipd=
"lr",b.bpd="tb";else if("rltb"===c||"rl"===c)b.ipd="rl",b.bpd="tb";else if("tblr"===c)b.ipd="tb",b.bpd="lr";else{if("tbrl"===c||"tb"===c)b.ipd="tb",b.bpd="rl"}else"p"===d.kind&&"tb"===b.bpd&&(b.ipd="ltr"===d.styleAttrs[l.byName.direction.qname]?"lr":"rl");for(var h in C)C.hasOwnProperty(h)&&(c=C[h],q=d.styleAttrs[c.qname],void 0!==q&&null!==c.map&&c.map(b,m,d,q));h=m;(c=d.styleAttrs[l.byName.linePadding.qname])&&!c.isZero()&&(q=c.multiply(c.toUsedLength(b.w,b.h),b.options.sizeAdjust),0<q&&(q=Math.ceil(q)+
"px","tb"===b.bpd?(h.style.paddingLeft=q,h.style.paddingRight=q):(h.style.paddingTop=q,h.style.paddingBottom=q),b.removePaddingElement=h,b.lp=c));(c=d.styleAttrs[l.byName.multiRowAlign.qname])&&"auto"!==c&&(h=document.createElement("span"),h.style.display="inline-block",h.style.textAlign=c,m.appendChild(h),b.mra=c);(c=d.styleAttrs[l.byName.rubyReserve.qname])&&"none"!==c[0]&&(b.rubyReserve=c);d.styleAttrs[l.byName.fillLineGap.qname]&&(b.flg=!0);if("span"===d.kind&&d.text)if((c=d.styleAttrs[l.byName.textEmphasis.qname])&&
"none"!==c.style&&(b.textEmphasis=!0),l.byName.textCombine.qname in d.styleAttrs&&"all"===d.styleAttrs[l.byName.textCombine.qname])m.textContent=d.text,c&&D(b,m,d,c);else for(q="",e=0;e<d.text.length;e++){q+=d.text.charAt(e);var t=d.text.charCodeAt(e);if(55296>t||56319<t||e===d.text.length-1)t=document.createElement("span"),t.textContent=q,c&&D(b,t,d,c),m.appendChild(t),q="",t._isd_element=d}for(var p in d.contents)d.contents.hasOwnProperty(p)&&u(b,h,d.contents[p],d);p=[];if("p"===d.kind){v(b,h,p,
null);if(b.rubyReserve){for(c=0;c<p.length;c++){q=document.createElement("ruby");e=document.createElement("rb");e.textContent="\u200b";q.appendChild(e);var w=b.rubyReserve[1].toUsedLength(b.w,b.h)+"px";"both"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&1==p.length?(e=document.createElement("rtc"),e.style[B]=y?"after":"under",e.textContent="\u200b",e.style.fontSize=w,t=document.createElement("rtc"),t.style[B]=y?"before":"over",t.textContent="\u200b",t.style.fontSize=w,q.appendChild(e),q.appendChild(t)):
(e=document.createElement("rtc"),e.textContent="\u200b",e.style.fontSize=w,e.style[B]="after"===b.rubyReserve[0]||"outside"===b.rubyReserve[0]&&0<c?y?"after":"tb"===b.bpd||"rl"===b.bpd?"under":"over":y?"before":"tb"===b.bpd||"rl"===b.bpd?"over":"under",q.appendChild(e));e=null;for(t=0;t<p[c].rbc.length;t++)if("ruby"===p[c].rbc[t].localName){e=p[c].rbc[t];for(t=0;t<e.style.length;t++)q.style.setProperty(e.style.item(t),e.style.getPropertyValue(e.style.item(t)));break}e=e||p[c].elements[0].node;e.parentElement.insertBefore(q,
e)}b.rubyReserve=null}if(b.ruby||b.rubyReserve){for(c=0;c<p.length;c++)for(q=0;q<p[c].rbc.length;q++)p[c].rbc[q].style[B]||(p[c].rbc[q].style[B]=y?0===c?"before":"after":"tb"===b.bpd?0===c?"over":"under":"rl"===b.bpd?0===c?"over":"under":0===c?"under":"over");b.ruby=null}if(b.textEmphasis){for(c=0;c<p.length;c++)for(q=0;q<p[c].te.length;q++)p[c].te[q].style[G]&&"none"!==p[c].te[q].style[G]||(p[c].te[q].style[G]="tb"===b.bpd?0===c?"left over":"left under":"rl"===b.bpd?0===c?"right under":"left under":
0===c?"left under":"right under");b.textEmphasis=null}if(b.mra){for(c=0;c<p.length-1;c++)e=p[c].elements.length,0!==e&&!1===p[c].br&&(q=document.createElement("br"),e=p[c].elements[e-1].node,e.parentElement.insertBefore(q,e.nextSibling));b.mra=null}if(b.lp){c=b.lp.multiply(b.lp.toUsedLength(b.w,b.h),b.options.sizeAdjust);for(q=0;q<p.length;q++){e=p[q].elements[p[q].start_elem];t=p[q].elements[p[q].end_elem];w=Math.ceil(c)+"px";var k="-"+Math.ceil(c)+"px";0!==p[q].elements.length&&("lr"===b.ipd?(e.node.marginLeft=
k,e.node.style.paddingLeft=w):"rl"===b.ipd?(e.node.style.paddingRight=w,e.node.style.marginRight=k):"tb"===b.ipd&&(e.node.style.paddingTop=w,e.node.style.marginTop=k),"lr"===b.ipd?(t.node.style.paddingRight=w,t.node.style.marginRight=k):"rl"===b.ipd?(t.node.style.paddingLeft=w,t.node.style.marginLeft=k):"tb"===b.ipd&&(t.node.style.paddingBottom=w,t.node.style.marginBottom=k))}"tb"===b.bpd?(b.removePaddingElement.style.paddingLeft=0,b.removePaddingElement.style.paddingRight=0):(b.removePaddingElement.style.paddingTop=
0,b.removePaddingElement.style.paddingBottom=0);b.lp=null}for(c=0;c<p.length;c++)for(q=p[c],e=1;e<q.elements.length;){t=q.elements[e-1].node;w=q.elements[e].node;if("SPAN"===t.tagName&&"SPAN"===w.tagName&&t._isd_element===w._isd_element){t.textContent+=w.textContent;for(k=0;k<w.style.length;k++){var r=w.style[k];if(0<=r.indexOf("border")||0<=r.indexOf("padding"))t.style[r]=w.style[r]}w.parentElement.removeChild(w);t=!0}else t=!1;t?q.elements.splice(e,1):e++}c=[];for(t=0;t<p.length;t++)for(w=0;w<p[t].elements.length;w++)if(q=
p[t].elements[w].node,e=a(q,c,!1))q.style.backgroundColor=e;for(q=0;q<c.length;q++)c[q].style.backgroundColor="";if(b.flg){q=n(h.getBoundingClientRect(),b);c=q.before;q=q.after;e=Math.sign(q-c);for(t=0;t<=p.length;t++){w=0===t?Math.round(c):t===p.length?Math.round(q):Math.round((p[t-1].after+p[t].before)/2);if(0<t&&p[t-1])for(r=0;r<p[t-1].elements.length;r++){var g=p[t-1].elements[r];k=e*(w-g.after)+"px";"lr"===b.bpd?g.node.style.paddingRight=k:"rl"===b.bpd?g.node.style.paddingLeft=k:"tb"===b.bpd&&
(g.node.style.paddingBottom=k)}if(t<p.length)for(r=0;r<p[t].elements.length;r++)g=p[t].elements[r],k=e*(g.before-w)+"px","lr"===b.bpd?g.node.style.paddingLeft=k:"rl"===b.bpd?g.node.style.paddingRight=k:"tb"===b.bpd&&(g.node.style.paddingTop=k)}b.flg=null}}"region"===d.kind&&"tb"===b.bpd&&b.enableRollUp&&0<d.contents.length&&"after"===d.styleAttrs[l.byName.displayAlign.qname]&&(v(b,h,p,null),d=new x(""===d.id?"_":d.id,p),b.currentISDState[d.id]=d,b.previousISDState&&d.id in b.previousISDState&&0<b.previousISDState[d.id].plist.length&&
1<d.plist.length&&d.plist[d.plist.length-2].text===b.previousISDState[d.id].plist[b.previousISDState[d.id].plist.length-1].text&&(b=m.firstElementChild,d=d.plist[d.plist.length-1].after-d.plist[d.plist.length-1].before,b.style.bottom="-"+d+"px",b.style.transition="transform 0.4s",b.style.position="relative",b.style.transform="translateY(-"+d+"px)"))}else if(b=b.errorHandler,d="Error processing ISD element kind: "+d.kind,b&&b.error&&b.error(d))throw d;}function a(b,c,d){if(b.style.backgroundColor)return d&&
!c.includes(b)&&c.push(b),b.style.backgroundColor;if("SPAN"===b.parentElement.nodeName)return a(b.parentElement,c,!0)}function x(a,b){this.id=a;this.plist=b}function n(a,b){var c={before:null,after:null,start:null,end:null};"tb"===b.bpd?(c.before=a.top,c.after=a.bottom,"lr"===b.ipd?(c.start=a.left,c.end=a.right):(c.start=a.right,c.end=a.left)):"lr"===b.bpd?(c.before=a.left,c.after=a.right,c.start=a.top,c.end=a.bottom):"rl"===b.bpd&&(c.before=a.right,c.after=a.left,c.start=a.top,c.end=a.bottom);return c}
function v(a,b,c,e){if("rt"!==b.localName&&"rtc"!==b.localName)if(e=b.style.backgroundColor||e,0===b.childElementCount)if("span"===b.localName||"rb"===b.localName){var d=b.getBoundingClientRect();a=n(d,a);if(!(d=0===c.length)){d=a.before;var m=a.after,l=c[c.length-1].before,q=c[c.length-1].after;d=!(m<q&&d>l||q<=m&&l>=d)}d?c.push({before:a.before,after:a.after,start:a.start,end:a.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}):(d=Math.sign(a.after-a.before),m=Math.sign(a.end-
a.start),0>d*(a.before-c[c.length-1].before)&&(c[c.length-1].before=a.before),0<d*(a.after-c[c.length-1].after)&&(c[c.length-1].after=a.after),0>m*(a.start-c[c.length-1].start)&&(c[c.length-1].start=a.start,c[c.length-1].start_elem=c[c.length-1].elements.length),0<m*(a.end-c[c.length-1].end)&&(c[c.length-1].end=a.end,c[c.length-1].end_elem=c[c.length-1].elements.length));c[c.length-1].text+=b.textContent;c[c.length-1].elements.push({node:b,bgcolor:e,before:a.before,after:a.after})}else"br"===b.localName&&
0!==c.length&&(c[c.length-1].br=!0);else for(b=b.firstChild;b;)b.nodeType===Node.ELEMENT_NODE&&(v(a,b,c,e),"ruby"===b.localName||"rtc"===b.localName?0<c.length&&c[c.length-1].rbc.push(b):"span"===b.localName&&b.style[K]&&"none"!==b.style[K]&&0<c.length&&c[c.length-1].te.push(b)),b=b.nextSibling}function D(a,b,c,e){"none"!==e.style&&(b.style[K]="auto"===e.style?"filled":e.style+" "+e.symbol,"before"===e.position||"after"===e.position)&&(b.style[G]="tb"===a.bpd?"before"===e.position?"left over":"left under":
"rl"===a.bpd?"before"===e.position?"right under":"left under":"before"===e.position?"left under":"right under")}function p(a,b){this.qname=a;this.map=b}b.render=function(a,b,c,l,h,p,v,x,w,n){l=l||b.clientHeight;var d=h||b.clientWidth;null!==a.aspectRatio&&(h=l*a.aspectRatio,h>d?l=Math.round(d/a.aspectRatio):d=h);h=document.createElement("div");h.style.position="relative";h.style.width=d+"px";h.style.height=l+"px";h.style.margin="auto";h.style.top=0;h.style.bottom=0;h.style.left=0;h.style.right=0;
h.style.zIndex=0;c={h:l,w:d,regionH:null,regionW:null,imgResolver:c,displayForcedOnlyMode:p||!1,isd:a,errorHandler:v,previousISDState:x,enableRollUp:w||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null,options:Object.assign({},n)||{}};c.options.colorAdjust&&(c.options.colorAdjust=e(c.options.colorAdjust));p=["region","body","div","p","span"];for(var m in p)p.hasOwnProperty(m)&&(v=p[m]+"BackgroundColorAdjust",c.options[v]&&(c.options[v]=
e(c.options[v])));b.appendChild(h);for(var g in a.contents)a.contents.hasOwnProperty(g)&&u(c,h,a.contents[g],a);return c.currentISDState};var C=[new p("http://www.w3.org/ns/ttml#styling backgroundColor",function(a,b,c,e){(c=(c=a.options[c.kind+"BackgroundColorAdjust"])&&c[e.toString()])&&(e=c);c=e[3];0!==c&&(void 0!=a.options.backgroundOpacityScale&&(c*=a.options.backgroundOpacityScale),b.style.backgroundColor="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(c/255).toString()+
")")}),new p("http://www.w3.org/ns/ttml#styling color",function(a,b,c,e){c=a.options.colorOpacityScale||1;a=a.options.colorAdjust;void 0!=a&&(a=a[e.toString()])&&(e=a);b.style.color="rgba("+e[0].toString()+","+e[1].toString()+","+e[2].toString()+","+(c*e[3]/255).toString()+")"}),new p("http://www.w3.org/ns/ttml#styling direction",function(a,b,c,e){b.style.direction=e}),new p("http://www.w3.org/ns/ttml#styling display",function(a,b,c,e){}),new p("http://www.w3.org/ns/ttml#styling displayAlign",function(a,
b,c,e){b.style.display="flex";b.style.flexDirection="column";"before"===e?b.style.justifyContent="flex-start":"center"===e?b.style.justifyContent="center":"after"===e&&(b.style.justifyContent="flex-end")}),new p("http://www.w3.org/ns/ttml#styling extent",function(a,b,c,e){a.regionH=e.h.toUsedLength(a.w,a.h);a.regionW=e.w.toUsedLength(a.w,a.h);var d=e=0;if(c=c.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])e=c[0].toUsedLength(a.w,a.h)+c[2].toUsedLength(a.w,a.h),d=c[1].toUsedLength(a.w,a.h)+
c[3].toUsedLength(a.w,a.h);b.style.height=a.regionH-e+"px";b.style.width=a.regionW-d+"px"}),new p("http://www.w3.org/ns/ttml#styling fontFamily",function(a,b,c,e){c=[];a.options.fontFamily&&(e=a.options.fontFamily.split(","));for(var d in e)e[d].hasOwnProperty(d)&&(e[d]=e[d].trim(),"monospaceSerif"===e[d]?(c.push("Courier New"),c.push('"Liberation Mono"'),c.push("Courier"),c.push("monospace")):"proportionalSansSerif"===e[d]||"default"===e[d]?(c.push("Arial"),c.push("Helvetica"),c.push('"Liberation Sans"'),
c.push("sans-serif")):"monospace"===e[d]?c.push("monospace"):"sansSerif"===e[d]?c.push("sans-serif"):"serif"===e[d]?c.push("serif"):"monospaceSansSerif"===e[d]?(c.push("Consolas"),c.push("monospace")):"proportionalSerif"===e[d]?c.push("serif"):c.push(e[d]));if(0<c.length){a=[c[0]];for(e=1;e<c.length;e++)-1==a.indexOf(c[e])&&a.push(c[e]);c=a}b.style.fontFamily=c.join(",")}),new p("http://www.w3.org/ns/ttml#styling shear",function(a,b,c,e){0!==e&&(c=-.9*e,b.style.transform="tb"===a.bpd?"skewX("+c+"deg)":
"skewY("+c+"deg)")}),new p("http://www.w3.org/ns/ttml#styling fontSize",function(a,b,c,e){b.style.fontSize=e.multiply(e.toUsedLength(a.w,a.h),a.options.sizeAdjust)+"px"}),new p("http://www.w3.org/ns/ttml#styling fontStyle",function(a,b,c,e){b.style.fontStyle=e}),new p("http://www.w3.org/ns/ttml#styling fontWeight",function(a,b,c,e){b.style.fontWeight=e}),new p("http://www.w3.org/ns/ttml#styling lineHeight",function(a,b,c,e){b.style.lineHeight="normal"===e?"normal":e.multiply(e.multiply(e.toUsedLength(a.w,
a.h),a.options.sizeAdjust),a.options.lineHeightAdjust)+"px"}),new p("http://www.w3.org/ns/ttml#styling opacity",function(a,b,c,e){c=e;void 0!=a.options.regionOpacityScale&&(c*=a.options.regionOpacityScale);b.style.opacity=c}),new p("http://www.w3.org/ns/ttml#styling origin",function(a,b,c,e){b.style.top=e.h.toUsedLength(a.w,a.h)+"px";b.style.left=e.w.toUsedLength(a.w,a.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling overflow",function(a,b,c,e){b.style.overflow=e}),new p("http://www.w3.org/ns/ttml#styling padding",
function(a,b,c,e){c=[];c[0]=e[0].toUsedLength(a.w,a.h)+"px";c[1]=e[3].toUsedLength(a.w,a.h)+"px";c[2]=e[2].toUsedLength(a.w,a.h)+"px";c[3]=e[1].toUsedLength(a.w,a.h)+"px";b.style.padding=c.join(" ")}),new p("http://www.w3.org/ns/ttml#styling position",function(a,b,c,e){b.style.top=e.h.toUsedLength(a.w,a.h)+"px";b.style.left=e.w.toUsedLength(a.w,a.h)+"px"}),new p("http://www.w3.org/ns/ttml#styling rubyAlign",function(a,b,c,e){b.style.rubyAlign="spaceAround"===e?"space-around":"center"}),new p("http://www.w3.org/ns/ttml#styling rubyPosition",
function(a,b,c,e){if("before"===e||"after"===e)b.parentElement.style[B]=y?e:"tb"===a.bpd?"before"===e?"over":"under":"rl"===a.bpd?"before"===e?"over":"under":"before"===e?"under":"over"}),new p("http://www.w3.org/ns/ttml#styling showBackground",null),new p("http://www.w3.org/ns/ttml#styling textAlign",function(a,b,c,e){b.style.textAlign="start"===e?"rl"===a.ipd?"right":"left":"end"===e?"rl"===a.ipd?"left":"right":e}),new p("http://www.w3.org/ns/ttml#styling textDecoration",function(a,b,c,e){b.style.textDecoration=
e.join(" ").replace("lineThrough","line-through")}),new p("http://www.w3.org/ns/ttml#styling textOutline",function(a,b,c,e){}),new p("http://www.w3.org/ns/ttml#styling textShadow",function(a,b,c,e){c=c.styleAttrs[l.byName.textOutline.qname];var d=a.options.textOutline;if(d)if("none"===d)c=d;else{var m={};d=d.split(" ");if(0!==d.length&&2>=d.length){var p=h.parseColor(d[0]);m.color=p;null!==p&&d.shift();1===d.length&&(d=h.parseLength(d[0]))&&(m.thickness=d,c=m)}}if("none"===e&&"none"===c)b.style.textShadow=
"";else{m=[];"none"!==c&&(c="rgba("+c.color[0].toString()+","+c.color[1].toString()+","+c.color[2].toString()+","+(c.color[3]/255).toString()+")",m.push("1px 1px 1px "+c),m.push("-1px 1px 1px "+c),m.push("1px -1px 1px "+c),m.push("-1px -1px 1px "+c));if("none"!==e)for(var v in e)e.hasOwnProperty(v)&&m.push(e[v].x_off.toUsedLength(a.w,a.h)+"px "+e[v].y_off.toUsedLength(a.w,a.h)+"px "+e[v].b_radius.toUsedLength(a.w,a.h)+"px rgba("+e[v].color[0].toString()+","+e[v].color[1].toString()+","+e[v].color[2].toString()+
","+(e[v].color[3]/255).toString()+")");b.style.textShadow=m.join(",")}}),new p("http://www.w3.org/ns/ttml#styling textCombine",function(a,b,c,e){b.style.textCombineUpright=e}),new p("http://www.w3.org/ns/ttml#styling textEmphasis",function(a,b,c,e){}),new p("http://www.w3.org/ns/ttml#styling unicodeBidi",function(a,b,c,e){b.style.unicodeBidi="bidiOverride"===e?"bidi-override":e}),new p("http://www.w3.org/ns/ttml#styling visibility",function(a,b,c,e){b.style.visibility=e}),new p("http://www.w3.org/ns/ttml#styling wrapOption",
function(a,b,c,e){b.style.whiteSpace="wrap"===e?"preserve"===c.space?"pre-wrap":"normal":"preserve"===c.space?"pre":"noWrap"}),new p("http://www.w3.org/ns/ttml#styling writingMode",function(a,b,c,e){if("lrtb"===e||"lr"===e)b.style.writingMode="horizontal-tb";else if("rltb"===e||"rl"===e)b.style.writingMode="horizontal-tb";else if("tblr"===e)b.style.writingMode="vertical-lr";else if("tbrl"===e||"tb"===e)b.style.writingMode="vertical-rl"}),new p("http://www.w3.org/ns/ttml#styling zIndex",function(a,
b,c,e){b.style.zIndex=e}),new p("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(a,b,c,e){a.displayForcedOnlyMode&&!1===e&&(b.style.visibility="hidden")})],F;for(F in C)C.hasOwnProperty(F);var y="webkitRubyPosition"in window.getComputedStyle(document.documentElement),B=y?"webkitRubyPosition":"rubyPosition",K="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",G="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?
"webkitTextEmphasisPosition":"textEmphasisPosition"})("undefined"===typeof h?this.imscHTML={}:h,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],35:[function(c,n,h){(function(b,c,l,h){function e(b,c,w,D,B,z,G,m,t){if(c<G.begin||c>=G.end)return null;z="regionID"in G&&""!==G.regionID?G.regionID:z;if(null!==B&&z!==w.id&&(!("contents"in G)||"contents"in
G&&0===G.contents.length||""!==z))return null;var d=new v(G);for(p in G.sets)!G.sets.hasOwnProperty(p)||c<G.sets[p].begin||c>=G.sets[p].end||(d.styleAttrs[G.sets[p].qname]=G.sets[p].value);var p={};for(var y in d.styleAttrs)if(d.styleAttrs.hasOwnProperty(y)&&(p[y]=!0,"region"===d.kind&&y===l.byName.writingMode.qname&&!(l.byName.direction.qname in d.styleAttrs))){var C=d.styleAttrs[y];if("lrtb"===C||"lr"===C)d.styleAttrs[l.byName.direction.qname]="ltr";else if("rltb"===C||"rl"===C)d.styleAttrs[l.byName.direction.qname]=
"rtl"}if(null!==B)for(var A in l.all)if(l.all.hasOwnProperty(A))if(y=l.all[A],y.qname===l.byName.textDecoration.qname){C=B.styleAttrs[y.qname];var H=d.styleAttrs[y.qname],E=[];void 0===H?E=C:-1===H.indexOf("none")?((-1===H.indexOf("noUnderline")&&-1!==C.indexOf("underline")||-1!==H.indexOf("underline"))&&E.push("underline"),(-1===H.indexOf("noLineThrough")&&-1!==C.indexOf("lineThrough")||-1!==H.indexOf("lineThrough"))&&E.push("lineThrough"),(-1===H.indexOf("noOverline")&&-1!==C.indexOf("overline")||
-1!==H.indexOf("overline"))&&E.push("overline")):E.push("none");d.styleAttrs[y.qname]=E}else y.qname!==l.byName.fontSize.qname||y.qname in d.styleAttrs||"span"!==d.kind||"textContainer"!==d.styleAttrs[l.byName.ruby.qname]?y.qname!==l.byName.fontSize.qname||y.qname in d.styleAttrs||"span"!==d.kind||"text"!==d.styleAttrs[l.byName.ruby.qname]?y.inherit&&y.qname in B.styleAttrs&&!(y.qname in d.styleAttrs)&&(d.styleAttrs[y.qname]=B.styleAttrs[y.qname]):(C=B.styleAttrs[l.byName.fontSize.qname],d.styleAttrs[y.qname]=
"textContainer"===B.styleAttrs[l.byName.ruby.qname]?C:new h.ComputedLength(.5*C.rw,.5*C.rh)):(C=B.styleAttrs[l.byName.fontSize.qname],d.styleAttrs[y.qname]=new h.ComputedLength(.5*C.rw,.5*C.rh));for(var F in l.all)if(l.all.hasOwnProperty(F)&&(A=l.all[F],!(A.qname in d.styleAttrs||A.qname===l.byName.position.qname&&l.byName.origin.qname in d.styleAttrs||A.qname===l.byName.origin.qname&&l.byName.position.qname in d.styleAttrs)&&(y=b.head.styling.initials[A.qname]||A.initial,null!==y&&("region"===d.kind||
!1===A.inherit&&null!==y))))if(y=A.parse(y),null!==y)d.styleAttrs[A.qname]=y,p[A.qname]=!0;else if(A="Invalid initial value for '"+A.qname+"' on element '"+d.kind,m&&m.error&&m.error(A))throw A;for(var k in l.all)if(l.all.hasOwnProperty(k)&&(F=l.all[k],F.qname in p&&null!==F.compute))if(A=F.compute(b,B,d,d.styleAttrs[F.qname],t),null!==A)d.styleAttrs[F.qname]=A;else if(d.styleAttrs[F.qname]=F.compute(b,B,d,F.parse(F.initial),t),F="Style '"+F.qname+"' on element '"+d.kind+"' cannot be computed",m&&
m.error&&m.error(F))throw F;if("none"===d.styleAttrs[l.byName.display.qname])return null;if(null===B)var r=null===D?[]:[D];else"contents"in G&&(r=G.contents);for(var g in r)r.hasOwnProperty(g)&&(B=e(b,c,w,D,d,z,r[g],m,t),null!==B&&d.contents.push(B.element));for(var f in d.styleAttrs)d.styleAttrs.hasOwnProperty(f)&&(b=!1,"span"===d.kind&&(c=d.styleAttrs[l.byName.ruby.qname],(b=("container"===c||"textContainer"===c||"baseContainer"===c)&&-1!==u.indexOf(f))||(b="container"!==c&&f===l.byName.rubyAlign.qname),
b||(b=!("textContainer"===c||"text"===c)&&f===l.byName.rubyPosition.qname)),b||(b=-1===l.byQName[f].applies.indexOf(d.kind)),b&&delete d.styleAttrs[f]);f=d.styleAttrs[l.byName.ruby.qname];if("p"===d.kind||"span"===d.kind&&("textContainer"===f||"text"===f))f=[],a(d,f),n(f),x(d);return"div"===d.kind&&l.byName.backgroundImage.qname in d.styleAttrs||"br"===d.kind||"image"===d.kind||"contents"in d&&0<d.contents.length||"span"===d.kind&&null!==d.text||"region"===d.kind&&"always"===d.styleAttrs[l.byName.showBackground.qname]?
{region_id:z,element:d}:null}function n(a){function b(a){return"br"===a.kind||/[\r\n\t ]$/.test(a.text)}function c(a){return"br"===a.kind||"preserve"===a.space&&/^[\r\n]/.test(a.text)}for(var e,l=0;l<a.length;)if(e=a[l],"br"===e.kind||"preserve"===e.space)l++;else{var h=e.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(h)&&(0===l||b(a[l-1]))&&(h=h.substring(1));e.text=h;0===h.length?a.splice(l,1):l++}for(l=0;l<a.length;l++)e=a[l],"br"===e.kind||"preserve"===e.space?l++:/[ ]$/.test(e.text)&&(l===a.length-
1||c(a[l+1]))&&(e.text=e.text.slice(0,-1))}function a(b,c){for(var e in b.contents)if(b.contents.hasOwnProperty(e)){var h=b.contents[e],v=h.styleAttrs[l.byName.ruby.qname];if("span"!==h.kind||"textContainer"!==v&&"text"!==v)"contents"in h?a(h,c):("span"===h.kind&&0!==h.text.length||"br"===h.kind)&&c.push(h)}}function x(a){if("br"===a.kind)return!1;if("text"in a)return 0===a.text.length;if("contents"in a){for(var b=a.contents.length;b--;)x(a.contents[b])&&a.contents.splice(b,1);return 0===a.contents.length}}
function w(a){this.contents=[];this.aspectRatio=a.aspectRatio;this.lang=a.lang}function v(a){this.kind=a.kind||"region";this.lang=a.lang;a.id&&(this.id=a.id);this.styleAttrs={};for(var b in a.styleAttrs)a.styleAttrs.hasOwnProperty(b)&&(this.styleAttrs[b]=a.styleAttrs[b]);"src"in a&&(this.src=a.src);"type"in a&&(this.type=a.type);if("text"in a)this.text=a.text;else if("region"===this.kind||"contents"in a)this.contents=[];"space"in a&&(this.space=a.space)}b.generateISD=function(a,b,c){function h(a,
b){function c(b){return!(a<b.begin||a>=b.end)}if(b.contents){var d={},e;for(e in b)b.hasOwnProperty(e)&&(d[e]=b[e]);d.contents=[];b.contents.filter(c).forEach(function(b){b=h(a,b);b.regionID&&(m[b.regionID]=!0);null!==b&&d.contents.push(b)});return d}return b}var v=new w(a),x={},p={},m={};p=a.head.styling.initials[l.byName.showBackground.qname];var n=a.head.styling.initials[l.byName.backgroundColor.qname];for(z in a.head.layout.regions)if(a.head.layout.regions.hasOwnProperty(z)){var d=a.head.layout.regions[z],
q=d.styleAttrs[l.byName.showBackground.qname]||p,u=d.styleAttrs[l.byName.backgroundColor.qname]||n;m[d.id]=("always"===q||void 0===q)&&void 0!==u&&!(b<d.begin||b>=d.end)}a.body&&a.body.regionID&&(m[a.body.regionID]=!0);p=null!==a.body?h(b,a.body):null;void 0!==m[""]&&(m[""]=!0);for(var D in m)if(m[D]){var z=e(a,b,a.head.layout.regions[D],p,null,"",a.head.layout.regions[D],c,x);null!==z&&v.contents.push(z.element)}return v};var u=[l.byName.color.qname,l.byName.textCombine.qname,l.byName.textDecoration.qname,
l.byName.textEmphasis.qname,l.byName.textOutline.qname,l.byName.textShadow.qname]})("undefined"===typeof h?this.imscISD={}:h,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscStyles?c("./styles"):imscStyles,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":37,"./styles":38,"./utils":39}],36:[function(c,n,h){h.generateISD=c("./isd").generateISD;h.fromXML=c("./doc").fromXML;h.renderHTML=c("./html").render},{"./doc":33,"./html":34,"./isd":35}],37:[function(c,
n,h){c="undefined"===typeof h?this.imscNames={}:h;c.ns_tt="http://www.w3.org/ns/ttml";c.ns_tts="http://www.w3.org/ns/ttml#styling";c.ns_ttp="http://www.w3.org/ns/ttml#parameter";c.ns_xml="http://www.w3.org/XML/1998/namespace";c.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling";c.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter";c.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt";c.ns_ebutts="urn:ebu:tt:style";c.ttaf_map={"http://www.w3.org/2006/10/ttaf1":c.ns_tt,"http://www.w3.org/2006/10/ttaf1#style":c.ns_tts,
"http://www.w3.org/2006/10/ttaf1#parameter":c.ns_ttp}},{}],38:[function(c,n,h){(function(b,c,l){function e(a,b,c,e,l,h,n,u){this.name=b;this.ns=a;this.qname=a+" "+b;this.inherit=l;this.animatable=h;this.initial=c;this.applies=e;this.parse=n;this.compute=u}b.all=[new e(c.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,l.parseColor,null),new e(c.ns_tts,"color","white",["span"],!0,!0,l.parseColor,null),new e(c.ns_tts,"direction","ltr",["p","span"],!0,!0,function(a){return a},
null),new e(c.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(a){return a},null),new e(c.ns_tts,"displayAlign","before",["region"],!1,!0,function(a){return a},null),new e(c.ns_tts,"extent","auto",["tt","region"],!1,!0,function(a){if("auto"===a)return a;var b=a.split(" ");if(2!==b.length)return null;a=l.parseLength(b[0]);return(b=l.parseLength(b[1]))&&a?{h:b,w:a}:null},function(a,b,c,e,h){if("auto"===e)b=new l.ComputedLength(0,1);else if(b=l.toComputedLength(e.h.value,e.h.unit,
null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===e)a=new l.ComputedLength(1,0);else if(a=l.toComputedLength(e.w.value,e.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new e(c.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(a){a=a.split(",");for(var b=[],c=0;c<a.length;c++)"'"!==a[c].charAt(0)&&'"'!==a[c].charAt(0)?"default"===a[c]?b.push("monospaceSerif"):b.push(a[c]):b.push(a[c]);return b},null),new e(c.ns_tts,"shear","0%",["p"],
!0,!0,l.parseLength,function(a,b,c,e){if("%"===e.unit)a=100<Math.abs(e.value)?100*Math.sign(e.value):e.value;else return null;return a}),new e(c.ns_tts,"fontSize","1c",["span","p"],!0,!0,l.parseLength,function(a,c,e,h,n){return l.toComputedLength(h.value,h.unit,null!==c?c.styleAttrs[b.byName.fontSize.qname]:a.cellLength.h,null!==c?c.styleAttrs[b.byName.fontSize.qname]:a.cellLength.h,a.cellLength.h,a.pxLength.h)}),new e(c.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(a){return a},null),new e(c.ns_tts,
"fontWeight","normal",["span","p"],!0,!0,function(a){return a},null),new e(c.ns_tts,"lineHeight","normal",["p"],!0,!0,function(a){return"normal"===a?a:l.parseLength(a)},function(a,c,e,h,n){if("normal"===h)a=h;else if(a=l.toComputedLength(h.value,h.unit,e.styleAttrs[b.byName.fontSize.qname],e.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h),null===a)return null;return a}),new e(c.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new e(c.ns_tts,"origin","auto",["region"],!1,!0,function(a){if("auto"===
a)return a;var b=a.split(" ");if(2!==b.length)return null;a=l.parseLength(b[0]);return(b=l.parseLength(b[1]))&&a?{h:b,w:a}:null},function(a,b,c,e,h){if("auto"===e)b=new l.ComputedLength(0,0);else if(b=l.toComputedLength(e.h.value,e.h.unit,null,a.dimensions.h,null,a.pxLength.h),null===b)return null;if("auto"===e)a=new l.ComputedLength(0,0);else if(a=l.toComputedLength(e.w.value,e.w.unit,null,a.dimensions.w,null,a.pxLength.w),null===a)return null;return{h:b,w:a}}),new e(c.ns_tts,"overflow","hidden",
["region"],!1,!0,function(a){return a},null),new e(c.ns_tts,"padding","0px",["region"],!1,!0,function(a){a=a.split(" ");if(4<a.length)return null;for(var b=[],c=0;c<a.length;c++){var e=l.parseLength(a[c]);if(!e)return null;b.push(e)}return b},function(a,c,e,h,n){if(1===h.length)c=[h[0],h[0],h[0],h[0]];else if(2===h.length)c=[h[0],h[1],h[0],h[1]];else if(3===h.length)c=[h[0],h[1],h[2],h[1]];else if(4===h.length)c=[h[0],h[1],h[2],h[3]];else return null;h=e.styleAttrs[b.byName.writingMode.qname];if("lrtb"===
h||"lr"===h)c=[c[0],c[3],c[2],c[1]];else if("rltb"===h||"rl"===h)c=[c[0],c[1],c[2],c[3]];else if("tblr"===h)c=[c[3],c[0],c[1],c[2]];else if("tbrl"===h||"tb"===h)c=[c[3],c[2],c[1],c[0]];else return null;h=[];for(n=0;n<c.length;n++)if(0===c[n].value)h[n]=new l.ComputedLength(0,0);else if(h[n]=l.toComputedLength(c[n].value,c[n].unit,e.styleAttrs[b.byName.fontSize.qname],"0"===n||"2"===n?e.styleAttrs[b.byName.extent.qname].h:e.styleAttrs[b.byName.extent.qname].w,"0"===n||"2"===n?a.cellLength.h:a.cellLength.w,
"0"===n||"2"===n?a.pxLength.h:a.pxLength.w),null===h[n])return null;return h}),new e(c.ns_tts,"position","top left",["region"],!1,!0,function(a){return l.parsePosition(a)},function(a,c,e,h){c=l.toComputedLength(h.v.offset.value,h.v.offset.unit,null,new l.ComputedLength(-e.styleAttrs[b.byName.extent.qname].h.rw,a.dimensions.h.rh-e.styleAttrs[b.byName.extent.qname].h.rh),null,a.pxLength.h);if(null===c)return null;"bottom"===h.v.edge&&(c=new l.ComputedLength(-c.rw-e.styleAttrs[b.byName.extent.qname].h.rw,
a.dimensions.h.rh-c.rh-e.styleAttrs[b.byName.extent.qname].h.rh));var n=l.toComputedLength(h.h.offset.value,h.h.offset.unit,null,new l.ComputedLength(a.dimensions.w.rw-e.styleAttrs[b.byName.extent.qname].w.rw,-e.styleAttrs[b.byName.extent.qname].w.rh),null,a.pxLength.w);if(null===c)return null;"right"===h.h.edge&&(n=new l.ComputedLength(a.dimensions.w.rw-n.rw-e.styleAttrs[b.byName.extent.qname].w.rw,-n.rh-e.styleAttrs[b.byName.extent.qname].w.rh));return{h:c,w:n}}),new e(c.ns_tts,"ruby","none",["span"],
!1,!0,function(a){return a},null),new e(c.ns_tts,"rubyAlign","center",["span"],!0,!0,function(a){return"center"!==a&&"spaceAround"!==a?null:a},null),new e(c.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(a){return a},null),new e(c.ns_tts,"rubyReserve","none",["p"],!0,!0,function(a){var b=a.split(" ");a=[null,null];if(0===b.length||2<b.length||"none"!==b[0]&&"both"!==b[0]&&"after"!==b[0]&&"before"!==b[0]&&"outside"!==b[0])return null;a[0]=b[0];if(2===b.length&&"none"!==b[0])if(b=l.parseLength(b[1]))a[1]=
b;else return null;return a},function(a,c,e,h,n){if("none"===h[0])return h;a=null===h[1]?new l.ComputedLength(.5*e.styleAttrs[b.byName.fontSize.qname].rw,.5*e.styleAttrs[b.byName.fontSize.qname].rh):l.toComputedLength(h[1].value,h[1].unit,e.styleAttrs[b.byName.fontSize.qname],e.styleAttrs[b.byName.fontSize.qname],a.cellLength.h,a.pxLength.h);return null===a?null:[h[0],a]}),new e(c.ns_tts,"showBackground","whenActive",["region"],!1,!0,function(a){return a},null),new e(c.ns_tts,"textAlign","start",
["p"],!0,!0,function(a){return a},function(a,b,c,e,h){return"left"===e?"start":"right"===e?"end":e}),new e(c.ns_tts,"textCombine","none",["span"],!0,!0,function(a){return"none"===a||"all"===a?a:null},null),new e(c.ns_tts,"textDecoration","none",["span"],!0,!0,function(a){return a.split(" ")},null),new e(c.ns_tts,"textEmphasis","none",["span"],!0,!0,function(a){a=a.split(" ");for(var b={style:null,symbol:null,color:null,position:null},c=0;c<a.length;c++)if("none"===a[c]||"auto"===a[c])b.style=a[c];
else if("filled"===a[c]||"open"===a[c])b.style=a[c];else if("circle"===a[c]||"dot"===a[c]||"sesame"===a[c])b.symbol=a[c];else if("current"===a[c])b.color=a[c];else if("outside"===a[c]||"before"===a[c]||"after"===a[c])b.position=a[c];else if(b.color=l.parseColor(a[c]),null===b.color)return null;null==b.style&&null==b.symbol?b.style="auto":(b.symbol=b.symbol||"circle",b.style=b.style||"filled");b.position=b.position||"outside";b.color=b.color||"current";return b},null),new e(c.ns_tts,"textOutline",
"none",["span"],!0,!0,function(a){if("none"===a)return a;var b={};a=a.split(" ");if(0===a.length||2<a.length)return null;var c=l.parseColor(a[0]);b.color=c;null!==c&&a.shift();if(1!==a.length)return null;a=l.parseLength(a[0]);if(!a)return null;b.thickness=a;return b},function(a,c,e,h,n){if("none"===h)return h;c={};c.color=null===h.color?e.styleAttrs[b.byName.color.qname]:h.color;c.thickness=l.toComputedLength(h.thickness.value,h.thickness.unit,e.styleAttrs[b.byName.fontSize.qname],e.styleAttrs[b.byName.fontSize.qname],
a.cellLength.h,a.pxLength.h);return null===c.thickness?null:c}),new e(c.ns_tts,"textShadow","none",["span"],!0,!0,l.parseTextShadow,function(a,c,e,h){if("none"===h)return h;c=[];for(var n in h)if(n.hasOwnProperty(h)){var p={};p.x_off=l.toComputedLength(h[n][0].value,h[n][0].unit,null,e.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.w);if(null===p.x_off)return null;p.y_off=l.toComputedLength(h[n][1].value,h[n][1].unit,null,e.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.h);if(null===p.y_off)return null;
if(null===h[n][2])p.b_radius=0;else if(p.b_radius=l.toComputedLength(h[n][2].value,h[n][2].unit,null,e.styleAttrs[b.byName.fontSize.qname],null,a.pxLength.h),null===p.b_radius)return null;p.color=null===h[n][3]?e.styleAttrs[b.byName.color.qname]:h[n][3];c.push(p)}return c}),new e(c.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(a){return a},null),new e(c.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(a){return a},null),new e(c.ns_tts,"wrapOption","wrap",
["span"],!0,!0,function(a){return a},null),new e(c.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(a){return a},null),new e(c.ns_tts,"zIndex","auto",["region"],!1,!0,function(a){"auto"!==a&&(a=parseInt(a),isNaN(a)&&(a=null));return a},null),new e(c.ns_ebutts,"linePadding","0c",["p"],!0,!1,l.parseLength,function(a,b,c,e,h){return l.toComputedLength(e.value,e.unit,null,null,a.cellLength.w,null)}),new e(c.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(a){return a},null),new e(c.ns_smpte,
"backgroundImage",null,["div"],!1,!1,function(a){return a},null),new e(c.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(a){return"true"===a?!0:!1},null),new e(c.ns_itts,"fillLineGap","true",["p"],!0,!0,function(a){return"true"===a?!0:!1},null)];b.byQName={};for(var h in b.all)b.all.hasOwnProperty(h)&&(b.byQName[b.all[h].qname]=b.all[h]);b.byName={};for(var n in b.all)b.all.hasOwnProperty(n)&&(b.byName[b.all[n].name]=b.all[n])})("undefined"===typeof h?this.imscStyles=
{}:h,"undefined"===typeof imscNames?c("./names"):imscNames,"undefined"===typeof imscUtils?c("./utils"):imscUtils)},{"./names":37,"./utils":39}],39:[function(c,n,h){(function(b){var c=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,h=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,A={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,
0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};b.parseColor=function(a){var b,e=null,l=A[a.toLowerCase()];void 0!==l?e=l:null!==(b=c.exec(a))?e=[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),void 0!==b[4]?parseInt(b[4],16):255]:null!==(b=h.exec(a))?e=[parseInt(b[1]),parseInt(b[2]),
parseInt(b[3]),255]:null!==(b=n.exec(a))&&(e=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])]);return e};var z=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;b.parseLength=function(a){var b,c=null;null!==(b=z.exec(a))&&(c={value:parseFloat(b[1]),unit:b[2]});return c};b.parseTextShadow=function(a){a=a.split(",");for(var c=[],e=0;e<a.length;e++){var h=a[e].split(" ");if(1===h.length&&"none"===h[0])return"none";if(1<h.length&&5>h.length){var l=[null,null,null,null],n=b.parseLength(h.shift());
if(null===n)return null;l[0]=n;n=b.parseLength(h.shift());if(null===n)return null;l[1]=n;if(0!==h.length&&(n=b.parseLength(h[0]),null!==n&&(l[2]=n,h.shift()),0!==h.length)){h=b.parseColor(h[0]);if(null===h)return null;l[3]=h}c.push(l)}}return c};b.parsePosition=function(a){a=a.split(" ");var c=function(a){return"center"===a||"left"===a||"top"===a||"bottom"===a||"right"===a};if(4<a.length)return null;for(var e in a)if(a.hasOwnProperty(e)&&!c(a[e])){var h=b.parseLength(a[e]);if(null===h)return null;
a[e]=h}e={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}};for(h=0;h<a.length;){var l=a[h++];if(c(l)){var n={value:0,unit:"%"};2!==a.length&&h<a.length&&!c(a[h])&&(n=a[h++]);"right"===l?(e.h.edge=l,e.h.offset=n):"bottom"===l?(e.v.edge=l,e.v.offset=n):"left"===l?e.h.offset=n:"top"===l&&(e.v.offset=n)}else if(1===a.length||2===a.length)1===h?e.h.offset=l:e.v.offset=l;else return null}return e};b.ComputedLength=function(a,b){this.rw=a;this.rh=b};b.ComputedLength.prototype.toUsedLength=
function(a,b){return a*this.rw+b*this.rh};b.ComputedLength.prototype.multiply=function(a,b){return b?a*b:a};b.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh};b.toComputedLength=function(a,c,e,h,l,n){return"%"===c&&h?new b.ComputedLength(h.rw*a/100,h.rh*a/100):"em"===c&&e?new b.ComputedLength(e.rw*a,e.rh*a):"c"===c&&l?new b.ComputedLength(a*l.rw,a*l.rh):"px"===c&&n?new b.ComputedLength(a*n.rw,a*n.rh):"rh"===c?new b.ComputedLength(0,a/100):"rw"===c?new b.ComputedLength(a/
100,0):null}})("undefined"===typeof h?this.imscUtils={}:h)},{}]},{},[36])(36)});
